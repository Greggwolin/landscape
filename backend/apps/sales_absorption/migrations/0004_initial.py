# Generated by Django 4.2.25 on 2025-11-30 20:47

import django.contrib.postgres.fields
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('sales_absorption', '0003_add_basis_to_sale_benchmarks'),
    ]

    operations = [
        migrations.CreateModel(
            name='BenchmarkAbsorptionVelocity',
            fields=[
                ('benchmark_velocity_id', models.AutoField(primary_key=True, serialize=False)),
                ('classification_code', models.CharField(max_length=50, unique=True)),
                ('classification_display_name', models.CharField(max_length=100)),
                ('units_per_month', models.DecimalField(decimal_places=2, max_digits=6)),
                ('builder_inventory_target_min_months', models.IntegerField(default=18)),
                ('builder_inventory_target_max_months', models.IntegerField(default=24)),
                ('market_geography', models.CharField(default='national', max_length=100)),
                ('data_source', models.CharField(blank=True, max_length=200, null=True)),
                ('last_updated', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('sort_order', models.IntegerField(default=0)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Benchmark Absorption Velocity',
                'verbose_name_plural': 'Benchmark Absorption Velocities',
                'db_table': 'tbl_benchmark_absorption_velocity',
                'ordering': ['sort_order', 'classification_display_name'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='BenchmarkMarketTiming',
            fields=[
                ('benchmark_timing_id', models.AutoField(primary_key=True, serialize=False)),
                ('process_name', models.CharField(max_length=100)),
                ('process_display_name', models.CharField(max_length=100)),
                ('duration_months', models.IntegerField()),
                ('dependency_trigger', models.CharField(blank=True, max_length=100, null=True)),
                ('dependency_display_name', models.CharField(blank=True, max_length=100, null=True)),
                ('offset_months', models.IntegerField(default=0)),
                ('market_geography', models.CharField(default='national', max_length=100)),
                ('data_source', models.CharField(blank=True, max_length=200, null=True)),
                ('last_updated', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('sort_order', models.IntegerField(default=0)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Benchmark Market Timing',
                'verbose_name_plural': 'Benchmark Market Timing',
                'db_table': 'tbl_benchmark_market_timing',
                'ordering': ['sort_order', 'process_name'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ClosingEvent',
            fields=[
                ('closing_id', models.AutoField(primary_key=True, serialize=False)),
                ('closing_sequence', models.IntegerField(default=1)),
                ('closing_date', models.DateField()),
                ('lots_closed', models.IntegerField()),
                ('gross_proceeds', models.DecimalField(decimal_places=2, max_digits=15)),
                ('less_commissions_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('less_closing_costs', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('less_improvements_credit', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('net_proceeds', models.DecimalField(decimal_places=2, max_digits=15)),
                ('cumulative_lots_closed', models.IntegerField()),
                ('lots_remaining', models.IntegerField()),
                ('escrow_release_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('escrow_release_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('base_price_per_unit', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('inflated_price_per_unit', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('uom_code', models.CharField(blank=True, max_length=10, null=True)),
                ('gross_value', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('onsite_costs', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('commission_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('closing_costs', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
            ],
            options={
                'verbose_name': 'Closing Event',
                'verbose_name_plural': 'Closing Events',
                'db_table': 'tbl_closing_event',
                'ordering': ['sale_event_id', 'closing_sequence'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Parcel',
            fields=[
                ('parcel_id', models.AutoField(primary_key=True, serialize=False)),
                ('project_id', models.IntegerField(null=True)),
                ('phase_id', models.IntegerField(null=True)),
                ('area_id', models.IntegerField(null=True)),
                ('parcel_code', models.CharField(max_length=255, null=True)),
                ('parcel_name', models.CharField(max_length=255, null=True)),
                ('type_code', models.CharField(max_length=50, null=True)),
                ('product_code', models.CharField(max_length=100, null=True)),
                ('family_name', models.CharField(max_length=255, null=True)),
                ('units_total', models.IntegerField(null=True)),
                ('acres_gross', models.DecimalField(decimal_places=4, max_digits=10, null=True)),
                ('lot_width', models.DecimalField(decimal_places=2, max_digits=8, null=True)),
                ('lot_depth', models.DecimalField(decimal_places=2, max_digits=8, null=True)),
                ('sale_date', models.DateField(null=True)),
            ],
            options={
                'db_table': 'tbl_parcel',
                'ordering': ['parcel_id'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ParcelAbsorptionProfile',
            fields=[
                ('absorption_profile_id', models.AutoField(primary_key=True, serialize=False)),
                ('project_id', models.IntegerField()),
                ('parcel_id', models.IntegerField(unique=True)),
                ('product_classification_code', models.CharField(blank=True, max_length=50, null=True)),
                ('absorption_velocity_override', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('sales_start_date', models.DateField(blank=True, null=True)),
                ('initial_inventory_lots', models.IntegerField()),
                ('projected_sellout_date', models.DateField(blank=True, null=True)),
                ('months_to_sellout', models.IntegerField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Parcel Absorption Profile',
                'verbose_name_plural': 'Parcel Absorption Profiles',
                'db_table': 'tbl_parcel_absorption_profile',
                'ordering': ['project_id', 'parcel_id'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ParcelSaleAssumption',
            fields=[
                ('assumption_id', models.AutoField(primary_key=True, serialize=False)),
                ('parcel_id', models.IntegerField(unique=True)),
                ('sale_date', models.DateField()),
                ('base_price_per_unit', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('price_uom', models.CharField(max_length=10, null=True)),
                ('inflation_rate', models.DecimalField(decimal_places=6, max_digits=8, null=True)),
                ('inflated_price_per_unit', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('gross_parcel_price', models.DecimalField(decimal_places=2, max_digits=15, null=True)),
                ('improvement_offset_per_uom', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('improvement_offset_total', models.DecimalField(decimal_places=2, max_digits=15, null=True)),
                ('improvement_offset_source', models.CharField(max_length=50, null=True)),
                ('improvement_offset_override', models.BooleanField(default=False)),
                ('gross_sale_proceeds', models.DecimalField(decimal_places=2, max_digits=15, null=True)),
                ('legal_pct', models.DecimalField(decimal_places=4, max_digits=5, null=True)),
                ('legal_amount', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('legal_override', models.BooleanField(default=False)),
                ('commission_pct', models.DecimalField(decimal_places=4, max_digits=5, null=True)),
                ('commission_amount', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('commission_override', models.BooleanField(default=False)),
                ('closing_cost_pct', models.DecimalField(decimal_places=4, max_digits=5, null=True)),
                ('closing_cost_amount', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('closing_cost_override', models.BooleanField(default=False)),
                ('title_insurance_pct', models.DecimalField(decimal_places=4, max_digits=5, null=True)),
                ('title_insurance_amount', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('title_insurance_override', models.BooleanField(default=False)),
                ('custom_transaction_costs', models.JSONField(default=list)),
                ('total_transaction_costs', models.DecimalField(decimal_places=2, max_digits=15, null=True)),
                ('net_sale_proceeds', models.DecimalField(decimal_places=2, max_digits=15, null=True)),
                ('net_proceeds_per_uom', models.DecimalField(decimal_places=2, max_digits=12, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'tbl_parcel_sale_assumptions',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ParcelSaleEvent',
            fields=[
                ('sale_event_id', models.AutoField(primary_key=True, serialize=False)),
                ('project_id', models.IntegerField()),
                ('parcel_id', models.IntegerField()),
                ('phase_id', models.IntegerField(blank=True, null=True)),
                ('sale_type', models.CharField(max_length=50)),
                ('buyer_entity', models.CharField(max_length=200)),
                ('buyer_contact_id', models.IntegerField(blank=True, null=True)),
                ('contract_date', models.DateField()),
                ('total_lots_contracted', models.IntegerField()),
                ('base_price_per_lot', models.DecimalField(decimal_places=2, max_digits=12)),
                ('price_escalation_formula', models.TextField(blank=True, null=True)),
                ('deposit_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('deposit_date', models.DateField(blank=True, null=True)),
                ('deposit_terms', models.CharField(blank=True, max_length=100, null=True)),
                ('deposit_applied_to_purchase', models.BooleanField(default=True)),
                ('has_escrow_holdback', models.BooleanField(default=False)),
                ('escrow_holdback_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('escrow_release_terms', models.TextField(blank=True, null=True)),
                ('sale_status', models.CharField(default='pending', max_length=50)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('commission_pct', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('closing_cost_per_unit', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('onsite_cost_pct', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('has_custom_overrides', models.BooleanField(default=False)),
            ],
            options={
                'verbose_name': 'Parcel Sale Event',
                'verbose_name_plural': 'Parcel Sale Events',
                'db_table': 'tbl_parcel_sale_event',
                'ordering': ['-contract_date', '-sale_event_id'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ProjectAbsorptionAssumption',
            fields=[
                ('project_absorption_id', models.AutoField(primary_key=True, serialize=False)),
                ('project_id', models.IntegerField()),
                ('classification_code', models.CharField(max_length=50)),
                ('classification_display_name', models.CharField(blank=True, max_length=100, null=True)),
                ('units_per_month_override', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('override_reason', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Project Absorption Assumption',
                'verbose_name_plural': 'Project Absorption Assumptions',
                'db_table': 'tbl_project_absorption_assumptions',
                'ordering': ['project_id', 'classification_code'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ProjectPricingAssumption',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('project_id', models.IntegerField()),
                ('lu_type_code', models.CharField(max_length=50)),
                ('product_code', models.CharField(blank=True, max_length=100, null=True)),
                ('price_per_unit', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('unit_of_measure', models.CharField(blank=True, max_length=20, null=True)),
                ('growth_rate', models.DecimalField(blank=True, decimal_places=4, max_digits=5, null=True)),
                ('inflation_type', models.CharField(blank=True, max_length=50, null=True)),
                ('benchmark_id', models.BigIntegerField(blank=True, null=True)),
                ('market_geography', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Project Pricing Assumption',
                'verbose_name_plural': 'Project Pricing Assumptions',
                'db_table': 'land_use_pricing',
                'ordering': ['project_id', 'lu_type_code', 'product_code'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ProjectTimingAssumption',
            fields=[
                ('project_timing_id', models.AutoField(primary_key=True, serialize=False)),
                ('project_id', models.IntegerField()),
                ('process_name', models.CharField(max_length=100)),
                ('process_display_name', models.CharField(blank=True, max_length=100, null=True)),
                ('duration_months_override', models.IntegerField(blank=True, null=True)),
                ('dependency_trigger_override', models.CharField(blank=True, max_length=100, null=True)),
                ('offset_months_override', models.IntegerField(blank=True, null=True)),
                ('override_reason', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Project Timing Assumption',
                'verbose_name_plural': 'Project Timing Assumptions',
                'db_table': 'tbl_project_timing_assumptions',
                'ordering': ['project_id', 'process_name'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='SaleBenchmark',
            fields=[
                ('benchmark_id', models.AutoField(primary_key=True, serialize=False)),
                ('scope_level', models.CharField(choices=[('global', 'Global'), ('project', 'Project'), ('product', 'Product')], max_length=20)),
                ('project_id', models.IntegerField(blank=True, null=True)),
                ('lu_type_code', models.CharField(blank=True, max_length=20, null=True)),
                ('product_code', models.CharField(blank=True, max_length=50, null=True)),
                ('benchmark_type', models.CharField(choices=[('improvement_offset', 'Improvement Offset'), ('legal', 'Legal Fees'), ('commission', 'Sales Commission'), ('closing', 'Closing Costs'), ('title_insurance', 'Title Insurance'), ('custom', 'Custom')], max_length=50)),
                ('benchmark_name', models.CharField(blank=True, max_length=100, null=True)),
                ('rate_pct', models.DecimalField(blank=True, decimal_places=4, max_digits=5, null=True)),
                ('amount_per_uom', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('fixed_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('uom_code', models.CharField(blank=True, max_length=10, null=True)),
                ('basis', models.CharField(blank=True, max_length=50, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.CharField(blank=True, max_length=255, null=True)),
                ('updated_by', models.CharField(blank=True, max_length=255, null=True)),
            ],
            options={
                'db_table': 'tbl_sale_benchmarks',
                'ordering': ['benchmark_type', 'scope_level'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='SalePhase',
            fields=[
                ('phase_id', models.AutoField(primary_key=True, serialize=False)),
                ('project_id', models.IntegerField()),
                ('phase_code', models.CharField(max_length=20)),
                ('phase_name', models.CharField(blank=True, max_length=100, null=True)),
                ('default_sale_date', models.DateField()),
                ('default_commission_pct', models.DecimalField(decimal_places=2, default=3.0, max_digits=5)),
                ('default_closing_cost_per_unit', models.DecimalField(decimal_places=2, default=750.0, max_digits=12)),
                ('default_onsite_cost_pct', models.DecimalField(decimal_places=2, default=6.5, max_digits=5)),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('created_by', models.CharField(blank=True, max_length=100, null=True)),
            ],
            options={
                'verbose_name': 'Sale Phase',
                'verbose_name_plural': 'Sale Phases',
                'db_table': 'tbl_sale_phases',
                'ordering': ['project_id', 'phase_code'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='UOMCalculationFormula',
            fields=[
                ('formula_id', models.AutoField(primary_key=True, serialize=False)),
                ('uom_code', models.CharField(max_length=10, unique=True)),
                ('formula_name', models.CharField(max_length=50)),
                ('formula_expression', models.TextField()),
                ('required_fields', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=50), size=None)),
                ('description', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'UOM Calculation Formula',
                'verbose_name_plural': 'UOM Calculation Formulas',
                'db_table': 'tbl_uom_calculation_formulas',
                'ordering': ['uom_code'],
                'managed': False,
            },
        ),
    ]
