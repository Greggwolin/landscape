# Landscape Rich Schema (Full) - 2026-02-12

- Generated at: 2026-02-12T17:15:45.014698Z
- Database host: ep-spring-mountain-af3hdne2-pooler.c-2.us-west-2.aws.neon.tech
- Schema: landscape
- Source JSON: `docs/schema/landscape_rich_schema_2026-02-12.json`

## Object Counts

| Object | Count |
|---|---:|
| tables | 352 |
| views | 42 |
| indexes | 1174 |
| constraints | 995 |
| foreign_keys | 376 |
| triggers | 61 |
| routines | 995 |

## Tables

### `_migrations`

- Columns: 4
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | migration_id | integer [32,0] | NO | nextval('_migrations_migration_id_seq'::regclass) |  |
| 2 | migration_file | character varying(255) | NO |  |  |
| 3 | applied_at | timestamp with time zone | YES | now() |  |
| 4 | checksum | character varying(64) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| _migrations_pkey | PRIMARY KEY | PRIMARY KEY (migration_id) |
| _migrations_migration_file_key | UNIQUE | UNIQUE (migration_file) |

#### Indexes

- `_migrations_migration_file_key`

```sql
CREATE UNIQUE INDEX _migrations_migration_file_key ON landscape._migrations USING btree (migration_file)
```
- `_migrations_pkey`

```sql
CREATE UNIQUE INDEX _migrations_pkey ON landscape._migrations USING btree (migration_id)
```

### `ai_correction_log`

- Columns: 11
- Constraints: 2
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('ai_correction_log_id_seq'::regclass) |  |
| 2 | queue_id | bigint [64,0] | NO |  |  |
| 3 | field_path | character varying(255) | NO |  |  |
| 4 | ai_value | text | YES |  |  |
| 5 | user_value | text | YES |  |  |
| 6 | ai_confidence | numeric [5,4] | YES |  |  |
| 7 | correction_type | character varying(50) | YES | 'value_wrong'::character varying |  |
| 8 | page_number | integer [32,0] | YES |  |  |
| 9 | source_quote | text | YES |  |  |
| 10 | user_notes | text | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ai_correction_log_queue_id_fkey | FOREIGN KEY | FOREIGN KEY (queue_id) REFERENCES dms_extract_queue(queue_id) ON DELETE CASCADE |
| ai_correction_log_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| ai_correction_log_queue_id_fkey | queue_id | dms_extract_queue.queue_id | NO ACTION | CASCADE |

#### Indexes

- `ai_correction_log_pkey`

```sql
CREATE UNIQUE INDEX ai_correction_log_pkey ON landscape.ai_correction_log USING btree (id)
```
- `idx_correction_log_correction_type`

```sql
CREATE INDEX idx_correction_log_correction_type ON landscape.ai_correction_log USING btree (correction_type)
```
- `idx_correction_log_created_at`

```sql
CREATE INDEX idx_correction_log_created_at ON landscape.ai_correction_log USING btree (created_at)
```
- `idx_correction_log_field_path`

```sql
CREATE INDEX idx_correction_log_field_path ON landscape.ai_correction_log USING btree (field_path)
```
- `idx_correction_log_queue_id`

```sql
CREATE INDEX idx_correction_log_queue_id ON landscape.ai_correction_log USING btree (queue_id)
```

### `ai_debug_log`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('ai_debug_log_id_seq'::regclass) |  |
| 2 | log_type | character varying(50) | YES |  |  |
| 3 | payload | jsonb | YES |  |  |
| 4 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ai_debug_log_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Indexes

- `ai_debug_log_pkey`

```sql
CREATE UNIQUE INDEX ai_debug_log_pkey ON landscape.ai_debug_log USING btree (id)
```

### `ai_extraction_staging`

- Columns: 27
- Constraints: 3
- Foreign keys: 2
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | extraction_id | integer [32,0] | NO | nextval('ai_extraction_staging_extraction_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | doc_id | bigint [64,0] | YES |  |  |
| 4 | target_table | character varying(100) | NO |  | Target table like tbl_mf_unit, tbl_operating_expense |
| 5 | target_field | character varying(100) | YES |  |  |
| 6 | extracted_value | jsonb | NO |  |  |
| 7 | extraction_type | character varying(50) | NO |  | Type: unit_mix, rent_roll, opex, market_comps |
| 8 | source_text | text | YES |  |  |
| 9 | confidence_score | numeric [3,2] | YES |  |  |
| 10 | status | character varying(20) | YES | 'pending'::character varying | pending, validated, rejected, applied |
| 11 | validated_value | jsonb | YES |  |  |
| 12 | validated_by | text | YES |  |  |
| 13 | validated_at | timestamp without time zone | YES |  |  |
| 14 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 15 | created_by | text | YES | 'landscaper'::text |  |
| 16 | field_key | character varying(100) | YES |  |  |
| 17 | property_type | character varying(50) | YES |  |  |
| 18 | db_write_type | character varying(50) | YES |  |  |
| 19 | selector_json | jsonb | YES |  |  |
| 20 | scope | character varying(50) | YES |  |  |
| 21 | scope_id | bigint [64,0] | YES |  |  |
| 22 | source_page | integer [32,0] | YES |  |  |
| 23 | source_snippet | text | YES |  |  |
| 24 | conflict_with_extraction_id | bigint [64,0] | YES |  |  |
| 25 | rejection_reason | text | YES |  |  |
| 26 | scope_label | character varying(100) | YES |  | Human-readable label for scope (e.g., unit type name) when scope_id cannot be resolved |
| 27 | array_index | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ai_extraction_staging_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) |
| ai_extraction_staging_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| ai_extraction_staging_pkey | PRIMARY KEY | PRIMARY KEY (extraction_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| ai_extraction_staging_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | NO ACTION |
| ai_extraction_staging_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `ai_extraction_staging_pkey`

```sql
CREATE UNIQUE INDEX ai_extraction_staging_pkey ON landscape.ai_extraction_staging USING btree (extraction_id)
```
- `idx_extraction_staging_doc`

```sql
CREATE INDEX idx_extraction_staging_doc ON landscape.ai_extraction_staging USING btree (doc_id)
```
- `idx_extraction_staging_project`

```sql
CREATE INDEX idx_extraction_staging_project ON landscape.ai_extraction_staging USING btree (project_id, status)
```
- `idx_staging_field_key`

```sql
CREATE INDEX idx_staging_field_key ON landscape.ai_extraction_staging USING btree (field_key)
```
- `idx_staging_property_type`

```sql
CREATE INDEX idx_staging_property_type ON landscape.ai_extraction_staging USING btree (property_type)
```
- `idx_staging_scope`

```sql
CREATE INDEX idx_staging_scope ON landscape.ai_extraction_staging USING btree (scope)
```
- `idx_staging_unique_pending`

```sql
CREATE UNIQUE INDEX idx_staging_unique_pending ON landscape.ai_extraction_staging USING btree (project_id, field_key, COALESCE(scope_label, ''::character varying), COALESCE(array_index, 0)) WHERE ((status)::text = 'pending'::text)
```

### `ai_extraction_warnings`

- Columns: 9
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('ai_extraction_warnings_id_seq'::regclass) |  |
| 2 | queue_id | bigint [64,0] | NO |  |  |
| 3 | field_path | character varying(255) | NO |  |  |
| 4 | warning_type | character varying(50) | NO |  |  |
| 5 | severity | character varying(20) | YES | 'warning'::character varying |  |
| 6 | message | text | NO |  |  |
| 7 | suggested_value | text | YES |  |  |
| 8 | user_action | character varying(50) | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ai_extraction_warnings_queue_id_fkey | FOREIGN KEY | FOREIGN KEY (queue_id) REFERENCES dms_extract_queue(queue_id) ON DELETE CASCADE |
| ai_extraction_warnings_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| ai_extraction_warnings_queue_id_fkey | queue_id | dms_extract_queue.queue_id | NO ACTION | CASCADE |

#### Indexes

- `ai_extraction_warnings_pkey`

```sql
CREATE UNIQUE INDEX ai_extraction_warnings_pkey ON landscape.ai_extraction_warnings USING btree (id)
```
- `idx_extraction_warnings_created_at`

```sql
CREATE INDEX idx_extraction_warnings_created_at ON landscape.ai_extraction_warnings USING btree (created_at)
```
- `idx_extraction_warnings_queue_id`

```sql
CREATE INDEX idx_extraction_warnings_queue_id ON landscape.ai_extraction_warnings USING btree (queue_id)
```
- `idx_extraction_warnings_severity`

```sql
CREATE INDEX idx_extraction_warnings_severity ON landscape.ai_extraction_warnings USING btree (severity)
```

### `ai_ingestion_history`

- Columns: 7
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | ingestion_id | integer [32,0] | NO | nextval('ai_ingestion_history_ingestion_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | package_name | character varying(255) | NO |  |  |
| 4 | documents | jsonb | YES |  |  |
| 5 | ai_analysis | jsonb | YES |  |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | created_by | character varying(100) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ai_ingestion_history_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| ai_ingestion_history_pkey | PRIMARY KEY | PRIMARY KEY (ingestion_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| ai_ingestion_history_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `ai_ingestion_history_pkey`

```sql
CREATE UNIQUE INDEX ai_ingestion_history_pkey ON landscape.ai_ingestion_history USING btree (ingestion_id)
```

### `ai_review_history`

- Columns: 8
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | review_id | integer [32,0] | NO | nextval('ai_review_history_review_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | action_type | character varying(50) | NO |  |  |
| 4 | field_updates | jsonb | YES |  |  |
| 5 | user_feedback | text | YES |  |  |
| 6 | ai_confidence | numeric [3,2] | YES |  |  |
| 7 | created_at | timestamp with time zone | YES | now() |  |
| 8 | created_by | character varying(100) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ai_review_history_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| ai_review_history_pkey | PRIMARY KEY | PRIMARY KEY (review_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| ai_review_history_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `ai_review_history_pkey`

```sql
CREATE UNIQUE INDEX ai_review_history_pkey ON landscape.ai_review_history USING btree (review_id)
```
- `idx_ai_review_history_action_type`

```sql
CREATE INDEX idx_ai_review_history_action_type ON landscape.ai_review_history USING btree (action_type)
```
- `idx_ai_review_history_created_at`

```sql
CREATE INDEX idx_ai_review_history_created_at ON landscape.ai_review_history USING btree (created_at)
```
- `idx_ai_review_history_project_id`

```sql
CREATE INDEX idx_ai_review_history_project_id ON landscape.ai_review_history USING btree (project_id)
```

### `auth_group`

- Columns: 2
- Constraints: 2
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO |  |  |
| 2 | name | character varying(150) | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| auth_group_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| auth_group_name_key | UNIQUE | UNIQUE (name) |

#### Indexes

- `auth_group_name_a6ea08ec_like`

```sql
CREATE INDEX auth_group_name_a6ea08ec_like ON landscape.auth_group USING btree (name varchar_pattern_ops)
```
- `auth_group_name_key`

```sql
CREATE UNIQUE INDEX auth_group_name_key ON landscape.auth_group USING btree (name)
```
- `auth_group_pkey`

```sql
CREATE UNIQUE INDEX auth_group_pkey ON landscape.auth_group USING btree (id)
```

### `auth_group_permissions`

- Columns: 3
- Constraints: 4
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | group_id | integer [32,0] | NO |  |  |
| 3 | permission_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| auth_group_permissio_permission_id_84c5c92e_fk_auth_perm | FOREIGN KEY | FOREIGN KEY (permission_id) REFERENCES auth_permission(id) DEFERRABLE INITIALLY DEFERRED |
| auth_group_permissions_group_id_b120cbf9_fk_auth_group_id | FOREIGN KEY | FOREIGN KEY (group_id) REFERENCES auth_group(id) DEFERRABLE INITIALLY DEFERRED |
| auth_group_permissions_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| auth_group_permissions_group_id_permission_id_0cd325b0_uniq | UNIQUE | UNIQUE (group_id, permission_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| auth_group_permissio_permission_id_84c5c92e_fk_auth_perm | permission_id | auth_permission.id | NO ACTION | NO ACTION |
| auth_group_permissions_group_id_b120cbf9_fk_auth_group_id | group_id | auth_group.id | NO ACTION | NO ACTION |

#### Indexes

- `auth_group_permissions_group_id_b120cbf9`

```sql
CREATE INDEX auth_group_permissions_group_id_b120cbf9 ON landscape.auth_group_permissions USING btree (group_id)
```
- `auth_group_permissions_group_id_permission_id_0cd325b0_uniq`

```sql
CREATE UNIQUE INDEX auth_group_permissions_group_id_permission_id_0cd325b0_uniq ON landscape.auth_group_permissions USING btree (group_id, permission_id)
```
- `auth_group_permissions_permission_id_84c5c92e`

```sql
CREATE INDEX auth_group_permissions_permission_id_84c5c92e ON landscape.auth_group_permissions USING btree (permission_id)
```
- `auth_group_permissions_pkey`

```sql
CREATE UNIQUE INDEX auth_group_permissions_pkey ON landscape.auth_group_permissions USING btree (id)
```

### `auth_permission`

- Columns: 4
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO |  |  |
| 2 | name | character varying(255) | NO |  |  |
| 3 | content_type_id | integer [32,0] | NO |  |  |
| 4 | codename | character varying(100) | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| auth_permission_content_type_id_2f476e4b_fk_django_co | FOREIGN KEY | FOREIGN KEY (content_type_id) REFERENCES django_content_type(id) DEFERRABLE INITIALLY DEFERRED |
| auth_permission_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| auth_permission_content_type_id_codename_01ab375a_uniq | UNIQUE | UNIQUE (content_type_id, codename) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| auth_permission_content_type_id_2f476e4b_fk_django_co | content_type_id | django_content_type.id | NO ACTION | NO ACTION |

#### Indexes

- `auth_permission_content_type_id_2f476e4b`

```sql
CREATE INDEX auth_permission_content_type_id_2f476e4b ON landscape.auth_permission USING btree (content_type_id)
```
- `auth_permission_content_type_id_codename_01ab375a_uniq`

```sql
CREATE UNIQUE INDEX auth_permission_content_type_id_codename_01ab375a_uniq ON landscape.auth_permission USING btree (content_type_id, codename)
```
- `auth_permission_pkey`

```sql
CREATE UNIQUE INDEX auth_permission_pkey ON landscape.auth_permission USING btree (id)
```

### `auth_user`

- Columns: 19
- Constraints: 2
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO |  |  |
| 2 | password | character varying(128) | NO |  |  |
| 3 | last_login | timestamp with time zone | YES |  |  |
| 4 | is_superuser | boolean | NO |  |  |
| 5 | username | character varying(150) | NO |  |  |
| 6 | first_name | character varying(150) | NO |  |  |
| 7 | last_name | character varying(150) | NO |  |  |
| 8 | email | character varying(254) | NO |  |  |
| 9 | is_staff | boolean | NO |  |  |
| 10 | is_active | boolean | NO |  |  |
| 11 | date_joined | timestamp with time zone | NO |  |  |
| 12 | phone | character varying(20) | YES |  |  |
| 13 | company | character varying(200) | YES |  |  |
| 14 | role | character varying(50) | YES | 'user'::character varying | User role: admin or alpha_tester |
| 15 | is_verified | boolean | YES | false |  |
| 16 | created_at | timestamp with time zone | YES | now() |  |
| 17 | updated_at | timestamp with time zone | YES | now() |  |
| 18 | last_login_ip | inet | YES |  |  |
| 19 | demo_projects_provisioned | boolean | NO |  | Whether demo projects have been provisioned for this user |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| auth_user_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| auth_user_username_key | UNIQUE | UNIQUE (username) |

#### Indexes

- `auth_user_pkey`

```sql
CREATE UNIQUE INDEX auth_user_pkey ON landscape.auth_user USING btree (id)
```
- `auth_user_username_6821ab7c_like`

```sql
CREATE INDEX auth_user_username_6821ab7c_like ON landscape.auth_user USING btree (username varchar_pattern_ops)
```
- `auth_user_username_key`

```sql
CREATE UNIQUE INDEX auth_user_username_key ON landscape.auth_user USING btree (username)
```

### `auth_user_groups`

- Columns: 3
- Constraints: 4
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | user_id | integer [32,0] | NO |  |  |
| 3 | group_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| auth_user_groups_group_id_97559544_fk_auth_group_id | FOREIGN KEY | FOREIGN KEY (group_id) REFERENCES auth_group(id) DEFERRABLE INITIALLY DEFERRED |
| auth_user_groups_user_id_6a12ed8b_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| auth_user_groups_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| auth_user_groups_user_id_group_id_94350c0c_uniq | UNIQUE | UNIQUE (user_id, group_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| auth_user_groups_group_id_97559544_fk_auth_group_id | group_id | auth_group.id | NO ACTION | NO ACTION |
| auth_user_groups_user_id_6a12ed8b_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `auth_user_groups_group_id_97559544`

```sql
CREATE INDEX auth_user_groups_group_id_97559544 ON landscape.auth_user_groups USING btree (group_id)
```
- `auth_user_groups_pkey`

```sql
CREATE UNIQUE INDEX auth_user_groups_pkey ON landscape.auth_user_groups USING btree (id)
```
- `auth_user_groups_user_id_6a12ed8b`

```sql
CREATE INDEX auth_user_groups_user_id_6a12ed8b ON landscape.auth_user_groups USING btree (user_id)
```
- `auth_user_groups_user_id_group_id_94350c0c_uniq`

```sql
CREATE UNIQUE INDEX auth_user_groups_user_id_group_id_94350c0c_uniq ON landscape.auth_user_groups USING btree (user_id, group_id)
```

### `auth_user_user_permissions`

- Columns: 3
- Constraints: 4
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | user_id | integer [32,0] | NO |  |  |
| 3 | permission_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm | FOREIGN KEY | FOREIGN KEY (permission_id) REFERENCES auth_permission(id) DEFERRABLE INITIALLY DEFERRED |
| auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| auth_user_user_permissions_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| auth_user_user_permissions_user_id_permission_id_14a6b632_uniq | UNIQUE | UNIQUE (user_id, permission_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm | permission_id | auth_permission.id | NO ACTION | NO ACTION |
| auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `auth_user_user_permissions_permission_id_1fbb5f2c`

```sql
CREATE INDEX auth_user_user_permissions_permission_id_1fbb5f2c ON landscape.auth_user_user_permissions USING btree (permission_id)
```
- `auth_user_user_permissions_pkey`

```sql
CREATE UNIQUE INDEX auth_user_user_permissions_pkey ON landscape.auth_user_user_permissions USING btree (id)
```
- `auth_user_user_permissions_user_id_a95ead1b`

```sql
CREATE INDEX auth_user_user_permissions_user_id_a95ead1b ON landscape.auth_user_user_permissions USING btree (user_id)
```
- `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq`

```sql
CREATE UNIQUE INDEX auth_user_user_permissions_user_id_permission_id_14a6b632_uniq ON landscape.auth_user_user_permissions USING btree (user_id, permission_id)
```

### `bmk_absorption_velocity`

- Columns: 8
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | absorption_velocity_id | bigint [64,0] | NO | nextval('bmk_absorption_velocity_absorption_velocity_id_seq'::regclass) |  |
| 2 | benchmark_id | bigint [64,0] | YES |  |  |
| 3 | velocity_annual | integer [32,0] | NO |  |  |
| 4 | market_geography | character varying(100) | YES |  |  |
| 5 | project_scale | character varying(20) | YES |  |  |
| 6 | notes | text | YES |  |  |
| 7 | created_at | timestamp without time zone | YES | now() |  |
| 8 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| bmk_absorption_velocity_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) |
| bmk_absorption_velocity_pkey | PRIMARY KEY | PRIMARY KEY (absorption_velocity_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| bmk_absorption_velocity_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | NO ACTION |

#### Indexes

- `bmk_absorption_velocity_pkey`

```sql
CREATE UNIQUE INDEX bmk_absorption_velocity_pkey ON landscape.bmk_absorption_velocity USING btree (absorption_velocity_id)
```
- `idx_bmk_absorption_benchmark`

```sql
CREATE INDEX idx_bmk_absorption_benchmark ON landscape.bmk_absorption_velocity USING btree (benchmark_id)
```
- `idx_bmk_absorption_geography`

```sql
CREATE INDEX idx_bmk_absorption_geography ON landscape.bmk_absorption_velocity USING btree (market_geography)
```

### `bmk_builder_communities`

- Columns: 27
- Constraints: 2
- Foreign keys: 0
- Indexes: 8
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('bmk_builder_communities_id_seq'::regclass) |  |
| 2 | source | character varying(32) | NO |  |  |
| 3 | source_id | character varying(64) | NO |  |  |
| 4 | builder_name | character varying(128) | NO |  |  |
| 5 | community_name | character varying(256) | NO |  |  |
| 6 | market_label | character varying(64) | YES |  |  |
| 7 | city | character varying(64) | YES |  |  |
| 8 | state | character(2) | YES |  |  |
| 9 | zip_code | character varying(10) | YES |  |  |
| 10 | lat | numeric [10,7] | YES |  |  |
| 11 | lng | numeric [10,7] | YES |  |  |
| 12 | price_min | integer [32,0] | YES |  |  |
| 13 | price_max | integer [32,0] | YES |  |  |
| 14 | sqft_min | integer [32,0] | YES |  |  |
| 15 | sqft_max | integer [32,0] | YES |  |  |
| 16 | beds_min | smallint [16,0] | YES |  |  |
| 17 | beds_max | smallint [16,0] | YES |  |  |
| 18 | baths_min | numeric [3,1] | YES |  |  |
| 19 | baths_max | numeric [3,1] | YES |  |  |
| 20 | hoa_monthly | integer [32,0] | YES |  |  |
| 21 | product_types | character varying(256) | YES |  |  |
| 22 | plan_count | smallint [16,0] | YES |  |  |
| 23 | inventory_count | smallint [16,0] | YES |  |  |
| 24 | source_url | text | YES |  |  |
| 25 | first_seen_at | timestamp with time zone | NO | now() |  |
| 26 | last_seen_at | timestamp with time zone | NO | now() |  |
| 27 | ingested_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| bmk_builder_communities_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| bmk_builder_communities_source_source_id_key | UNIQUE | UNIQUE (source, source_id) |

#### Indexes

- `bmk_builder_communities_pkey`

```sql
CREATE UNIQUE INDEX bmk_builder_communities_pkey ON landscape.bmk_builder_communities USING btree (id)
```
- `bmk_builder_communities_source_source_id_key`

```sql
CREATE UNIQUE INDEX bmk_builder_communities_source_source_id_key ON landscape.bmk_builder_communities USING btree (source, source_id)
```
- `idx_bmk_communities_builder`

```sql
CREATE INDEX idx_bmk_communities_builder ON landscape.bmk_builder_communities USING btree (builder_name)
```
- `idx_bmk_communities_city_state`

```sql
CREATE INDEX idx_bmk_communities_city_state ON landscape.bmk_builder_communities USING btree (city, state)
```
- `idx_bmk_communities_geo`

```sql
CREATE INDEX idx_bmk_communities_geo ON landscape.bmk_builder_communities USING btree (lat, lng) WHERE (lat IS NOT NULL)
```
- `idx_bmk_communities_last_seen`

```sql
CREATE INDEX idx_bmk_communities_last_seen ON landscape.bmk_builder_communities USING btree (last_seen_at)
```
- `idx_bmk_communities_market`

```sql
CREATE INDEX idx_bmk_communities_market ON landscape.bmk_builder_communities USING btree (market_label)
```
- `idx_bmk_communities_price_range`

```sql
CREATE INDEX idx_bmk_communities_price_range ON landscape.bmk_builder_communities USING btree (price_min, price_max) WHERE (price_min IS NOT NULL)
```

### `bmk_builder_inventory`

- Columns: 23
- Constraints: 2
- Foreign keys: 0
- Indexes: 9
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('bmk_builder_inventory_id_seq'::regclass) |  |
| 2 | source | character varying(32) | NO |  |  |
| 3 | source_id | character varying(64) | NO |  |  |
| 4 | community_source_id | character varying(64) | YES |  |  |
| 5 | plan_source_id | character varying(64) | YES |  |  |
| 6 | address_line1 | character varying(256) | YES |  |  |
| 7 | city | character varying(64) | YES |  |  |
| 8 | state | character(2) | YES |  |  |
| 9 | zip_code | character varying(10) | YES |  |  |
| 10 | lat | numeric [10,7] | YES |  |  |
| 11 | lng | numeric [10,7] | YES |  |  |
| 12 | status | character varying(32) | YES |  |  |
| 13 | price_current | integer [32,0] | YES |  |  |
| 14 | price_original | integer [32,0] | YES |  |  |
| 15 | sqft_actual | integer [32,0] | YES |  |  |
| 16 | beds_actual | smallint [16,0] | YES |  |  |
| 17 | baths_actual | numeric [3,1] | YES |  |  |
| 18 | lot_sqft | integer [32,0] | YES |  |  |
| 19 | move_in_date | date | YES |  |  |
| 20 | source_url | text | YES |  |  |
| 21 | first_seen_at | timestamp with time zone | NO | now() |  |
| 22 | last_seen_at | timestamp with time zone | NO | now() |  |
| 23 | ingested_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| bmk_builder_inventory_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| bmk_builder_inventory_source_source_id_key | UNIQUE | UNIQUE (source, source_id) |

#### Indexes

- `bmk_builder_inventory_pkey`

```sql
CREATE UNIQUE INDEX bmk_builder_inventory_pkey ON landscape.bmk_builder_inventory USING btree (id)
```
- `bmk_builder_inventory_source_source_id_key`

```sql
CREATE UNIQUE INDEX bmk_builder_inventory_source_source_id_key ON landscape.bmk_builder_inventory USING btree (source, source_id)
```
- `idx_bmk_inventory_city_state`

```sql
CREATE INDEX idx_bmk_inventory_city_state ON landscape.bmk_builder_inventory USING btree (city, state)
```
- `idx_bmk_inventory_community`

```sql
CREATE INDEX idx_bmk_inventory_community ON landscape.bmk_builder_inventory USING btree (source, community_source_id)
```
- `idx_bmk_inventory_geo`

```sql
CREATE INDEX idx_bmk_inventory_geo ON landscape.bmk_builder_inventory USING btree (lat, lng) WHERE (lat IS NOT NULL)
```
- `idx_bmk_inventory_last_seen`

```sql
CREATE INDEX idx_bmk_inventory_last_seen ON landscape.bmk_builder_inventory USING btree (last_seen_at)
```
- `idx_bmk_inventory_move_in`

```sql
CREATE INDEX idx_bmk_inventory_move_in ON landscape.bmk_builder_inventory USING btree (move_in_date) WHERE (move_in_date IS NOT NULL)
```
- `idx_bmk_inventory_price`

```sql
CREATE INDEX idx_bmk_inventory_price ON landscape.bmk_builder_inventory USING btree (price_current) WHERE (price_current IS NOT NULL)
```
- `idx_bmk_inventory_status`

```sql
CREATE INDEX idx_bmk_inventory_status ON landscape.bmk_builder_inventory USING btree (status)
```

### `bmk_builder_plans`

- Columns: 20
- Constraints: 2
- Foreign keys: 0
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('bmk_builder_plans_id_seq'::regclass) |  |
| 2 | source | character varying(32) | NO |  |  |
| 3 | source_id | character varying(64) | NO |  |  |
| 4 | community_source_id | character varying(64) | NO |  |  |
| 5 | plan_name | character varying(128) | NO |  |  |
| 6 | series_name | character varying(64) | YES |  |  |
| 7 | product_type | character varying(32) | YES |  |  |
| 8 | base_price | integer [32,0] | YES |  |  |
| 9 | sqft_min | integer [32,0] | YES |  |  |
| 10 | sqft_max | integer [32,0] | YES |  |  |
| 11 | beds_min | smallint [16,0] | YES |  |  |
| 12 | beds_max | smallint [16,0] | YES |  |  |
| 13 | baths_min | numeric [3,1] | YES |  |  |
| 14 | baths_max | numeric [3,1] | YES |  |  |
| 15 | garage_spaces | smallint [16,0] | YES |  |  |
| 16 | stories | smallint [16,0] | YES |  |  |
| 17 | source_url | text | YES |  |  |
| 18 | first_seen_at | timestamp with time zone | NO | now() |  |
| 19 | last_seen_at | timestamp with time zone | NO | now() |  |
| 20 | ingested_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| bmk_builder_plans_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| bmk_builder_plans_source_source_id_key | UNIQUE | UNIQUE (source, source_id) |

#### Indexes

- `bmk_builder_plans_pkey`

```sql
CREATE UNIQUE INDEX bmk_builder_plans_pkey ON landscape.bmk_builder_plans USING btree (id)
```
- `bmk_builder_plans_source_source_id_key`

```sql
CREATE UNIQUE INDEX bmk_builder_plans_source_source_id_key ON landscape.bmk_builder_plans USING btree (source, source_id)
```
- `idx_bmk_plans_base_price`

```sql
CREATE INDEX idx_bmk_plans_base_price ON landscape.bmk_builder_plans USING btree (base_price) WHERE (base_price IS NOT NULL)
```
- `idx_bmk_plans_community`

```sql
CREATE INDEX idx_bmk_plans_community ON landscape.bmk_builder_plans USING btree (source, community_source_id)
```
- `idx_bmk_plans_last_seen`

```sql
CREATE INDEX idx_bmk_plans_last_seen ON landscape.bmk_builder_plans USING btree (last_seen_at)
```
- `idx_bmk_plans_product_type`

```sql
CREATE INDEX idx_bmk_plans_product_type ON landscape.bmk_builder_plans USING btree (product_type)
```
- `idx_bmk_plans_sqft`

```sql
CREATE INDEX idx_bmk_plans_sqft ON landscape.bmk_builder_plans USING btree (sqft_min, sqft_max) WHERE (sqft_min IS NOT NULL)
```

### `bmk_resale_closings`

- Columns: 27
- Constraints: 2
- Foreign keys: 0
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('bmk_resale_closings_id_seq'::regclass) |  |
| 2 | source | character varying(32) | NO |  |  |
| 3 | source_id | character varying(64) | NO |  |  |
| 4 | sale_price | integer [32,0] | NO |  |  |
| 5 | sale_date | date | NO |  |  |
| 6 | address_line1 | character varying(256) | YES |  |  |
| 7 | city | character varying(64) | YES |  |  |
| 8 | state | character(2) | YES |  |  |
| 9 | zip_code | character varying(10) | YES |  |  |
| 10 | lat | numeric [10,7] | YES |  |  |
| 11 | lng | numeric [10,7] | YES |  |  |
| 12 | property_type | character varying(32) | YES |  |  |
| 13 | list_price | integer [32,0] | YES |  |  |
| 14 | list_date | date | YES |  |  |
| 15 | days_on_market | smallint [16,0] | YES |  |  |
| 16 | sqft | integer [32,0] | YES |  |  |
| 17 | lot_sqft | integer [32,0] | YES |  |  |
| 18 | price_per_sqft | integer [32,0] | YES |  |  |
| 19 | year_built | smallint [16,0] | YES |  |  |
| 20 | beds | smallint [16,0] | YES |  |  |
| 21 | baths | numeric [3,1] | YES |  |  |
| 22 | builder_name | character varying(128) | YES |  |  |
| 23 | subdivision_name | character varying(256) | YES |  |  |
| 24 | source_url | text | YES |  |  |
| 25 | first_seen_at | timestamp with time zone | NO | now() |  |
| 26 | last_seen_at | timestamp with time zone | NO | now() |  |
| 27 | ingested_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| bmk_resale_closings_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| bmk_resale_closings_source_source_id_key | UNIQUE | UNIQUE (source, source_id) |

#### Indexes

- `bmk_resale_closings_pkey`

```sql
CREATE UNIQUE INDEX bmk_resale_closings_pkey ON landscape.bmk_resale_closings USING btree (id)
```
- `bmk_resale_closings_source_source_id_key`

```sql
CREATE UNIQUE INDEX bmk_resale_closings_source_source_id_key ON landscape.bmk_resale_closings USING btree (source, source_id)
```
- `idx_bmk_resale_closings_geo`

```sql
CREATE INDEX idx_bmk_resale_closings_geo ON landscape.bmk_resale_closings USING btree (lat, lng)
```
- `idx_bmk_resale_closings_location`

```sql
CREATE INDEX idx_bmk_resale_closings_location ON landscape.bmk_resale_closings USING btree (city, state)
```
- `idx_bmk_resale_closings_sale_date`

```sql
CREATE INDEX idx_bmk_resale_closings_sale_date ON landscape.bmk_resale_closings USING btree (sale_date DESC)
```
- `idx_bmk_resale_closings_source`

```sql
CREATE INDEX idx_bmk_resale_closings_source ON landscape.bmk_resale_closings USING btree (source)
```
- `idx_bmk_resale_closings_year_built`

```sql
CREATE INDEX idx_bmk_resale_closings_year_built ON landscape.bmk_resale_closings USING btree (year_built)
```

### `core_category_lifecycle_stages`

- Columns: 5
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | category_id | integer [32,0] | NO |  |  |
| 2 | activity | character varying(50) | NO |  | Activity type that this category applies to. Links categories to cost lifecycle phases. |
| 3 | sort_order | integer [32,0] | YES | 0 | Display order within lifecycle stage (per-stage sorting) |
| 4 | created_at | timestamp without time zone | YES | now() |  |
| 5 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_lifecycle_stage_value | CHECK | CHECK (((activity)::text = ANY ((ARRAY['Acquisition'::character varying, 'Planning & Engineering'::character varying, 'Improvements'::character varying, 'Operations'::character varying, 'Disposition'::character varying, 'Financing'::character varying])::text[]))) |
| fk_category_lifecycle_category | FOREIGN KEY | FOREIGN KEY (category_id) REFERENCES core_unit_cost_category(category_id) ON DELETE CASCADE |
| core_category_lifecycle_stages_pkey | PRIMARY KEY | PRIMARY KEY (category_id, activity) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_category_lifecycle_category | category_id | core_unit_cost_category.category_id | NO ACTION | CASCADE |

#### Indexes

- `core_category_lifecycle_stages_pkey`

```sql
CREATE UNIQUE INDEX core_category_lifecycle_stages_pkey ON landscape.core_category_lifecycle_stages USING btree (category_id, activity)
```
- `idx_category_lifecycle_category`

```sql
CREATE INDEX idx_category_lifecycle_category ON landscape.core_category_lifecycle_stages USING btree (category_id)
```
- `idx_category_lifecycle_sort`

```sql
CREATE INDEX idx_category_lifecycle_sort ON landscape.core_category_lifecycle_stages USING btree (activity, sort_order)
```

### `core_category_lifecycle_stages_backup_20260126`

- Columns: 5
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | category_id | integer [32,0] | YES |  |  |
| 2 | activity | character varying(50) | YES |  |  |
| 3 | sort_order | integer [32,0] | YES |  |  |
| 4 | created_at | timestamp without time zone | YES |  |  |
| 5 | updated_at | timestamp without time zone | YES |  |  |

### `core_category_tag_library`

- Columns: 9
- Constraints: 2
- Foreign keys: 0
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tag_id | integer [32,0] | NO | nextval('core_category_tag_library_tag_id_seq'::regclass) |  |
| 2 | tag_name | character varying(50) | NO |  |  |
| 3 | tag_context | character varying(50) | NO |  | Comma-separated lifecycle stages where this tag applies (e.g., "Development", "Development,Operations") |
| 4 | is_system_default | boolean | YES | true |  |
| 5 | description | text | YES |  |  |
| 6 | display_order | integer [32,0] | YES | 999 |  |
| 7 | is_active | boolean | YES | true |  |
| 8 | created_at | timestamp without time zone | YES | now() |  |
| 9 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_category_tag_library_pkey | PRIMARY KEY | PRIMARY KEY (tag_id) |
| core_category_tag_library_tag_name_key | UNIQUE | UNIQUE (tag_name) |

#### Indexes

- `core_category_tag_library_pkey`

```sql
CREATE UNIQUE INDEX core_category_tag_library_pkey ON landscape.core_category_tag_library USING btree (tag_id)
```
- `core_category_tag_library_tag_name_key`

```sql
CREATE UNIQUE INDEX core_category_tag_library_tag_name_key ON landscape.core_category_tag_library USING btree (tag_name)
```
- `idx_tag_library_active`

```sql
CREATE INDEX idx_tag_library_active ON landscape.core_category_tag_library USING btree (is_active) WHERE (is_active = true)
```
- `idx_tag_library_context`

```sql
CREATE INDEX idx_tag_library_context ON landscape.core_category_tag_library USING btree (tag_context)
```

### `core_doc`

- Columns: 34
- Constraints: 10
- Foreign keys: 6
- Indexes: 10
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | doc_id | bigint [64,0] | NO | nextval('core_doc_doc_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | workspace_id | bigint [64,0] | YES |  |  |
| 4 | phase_id | bigint [64,0] | YES |  |  |
| 5 | parcel_id | bigint [64,0] | YES |  |  |
| 6 | doc_name | character varying(500) | NO |  |  |
| 7 | doc_type | character varying(100) | NO | 'general'::character varying |  |
| 8 | discipline | character varying(100) | YES | NULL::character varying |  |
| 9 | mime_type | character varying(100) | NO |  |  |
| 10 | file_size_bytes | bigint [64,0] | NO |  |  |
| 11 | sha256_hash | character varying(64) | NO |  |  |
| 12 | storage_uri | text | NO |  |  |
| 13 | version_no | integer [32,0] | YES | 1 |  |
| 14 | parent_doc_id | bigint [64,0] | YES |  |  |
| 15 | status | character varying(50) | YES | 'draft'::character varying |  |
| 16 | profile_json | jsonb | YES | '{}'::jsonb |  |
| 17 | doc_date | date | YES |  |  |
| 18 | contract_value | numeric [15,2] | YES | NULL::numeric |  |
| 19 | priority | character varying(20) | YES | NULL::character varying |  |
| 20 | created_by | bigint [64,0] | YES |  |  |
| 21 | updated_by | bigint [64,0] | YES |  |  |
| 22 | created_at | timestamp with time zone | YES | now() |  |
| 23 | updated_at | timestamp with time zone | YES | now() |  |
| 24 | processing_status | character varying(50) | YES | 'pending'::character varying | Document processing state: pending → queued → extracting → chunking → embedding → ready (or failed/skipped) |
| 25 | processing_started_at | timestamp without time zone | YES |  |  |
| 26 | processing_completed_at | timestamp without time zone | YES |  |  |
| 27 | processing_error | text | YES |  |  |
| 28 | chunks_count | integer [32,0] | YES | 0 |  |
| 29 | embeddings_count | integer [32,0] | YES | 0 |  |
| 30 | deleted_at | timestamp with time zone | YES |  | Soft delete timestamp - NULL means active |
| 31 | deleted_by | character varying(255) | YES |  | User who deleted the document |
| 32 | cabinet_id | bigint [64,0] | YES |  | Foreign key to tbl_cabinet for tenancy isolation |
| 33 | media_scan_status | character varying(20) | YES | 'unscanned'::character varying | Media scan state: unscanned, scanning, scanned, extracting, complete, error |
| 34 | media_scan_json | jsonb | YES |  | Cached media summary for badge rendering. Schema: {total: N, by_color: {primary: N, success: N, ...}, by_type: {property_photo: {total: N, extracted: N}, ...}} |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_media_scan_status | CHECK | CHECK (((media_scan_status)::text = ANY ((ARRAY['unscanned'::character varying, 'scanning'::character varying, 'scanned'::character varying, 'extracting'::character varying, 'extracted'::character varying, 'classifying'::character varying, 'classified'::character varying, 'complete'::character varying, 'error'::character varying, 'not_applicable'::character varying])::text[]))) |
| chk_processing_status | CHECK | CHECK (((processing_status)::text = ANY ((ARRAY['pending'::character varying, 'queued'::character varying, 'extracting'::character varying, 'chunking'::character varying, 'embedding'::character varying, 'ready'::character varying, 'failed'::character varying, 'skipped'::character varying])::text[]))) |
| core_doc_status_check | CHECK | CHECK (((status)::text = ANY ((ARRAY['draft'::character varying, 'processing'::character varying, 'indexed'::character varying, 'failed'::character varying, 'archived'::character varying])::text[]))) |
| core_doc_cabinet_id_fkey | FOREIGN KEY | FOREIGN KEY (cabinet_id) REFERENCES tbl_cabinet(cabinet_id) |
| core_doc_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) |
| core_doc_parent_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (parent_doc_id) REFERENCES core_doc(doc_id) |
| core_doc_phase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) |
| core_doc_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| core_doc_workspace_id_fkey | FOREIGN KEY | FOREIGN KEY (workspace_id) REFERENCES dms_workspaces(workspace_id) |
| core_doc_pkey | PRIMARY KEY | PRIMARY KEY (doc_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_cabinet_id_fkey | cabinet_id | tbl_cabinet.cabinet_id | NO ACTION | NO ACTION |
| core_doc_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | NO ACTION |
| core_doc_parent_doc_id_fkey | parent_doc_id | core_doc.doc_id | NO ACTION | NO ACTION |
| core_doc_phase_id_fkey | phase_id | tbl_phase.phase_id | NO ACTION | NO ACTION |
| core_doc_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| core_doc_workspace_id_fkey | workspace_id | dms_workspaces.workspace_id | NO ACTION | NO ACTION |

#### Indexes

- `core_doc_pkey`

```sql
CREATE UNIQUE INDEX core_doc_pkey ON landscape.core_doc USING btree (doc_id)
```
- `idx_core_doc_deleted_at`

```sql
CREATE INDEX idx_core_doc_deleted_at ON landscape.core_doc USING btree (deleted_at) WHERE (deleted_at IS NULL)
```
- `idx_core_doc_doc_type`

```sql
CREATE INDEX idx_core_doc_doc_type ON landscape.core_doc USING btree (doc_type)
```
- `idx_core_doc_processing_status`

```sql
CREATE INDEX idx_core_doc_processing_status ON landscape.core_doc USING btree (processing_status)
```
- `idx_core_doc_profile_json`

```sql
CREATE INDEX idx_core_doc_profile_json ON landscape.core_doc USING gin (profile_json)
```
- `idx_core_doc_project_id`

```sql
CREATE INDEX idx_core_doc_project_id ON landscape.core_doc USING btree (project_id)
```
- `idx_core_doc_status`

```sql
CREATE INDEX idx_core_doc_status ON landscape.core_doc USING btree (status)
```
- `idx_core_doc_workspace_id`

```sql
CREATE INDEX idx_core_doc_workspace_id ON landscape.core_doc USING btree (workspace_id)
```
- `idx_doc_cabinet`

```sql
CREATE INDEX idx_doc_cabinet ON landscape.core_doc USING btree (cabinet_id)
```
- `idx_doc_media_scan`

```sql
CREATE INDEX idx_doc_media_scan ON landscape.core_doc USING btree (media_scan_status) WHERE ((media_scan_status)::text <> ALL ((ARRAY['complete'::character varying, 'not_applicable'::character varying, 'unscanned'::character varying])::text[]))
```

### `core_doc_attr_enum`

- Columns: 5
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | attr_id | bigint [64,0] | NO |  |  |
| 2 | option_code | text | NO |  |  |
| 3 | label | text | NO |  |  |
| 4 | sort_order | integer [32,0] | NO | 0 |  |
| 5 | is_active | boolean | NO | true |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_doc_attr_enum_attr_id_fkey | FOREIGN KEY | FOREIGN KEY (attr_id) REFERENCES dms_attributes(attr_id) ON DELETE CASCADE |
| core_doc_attr_enum_pkey | PRIMARY KEY | PRIMARY KEY (attr_id, option_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_attr_enum_attr_id_fkey | attr_id | dms_attributes.attr_id | NO ACTION | CASCADE |

#### Indexes

- `core_doc_attr_enum_pkey`

```sql
CREATE UNIQUE INDEX core_doc_attr_enum_pkey ON landscape.core_doc_attr_enum USING btree (attr_id, option_code)
```

### `core_doc_attr_lookup`

- Columns: 4
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | attr_id | bigint [64,0] | NO |  |  |
| 2 | sql_source | text | NO |  |  |
| 3 | cache_ttl | integer [32,0] | NO | 600 |  |
| 4 | display_fmt | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_doc_attr_lookup_attr_id_fkey | FOREIGN KEY | FOREIGN KEY (attr_id) REFERENCES dms_attributes(attr_id) ON DELETE CASCADE |
| core_doc_attr_lookup_pkey | PRIMARY KEY | PRIMARY KEY (attr_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_attr_lookup_attr_id_fkey | attr_id | dms_attributes.attr_id | NO ACTION | CASCADE |

#### Indexes

- `core_doc_attr_lookup_pkey`

```sql
CREATE UNIQUE INDEX core_doc_attr_lookup_pkey ON landscape.core_doc_attr_lookup USING btree (attr_id)
```

### `core_doc_folder`

- Columns: 9
- Constraints: 4
- Foreign keys: 1
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | folder_id | integer [32,0] | NO | nextval('core_doc_folder_folder_id_seq'::regclass) |  |
| 2 | parent_id | integer [32,0] | YES |  |  |
| 3 | name | character varying(255) | NO |  |  |
| 4 | path | text | NO |  |  |
| 5 | sort_order | integer [32,0] | YES | 0 |  |
| 6 | default_profile | jsonb | YES | '{}'::jsonb |  |
| 7 | is_active | boolean | YES | true |  |
| 8 | created_at | timestamp without time zone | YES | now() |  |
| 9 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| parent_not_self | CHECK | CHECK ((folder_id <> parent_id)) |
| core_doc_folder_parent_id_fkey | FOREIGN KEY | FOREIGN KEY (parent_id) REFERENCES core_doc_folder(folder_id) ON DELETE CASCADE |
| core_doc_folder_pkey | PRIMARY KEY | PRIMARY KEY (folder_id) |
| unique_folder_path | UNIQUE | UNIQUE (path) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_folder_parent_id_fkey | parent_id | core_doc_folder.folder_id | NO ACTION | CASCADE |

#### Indexes

- `core_doc_folder_pkey`

```sql
CREATE UNIQUE INDEX core_doc_folder_pkey ON landscape.core_doc_folder USING btree (folder_id)
```
- `idx_folder_parent`

```sql
CREATE INDEX idx_folder_parent ON landscape.core_doc_folder USING btree (parent_id) WHERE (is_active = true)
```
- `idx_folder_path`

```sql
CREATE INDEX idx_folder_path ON landscape.core_doc_folder USING btree (path)
```
- `unique_folder_path`

```sql
CREATE UNIQUE INDEX unique_folder_path ON landscape.core_doc_folder USING btree (path)
```

#### Triggers

- `trg_folder_path`

```sql
CREATE TRIGGER trg_folder_path BEFORE INSERT OR UPDATE OF name, parent_id ON landscape.core_doc_folder FOR EACH ROW EXECUTE FUNCTION update_folder_path()
```

### `core_doc_folder_link`

- Columns: 4
- Constraints: 3
- Foreign keys: 2
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | doc_id | integer [32,0] | NO |  |  |
| 2 | folder_id | integer [32,0] | NO |  |  |
| 3 | linked_at | timestamp without time zone | YES | now() |  |
| 4 | inherited | boolean | YES | true |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_doc_folder_link_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| core_doc_folder_link_folder_id_fkey | FOREIGN KEY | FOREIGN KEY (folder_id) REFERENCES core_doc_folder(folder_id) ON DELETE CASCADE |
| core_doc_folder_link_pkey | PRIMARY KEY | PRIMARY KEY (doc_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_folder_link_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | CASCADE |
| core_doc_folder_link_folder_id_fkey | folder_id | core_doc_folder.folder_id | NO ACTION | CASCADE |

#### Indexes

- `core_doc_folder_link_pkey`

```sql
CREATE UNIQUE INDEX core_doc_folder_link_pkey ON landscape.core_doc_folder_link USING btree (doc_id)
```
- `idx_folder_link_folder`

```sql
CREATE INDEX idx_folder_link_folder ON landscape.core_doc_folder_link USING btree (folder_id)
```

### `core_doc_media`

- Columns: 34
- Constraints: 10
- Foreign keys: 4
- Indexes: 9
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | media_id | bigint [64,0] | NO | nextval('core_doc_media_media_id_seq'::regclass) |  |
| 2 | doc_id | bigint [64,0] | NO |  | Parent document this media was extracted from |
| 3 | project_id | bigint [64,0] | YES |  |  |
| 4 | workspace_id | bigint [64,0] | YES |  |  |
| 5 | classification_id | integer [32,0] | YES |  |  |
| 6 | ai_classification | character varying(50) | YES |  |  |
| 7 | ai_confidence | numeric [5,4] | YES |  |  |
| 8 | user_override | boolean | NO | false |  |
| 9 | source_page | integer [32,0] | YES |  |  |
| 10 | source_region | jsonb | YES |  | Bounding box JSON {x, y, width, height} for region-based extraction |
| 11 | extraction_method | character varying(30) | NO | 'embedded'::character varying | How the image was obtained: embedded object, full page capture, region crop, or direct upload |
| 12 | asset_name | character varying(500) | YES |  |  |
| 13 | storage_uri | text | NO |  |  |
| 14 | thumbnail_uri | text | YES |  |  |
| 15 | mime_type | character varying(100) | NO | 'image/png'::character varying |  |
| 16 | file_size_bytes | bigint [64,0] | YES |  |  |
| 17 | width_px | integer [32,0] | YES |  |  |
| 18 | height_px | integer [32,0] | YES |  |  |
| 19 | dpi | integer [32,0] | YES |  |  |
| 20 | caption | text | YES |  |  |
| 21 | alt_text | text | YES |  |  |
| 22 | tags | ARRAY | YES |  |  |
| 23 | ai_description | text | YES |  | AI-generated description of image contents for search and Landscaper context |
| 24 | status | character varying(20) | NO | 'extracted'::character varying |  |
| 25 | created_at | timestamp with time zone | NO | now() |  |
| 26 | updated_at | timestamp with time zone | NO | now() |  |
| 27 | created_by | bigint [64,0] | YES |  |  |
| 28 | deleted_at | timestamp with time zone | YES |  |  |
| 29 | suggested_action | character varying(20) | YES |  | AI-suggested action based on classification content_intent. Drives preview modal pre-selection. |
| 30 | user_action | character varying(20) | YES |  | User-chosen action from preview modal. NULL until user interacts. Overrides suggested_action. |
| 31 | discard_reason_code | character varying(50) | YES |  |  |
| 32 | discard_reason_text | text | YES |  |  |
| 33 | discarded_at | timestamp with time zone | YES |  |  |
| 34 | image_hash | character varying(64) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_media_confidence | CHECK | CHECK (((ai_confidence IS NULL) OR ((ai_confidence >= (0)::numeric) AND (ai_confidence <= (1)::numeric)))) |
| chk_media_extraction_method | CHECK | CHECK (((extraction_method)::text = ANY ((ARRAY['embedded'::character varying, 'page_capture'::character varying, 'region'::character varying, 'upload'::character varying])::text[]))) |
| chk_media_status | CHECK | CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'extracted'::character varying, 'classified'::character varying, 'verified'::character varying, 'rejected'::character varying])::text[]))) |
| chk_suggested_action | CHECK | CHECK (((suggested_action IS NULL) OR ((suggested_action)::text = ANY ((ARRAY['save_image'::character varying, 'extract_data'::character varying, 'both'::character varying, 'ignore'::character varying])::text[])))) |
| chk_user_action | CHECK | CHECK (((user_action IS NULL) OR ((user_action)::text = ANY ((ARRAY['save_image'::character varying, 'extract_data'::character varying, 'both'::character varying, 'ignore'::character varying])::text[])))) |
| core_doc_media_classification_id_fkey | FOREIGN KEY | FOREIGN KEY (classification_id) REFERENCES lu_media_classification(classification_id) |
| core_doc_media_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| core_doc_media_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| core_doc_media_workspace_id_fkey | FOREIGN KEY | FOREIGN KEY (workspace_id) REFERENCES dms_workspaces(workspace_id) |
| core_doc_media_pkey | PRIMARY KEY | PRIMARY KEY (media_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_media_classification_id_fkey | classification_id | lu_media_classification.classification_id | NO ACTION | NO ACTION |
| core_doc_media_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | CASCADE |
| core_doc_media_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| core_doc_media_workspace_id_fkey | workspace_id | dms_workspaces.workspace_id | NO ACTION | NO ACTION |

#### Indexes

- `core_doc_media_pkey`

```sql
CREATE UNIQUE INDEX core_doc_media_pkey ON landscape.core_doc_media USING btree (media_id)
```
- `idx_doc_media_hash`

```sql
CREATE INDEX idx_doc_media_hash ON landscape.core_doc_media USING btree (image_hash)
```
- `idx_media_class_id`

```sql
CREATE INDEX idx_media_class_id ON landscape.core_doc_media USING btree (classification_id)
```
- `idx_media_deleted`

```sql
CREATE INDEX idx_media_deleted ON landscape.core_doc_media USING btree (deleted_at) WHERE (deleted_at IS NULL)
```
- `idx_media_doc_id`

```sql
CREATE INDEX idx_media_doc_id ON landscape.core_doc_media USING btree (doc_id)
```
- `idx_media_method`

```sql
CREATE INDEX idx_media_method ON landscape.core_doc_media USING btree (extraction_method)
```
- `idx_media_project_id`

```sql
CREATE INDEX idx_media_project_id ON landscape.core_doc_media USING btree (project_id)
```
- `idx_media_status`

```sql
CREATE INDEX idx_media_status ON landscape.core_doc_media USING btree (status) WHERE (deleted_at IS NULL)
```
- `idx_media_tags`

```sql
CREATE INDEX idx_media_tags ON landscape.core_doc_media USING gin (tags)
```

### `core_doc_media_link`

- Columns: 9
- Constraints: 3
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | link_id | bigint [64,0] | NO | nextval('core_doc_media_link_link_id_seq'::regclass) |  |
| 2 | media_id | bigint [64,0] | NO |  |  |
| 3 | entity_type | character varying(50) | NO |  | Target entity table identifier. Not enforced by FK - validated at application layer. |
| 4 | entity_id | bigint [64,0] | NO |  |  |
| 5 | link_purpose | character varying(50) | YES |  | How the image is used on the entity: hero_image, thumbnail, reference, comparison, etc. |
| 6 | display_order | integer [32,0] | NO | 0 |  |
| 7 | notes | text | YES |  |  |
| 8 | created_at | timestamp with time zone | NO | now() |  |
| 9 | created_by | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_doc_media_link_media_id_fkey | FOREIGN KEY | FOREIGN KEY (media_id) REFERENCES core_doc_media(media_id) ON DELETE CASCADE |
| core_doc_media_link_pkey | PRIMARY KEY | PRIMARY KEY (link_id) |
| uq_media_entity_link | UNIQUE | UNIQUE (media_id, entity_type, entity_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_media_link_media_id_fkey | media_id | core_doc_media.media_id | NO ACTION | CASCADE |

#### Indexes

- `core_doc_media_link_pkey`

```sql
CREATE UNIQUE INDEX core_doc_media_link_pkey ON landscape.core_doc_media_link USING btree (link_id)
```
- `idx_media_link_entity`

```sql
CREATE INDEX idx_media_link_entity ON landscape.core_doc_media_link USING btree (entity_type, entity_id)
```
- `idx_media_link_media`

```sql
CREATE INDEX idx_media_link_media ON landscape.core_doc_media_link USING btree (media_id)
```
- `idx_media_link_purpose`

```sql
CREATE INDEX idx_media_link_purpose ON landscape.core_doc_media_link USING btree (link_purpose) WHERE (link_purpose IS NOT NULL)
```
- `uq_media_entity_link`

```sql
CREATE UNIQUE INDEX uq_media_entity_link ON landscape.core_doc_media_link USING btree (media_id, entity_type, entity_id)
```

### `core_doc_smartfilter`

- Columns: 6
- Constraints: 1
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | filter_id | integer [32,0] | NO | nextval('core_doc_smartfilter_filter_id_seq'::regclass) |  |
| 2 | name | character varying(255) | NO |  |  |
| 3 | query | jsonb | NO |  |  |
| 4 | is_active | boolean | YES | true |  |
| 5 | created_at | timestamp without time zone | YES | now() |  |
| 6 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_doc_smartfilter_pkey | PRIMARY KEY | PRIMARY KEY (filter_id) |

#### Indexes

- `core_doc_smartfilter_pkey`

```sql
CREATE UNIQUE INDEX core_doc_smartfilter_pkey ON landscape.core_doc_smartfilter USING btree (filter_id)
```
- `idx_smartfilter_active`

```sql
CREATE INDEX idx_smartfilter_active ON landscape.core_doc_smartfilter USING btree (is_active) WHERE (is_active = true)
```

### `core_doc_text`

- Columns: 6
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | doc_id | integer [32,0] | NO |  |  |
| 2 | extracted_text | text | YES |  |  |
| 3 | word_count | integer [32,0] | YES |  |  |
| 4 | extraction_method | character varying(50) | YES |  |  |
| 5 | extracted_at | timestamp without time zone | YES | now() |  |
| 6 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_doc_text_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| core_doc_text_pkey | PRIMARY KEY | PRIMARY KEY (doc_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_doc_text_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | CASCADE |

#### Indexes

- `core_doc_text_pkey`

```sql
CREATE UNIQUE INDEX core_doc_text_pkey ON landscape.core_doc_text USING btree (doc_id)
```
- `idx_doc_text_fts`

```sql
CREATE INDEX idx_doc_text_fts ON landscape.core_doc_text USING gin (to_tsvector('english'::regconfig, extracted_text))
```

### `core_fin_budget_version`

- Columns: 6
- Constraints: 3
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | budget_id | bigint [64,0] | NO | nextval('core_fin_budget_version_budget_id_seq'::regclass) |  |
| 2 | name | text | NO |  |  |
| 3 | as_of | date | NO |  |  |
| 4 | status | text | NO | 'draft'::text |  |
| 5 | created_at | timestamp with time zone | NO | now() |  |
| 6 | project_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_budget_version_status_check | CHECK | CHECK ((status = ANY (ARRAY['draft'::text, 'active'::text, 'archived'::text]))) |
| fk_core_fin_budget_version_project | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE SET NULL |
| core_fin_budget_version_pkey | PRIMARY KEY | PRIMARY KEY (budget_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_core_fin_budget_version_project | project_id | tbl_project.project_id | NO ACTION | SET NULL |

#### Indexes

- `core_fin_budget_version_pkey`

```sql
CREATE UNIQUE INDEX core_fin_budget_version_pkey ON landscape.core_fin_budget_version USING btree (budget_id)
```

### `core_fin_category_uom`

- Columns: 2
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | category_id | bigint [64,0] | NO |  |  |
| 2 | uom_code | text | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_category_uom_uom_code_fkey | FOREIGN KEY | FOREIGN KEY (uom_code) REFERENCES core_fin_uom(uom_code) ON DELETE RESTRICT |
| core_fin_category_uom_pkey | PRIMARY KEY | PRIMARY KEY (category_id, uom_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_fin_category_uom_uom_code_fkey | uom_code | core_fin_uom.uom_code | NO ACTION | RESTRICT |

#### Indexes

- `core_fin_category_uom_pkey`

```sql
CREATE UNIQUE INDEX core_fin_category_uom_pkey ON landscape.core_fin_category_uom USING btree (category_id, uom_code)
```

### `core_fin_confidence_policy`

- Columns: 6
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | confidence_code | text | NO |  |  |
| 2 | name | text | NO |  |  |
| 3 | default_contingency_pct | numeric [5,2] | NO | 0 |  |
| 4 | description | text | YES |  |  |
| 5 | is_active | boolean | NO | true |  |
| 6 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_confidence_policy_pkey | PRIMARY KEY | PRIMARY KEY (confidence_code) |

#### Indexes

- `core_fin_confidence_policy_pkey`

```sql
CREATE UNIQUE INDEX core_fin_confidence_policy_pkey ON landscape.core_fin_confidence_policy USING btree (confidence_code)
```

### `core_fin_crosswalk_ad`

- Columns: 3
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | ad_code | text | NO |  |  |
| 2 | ad_group | text | YES |  |  |
| 3 | category_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_crosswalk_ad_pkey | PRIMARY KEY | PRIMARY KEY (ad_code, category_id) |

#### Indexes

- `core_fin_crosswalk_ad_pkey`

```sql
CREATE UNIQUE INDEX core_fin_crosswalk_ad_pkey ON landscape.core_fin_crosswalk_ad USING btree (ad_code, category_id)
```

### `core_fin_crosswalk_ae`

- Columns: 3
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | ae_coa | text | NO |  |  |
| 2 | ae_group | text | YES |  |  |
| 3 | category_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_crosswalk_ae_pkey | PRIMARY KEY | PRIMARY KEY (ae_coa, category_id) |

#### Indexes

- `core_fin_crosswalk_ae_pkey`

```sql
CREATE UNIQUE INDEX core_fin_crosswalk_ae_pkey ON landscape.core_fin_crosswalk_ae USING btree (ae_coa, category_id)
```

### `core_fin_curve`

- Columns: 4
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | curve_id | bigint [64,0] | NO | nextval('core_fin_curve_curve_id_seq'::regclass) |  |
| 2 | name | text | NO |  |  |
| 3 | points_json | jsonb | NO |  |  |
| 4 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_curve_pkey | PRIMARY KEY | PRIMARY KEY (curve_id) |
| core_fin_curve_name_key | UNIQUE | UNIQUE (name) |

#### Indexes

- `core_fin_curve_name_key`

```sql
CREATE UNIQUE INDEX core_fin_curve_name_key ON landscape.core_fin_curve USING btree (name)
```
- `core_fin_curve_pkey`

```sql
CREATE UNIQUE INDEX core_fin_curve_pkey ON landscape.core_fin_curve USING btree (curve_id)
```

### `core_fin_division_applicability`

- Columns: 2
- Constraints: 2
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | category_id | bigint [64,0] | NO |  |  |
| 2 | tier | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_container_applicability_container_level_check | CHECK | CHECK (((tier >= 0) AND (tier <= 3))) |
| core_fin_container_applicability_pkey | PRIMARY KEY | PRIMARY KEY (category_id, tier) |

#### Indexes

- `core_fin_container_applicability_pkey`

```sql
CREATE UNIQUE INDEX core_fin_container_applicability_pkey ON landscape.core_fin_division_applicability USING btree (category_id, tier)
```

### `core_fin_fact_actual`

- Columns: 12
- Constraints: 5
- Foreign keys: 4
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | fact_id | bigint [64,0] | NO | nextval('core_fin_fact_actual_fact_id_seq'::regclass) |  |
| 4 | category_id | bigint [64,0] | NO |  |  |
| 5 | uom_code | text | NO |  |  |
| 6 | qty | numeric [18,6] | YES | 1 |  |
| 7 | rate | numeric [18,6] | YES |  |  |
| 8 | amount | numeric [18,2] | YES |  |  |
| 9 | txn_date | date | NO |  |  |
| 10 | source_doc | text | YES |  |  |
| 11 | created_at | timestamp with time zone | NO | now() |  |
| 12 | container_id | bigint [64,0] | YES |  |  |
| 13 | project_id | bigint [64,0] | YES |  |  |
| 14 | scenario_id | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_fact_actual_scenario_id_fkey | FOREIGN KEY | FOREIGN KEY (scenario_id) REFERENCES tbl_scenario(scenario_id) ON DELETE CASCADE |
| core_fin_fact_actual_uom_code_fkey | FOREIGN KEY | FOREIGN KEY (uom_code) REFERENCES core_fin_uom(uom_code) ON DELETE RESTRICT |
| fk_actual_container | FOREIGN KEY | FOREIGN KEY (container_id) REFERENCES tbl_division(division_id) ON DELETE SET NULL |
| fk_core_fin_fact_actual_project | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| core_fin_fact_actual_pkey | PRIMARY KEY | PRIMARY KEY (fact_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_fin_fact_actual_scenario_id_fkey | scenario_id | tbl_scenario.scenario_id | NO ACTION | CASCADE |
| core_fin_fact_actual_uom_code_fkey | uom_code | core_fin_uom.uom_code | NO ACTION | RESTRICT |
| fk_actual_container | container_id | tbl_division.division_id | NO ACTION | SET NULL |
| fk_core_fin_fact_actual_project | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `core_fin_fact_actual_pkey`

```sql
CREATE UNIQUE INDEX core_fin_fact_actual_pkey ON landscape.core_fin_fact_actual USING btree (fact_id)
```
- `idx_core_fin_fact_actual_container`

```sql
CREATE INDEX idx_core_fin_fact_actual_container ON landscape.core_fin_fact_actual USING btree (container_id)
```
- `idx_fact_actual_category`

```sql
CREATE INDEX idx_fact_actual_category ON landscape.core_fin_fact_actual USING btree (category_id)
```
- `idx_fact_actual_container`

```sql
CREATE INDEX idx_fact_actual_container ON landscape.core_fin_fact_actual USING btree (container_id, txn_date)
```
- `idx_fact_actual_scenario`

```sql
CREATE INDEX idx_fact_actual_scenario ON landscape.core_fin_fact_actual USING btree (scenario_id)
```

### `core_fin_fact_budget`

- Columns: 81
- Constraints: 29
- Foreign keys: 11
- Indexes: 23
- Triggers: 2

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | fact_id | bigint [64,0] | NO | nextval('core_fin_fact_budget_fact_id_seq'::regclass) |  |
| 2 | budget_id | bigint [64,0] | NO |  |  |
| 5 | category_id | bigint [64,0] | YES |  | References core_unit_cost_category.category_id. NULL allowed for napkin-mode / progressive complexity. |
| 6 | funding_id | bigint [64,0] | YES |  |  |
| 7 | uom_code | text | NO |  |  |
| 8 | qty | numeric [18,6] | YES | 1 |  |
| 9 | rate | numeric [18,6] | YES |  |  |
| 10 | amount | numeric [18,2] | YES |  |  |
| 11 | start_date | date | YES |  |  |
| 12 | end_date | date | YES |  |  |
| 13 | curve_id | bigint [64,0] | YES |  |  |
| 14 | notes | text | YES |  |  |
| 15 | created_at | timestamp with time zone | NO | now() |  |
| 16 | division_id | bigint [64,0] | YES |  |  |
| 17 | confidence_level | character varying(20) | YES |  |  |
| 18 | vendor_contact_id | integer [32,0] | YES |  |  |
| 19 | escalation_rate | numeric | YES |  |  |
| 20 | contingency_pct | numeric | YES |  |  |
| 21 | timing_method | character varying(20) | YES |  |  |
| 22 | contract_number | character varying(50) | YES |  |  |
| 23 | purchase_order | character varying(50) | YES |  |  |
| 24 | is_committed | boolean | YES | false |  |
| 25 | growth_rate_set_id | integer [32,0] | YES |  |  |
| 26 | project_id | bigint [64,0] | YES |  |  |
| 27 | contingency_mode | text | YES |  |  |
| 28 | confidence_code | text | YES |  |  |
| 29 | finance_structure_id | bigint [64,0] | YES |  | Optional link to finance structure. When populated, this budget item is part of a cost pool that gets allocated across containers. |
| 30 | scenario_id | integer [32,0] | YES |  |  |
| 31 | category_l1_id | bigint [64,0] | YES |  | Level 1 category (e.g., Revenue, OpEx, CapEx) |
| 32 | category_l2_id | bigint [64,0] | YES |  | Level 2 category (e.g., Land, Vertical, Marketing) |
| 33 | category_l3_id | bigint [64,0] | YES |  | Level 3 category (e.g., Due Diligence, Engineering) |
| 34 | category_l4_id | bigint [64,0] | YES |  | Level 4 category (e.g., Geotechnical, Traffic Study) |
| 35 | start_period | integer [32,0] | YES |  | Starting period number (1, 2, 3, etc.) |
| 36 | periods_to_complete | integer [32,0] | YES |  | Duration in number of periods (renamed from periods) |
| 37 | end_period | integer [32,0] | YES |  | Ending period number (start_period + periods - 1) |
| 38 | escalation_method | character varying(20) | YES |  | How escalation compounds: to_start or through_duration |
| 39 | curve_profile | character varying(20) | YES |  | S-curve shape: standard, front_loaded, or back_loaded |
| 40 | curve_steepness | numeric [5,2] | YES |  | Curve steepness 0-100 (only when timing_method=curve) |
| 41 | scope_override | character varying(100) | YES |  | Force budget item into different scope/container |
| 42 | cost_type | character varying(20) | YES |  | Classification: direct, indirect, soft, or financing |
| 43 | tax_treatment | character varying(20) | YES |  | Tax accounting: capitalizable, deductible, or non_deductible |
| 44 | internal_memo | text | YES |  | Internal notes not included in exports |
| 45 | vendor_name | character varying(200) | YES |  |  |
| 46 | baseline_start_date | date | YES |  |  |
| 47 | baseline_end_date | date | YES |  |  |
| 48 | actual_start_date | date | YES |  |  |
| 49 | actual_end_date | date | YES |  |  |
| 50 | percent_complete | numeric [5,2] | YES |  | Progress tracking 0-100% |
| 51 | status | character varying(20) | YES |  | Work status: not_started, in_progress, completed, or cancelled |
| 52 | is_critical | boolean | YES | false | True if on critical path (CPM computed) |
| 53 | float_days | integer [32,0] | YES |  | Schedule slack in days (CPM computed) |
| 54 | early_start_date | date | YES |  |  |
| 55 | late_finish_date | date | YES |  |  |
| 56 | milestone_id | bigint [64,0] | YES |  |  |
| 57 | budget_version | character varying(20) | YES |  | Version type: original, revised, or forecast |
| 58 | version_as_of_date | date | YES |  |  |
| 59 | funding_draw_pct | numeric [5,2] | YES |  | Percentage drawn from this funding source (0-100) |
| 60 | draw_schedule | character varying(20) | YES |  |  |
| 61 | retention_pct | numeric [5,2] | YES |  | Holdback percentage (0-100) |
| 62 | payment_terms | character varying(50) | YES |  |  |
| 63 | invoice_frequency | character varying(20) | YES |  |  |
| 64 | cost_allocation | character varying(20) | YES |  |  |
| 65 | is_reimbursable | boolean | YES | false |  |
| 66 | allocation_method | character varying(20) | YES |  | How costs allocate across periods: even, curve, or custom |
| 67 | cf_start_flag | boolean | YES | false | Marks cash flow beginning |
| 68 | cf_distribution | character varying(100) | YES |  |  |
| 69 | allocated_total | numeric [18,2] | YES |  | Sum of all period allocations |
| 70 | allocation_variance | numeric [18,2] | YES |  | allocated_total - amount (should be 0) |
| 71 | bid_date | date | YES |  |  |
| 72 | bid_amount | numeric [18,2] | YES |  |  |
| 73 | bid_variance | numeric [18,2] | YES |  | amount - bid_amount |
| 74 | change_order_count | integer [32,0] | YES | 0 |  |
| 75 | change_order_total | numeric [18,2] | YES | 0 |  |
| 76 | approval_status | character varying(20) | YES |  | Approval workflow: pending, approved, or rejected |
| 77 | approved_by | bigint [64,0] | YES |  |  |
| 78 | approval_date | date | YES |  |  |
| 79 | document_count | integer [32,0] | YES | 0 |  |
| 80 | last_modified_by | bigint [64,0] | YES |  |  |
| 81 | last_modified_date | timestamp without time zone | YES |  |  |
| 82 | activity | character varying(50) | YES |  | Budget activity: Acquisition, Planning & Engineering, Development, Operations, Disposition, Financing. Filters available categories via core_category_lifecycle_stages. |
| 84 | new_category_id | bigint [64,0] | YES |  | Temporary column during migration. Will replace category_id after cutover to core_unit_cost_category only. |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_budget_lifecycle_stage | CHECK | CHECK (((activity IS NULL) OR ((activity)::text = ANY ((ARRAY['Acquisition'::character varying, 'Planning & Engineering'::character varying, 'Development'::character varying, 'Operations'::character varying, 'Disposition'::character varying, 'Financing'::character varying])::text[])))) |
| ck_budget_confidence_level | CHECK | CHECK (((confidence_level IS NULL) OR ((confidence_level)::text = ANY ((ARRAY['high'::character varying, 'medium'::character varying, 'low'::character varying, 'guess'::character varying])::text[])))) |
| core_fin_fact_budget_allocation_method_check | CHECK | CHECK (((allocation_method)::text = ANY ((ARRAY['even'::character varying, 'curve'::character varying, 'custom'::character varying])::text[]))) |
| core_fin_fact_budget_approval_status_check | CHECK | CHECK (((approval_status)::text = ANY ((ARRAY['pending'::character varying, 'approved'::character varying, 'rejected'::character varying])::text[]))) |
| core_fin_fact_budget_budget_version_check | CHECK | CHECK (((budget_version)::text = ANY ((ARRAY['original'::character varying, 'revised'::character varying, 'forecast'::character varying])::text[]))) |
| core_fin_fact_budget_cost_allocation_check | CHECK | CHECK (((cost_allocation)::text = ANY ((ARRAY['direct'::character varying, 'shared'::character varying, 'pro_rata'::character varying])::text[]))) |
| core_fin_fact_budget_cost_type_check | CHECK | CHECK (((cost_type)::text = ANY ((ARRAY['direct'::character varying, 'indirect'::character varying, 'soft'::character varying, 'financing'::character varying])::text[]))) |
| core_fin_fact_budget_curve_profile_check | CHECK | CHECK (((curve_profile)::text = ANY ((ARRAY['standard'::character varying, 'front_loaded'::character varying, 'back_loaded'::character varying])::text[]))) |
| core_fin_fact_budget_curve_steepness_check | CHECK | CHECK (((curve_steepness >= (0)::numeric) AND (curve_steepness <= (100)::numeric))) |
| core_fin_fact_budget_draw_schedule_check | CHECK | CHECK (((draw_schedule)::text = ANY ((ARRAY['as_incurred'::character varying, 'monthly'::character varying, 'milestone'::character varying])::text[]))) |
| core_fin_fact_budget_escalation_method_check | CHECK | CHECK (((escalation_method)::text = ANY ((ARRAY['to_start'::character varying, 'through_duration'::character varying])::text[]))) |
| core_fin_fact_budget_funding_draw_pct_check | CHECK | CHECK (((funding_draw_pct >= (0)::numeric) AND (funding_draw_pct <= (100)::numeric))) |
| core_fin_fact_budget_invoice_frequency_check | CHECK | CHECK (((invoice_frequency)::text = ANY ((ARRAY['monthly'::character varying, 'milestone'::character varying, 'completion'::character varying])::text[]))) |
| core_fin_fact_budget_percent_complete_check | CHECK | CHECK (((percent_complete >= (0)::numeric) AND (percent_complete <= (100)::numeric))) |
| core_fin_fact_budget_retention_pct_check | CHECK | CHECK (((retention_pct >= (0)::numeric) AND (retention_pct <= (100)::numeric))) |
| core_fin_fact_budget_status_check | CHECK | CHECK (((status)::text = ANY ((ARRAY['not_started'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'cancelled'::character varying])::text[]))) |
| core_fin_fact_budget_tax_treatment_check | CHECK | CHECK (((tax_treatment)::text = ANY ((ARRAY['capitalizable'::character varying, 'deductible'::character varying, 'non_deductible'::character varying])::text[]))) |
| core_fin_fact_budget_budget_id_fkey | FOREIGN KEY | FOREIGN KEY (budget_id) REFERENCES core_fin_budget_version(budget_id) ON DELETE CASCADE |
| core_fin_fact_budget_category_id_fkey | FOREIGN KEY | FOREIGN KEY (category_id) REFERENCES core_unit_cost_category(category_id) ON DELETE RESTRICT |
| core_fin_fact_budget_curve_id_fkey | FOREIGN KEY | FOREIGN KEY (curve_id) REFERENCES core_fin_curve(curve_id) ON DELETE SET NULL |
| core_fin_fact_budget_finance_structure_id_fkey | FOREIGN KEY | FOREIGN KEY (finance_structure_id) REFERENCES tbl_finance_structure(finance_structure_id) |
| core_fin_fact_budget_funding_id_fkey | FOREIGN KEY | FOREIGN KEY (funding_id) REFERENCES core_fin_funding_source(funding_id) ON DELETE SET NULL |
| core_fin_fact_budget_growth_rate_set_id_fkey | FOREIGN KEY | FOREIGN KEY (growth_rate_set_id) REFERENCES core_fin_growth_rate_sets(set_id) |
| core_fin_fact_budget_scenario_id_fkey | FOREIGN KEY | FOREIGN KEY (scenario_id) REFERENCES tbl_scenario(scenario_id) ON DELETE CASCADE |
| core_fin_fact_budget_uom_code_fkey | FOREIGN KEY | FOREIGN KEY (uom_code) REFERENCES core_fin_uom(uom_code) ON DELETE RESTRICT |
| fk_budget_container | FOREIGN KEY | FOREIGN KEY (division_id) REFERENCES tbl_division(division_id) ON DELETE SET NULL |
| fk_budget_vendor_contact | FOREIGN KEY | FOREIGN KEY (vendor_contact_id) REFERENCES tbl_contacts_legacy(contact_id) ON DELETE SET NULL |
| fk_core_fin_fact_budget_project | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| core_fin_fact_budget_pkey | PRIMARY KEY | PRIMARY KEY (fact_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_fin_fact_budget_budget_id_fkey | budget_id | core_fin_budget_version.budget_id | NO ACTION | CASCADE |
| core_fin_fact_budget_category_id_fkey | category_id | core_unit_cost_category.category_id | NO ACTION | RESTRICT |
| core_fin_fact_budget_curve_id_fkey | curve_id | core_fin_curve.curve_id | NO ACTION | SET NULL |
| core_fin_fact_budget_finance_structure_id_fkey | finance_structure_id | tbl_finance_structure.finance_structure_id | NO ACTION | NO ACTION |
| core_fin_fact_budget_funding_id_fkey | funding_id | core_fin_funding_source.funding_id | NO ACTION | SET NULL |
| core_fin_fact_budget_growth_rate_set_id_fkey | growth_rate_set_id | core_fin_growth_rate_sets.set_id | NO ACTION | NO ACTION |
| core_fin_fact_budget_scenario_id_fkey | scenario_id | tbl_scenario.scenario_id | NO ACTION | CASCADE |
| core_fin_fact_budget_uom_code_fkey | uom_code | core_fin_uom.uom_code | NO ACTION | RESTRICT |
| fk_budget_container | division_id | tbl_division.division_id | NO ACTION | SET NULL |
| fk_budget_vendor_contact | vendor_contact_id | tbl_contacts_legacy.contact_id | NO ACTION | SET NULL |
| fk_core_fin_fact_budget_project | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `core_fin_fact_budget_pkey`

```sql
CREATE UNIQUE INDEX core_fin_fact_budget_pkey ON landscape.core_fin_fact_budget USING btree (fact_id)
```
- `idx_budget_approval_status`

```sql
CREATE INDEX idx_budget_approval_status ON landscape.core_fin_fact_budget USING btree (approval_status)
```
- `idx_budget_fact_category_l1`

```sql
CREATE INDEX idx_budget_fact_category_l1 ON landscape.core_fin_fact_budget USING btree (category_l1_id) WHERE (category_l1_id IS NOT NULL)
```
- `idx_budget_fact_category_l2`

```sql
CREATE INDEX idx_budget_fact_category_l2 ON landscape.core_fin_fact_budget USING btree (category_l2_id) WHERE (category_l2_id IS NOT NULL)
```
- `idx_budget_fact_category_l3`

```sql
CREATE INDEX idx_budget_fact_category_l3 ON landscape.core_fin_fact_budget USING btree (category_l3_id) WHERE (category_l3_id IS NOT NULL)
```
- `idx_budget_fact_category_l4`

```sql
CREATE INDEX idx_budget_fact_category_l4 ON landscape.core_fin_fact_budget USING btree (category_l4_id) WHERE (category_l4_id IS NOT NULL)
```
- `idx_budget_finance_structure`

```sql
CREATE INDEX idx_budget_finance_structure ON landscape.core_fin_fact_budget USING btree (finance_structure_id)
```
- `idx_budget_funding_id`

```sql
CREATE INDEX idx_budget_funding_id ON landscape.core_fin_fact_budget USING btree (funding_id)
```
- `idx_budget_is_critical`

```sql
CREATE INDEX idx_budget_is_critical ON landscape.core_fin_fact_budget USING btree (is_critical) WHERE (is_critical = true)
```
- `idx_budget_lifecycle_stage`

```sql
CREATE INDEX idx_budget_lifecycle_stage ON landscape.core_fin_fact_budget USING btree (activity)
```
- `idx_budget_milestone_id`

```sql
CREATE INDEX idx_budget_milestone_id ON landscape.core_fin_fact_budget USING btree (milestone_id)
```
- `idx_budget_status`

```sql
CREATE INDEX idx_budget_status ON landscape.core_fin_fact_budget USING btree (status)
```
- `idx_core_fin_fact_budget_confidence`

```sql
CREATE INDEX idx_core_fin_fact_budget_confidence ON landscape.core_fin_fact_budget USING btree (confidence_level)
```
- `idx_core_fin_fact_budget_container`

```sql
CREATE INDEX idx_core_fin_fact_budget_container ON landscape.core_fin_fact_budget USING btree (division_id)
```
- `idx_core_fin_fact_budget_periods`

```sql
CREATE INDEX idx_core_fin_fact_budget_periods ON landscape.core_fin_fact_budget USING btree (start_period, end_period) WHERE (start_period IS NOT NULL)
```
- `idx_core_fin_fact_budget_vendor`

```sql
CREATE INDEX idx_core_fin_fact_budget_vendor ON landscape.core_fin_fact_budget USING btree (vendor_contact_id)
```
- `idx_fact_budget_budget_container`

```sql
CREATE INDEX idx_fact_budget_budget_container ON landscape.core_fin_fact_budget USING btree (budget_id, division_id)
```
- `idx_fact_budget_category`

```sql
CREATE INDEX idx_fact_budget_category ON landscape.core_fin_fact_budget USING btree (category_id)
```
- `idx_fact_budget_dates`

```sql
CREATE INDEX idx_fact_budget_dates ON landscape.core_fin_fact_budget USING btree (start_date, end_date)
```
- `idx_fact_budget_division`

```sql
CREATE INDEX idx_fact_budget_division ON landscape.core_fin_fact_budget USING btree (division_id, category_id)
```
- `idx_fact_budget_project_level`

```sql
CREATE INDEX idx_fact_budget_project_level ON landscape.core_fin_fact_budget USING btree (project_id, category_id) WHERE (division_id IS NULL)
```
- `idx_fact_budget_project_scenario`

```sql
CREATE INDEX idx_fact_budget_project_scenario ON landscape.core_fin_fact_budget USING btree (project_id, scenario_id)
```
- `idx_fact_budget_scenario`

```sql
CREATE INDEX idx_fact_budget_scenario ON landscape.core_fin_fact_budget USING btree (scenario_id)
```

#### Triggers

- `trg_budget_calculate_amount`

```sql
CREATE TRIGGER trg_budget_calculate_amount BEFORE INSERT OR UPDATE ON landscape.core_fin_fact_budget FOR EACH ROW EXECUTE FUNCTION trg_calculate_amount()
```
- `trg_budget_calculate_end_period`

```sql
CREATE TRIGGER trg_budget_calculate_end_period BEFORE INSERT OR UPDATE ON landscape.core_fin_fact_budget FOR EACH ROW EXECUTE FUNCTION trg_calculate_end_period()
```

### `core_fin_fact_tags`

- Columns: 9
- Constraints: 3
- Foreign keys: 0
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tag_id | bigint [64,0] | NO |  |  |
| 2 | fact_id | bigint [64,0] | NO |  |  |
| 3 | fact_type | character varying(10) | NO |  |  |
| 4 | tag_name | character varying(50) | NO |  |  |
| 5 | tag_color | character varying(7) | YES |  |  |
| 6 | tag_category | character varying(20) | YES |  |  |
| 7 | is_compact | boolean | YES | false |  |
| 8 | created_by | integer [32,0] | YES |  |  |
| 9 | created_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_fact_tags_fact_type_check | CHECK | CHECK (((fact_type)::text = ANY ((ARRAY['budget'::character varying, 'actual'::character varying])::text[]))) |
| core_fin_fact_tags_pkey | PRIMARY KEY | PRIMARY KEY (tag_id) |
| core_fin_fact_tags_fact_id_fact_type_tag_name_key | UNIQUE | UNIQUE (fact_id, fact_type, tag_name) |

#### Indexes

- `core_fin_fact_tags_fact_id_fact_type_tag_name_key`

```sql
CREATE UNIQUE INDEX core_fin_fact_tags_fact_id_fact_type_tag_name_key ON landscape.core_fin_fact_tags USING btree (fact_id, fact_type, tag_name)
```
- `core_fin_fact_tags_pkey`

```sql
CREATE UNIQUE INDEX core_fin_fact_tags_pkey ON landscape.core_fin_fact_tags USING btree (tag_id)
```
- `idx_fact_tags_category`

```sql
CREATE INDEX idx_fact_tags_category ON landscape.core_fin_fact_tags USING btree (tag_category)
```
- `idx_fact_tags_fact`

```sql
CREATE INDEX idx_fact_tags_fact ON landscape.core_fin_fact_tags USING btree (fact_id, fact_type)
```
- `idx_fact_tags_name`

```sql
CREATE INDEX idx_fact_tags_name ON landscape.core_fin_fact_tags USING btree (tag_name)
```

### `core_fin_funding_source`

- Columns: 7
- Constraints: 2
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | funding_id | bigint [64,0] | NO | nextval('core_fin_funding_source_funding_id_seq'::regclass) |  |
| 2 | type | text | NO |  |  |
| 3 | subclass | text | YES |  |  |
| 4 | rank | integer [32,0] | YES |  |  |
| 5 | lender_party | text | YES |  |  |
| 6 | is_active | boolean | NO | true |  |
| 7 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_funding_source_type_check | CHECK | CHECK ((type = ANY (ARRAY['Equity'::text, 'Debt'::text, 'Bond'::text]))) |
| core_fin_funding_source_pkey | PRIMARY KEY | PRIMARY KEY (funding_id) |

#### Indexes

- `core_fin_funding_source_pkey`

```sql
CREATE UNIQUE INDEX core_fin_funding_source_pkey ON landscape.core_fin_funding_source USING btree (funding_id)
```

### `core_fin_growth_rate_sets`

- Columns: 10
- Constraints: 3
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | set_id | integer [32,0] | NO | nextval('core_fin_growth_rate_sets_set_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | card_type | character varying(50) | NO |  |  |
| 4 | set_name | character varying(100) | NO | 'Custom 1'::character varying |  |
| 5 | is_default | boolean | YES | false |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | updated_at | timestamp with time zone | YES | now() |  |
| 8 | benchmark_id | bigint [64,0] | YES |  |  |
| 9 | market_geography | character varying(100) | YES |  |  |
| 10 | is_global | boolean | YES | false |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_growth_rate_sets_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) |
| core_fin_growth_rate_sets_pkey | PRIMARY KEY | PRIMARY KEY (set_id) |
| core_fin_growth_rate_sets_project_id_card_type_set_name_key | UNIQUE | UNIQUE (project_id, card_type, set_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_fin_growth_rate_sets_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | NO ACTION |

#### Indexes

- `core_fin_growth_rate_sets_pkey`

```sql
CREATE UNIQUE INDEX core_fin_growth_rate_sets_pkey ON landscape.core_fin_growth_rate_sets USING btree (set_id)
```
- `core_fin_growth_rate_sets_project_id_card_type_set_name_key`

```sql
CREATE UNIQUE INDEX core_fin_growth_rate_sets_project_id_card_type_set_name_key ON landscape.core_fin_growth_rate_sets USING btree (project_id, card_type, set_name)
```
- `idx_growth_rate_benchmark`

```sql
CREATE INDEX idx_growth_rate_benchmark ON landscape.core_fin_growth_rate_sets USING btree (benchmark_id)
```
- `idx_growth_rate_geography`

```sql
CREATE INDEX idx_growth_rate_geography ON landscape.core_fin_growth_rate_sets USING btree (market_geography)
```
- `idx_growth_rate_sets_project_card`

```sql
CREATE INDEX idx_growth_rate_sets_project_card ON landscape.core_fin_growth_rate_sets USING btree (project_id, card_type)
```

### `core_fin_growth_rate_steps`

- Columns: 8
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | step_id | integer [32,0] | NO | nextval('core_fin_growth_rate_steps_step_id_seq'::regclass) |  |
| 2 | set_id | integer [32,0] | NO |  |  |
| 3 | step_number | integer [32,0] | NO |  |  |
| 4 | from_period | integer [32,0] | NO |  |  |
| 5 | periods | integer [32,0] | YES |  |  |
| 6 | rate | numeric [5,2] | NO |  |  |
| 7 | thru_period | integer [32,0] | YES |  |  |
| 8 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_growth_rate_steps_set_id_fkey | FOREIGN KEY | FOREIGN KEY (set_id) REFERENCES core_fin_growth_rate_sets(set_id) ON DELETE CASCADE |
| core_fin_growth_rate_steps_pkey | PRIMARY KEY | PRIMARY KEY (step_id) |
| core_fin_growth_rate_steps_set_id_step_number_key | UNIQUE | UNIQUE (set_id, step_number) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_fin_growth_rate_steps_set_id_fkey | set_id | core_fin_growth_rate_sets.set_id | NO ACTION | CASCADE |

#### Indexes

- `core_fin_growth_rate_steps_pkey`

```sql
CREATE UNIQUE INDEX core_fin_growth_rate_steps_pkey ON landscape.core_fin_growth_rate_steps USING btree (step_id)
```
- `core_fin_growth_rate_steps_set_id_step_number_key`

```sql
CREATE UNIQUE INDEX core_fin_growth_rate_steps_set_id_step_number_key ON landscape.core_fin_growth_rate_steps USING btree (set_id, step_number)
```
- `idx_growth_rate_steps_set`

```sql
CREATE INDEX idx_growth_rate_steps_set ON landscape.core_fin_growth_rate_steps USING btree (set_id, step_number)
```

### `core_fin_uom`

- Columns: 5
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | uom_code | text | NO |  |  |
| 2 | name | text | NO |  |  |
| 3 | uom_type | text | NO |  |  |
| 4 | is_active | boolean | NO | true |  |
| 5 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_fin_uom_pkey | PRIMARY KEY | PRIMARY KEY (uom_code) |

#### Indexes

- `core_fin_uom_pkey`

```sql
CREATE UNIQUE INDEX core_fin_uom_pkey ON landscape.core_fin_uom USING btree (uom_code)
```

### `core_item_benchmark_link`

- Columns: 5
- Constraints: 3
- Foreign keys: 2
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | link_id | integer [32,0] | NO | nextval('core_template_benchmark_link_link_id_seq'::regclass) |  |
| 2 | item_id | integer [32,0] | YES |  | Foreign key to cost item (renamed from template_id in migration 0018) |
| 3 | benchmark_id | bigint [64,0] | YES |  |  |
| 4 | is_primary | boolean | YES | false |  |
| 5 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_item_benchmark_link_item_id_fkey | FOREIGN KEY | FOREIGN KEY (item_id) REFERENCES core_unit_cost_item(item_id) ON DELETE CASCADE |
| core_template_benchmark_link_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) ON DELETE CASCADE |
| core_item_benchmark_link_pkey | PRIMARY KEY | PRIMARY KEY (link_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_item_benchmark_link_item_id_fkey | item_id | core_unit_cost_item.item_id | NO ACTION | CASCADE |
| core_template_benchmark_link_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | CASCADE |

#### Indexes

- `core_item_benchmark_link_pkey`

```sql
CREATE UNIQUE INDEX core_item_benchmark_link_pkey ON landscape.core_item_benchmark_link USING btree (link_id)
```
- `idx_template_benchmark_benchmark`

```sql
CREATE INDEX idx_template_benchmark_benchmark ON landscape.core_item_benchmark_link USING btree (benchmark_id)
```
- `idx_template_benchmark_template`

```sql
CREATE INDEX idx_template_benchmark_template ON landscape.core_item_benchmark_link USING btree (item_id)
```

### `core_lookup_item`

- Columns: 7
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | item_id | bigint [64,0] | NO | nextval('core_lookup_item_item_id_seq'::regclass) |  |
| 2 | list_key | text | NO |  |  |
| 3 | sort_order | integer [32,0] | NO | 0 |  |
| 4 | code | text | NO |  |  |
| 5 | label | text | NO |  |  |
| 6 | is_active | boolean | NO | true |  |
| 7 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_lookup_item_list_key_fkey | FOREIGN KEY | FOREIGN KEY (list_key) REFERENCES core_lookup_list(list_key) ON DELETE CASCADE |
| core_lookup_item_pkey | PRIMARY KEY | PRIMARY KEY (item_id) |
| uq_core_lookup_item | UNIQUE | UNIQUE (list_key, code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_lookup_item_list_key_fkey | list_key | core_lookup_list.list_key | NO ACTION | CASCADE |

#### Indexes

- `core_lookup_item_pkey`

```sql
CREATE UNIQUE INDEX core_lookup_item_pkey ON landscape.core_lookup_item USING btree (item_id)
```
- `uq_core_lookup_item`

```sql
CREATE UNIQUE INDEX uq_core_lookup_item ON landscape.core_lookup_item USING btree (list_key, code)
```

### `core_lookup_list`

- Columns: 5
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | list_key | text | NO |  |  |
| 2 | name | text | NO |  |  |
| 3 | description | text | YES |  |  |
| 4 | is_active | boolean | NO | true |  |
| 5 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_lookup_list_pkey | PRIMARY KEY | PRIMARY KEY (list_key) |

#### Indexes

- `core_lookup_list_pkey`

```sql
CREATE UNIQUE INDEX core_lookup_list_pkey ON landscape.core_lookup_list USING btree (list_key)
```

### `core_lookup_vw`

- Columns: 7
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | list_key | text | YES |  |  |
| 2 | list_name | text | YES |  |  |
| 3 | item_id | bigint [64,0] | YES |  |  |
| 4 | sort_order | integer [32,0] | YES |  |  |
| 5 | code | text | YES |  |  |
| 6 | label | text | YES |  |  |
| 7 | is_active | boolean | YES |  |  |

### `core_planning_standards`

- Columns: 8
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | standard_id | integer [32,0] | NO | nextval('core_planning_standards_standard_id_seq'::regclass) |  |
| 2 | standard_name | character varying(100) | NO |  |  |
| 3 | default_planning_efficiency | numeric [5,4] | YES | 0.7500 |  |
| 4 | default_street_row_pct | numeric [5,4] | YES |  |  |
| 5 | default_park_dedication_pct | numeric [5,4] | YES |  |  |
| 6 | is_active | boolean | YES | true |  |
| 7 | created_at | timestamp without time zone | YES | now() |  |
| 8 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_planning_standards_pkey | PRIMARY KEY | PRIMARY KEY (standard_id) |
| core_planning_standards_unique | UNIQUE | UNIQUE (standard_name) |

#### Indexes

- `core_planning_standards_pkey`

```sql
CREATE UNIQUE INDEX core_planning_standards_pkey ON landscape.core_planning_standards USING btree (standard_id)
```
- `core_planning_standards_unique`

```sql
CREATE UNIQUE INDEX core_planning_standards_unique ON landscape.core_planning_standards USING btree (standard_name)
```

### `core_unit_cost_category`

- Columns: 12
- Constraints: 4
- Foreign keys: 1
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | category_id | integer [32,0] | NO | nextval('core_unit_cost_category_category_id_seq'::regclass) |  |
| 2 | parent_id | integer [32,0] | YES |  |  |
| 3 | category_name | character varying(100) | NO |  |  |
| 6 | sort_order | integer [32,0] | YES | 0 |  |
| 7 | is_active | boolean | YES | true |  |
| 8 | created_at | timestamp without time zone | YES | now() |  |
| 9 | updated_at | timestamp without time zone | YES | now() |  |
| 13 | tags | jsonb | YES | '[]'::jsonb | JSONB array of tag strings for flexible categorization (e.g., ["Hard", "Professional Services"]) |
| 14 | account_number | character varying(20) | YES |  | Chart of Accounts code (e.g., 5110, 5200) - from OpEx migration |
| 15 | account_level | smallint [16,0] | YES | 1 | Hierarchy depth: 1=parent, 2=child, 3=grandchild |
| 16 | is_calculated | boolean | YES | false | True if this is a rollup parent that sums children |
| 17 | property_types | ARRAY | YES | ARRAY['MF'::text, 'OFF'::text, 'RET'::text, 'IND'::text, 'HTL'::text, 'MXU'::text, 'LAND'::text] | Array of applicable property type codes |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_tags_is_array | CHECK | CHECK ((jsonb_typeof(tags) = 'array'::text)) |
| core_unit_cost_category_parent_id_fkey | FOREIGN KEY | FOREIGN KEY (parent_id) REFERENCES core_unit_cost_category(category_id) |
| core_unit_cost_category_pkey | PRIMARY KEY | PRIMARY KEY (category_id) |
| core_unit_cost_category_account_number_key | UNIQUE | UNIQUE (account_number) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_unit_cost_category_parent_id_fkey | parent_id | core_unit_cost_category.category_id | NO ACTION | NO ACTION |

#### Indexes

- `core_unit_cost_category_account_number_key`

```sql
CREATE UNIQUE INDEX core_unit_cost_category_account_number_key ON landscape.core_unit_cost_category USING btree (account_number)
```
- `core_unit_cost_category_pkey`

```sql
CREATE UNIQUE INDEX core_unit_cost_category_pkey ON landscape.core_unit_cost_category USING btree (category_id)
```
- `idx_category_account_number`

```sql
CREATE INDEX idx_category_account_number ON landscape.core_unit_cost_category USING btree (account_number) WHERE (account_number IS NOT NULL)
```
- `idx_category_is_calculated`

```sql
CREATE INDEX idx_category_is_calculated ON landscape.core_unit_cost_category USING btree (is_calculated) WHERE (is_calculated = true)
```
- `idx_category_property_types`

```sql
CREATE INDEX idx_category_property_types ON landscape.core_unit_cost_category USING gin (property_types)
```
- `idx_category_tags`

```sql
CREATE INDEX idx_category_tags ON landscape.core_unit_cost_category USING gin (tags)
```
- `idx_unit_cost_category_parent`

```sql
CREATE INDEX idx_unit_cost_category_parent ON landscape.core_unit_cost_category USING btree (parent_id)
```

### `core_unit_cost_category_backup_20260126`

- Columns: 12
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | category_id | integer [32,0] | YES |  |  |
| 2 | parent_id | integer [32,0] | YES |  |  |
| 3 | category_name | character varying(100) | YES |  |  |
| 4 | sort_order | integer [32,0] | YES |  |  |
| 5 | is_active | boolean | YES |  |  |
| 6 | created_at | timestamp without time zone | YES |  |  |
| 7 | updated_at | timestamp without time zone | YES |  |  |
| 8 | tags | jsonb | YES |  |  |
| 9 | account_number | character varying(20) | YES |  |  |
| 10 | account_level | smallint [16,0] | YES |  |  |
| 11 | is_calculated | boolean | YES |  |  |
| 12 | property_types | ARRAY | YES |  |  |

### `core_unit_cost_item`

- Columns: 19
- Constraints: 6
- Foreign keys: 3
- Indexes: 9
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | item_id | integer [32,0] | NO | nextval('core_unit_cost_item_item_id_seq'::regclass) | Primary key for cost items (renamed from template_id in migration 0018) |
| 2 | category_id | integer [32,0] | YES |  |  |
| 3 | item_name | character varying(200) | NO |  | Descriptive line item (e.g., "Monthly Rental of Fence (per LF per mo)") |
| 4 | default_uom_code | character varying(10) | YES |  | Primary unit (MO, EA, LF, etc.) |
| 5 | typical_low_value | numeric [12,2] | YES |  |  |
| 6 | typical_mid_value | numeric [12,2] | YES |  |  |
| 7 | typical_high_value | numeric [12,2] | YES |  |  |
| 8 | market_geography | character varying(100) | YES |  |  |
| 9 | project_type_code | character varying(50) | YES | 'LAND'::character varying |  |
| 10 | last_used_date | date | YES |  |  |
| 11 | usage_count | integer [32,0] | YES | 0 |  |
| 12 | is_active | boolean | YES | true |  |
| 13 | created_from_project_id | integer [32,0] | YES |  |  |
| 14 | created_at | timestamp without time zone | YES | now() |  |
| 15 | updated_at | timestamp without time zone | YES | now() |  |
| 16 | created_from_ai | boolean | YES | false | Indicates the template was generated from an AI benchmark suggestion |
| 17 | quantity | numeric [12,2] | YES |  |  |
| 18 | source | character varying(200) | YES |  |  |
| 19 | as_of_date | date | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_unit_cost_template_project_type_code_check | CHECK | CHECK (((project_type_code)::text = ANY ((ARRAY['DEV'::character varying, 'MF'::character varying, 'OFF'::character varying, 'RET'::character varying, 'IND'::character varying, 'HTL'::character varying, 'MXU'::character varying])::text[]))) |
| core_unit_cost_item_category_id_fkey | FOREIGN KEY | FOREIGN KEY (category_id) REFERENCES core_unit_cost_category(category_id) |
| core_unit_cost_template_created_from_project_id_fkey | FOREIGN KEY | FOREIGN KEY (created_from_project_id) REFERENCES tbl_project(project_id) |
| core_unit_cost_template_default_uom_code_fkey | FOREIGN KEY | FOREIGN KEY (default_uom_code) REFERENCES tbl_measures(measure_code) |
| core_unit_cost_item_pkey | PRIMARY KEY | PRIMARY KEY (item_id) |
| core_unit_cost_template_unique | UNIQUE | UNIQUE (category_id, item_name, default_uom_code, project_type_code, market_geography) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_unit_cost_item_category_id_fkey | category_id | core_unit_cost_category.category_id | NO ACTION | NO ACTION |
| core_unit_cost_template_created_from_project_id_fkey | created_from_project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| core_unit_cost_template_default_uom_code_fkey | default_uom_code | tbl_measures.measure_code | NO ACTION | NO ACTION |

#### Indexes

- `core_unit_cost_item_pkey`

```sql
CREATE UNIQUE INDEX core_unit_cost_item_pkey ON landscape.core_unit_cost_item USING btree (item_id)
```
- `core_unit_cost_template_unique`

```sql
CREATE UNIQUE INDEX core_unit_cost_template_unique ON landscape.core_unit_cost_item USING btree (category_id, item_name, default_uom_code, project_type_code, market_geography)
```
- `idx_unit_cost_item_active`

```sql
CREATE INDEX idx_unit_cost_item_active ON landscape.core_unit_cost_item USING btree (is_active)
```
- `idx_unit_cost_item_category`

```sql
CREATE INDEX idx_unit_cost_item_category ON landscape.core_unit_cost_item USING btree (category_id)
```
- `idx_unit_cost_item_project_type`

```sql
CREATE INDEX idx_unit_cost_item_project_type ON landscape.core_unit_cost_item USING btree (project_type_code)
```
- `idx_unit_cost_template_category_active`

```sql
CREATE INDEX idx_unit_cost_template_category_active ON landscape.core_unit_cost_item USING btree (category_id, is_active)
```
- `idx_unit_cost_template_geography`

```sql
CREATE INDEX idx_unit_cost_template_geography ON landscape.core_unit_cost_item USING btree (market_geography)
```
- `idx_unit_cost_template_name`

```sql
CREATE INDEX idx_unit_cost_template_name ON landscape.core_unit_cost_item USING btree (item_name)
```
- `idx_unit_cost_template_search`

```sql
CREATE INDEX idx_unit_cost_template_search ON landscape.core_unit_cost_item USING gin (to_tsvector('simple'::regconfig, (item_name)::text))
```

### `core_workspace_member`

- Columns: 4
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | workspace_id | bigint [64,0] | NO |  |  |
| 2 | user_id | bigint [64,0] | NO |  |  |
| 3 | role | character varying(50) | NO |  |  |
| 4 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| core_workspace_member_role_check | CHECK | CHECK (((role)::text = ANY ((ARRAY['viewer'::character varying, 'contributor'::character varying, 'manager'::character varying, 'admin'::character varying])::text[]))) |
| core_workspace_member_workspace_id_fkey | FOREIGN KEY | FOREIGN KEY (workspace_id) REFERENCES dms_workspaces(workspace_id) ON DELETE CASCADE |
| core_workspace_member_pkey | PRIMARY KEY | PRIMARY KEY (workspace_id, user_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| core_workspace_member_workspace_id_fkey | workspace_id | dms_workspaces.workspace_id | NO ACTION | CASCADE |

#### Indexes

- `core_workspace_member_pkey`

```sql
CREATE UNIQUE INDEX core_workspace_member_pkey ON landscape.core_workspace_member USING btree (workspace_id, user_id)
```
- `idx_workspace_member_user`

```sql
CREATE INDEX idx_workspace_member_user ON landscape.core_workspace_member USING btree (user_id)
```

### `density_classification`

- Columns: 12
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | density_id | bigint [64,0] | NO |  |  |
| 2 | code | text | NO |  |  |
| 3 | name | text | NO |  |  |
| 4 | family_category | text | NO |  |  |
| 5 | intensity_min | numeric | YES |  |  |
| 6 | intensity_max | numeric | YES |  |  |
| 7 | intensity_metric | text | YES |  |  |
| 8 | description | text | YES |  |  |
| 9 | jurisdiction_notes | text | YES |  |  |
| 10 | active | boolean | YES | true |  |
| 11 | sort_order | integer [32,0] | YES |  |  |
| 12 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| density_classification_pkey | PRIMARY KEY | PRIMARY KEY (density_id) |
| density_classification_code_key | UNIQUE | UNIQUE (code) |

#### Indexes

- `density_classification_code_key`

```sql
CREATE UNIQUE INDEX density_classification_code_key ON landscape.density_classification USING btree (code)
```
- `density_classification_pkey`

```sql
CREATE UNIQUE INDEX density_classification_pkey ON landscape.density_classification USING btree (density_id)
```

### `developer_fees`

- Columns: 14
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('developer_fees_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | fee_type | character varying(50) | NO |  |  |
| 4 | fee_description | character varying(500) | YES |  |  |
| 5 | basis_type | character varying(50) | NO |  |  |
| 6 | basis_value | numeric [12,4] | YES |  |  |
| 7 | calculated_amount | numeric [15,2] | YES |  |  |
| 8 | payment_timing | character varying(200) | YES |  |  |
| 9 | status | character varying(20) | YES | 'pending'::character varying |  |
| 10 | notes | text | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 12 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 13 | timing_start_period | integer [32,0] | YES | 1 |  |
| 14 | timing_duration_periods | integer [32,0] | YES | 1 |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| developer_fees_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| developer_fees_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| developer_fees_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `developer_fees_pkey`

```sql
CREATE UNIQUE INDEX developer_fees_pkey ON landscape.developer_fees USING btree (id)
```
- `idx_developer_fees_project`

```sql
CREATE INDEX idx_developer_fees_project ON landscape.developer_fees USING btree (project_id)
```

### `django_admin_log`

- Columns: 8
- Constraints: 4
- Foreign keys: 2
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO |  |  |
| 2 | action_time | timestamp with time zone | NO |  |  |
| 3 | object_id | text | YES |  |  |
| 4 | object_repr | character varying(200) | NO |  |  |
| 5 | action_flag | smallint [16,0] | NO |  |  |
| 6 | change_message | text | NO |  |  |
| 7 | content_type_id | integer [32,0] | YES |  |  |
| 8 | user_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| django_admin_log_action_flag_check | CHECK | CHECK ((action_flag >= 0)) |
| django_admin_log_content_type_id_c4bce8eb_fk_django_co | FOREIGN KEY | FOREIGN KEY (content_type_id) REFERENCES django_content_type(id) DEFERRABLE INITIALLY DEFERRED |
| django_admin_log_user_id_c564eba6_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| django_admin_log_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| django_admin_log_content_type_id_c4bce8eb_fk_django_co | content_type_id | django_content_type.id | NO ACTION | NO ACTION |
| django_admin_log_user_id_c564eba6_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `django_admin_log_content_type_id_c4bce8eb`

```sql
CREATE INDEX django_admin_log_content_type_id_c4bce8eb ON landscape.django_admin_log USING btree (content_type_id)
```
- `django_admin_log_pkey`

```sql
CREATE UNIQUE INDEX django_admin_log_pkey ON landscape.django_admin_log USING btree (id)
```
- `django_admin_log_user_id_c564eba6`

```sql
CREATE INDEX django_admin_log_user_id_c564eba6 ON landscape.django_admin_log USING btree (user_id)
```

### `django_content_type`

- Columns: 3
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO |  |  |
| 3 | app_label | character varying(100) | NO |  |  |
| 4 | model | character varying(100) | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| django_content_type_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| django_content_type_app_label_model_76bd3d3b_uniq | UNIQUE | UNIQUE (app_label, model) |

#### Indexes

- `django_content_type_app_label_model_76bd3d3b_uniq`

```sql
CREATE UNIQUE INDEX django_content_type_app_label_model_76bd3d3b_uniq ON landscape.django_content_type USING btree (app_label, model)
```
- `django_content_type_pkey`

```sql
CREATE UNIQUE INDEX django_content_type_pkey ON landscape.django_content_type USING btree (id)
```

### `django_migrations`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | app | character varying(255) | NO |  |  |
| 3 | name | character varying(255) | NO |  |  |
| 4 | applied | timestamp with time zone | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| django_migrations_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Indexes

- `django_migrations_pkey`

```sql
CREATE UNIQUE INDEX django_migrations_pkey ON landscape.django_migrations USING btree (id)
```

### `django_session`

- Columns: 3
- Constraints: 1
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | session_key | character varying(40) | NO |  |  |
| 2 | session_data | text | NO |  |  |
| 3 | expire_date | timestamp with time zone | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| django_session_pkey | PRIMARY KEY | PRIMARY KEY (session_key) |

#### Indexes

- `django_session_expire_date_a5c62663`

```sql
CREATE INDEX django_session_expire_date_a5c62663 ON landscape.django_session USING btree (expire_date)
```
- `django_session_pkey`

```sql
CREATE UNIQUE INDEX django_session_pkey ON landscape.django_session USING btree (session_key)
```
- `django_session_session_key_c0390e0f_like`

```sql
CREATE INDEX django_session_session_key_c0390e0f_like ON landscape.django_session USING btree (session_key varchar_pattern_ops)
```

### `dms_assertion`

- Columns: 16
- Constraints: 4
- Foreign keys: 1
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | assertion_id | integer [32,0] | NO | nextval('dms_assertion_assertion_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | doc_id | text | NO |  |  |
| 4 | subject_type | character varying(50) | NO |  | Type of entity: project, phase, parcel, product |
| 5 | subject_ref | text | YES |  |  |
| 6 | metric_key | text | NO |  | Standardized metric name matching schema columns |
| 7 | value_num | numeric [15,4] | YES |  |  |
| 8 | value_text | text | YES |  |  |
| 9 | units | text | YES |  |  |
| 10 | context | character varying(50) | YES |  | Temporal context: proposed, approved, as-built, other |
| 11 | page | integer [32,0] | YES |  |  |
| 12 | bbox | ARRAY | YES |  |  |
| 13 | confidence | numeric [3,2] | NO | 0.95 | Extraction confidence score 0.0-1.0 |
| 14 | source | character varying(50) | YES |  |  |
| 15 | as_of_date | date | YES |  |  |
| 16 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| check_confidence_range | CHECK | CHECK (((confidence >= (0)::numeric) AND (confidence <= (1)::numeric))) |
| check_value_present | CHECK | CHECK (((value_num IS NOT NULL) OR (value_text IS NOT NULL))) |
| dms_assertion_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| dms_assertion_pkey | PRIMARY KEY | PRIMARY KEY (assertion_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| dms_assertion_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `dms_assertion_pkey`

```sql
CREATE UNIQUE INDEX dms_assertion_pkey ON landscape.dms_assertion USING btree (assertion_id)
```
- `idx_assertion_as_of_date`

```sql
CREATE INDEX idx_assertion_as_of_date ON landscape.dms_assertion USING btree (as_of_date)
```
- `idx_assertion_doc_id`

```sql
CREATE INDEX idx_assertion_doc_id ON landscape.dms_assertion USING btree (doc_id)
```
- `idx_assertion_metric_key`

```sql
CREATE INDEX idx_assertion_metric_key ON landscape.dms_assertion USING btree (metric_key)
```
- `idx_assertion_project_id`

```sql
CREATE INDEX idx_assertion_project_id ON landscape.dms_assertion USING btree (project_id)
```
- `idx_assertion_subject_type`

```sql
CREATE INDEX idx_assertion_subject_type ON landscape.dms_assertion USING btree (subject_type)
```

### `dms_attributes`

- Columns: 13
- Constraints: 3
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | attr_id | bigint [64,0] | NO | nextval('dms_attributes_attr_id_seq'::regclass) |  |
| 2 | attr_key | character varying(100) | NO |  |  |
| 3 | attr_name | character varying(255) | NO |  |  |
| 4 | attr_type | character varying(50) | NO |  |  |
| 5 | attr_description | text | YES |  |  |
| 6 | is_required | boolean | YES | false |  |
| 7 | is_searchable | boolean | YES | true |  |
| 8 | validation_rules | jsonb | YES | '{}'::jsonb |  |
| 9 | enum_values | jsonb | YES |  |  |
| 10 | lookup_table | character varying(100) | YES | NULL::character varying |  |
| 11 | display_order | integer [32,0] | YES | 0 |  |
| 12 | created_at | timestamp with time zone | YES | now() |  |
| 13 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| dms_attributes_attr_type_check | CHECK | CHECK (((attr_type)::text = ANY ((ARRAY['text'::character varying, 'number'::character varying, 'date'::character varying, 'boolean'::character varying, 'currency'::character varying, 'enum'::character varying, 'lookup'::character varying, 'tags'::character varying, 'json'::character varying])::text[]))) |
| dms_attributes_pkey | PRIMARY KEY | PRIMARY KEY (attr_id) |
| dms_attributes_attr_key_key | UNIQUE | UNIQUE (attr_key) |

#### Indexes

- `dms_attributes_attr_key_key`

```sql
CREATE UNIQUE INDEX dms_attributes_attr_key_key ON landscape.dms_attributes USING btree (attr_key)
```
- `dms_attributes_pkey`

```sql
CREATE UNIQUE INDEX dms_attributes_pkey ON landscape.dms_attributes USING btree (attr_id)
```

### `dms_extract_queue`

- Columns: 16
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | queue_id | bigint [64,0] | NO | nextval('dms_extract_queue_queue_id_seq'::regclass) |  |
| 2 | doc_id | bigint [64,0] | YES |  |  |
| 3 | extract_type | character varying(50) | NO | 'ocr'::character varying |  |
| 4 | priority | integer [32,0] | YES | 0 |  |
| 5 | status | character varying(50) | YES | 'pending'::character varying | Job status: pending, processing, processed, error, skipped |
| 6 | attempts | integer [32,0] | YES | 0 |  |
| 7 | max_attempts | integer [32,0] | YES | 3 |  |
| 8 | error_message | text | YES |  |  |
| 9 | extracted_data | jsonb | YES | '{}'::jsonb | Full JSON payload from Claude v2.0 unified prompt |
| 10 | created_at | timestamp with time zone | YES | now() |  |
| 11 | processed_at | timestamp with time zone | YES |  |  |
| 12 | review_status | character varying(50) | YES | 'pending'::character varying | Review status: pending, in_review, corrected, committed |
| 13 | overall_confidence | numeric [5,4] | YES | 0.0 | Overall confidence score for the extraction (0.0-1.0) |
| 14 | committed_at | timestamp without time zone | YES |  |  |
| 15 | commit_notes | text | YES |  |  |
| 16 | extracted_text | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| dms_extract_queue_status_check | CHECK | CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'processing'::character varying, 'completed'::character varying, 'failed'::character varying])::text[]))) |
| dms_extract_queue_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| dms_extract_queue_pkey | PRIMARY KEY | PRIMARY KEY (queue_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| dms_extract_queue_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | CASCADE |

#### Indexes

- `dms_extract_queue_pkey`

```sql
CREATE UNIQUE INDEX dms_extract_queue_pkey ON landscape.dms_extract_queue USING btree (queue_id)
```
- `idx_extract_queue_created_at`

```sql
CREATE INDEX idx_extract_queue_created_at ON landscape.dms_extract_queue USING btree (created_at)
```
- `idx_extract_queue_doc_id`

```sql
CREATE INDEX idx_extract_queue_doc_id ON landscape.dms_extract_queue USING btree (doc_id)
```
- `idx_extract_queue_status`

```sql
CREATE INDEX idx_extract_queue_status ON landscape.dms_extract_queue USING btree (status)
```

### `dms_profile_audit`

- Columns: 9
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | audit_id | bigint [64,0] | NO | nextval('dms_profile_audit_audit_id_seq'::regclass) |  |
| 2 | doc_id | bigint [64,0] | YES |  |  |
| 3 | changed_by | bigint [64,0] | YES |  |  |
| 4 | change_type | character varying(50) | NO | 'profile_update'::character varying |  |
| 5 | old_profile_json | jsonb | YES | '{}'::jsonb |  |
| 6 | new_profile_json | jsonb | YES | '{}'::jsonb |  |
| 7 | changed_fields | ARRAY | YES | '{}'::text[] |  |
| 8 | change_reason | text | YES |  |  |
| 9 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| dms_profile_audit_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| dms_profile_audit_pkey | PRIMARY KEY | PRIMARY KEY (audit_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| dms_profile_audit_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | CASCADE |

#### Indexes

- `dms_profile_audit_pkey`

```sql
CREATE UNIQUE INDEX dms_profile_audit_pkey ON landscape.dms_profile_audit USING btree (audit_id)
```

### `dms_template_attributes`

- Columns: 5
- Constraints: 3
- Foreign keys: 2
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | template_id | bigint [64,0] | NO |  |  |
| 2 | attr_id | bigint [64,0] | NO |  |  |
| 3 | is_required | boolean | YES | false |  |
| 4 | default_value | jsonb | YES |  |  |
| 5 | display_order | integer [32,0] | YES | 0 |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| dms_template_attributes_attr_id_fkey | FOREIGN KEY | FOREIGN KEY (attr_id) REFERENCES dms_attributes(attr_id) ON DELETE CASCADE |
| dms_template_attributes_template_id_fkey | FOREIGN KEY | FOREIGN KEY (template_id) REFERENCES dms_templates(template_id) ON DELETE CASCADE |
| dms_template_attributes_pkey | PRIMARY KEY | PRIMARY KEY (template_id, attr_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| dms_template_attributes_attr_id_fkey | attr_id | dms_attributes.attr_id | NO ACTION | CASCADE |
| dms_template_attributes_template_id_fkey | template_id | dms_templates.template_id | NO ACTION | CASCADE |

#### Indexes

- `dms_template_attributes_pkey`

```sql
CREATE UNIQUE INDEX dms_template_attributes_pkey ON landscape.dms_template_attributes USING btree (template_id, attr_id)
```

### `dms_templates`

- Columns: 10
- Constraints: 3
- Foreign keys: 2
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | template_id | bigint [64,0] | NO | nextval('dms_templates_template_id_seq'::regclass) |  |
| 2 | template_name | character varying(255) | NO |  |  |
| 3 | workspace_id | bigint [64,0] | YES |  |  |
| 4 | project_id | bigint [64,0] | YES |  |  |
| 5 | doc_type | character varying(100) | YES |  |  |
| 6 | is_default | boolean | YES | false |  |
| 7 | created_at | timestamp with time zone | YES | now() |  |
| 8 | updated_at | timestamp with time zone | YES | now() |  |
| 9 | doc_type_options | ARRAY | YES |  |  |
| 10 | description | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| dms_templates_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| dms_templates_workspace_id_fkey | FOREIGN KEY | FOREIGN KEY (workspace_id) REFERENCES dms_workspaces(workspace_id) |
| dms_templates_pkey | PRIMARY KEY | PRIMARY KEY (template_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| dms_templates_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| dms_templates_workspace_id_fkey | workspace_id | dms_workspaces.workspace_id | NO ACTION | NO ACTION |

#### Indexes

- `dms_templates_pkey`

```sql
CREATE UNIQUE INDEX dms_templates_pkey ON landscape.dms_templates USING btree (template_id)
```

### `dms_unmapped`

- Columns: 15
- Constraints: 2
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | unmapped_id | integer [32,0] | NO | nextval('dms_unmapped_unmapped_id_seq'::regclass) |  |
| 2 | doc_id | text | NO |  |  |
| 3 | project_id | integer [32,0] | YES |  |  |
| 4 | source_key | text | NO |  |  |
| 5 | raw_value | text | YES |  |  |
| 6 | candidate_targets | ARRAY | YES |  | Array of suggested target columns for manual mapping |
| 7 | page | integer [32,0] | YES |  |  |
| 8 | bbox | ARRAY | YES |  |  |
| 9 | status | character varying(50) | NO | 'new'::character varying |  |
| 10 | mapped_to_table | text | YES |  |  |
| 11 | mapped_to_column | text | YES |  |  |
| 12 | notes | text | YES |  |  |
| 13 | created_at | timestamp with time zone | YES | now() |  |
| 14 | reviewed_at | timestamp with time zone | YES |  |  |
| 15 | reviewed_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| dms_unmapped_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| dms_unmapped_pkey | PRIMARY KEY | PRIMARY KEY (unmapped_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| dms_unmapped_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `dms_unmapped_pkey`

```sql
CREATE UNIQUE INDEX dms_unmapped_pkey ON landscape.dms_unmapped USING btree (unmapped_id)
```
- `idx_unmapped_doc_id`

```sql
CREATE INDEX idx_unmapped_doc_id ON landscape.dms_unmapped USING btree (doc_id)
```
- `idx_unmapped_project_id`

```sql
CREATE INDEX idx_unmapped_project_id ON landscape.dms_unmapped USING btree (project_id)
```
- `idx_unmapped_source_key`

```sql
CREATE INDEX idx_unmapped_source_key ON landscape.dms_unmapped USING btree (source_key)
```
- `idx_unmapped_status`

```sql
CREATE INDEX idx_unmapped_status ON landscape.dms_unmapped USING btree (status)
```

### `dms_workspaces`

- Columns: 7
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | workspace_id | bigint [64,0] | NO | nextval('dms_workspaces_workspace_id_seq'::regclass) |  |
| 2 | workspace_code | character varying(50) | NO |  |  |
| 3 | workspace_name | character varying(255) | NO |  |  |
| 4 | description | text | YES |  |  |
| 5 | is_default | boolean | YES | false |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| dms_workspaces_pkey | PRIMARY KEY | PRIMARY KEY (workspace_id) |
| dms_workspaces_workspace_code_key | UNIQUE | UNIQUE (workspace_code) |

#### Indexes

- `dms_workspaces_pkey`

```sql
CREATE UNIQUE INDEX dms_workspaces_pkey ON landscape.dms_workspaces USING btree (workspace_id)
```
- `dms_workspaces_workspace_code_key`

```sql
CREATE UNIQUE INDEX dms_workspaces_workspace_code_key ON landscape.dms_workspaces USING btree (workspace_code)
```

### `doc_extracted_facts`

- Columns: 10
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | fact_id | uuid | NO | gen_random_uuid() |  |
| 2 | doc_id | bigint [64,0] | NO |  |  |
| 3 | source_version | integer [32,0] | NO | 1 |  |
| 4 | field_name | character varying(100) | NO |  |  |
| 5 | field_value | text | YES |  |  |
| 6 | confidence | numeric [3,2] | YES |  |  |
| 7 | extraction_method | character varying(50) | YES |  |  |
| 8 | superseded_at | timestamp with time zone | YES |  |  |
| 9 | superseded_by_version | integer [32,0] | YES |  |  |
| 10 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| doc_extracted_facts_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| doc_extracted_facts_pkey | PRIMARY KEY | PRIMARY KEY (fact_id) |
| unique_fact_per_version | UNIQUE | UNIQUE (doc_id, source_version, field_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| doc_extracted_facts_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | CASCADE |

#### Indexes

- `doc_extracted_facts_pkey`

```sql
CREATE UNIQUE INDEX doc_extracted_facts_pkey ON landscape.doc_extracted_facts USING btree (fact_id)
```
- `idx_doc_facts_active`

```sql
CREATE INDEX idx_doc_facts_active ON landscape.doc_extracted_facts USING btree (doc_id) WHERE (superseded_at IS NULL)
```
- `idx_doc_facts_doc_id`

```sql
CREATE INDEX idx_doc_facts_doc_id ON landscape.doc_extracted_facts USING btree (doc_id)
```
- `unique_fact_per_version`

```sql
CREATE UNIQUE INDEX unique_fact_per_version ON landscape.doc_extracted_facts USING btree (doc_id, source_version, field_name)
```

### `doc_processing_queue`

- Columns: 11
- Constraints: 3
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | queue_id | integer [32,0] | NO | nextval('doc_processing_queue_queue_id_seq'::regclass) |  |
| 2 | doc_id | bigint [64,0] | NO |  |  |
| 3 | project_id | bigint [64,0] | YES |  |  |
| 4 | status | character varying(50) | YES | 'queued'::character varying |  |
| 5 | priority | integer [32,0] | YES | 0 |  |
| 6 | attempts | integer [32,0] | YES | 0 |  |
| 7 | max_attempts | integer [32,0] | YES | 3 |  |
| 8 | started_at | timestamp without time zone | YES |  |  |
| 9 | completed_at | timestamp without time zone | YES |  |  |
| 10 | error_message | text | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| doc_processing_queue_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| doc_processing_queue_pkey | PRIMARY KEY | PRIMARY KEY (queue_id) |
| doc_processing_queue_doc_id_key | UNIQUE | UNIQUE (doc_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| doc_processing_queue_doc_id_fkey | doc_id | core_doc.doc_id | NO ACTION | CASCADE |

#### Indexes

- `doc_processing_queue_doc_id_key`

```sql
CREATE UNIQUE INDEX doc_processing_queue_doc_id_key ON landscape.doc_processing_queue USING btree (doc_id)
```
- `doc_processing_queue_pkey`

```sql
CREATE UNIQUE INDEX doc_processing_queue_pkey ON landscape.doc_processing_queue USING btree (queue_id)
```
- `doc_processing_queue_priority_idx`

```sql
CREATE INDEX doc_processing_queue_priority_idx ON landscape.doc_processing_queue USING btree (priority DESC, created_at)
```
- `doc_processing_queue_status_idx`

```sql
CREATE INDEX doc_processing_queue_status_idx ON landscape.doc_processing_queue USING btree (status)
```
- `idx_doc_queue_status`

```sql
CREATE INDEX idx_doc_queue_status ON landscape.doc_processing_queue USING btree (status, priority DESC, created_at)
```

### `extraction_commit_snapshot`

- Columns: 10
- Constraints: 4
- Foreign keys: 3
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | snapshot_id | bigint [64,0] | NO |  |  |
| 2 | scope | character varying(50) | NO |  |  |
| 3 | committed_at | timestamp with time zone | NO |  |  |
| 4 | snapshot_data | jsonb | NO |  |  |
| 5 | changes_applied | jsonb | NO |  |  |
| 6 | is_active | boolean | NO |  |  |
| 7 | rolled_back_at | timestamp with time zone | YES |  |  |
| 8 | committed_by | bigint [64,0] | YES |  |  |
| 9 | doc_id | bigint [64,0] | YES |  |  |
| 10 | project_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| extraction_commit_sn_committed_by_cf5a7ab7_fk_auth_user | FOREIGN KEY | FOREIGN KEY (committed_by) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| extraction_commit_sn_project_id_4c8d51cf_fk_tbl_proje | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) DEFERRABLE INITIALLY DEFERRED |
| extraction_commit_snapshot_doc_id_7bc0c667_fk_core_doc_doc_id | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES core_doc(doc_id) DEFERRABLE INITIALLY DEFERRED |
| extraction_commit_snapshot_pkey | PRIMARY KEY | PRIMARY KEY (snapshot_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| extraction_commit_sn_committed_by_cf5a7ab7_fk_auth_user | committed_by | auth_user.id | NO ACTION | NO ACTION |
| extraction_commit_sn_project_id_4c8d51cf_fk_tbl_proje | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| extraction_commit_snapshot_doc_id_7bc0c667_fk_core_doc_doc_id | doc_id | core_doc.doc_id | NO ACTION | NO ACTION |

#### Indexes

- `extraction_commit_snapshot_committed_by_id_aba4412e`

```sql
CREATE INDEX extraction_commit_snapshot_committed_by_id_aba4412e ON landscape.extraction_commit_snapshot USING btree (committed_by)
```
- `extraction_commit_snapshot_doc_id_7bc0c667`

```sql
CREATE INDEX extraction_commit_snapshot_doc_id_7bc0c667 ON landscape.extraction_commit_snapshot USING btree (doc_id)
```
- `extraction_commit_snapshot_pkey`

```sql
CREATE UNIQUE INDEX extraction_commit_snapshot_pkey ON landscape.extraction_commit_snapshot USING btree (snapshot_id)
```
- `extraction_commit_snapshot_project_id_4c8d51cf`

```sql
CREATE INDEX extraction_commit_snapshot_project_id_4c8d51cf ON landscape.extraction_commit_snapshot USING btree (project_id)
```
- `snapshot_project_scope_idx`

```sql
CREATE INDEX snapshot_project_scope_idx ON landscape.extraction_commit_snapshot USING btree (project_id, scope, is_active)
```

### `geography_columns`

- Columns: 7
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | f_table_catalog | name | YES |  |  |
| 2 | f_table_schema | name | YES |  |  |
| 3 | f_table_name | name | YES |  |  |
| 4 | f_geography_column | name | YES |  |  |
| 5 | coord_dimension | integer [32,0] | YES |  |  |
| 6 | srid | integer [32,0] | YES |  |  |
| 7 | type | text | YES |  |  |

### `geometry_columns`

- Columns: 7
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | f_table_catalog | character varying(256) | YES |  |  |
| 2 | f_table_schema | name | YES |  |  |
| 3 | f_table_name | name | YES |  |  |
| 4 | f_geometry_column | name | YES |  |  |
| 5 | coord_dimension | integer [32,0] | YES |  |  |
| 6 | srid | integer [32,0] | YES |  |  |
| 7 | type | character varying(30) | YES |  |  |

### `gis_boundary_history`

- Columns: 7
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | boundary_id | integer [32,0] | NO | nextval('gis_boundary_history_boundary_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | boundary_type | character varying(50) | NO | 'tax_parcel_boundary'::character varying |  |
| 4 | parcels_selected | jsonb | NO |  |  |
| 5 | total_acres | numeric [10,2] | YES |  |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | action_type | character varying(50) | NO | 'boundary_confirmed'::character varying |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| gis_boundary_history_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| gis_boundary_history_pkey | PRIMARY KEY | PRIMARY KEY (boundary_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| gis_boundary_history_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `gis_boundary_history_pkey`

```sql
CREATE UNIQUE INDEX gis_boundary_history_pkey ON landscape.gis_boundary_history USING btree (boundary_id)
```
- `idx_boundary_history_created_at`

```sql
CREATE INDEX idx_boundary_history_created_at ON landscape.gis_boundary_history USING btree (created_at)
```
- `idx_boundary_history_project_id`

```sql
CREATE INDEX idx_boundary_history_project_id ON landscape.gis_boundary_history USING btree (project_id)
```

### `gis_document_ingestion`

- Columns: 12
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | uuid | NO | gen_random_uuid() |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | package_name | text | NO |  |  |
| 4 | document_type | text | NO |  |  |
| 5 | filename | text | NO |  |  |
| 6 | ai_analysis | jsonb | YES |  |  |
| 7 | parcels_created | integer [32,0] | YES | 0 |  |
| 8 | geometry_added | integer [32,0] | YES | 0 |  |
| 9 | status | text | YES | 'processing'::text |  |
| 10 | error_details | text | YES |  |  |
| 11 | processed_at | timestamp with time zone | YES | now() |  |
| 12 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| gis_document_ingestion_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| gis_document_ingestion_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| gis_document_ingestion_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `gis_document_ingestion_pkey`

```sql
CREATE UNIQUE INDEX gis_document_ingestion_pkey ON landscape.gis_document_ingestion USING btree (id)
```
- `idx_gdi_project_package`

```sql
CREATE INDEX idx_gdi_project_package ON landscape.gis_document_ingestion USING btree (project_id, package_name)
```

### `gis_mapping_history`

- Columns: 7
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | mapping_id | integer [32,0] | NO | nextval('gis_mapping_history_mapping_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | mapping_type | character varying(50) | NO | 'assessor_field_mapping'::character varying |  |
| 4 | fields_mapped | jsonb | NO |  |  |
| 5 | source_data | jsonb | YES |  |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | action_type | character varying(50) | NO | 'mapping_applied'::character varying |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| gis_mapping_history_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| gis_mapping_history_pkey | PRIMARY KEY | PRIMARY KEY (mapping_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| gis_mapping_history_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `gis_mapping_history_pkey`

```sql
CREATE UNIQUE INDEX gis_mapping_history_pkey ON landscape.gis_mapping_history USING btree (mapping_id)
```
- `idx_mapping_history_created_at`

```sql
CREATE INDEX idx_mapping_history_created_at ON landscape.gis_mapping_history USING btree (created_at)
```
- `idx_mapping_history_project_id`

```sql
CREATE INDEX idx_mapping_history_project_id ON landscape.gis_mapping_history USING btree (project_id)
```

### `gis_plan_parcel`

- Columns: 11
- Constraints: 3
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | uuid | NO | gen_random_uuid() |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | parcel_id | integer [32,0] | NO |  |  |
| 4 | geom | USER-DEFINED | NO |  |  |
| 5 | source_doc | text | NO |  |  |
| 6 | version | integer [32,0] | NO | 1 |  |
| 7 | confidence | numeric [3,2] | YES | 0.95 |  |
| 8 | valid_from | timestamp with time zone | NO | now() |  |
| 9 | valid_to | timestamp with time zone | YES |  |  |
| 10 | is_active | boolean | NO | true |  |
| 11 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| gis_plan_parcel_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) ON DELETE CASCADE |
| gis_plan_parcel_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| gis_plan_parcel_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| gis_plan_parcel_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | CASCADE |
| gis_plan_parcel_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `gis_plan_parcel_pkey`

```sql
CREATE UNIQUE INDEX gis_plan_parcel_pkey ON landscape.gis_plan_parcel USING btree (id)
```
- `idx_gpp_confidence`

```sql
CREATE INDEX idx_gpp_confidence ON landscape.gis_plan_parcel USING btree (confidence DESC)
```
- `idx_gpp_geom`

```sql
CREATE INDEX idx_gpp_geom ON landscape.gis_plan_parcel USING gist (geom)
```
- `ux_gpp_active`

```sql
CREATE UNIQUE INDEX ux_gpp_active ON landscape.gis_plan_parcel USING btree (project_id, parcel_id) WHERE is_active
```

### `gis_project_boundary`

- Columns: 5
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | uuid | NO | gen_random_uuid() |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | geom | USER-DEFINED | NO |  |  |
| 4 | source | text | NO | 'user_selection'::text |  |
| 5 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| gis_project_boundary_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| gis_project_boundary_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| gis_project_boundary_project_id_key | UNIQUE | UNIQUE (project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| gis_project_boundary_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `gis_project_boundary_pkey`

```sql
CREATE UNIQUE INDEX gis_project_boundary_pkey ON landscape.gis_project_boundary USING btree (id)
```
- `gis_project_boundary_project_id_key`

```sql
CREATE UNIQUE INDEX gis_project_boundary_project_id_key ON landscape.gis_project_boundary USING btree (project_id)
```
- `idx_gpb_geom`

```sql
CREATE INDEX idx_gpb_geom ON landscape.gis_project_boundary USING gist (geom)
```

### `gis_tax_parcel_ref`

- Columns: 7
- Constraints: 1
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tax_parcel_id | text | NO |  |  |
| 2 | geom | USER-DEFINED | NO |  |  |
| 3 | assessor_attrs | jsonb | YES |  |  |
| 4 | source_updated_at | timestamp with time zone | YES |  |  |
| 5 | created_at | timestamp with time zone | NO | now() |  |
| 6 | source | text | YES |  |  |
| 7 | updated_at | timestamp with time zone | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| gis_tax_parcel_ref_pkey | PRIMARY KEY | PRIMARY KEY (tax_parcel_id) |

#### Indexes

- `gis_tax_parcel_ref_pkey`

```sql
CREATE UNIQUE INDEX gis_tax_parcel_ref_pkey ON landscape.gis_tax_parcel_ref USING btree (tax_parcel_id)
```
- `idx_gtpr_geom`

```sql
CREATE INDEX idx_gtpr_geom ON landscape.gis_tax_parcel_ref USING gist (geom)
```

### `glossary_zoning`

- Columns: 33
- Constraints: 6
- Foreign keys: 0
- Indexes: 8
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | glossary_id | uuid | NO | gen_random_uuid() |  |
| 2 | jurisdiction_city | text | NO |  |  |
| 3 | jurisdiction_county | text | YES |  |  |
| 4 | jurisdiction_state | character(2) | NO |  |  |
| 5 | jurisdiction_display | text | NO |  |  |
| 6 | district_code | text | YES |  |  |
| 7 | district_name | text | YES |  |  |
| 8 | family_name | text | NO |  |  |
| 9 | local_code_raw | text | NO |  |  |
| 10 | local_code_canonical | text | YES |  |  |
| 11 | code_token_kind | USER-DEFINED | NO |  |  |
| 12 | code_token_confidence | numeric [3,2] | NO |  |  |
| 13 | mapped_use | text | NO |  |  |
| 14 | allowance | character(1) | NO |  |  |
| 15 | purpose_text | text | YES |  |  |
| 16 | intent_text | text | YES |  |  |
| 17 | conditions_text | text | YES |  |  |
| 18 | development_standards | jsonb | YES |  |  |
| 19 | use_standard_refs | jsonb | YES |  |  |
| 20 | definitions_refs | jsonb | YES |  |  |
| 21 | narrative_section_ref | text | YES |  |  |
| 22 | narrative_src_url | text | YES |  |  |
| 23 | source_doc_url | text | YES |  |  |
| 24 | effective_date | date | YES |  |  |
| 25 | amending_ord_list | jsonb | YES |  |  |
| 26 | is_active | boolean | NO | true |  |
| 27 | created_at | timestamp with time zone | NO | now() |  |
| 28 | updated_at | timestamp with time zone | NO | now() |  |
| 29 | suggested_family | text | YES |  |  |
| 30 | suggested_density_code | text | YES |  |  |
| 31 | suggested_type_code | text | YES |  |  |
| 32 | ai_confidence | numeric | YES |  |  |
| 33 | mapping_status | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| glossary_zoning_ai_confidence_check | CHECK | CHECK (((ai_confidence >= (0)::numeric) AND (ai_confidence <= (1)::numeric))) |
| glossary_zoning_allowance_check | CHECK | CHECK ((allowance = ANY (ARRAY['P'::bpchar, 'C'::bpchar, 'X'::bpchar]))) |
| glossary_zoning_code_token_confidence_check | CHECK | CHECK (((code_token_confidence >= (0)::numeric) AND (code_token_confidence <= (1)::numeric))) |
| glossary_zoning_mapped_use_check | CHECK | CHECK ((char_length(mapped_use) <= 8)) |
| glossary_zoning_mapping_status_check | CHECK | CHECK ((mapping_status = ANY (ARRAY['auto'::text, 'reviewed'::text, 'custom'::text, 'pending'::text]))) |
| glossary_zoning_pkey | PRIMARY KEY | PRIMARY KEY (glossary_id) |

#### Indexes

- `glossary_zoning_pkey`

```sql
CREATE UNIQUE INDEX glossary_zoning_pkey ON landscape.glossary_zoning USING btree (glossary_id)
```
- `idx_gz_allowance`

```sql
CREATE INDEX idx_gz_allowance ON landscape.glossary_zoning USING btree (allowance)
```
- `idx_gz_district`

```sql
CREATE INDEX idx_gz_district ON landscape.glossary_zoning USING btree (district_code)
```
- `idx_gz_fulltext_conditions`

```sql
CREATE INDEX idx_gz_fulltext_conditions ON landscape.glossary_zoning USING gin (to_tsvector('english'::regconfig, COALESCE(conditions_text, ''::text)))
```
- `idx_gz_fulltext_purpose`

```sql
CREATE INDEX idx_gz_fulltext_purpose ON landscape.glossary_zoning USING gin (to_tsvector('english'::regconfig, COALESCE(purpose_text, ''::text)))
```
- `idx_gz_juris`

```sql
CREATE INDEX idx_gz_juris ON landscape.glossary_zoning USING btree (jurisdiction_state, jurisdiction_city)
```
- `idx_gz_mapped_use`

```sql
CREATE INDEX idx_gz_mapped_use ON landscape.glossary_zoning USING btree (mapped_use)
```
- `idx_gz_token_kind`

```sql
CREATE INDEX idx_gz_token_kind ON landscape.glossary_zoning USING btree (code_token_kind)
```

#### Triggers

- `set_timestamp_glossary_zoning`

```sql
CREATE TRIGGER set_timestamp_glossary_zoning BEFORE UPDATE ON landscape.glossary_zoning FOR EACH ROW EXECUTE FUNCTION trg_set_timestamp()
```

### `knowledge_embeddings`

- Columns: 10
- Constraints: 1
- Foreign keys: 0
- Indexes: 8
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | embedding_id | bigint [64,0] | NO |  |  |
| 2 | source_type | character varying(50) | NO |  |  |
| 3 | source_id | bigint [64,0] | NO |  |  |
| 4 | content_text | text | NO |  |  |
| 5 | embedding | USER-DEFINED | YES |  |  |
| 6 | entity_ids | ARRAY | NO |  |  |
| 7 | tags | ARRAY | NO |  |  |
| 8 | created_at | timestamp with time zone | NO |  |  |
| 9 | source_version | integer [32,0] | YES | 1 | Version of source doc when embedding was created |
| 10 | superseded_by_version | integer [32,0] | YES |  | If set, newer version has better embeddings |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| knowledge_embeddings_pkey | PRIMARY KEY | PRIMARY KEY (embedding_id) |

#### Indexes

- `idx_embedding_vector`

```sql
CREATE INDEX idx_embedding_vector ON landscape.knowledge_embeddings USING ivfflat (embedding vector_cosine_ops) WITH (lists='10')
```
- `idx_embeddings_active`

```sql
CREATE INDEX idx_embeddings_active ON landscape.knowledge_embeddings USING btree (source_id, source_type) WHERE (superseded_by_version IS NULL)
```
- `knowledge_e_source__f8627b_idx`

```sql
CREATE INDEX knowledge_e_source__f8627b_idx ON landscape.knowledge_embeddings USING btree (source_type, source_id)
```
- `knowledge_embeddings_created_at_b0e6da24`

```sql
CREATE INDEX knowledge_embeddings_created_at_b0e6da24 ON landscape.knowledge_embeddings USING btree (created_at)
```
- `knowledge_embeddings_pkey`

```sql
CREATE UNIQUE INDEX knowledge_embeddings_pkey ON landscape.knowledge_embeddings USING btree (embedding_id)
```
- `knowledge_embeddings_source_id_0d388137`

```sql
CREATE INDEX knowledge_embeddings_source_id_0d388137 ON landscape.knowledge_embeddings USING btree (source_id)
```
- `knowledge_embeddings_source_type_acd3fae1`

```sql
CREATE INDEX knowledge_embeddings_source_type_acd3fae1 ON landscape.knowledge_embeddings USING btree (source_type)
```
- `knowledge_embeddings_source_type_acd3fae1_like`

```sql
CREATE INDEX knowledge_embeddings_source_type_acd3fae1_like ON landscape.knowledge_embeddings USING btree (source_type varchar_pattern_ops)
```

### `knowledge_entities`

- Columns: 7
- Constraints: 3
- Foreign keys: 1
- Indexes: 9
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | entity_id | bigint [64,0] | NO |  |  |
| 2 | entity_type | character varying(50) | NO |  |  |
| 3 | entity_subtype | character varying(100) | YES |  |  |
| 4 | canonical_name | character varying(500) | NO |  |  |
| 5 | metadata | jsonb | NO |  |  |
| 6 | created_at | timestamp with time zone | NO |  |  |
| 7 | created_by_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| knowledge_entities_created_by_id_49f837e1_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (created_by_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_entities_pkey | PRIMARY KEY | PRIMARY KEY (entity_id) |
| knowledge_entities_canonical_name_key | UNIQUE | UNIQUE (canonical_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| knowledge_entities_created_by_id_49f837e1_fk_auth_user_id | created_by_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `knowledge_e_canonic_a1a8d9_idx`

```sql
CREATE INDEX knowledge_e_canonic_a1a8d9_idx ON landscape.knowledge_entities USING btree (canonical_name)
```
- `knowledge_e_entity__ca2a63_idx`

```sql
CREATE INDEX knowledge_e_entity__ca2a63_idx ON landscape.knowledge_entities USING btree (entity_type, entity_subtype)
```
- `knowledge_entities_canonical_name_b5e564cc_like`

```sql
CREATE INDEX knowledge_entities_canonical_name_b5e564cc_like ON landscape.knowledge_entities USING btree (canonical_name varchar_pattern_ops)
```
- `knowledge_entities_canonical_name_key`

```sql
CREATE UNIQUE INDEX knowledge_entities_canonical_name_key ON landscape.knowledge_entities USING btree (canonical_name)
```
- `knowledge_entities_created_at_4594632c`

```sql
CREATE INDEX knowledge_entities_created_at_4594632c ON landscape.knowledge_entities USING btree (created_at)
```
- `knowledge_entities_created_by_id_49f837e1`

```sql
CREATE INDEX knowledge_entities_created_by_id_49f837e1 ON landscape.knowledge_entities USING btree (created_by_id)
```
- `knowledge_entities_entity_type_59f385fa`

```sql
CREATE INDEX knowledge_entities_entity_type_59f385fa ON landscape.knowledge_entities USING btree (entity_type)
```
- `knowledge_entities_entity_type_59f385fa_like`

```sql
CREATE INDEX knowledge_entities_entity_type_59f385fa_like ON landscape.knowledge_entities USING btree (entity_type varchar_pattern_ops)
```
- `knowledge_entities_pkey`

```sql
CREATE UNIQUE INDEX knowledge_entities_pkey ON landscape.knowledge_entities USING btree (entity_id)
```

### `knowledge_facts`

- Columns: 14
- Constraints: 5
- Foreign keys: 4
- Indexes: 16
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | fact_id | bigint [64,0] | NO |  |  |
| 2 | predicate | character varying(200) | NO |  |  |
| 3 | object_value | text | YES |  |  |
| 4 | valid_from | date | YES |  |  |
| 5 | valid_to | date | YES |  |  |
| 6 | source_type | character varying(50) | NO |  |  |
| 7 | source_id | bigint [64,0] | YES |  |  |
| 8 | confidence_score | numeric [3,2] | NO |  |  |
| 9 | is_current | boolean | NO |  |  |
| 10 | created_at | timestamp with time zone | NO |  |  |
| 11 | created_by_id | bigint [64,0] | YES |  |  |
| 12 | object_entity_id | bigint [64,0] | YES |  |  |
| 13 | subject_entity_id | bigint [64,0] | NO |  |  |
| 14 | superseded_by_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| knowledge_facts_created_by_id_a1fa9f24_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (created_by_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_facts_object_entity_id_ca9e8ef5_fk_knowledge | FOREIGN KEY | FOREIGN KEY (object_entity_id) REFERENCES knowledge_entities(entity_id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_facts_subject_entity_id_0c130194_fk_knowledge | FOREIGN KEY | FOREIGN KEY (subject_entity_id) REFERENCES knowledge_entities(entity_id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_facts_superseded_by_id_eee8e8cb_fk_knowledge | FOREIGN KEY | FOREIGN KEY (superseded_by_id) REFERENCES knowledge_facts(fact_id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_facts_pkey | PRIMARY KEY | PRIMARY KEY (fact_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| knowledge_facts_created_by_id_a1fa9f24_fk_auth_user_id | created_by_id | auth_user.id | NO ACTION | NO ACTION |
| knowledge_facts_object_entity_id_ca9e8ef5_fk_knowledge | object_entity_id | knowledge_entities.entity_id | NO ACTION | NO ACTION |
| knowledge_facts_subject_entity_id_0c130194_fk_knowledge | subject_entity_id | knowledge_entities.entity_id | NO ACTION | NO ACTION |
| knowledge_facts_superseded_by_id_eee8e8cb_fk_knowledge | superseded_by_id | knowledge_facts.fact_id | NO ACTION | NO ACTION |

#### Indexes

- `knowledge_f_is_curr_84f472_idx`

```sql
CREATE INDEX knowledge_f_is_curr_84f472_idx ON landscape.knowledge_facts USING btree (is_current, predicate)
```
- `knowledge_f_object__4cb694_idx`

```sql
CREATE INDEX knowledge_f_object__4cb694_idx ON landscape.knowledge_facts USING btree (object_entity_id)
```
- `knowledge_f_source__dd8340_idx`

```sql
CREATE INDEX knowledge_f_source__dd8340_idx ON landscape.knowledge_facts USING btree (source_type, source_id)
```
- `knowledge_f_subject_0aa246_idx`

```sql
CREATE INDEX knowledge_f_subject_0aa246_idx ON landscape.knowledge_facts USING btree (subject_entity_id, predicate)
```
- `knowledge_f_valid_f_f71d25_idx`

```sql
CREATE INDEX knowledge_f_valid_f_f71d25_idx ON landscape.knowledge_facts USING btree (valid_from, valid_to)
```
- `knowledge_facts_created_at_9f31ebb7`

```sql
CREATE INDEX knowledge_facts_created_at_9f31ebb7 ON landscape.knowledge_facts USING btree (created_at)
```
- `knowledge_facts_created_by_id_a1fa9f24`

```sql
CREATE INDEX knowledge_facts_created_by_id_a1fa9f24 ON landscape.knowledge_facts USING btree (created_by_id)
```
- `knowledge_facts_is_current_3cf05c45`

```sql
CREATE INDEX knowledge_facts_is_current_3cf05c45 ON landscape.knowledge_facts USING btree (is_current)
```
- `knowledge_facts_object_entity_id_ca9e8ef5`

```sql
CREATE INDEX knowledge_facts_object_entity_id_ca9e8ef5 ON landscape.knowledge_facts USING btree (object_entity_id)
```
- `knowledge_facts_pkey`

```sql
CREATE UNIQUE INDEX knowledge_facts_pkey ON landscape.knowledge_facts USING btree (fact_id)
```
- `knowledge_facts_predicate_b00107dd`

```sql
CREATE INDEX knowledge_facts_predicate_b00107dd ON landscape.knowledge_facts USING btree (predicate)
```
- `knowledge_facts_predicate_b00107dd_like`

```sql
CREATE INDEX knowledge_facts_predicate_b00107dd_like ON landscape.knowledge_facts USING btree (predicate varchar_pattern_ops)
```
- `knowledge_facts_source_type_7df43544`

```sql
CREATE INDEX knowledge_facts_source_type_7df43544 ON landscape.knowledge_facts USING btree (source_type)
```
- `knowledge_facts_source_type_7df43544_like`

```sql
CREATE INDEX knowledge_facts_source_type_7df43544_like ON landscape.knowledge_facts USING btree (source_type varchar_pattern_ops)
```
- `knowledge_facts_subject_entity_id_0c130194`

```sql
CREATE INDEX knowledge_facts_subject_entity_id_0c130194 ON landscape.knowledge_facts USING btree (subject_entity_id)
```
- `knowledge_facts_superseded_by_id_eee8e8cb`

```sql
CREATE INDEX knowledge_facts_superseded_by_id_eee8e8cb ON landscape.knowledge_facts USING btree (superseded_by_id)
```

### `knowledge_insights`

- Columns: 14
- Constraints: 3
- Foreign keys: 2
- Indexes: 10
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | insight_id | bigint [64,0] | NO |  |  |
| 2 | insight_type | character varying(50) | NO |  |  |
| 3 | related_entities | ARRAY | NO |  |  |
| 4 | insight_title | character varying(500) | NO |  |  |
| 5 | insight_description | text | NO |  |  |
| 6 | severity | character varying(20) | NO |  |  |
| 7 | supporting_facts | ARRAY | NO |  |  |
| 8 | metadata | jsonb | NO |  |  |
| 9 | acknowledged | boolean | NO |  |  |
| 10 | acknowledged_at | timestamp with time zone | YES |  |  |
| 11 | user_action | text | YES |  |  |
| 12 | created_at | timestamp with time zone | NO |  |  |
| 13 | acknowledged_by_id | bigint [64,0] | YES |  |  |
| 14 | subject_entity_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| knowledge_insights_acknowledged_by_id_68ba1117_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (acknowledged_by_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_insights_subject_entity_id_c3b729c9_fk_knowledge | FOREIGN KEY | FOREIGN KEY (subject_entity_id) REFERENCES knowledge_entities(entity_id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_insights_pkey | PRIMARY KEY | PRIMARY KEY (insight_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| knowledge_insights_acknowledged_by_id_68ba1117_fk_auth_user_id | acknowledged_by_id | auth_user.id | NO ACTION | NO ACTION |
| knowledge_insights_subject_entity_id_c3b729c9_fk_knowledge | subject_entity_id | knowledge_entities.entity_id | NO ACTION | NO ACTION |

#### Indexes

- `knowledge_i_acknowl_7d6024_idx`

```sql
CREATE INDEX knowledge_i_acknowl_7d6024_idx ON landscape.knowledge_insights USING btree (acknowledged, severity)
```
- `knowledge_i_insight_965cc4_idx`

```sql
CREATE INDEX knowledge_i_insight_965cc4_idx ON landscape.knowledge_insights USING btree (insight_type, created_at)
```
- `knowledge_i_subject_c1bcf7_idx`

```sql
CREATE INDEX knowledge_i_subject_c1bcf7_idx ON landscape.knowledge_insights USING btree (subject_entity_id, insight_type)
```
- `knowledge_insights_acknowledged_7eb9491e`

```sql
CREATE INDEX knowledge_insights_acknowledged_7eb9491e ON landscape.knowledge_insights USING btree (acknowledged)
```
- `knowledge_insights_acknowledged_by_id_68ba1117`

```sql
CREATE INDEX knowledge_insights_acknowledged_by_id_68ba1117 ON landscape.knowledge_insights USING btree (acknowledged_by_id)
```
- `knowledge_insights_created_at_9aeca26f`

```sql
CREATE INDEX knowledge_insights_created_at_9aeca26f ON landscape.knowledge_insights USING btree (created_at)
```
- `knowledge_insights_insight_type_4d527f2b`

```sql
CREATE INDEX knowledge_insights_insight_type_4d527f2b ON landscape.knowledge_insights USING btree (insight_type)
```
- `knowledge_insights_insight_type_4d527f2b_like`

```sql
CREATE INDEX knowledge_insights_insight_type_4d527f2b_like ON landscape.knowledge_insights USING btree (insight_type varchar_pattern_ops)
```
- `knowledge_insights_pkey`

```sql
CREATE UNIQUE INDEX knowledge_insights_pkey ON landscape.knowledge_insights USING btree (insight_id)
```
- `knowledge_insights_subject_entity_id_c3b729c9`

```sql
CREATE INDEX knowledge_insights_subject_entity_id_c3b729c9 ON landscape.knowledge_insights USING btree (subject_entity_id)
```

### `knowledge_interactions`

- Columns: 15
- Constraints: 2
- Foreign keys: 1
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | interaction_id | bigint [64,0] | NO |  |  |
| 2 | user_query | text | NO |  |  |
| 3 | query_type | character varying(50) | NO |  |  |
| 4 | query_intent | character varying(200) | YES |  |  |
| 5 | context_entities | ARRAY | NO |  |  |
| 6 | context_facts | ARRAY | NO |  |  |
| 7 | ai_response | text | NO |  |  |
| 8 | response_type | character varying(50) | NO |  |  |
| 9 | confidence_score | numeric [3,2] | YES |  |  |
| 10 | input_tokens | integer [32,0] | NO |  |  |
| 11 | output_tokens | integer [32,0] | NO |  |  |
| 12 | user_feedback | character varying(50) | YES |  |  |
| 13 | user_correction | text | YES |  |  |
| 14 | created_at | timestamp with time zone | NO |  |  |
| 15 | session_id | uuid | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| knowledge_interactio_session_id_7f4000a5_fk_knowledge | FOREIGN KEY | FOREIGN KEY (session_id) REFERENCES knowledge_sessions(session_id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_interactions_pkey | PRIMARY KEY | PRIMARY KEY (interaction_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| knowledge_interactio_session_id_7f4000a5_fk_knowledge | session_id | knowledge_sessions.session_id | NO ACTION | NO ACTION |

#### Indexes

- `knowledge_i_query_i_cc952f_idx`

```sql
CREATE INDEX knowledge_i_query_i_cc952f_idx ON landscape.knowledge_interactions USING btree (query_intent)
```
- `knowledge_i_session_7869de_idx`

```sql
CREATE INDEX knowledge_i_session_7869de_idx ON landscape.knowledge_interactions USING btree (session_id, created_at)
```
- `knowledge_i_user_fe_5c8b7f_idx`

```sql
CREATE INDEX knowledge_i_user_fe_5c8b7f_idx ON landscape.knowledge_interactions USING btree (user_feedback)
```
- `knowledge_interactions_created_at_7a47ab34`

```sql
CREATE INDEX knowledge_interactions_created_at_7a47ab34 ON landscape.knowledge_interactions USING btree (created_at)
```
- `knowledge_interactions_pkey`

```sql
CREATE UNIQUE INDEX knowledge_interactions_pkey ON landscape.knowledge_interactions USING btree (interaction_id)
```
- `knowledge_interactions_session_id_7f4000a5`

```sql
CREATE INDEX knowledge_interactions_session_id_7f4000a5 ON landscape.knowledge_interactions USING btree (session_id)
```

### `knowledge_sessions`

- Columns: 11
- Constraints: 2
- Foreign keys: 1
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | session_id | uuid | NO |  |  |
| 2 | workspace_id | integer [32,0] | YES |  |  |
| 3 | project_id | integer [32,0] | YES |  |  |
| 4 | session_start | timestamp with time zone | NO |  |  |
| 5 | session_end | timestamp with time zone | YES |  |  |
| 6 | loaded_entities | ARRAY | NO |  |  |
| 7 | loaded_facts_count | integer [32,0] | NO |  |  |
| 8 | context_token_count | integer [32,0] | NO |  |  |
| 9 | context_summary | text | YES |  |  |
| 10 | metadata | jsonb | NO |  |  |
| 11 | user_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| knowledge_sessions_user_id_fa891383_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| knowledge_sessions_pkey | PRIMARY KEY | PRIMARY KEY (session_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| knowledge_sessions_user_id_fa891383_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `idx_active_sessions`

```sql
CREATE INDEX idx_active_sessions ON landscape.knowledge_sessions USING btree (session_end) WHERE (session_end IS NULL)
```
- `knowledge_s_session_5b8f09_idx`

```sql
CREATE INDEX knowledge_s_session_5b8f09_idx ON landscape.knowledge_sessions USING btree (session_start)
```
- `knowledge_s_user_id_c64165_idx`

```sql
CREATE INDEX knowledge_s_user_id_c64165_idx ON landscape.knowledge_sessions USING btree (user_id, project_id)
```
- `knowledge_sessions_pkey`

```sql
CREATE UNIQUE INDEX knowledge_sessions_pkey ON landscape.knowledge_sessions USING btree (session_id)
```
- `knowledge_sessions_project_id_5f44cc1b`

```sql
CREATE INDEX knowledge_sessions_project_id_5f44cc1b ON landscape.knowledge_sessions USING btree (project_id)
```
- `knowledge_sessions_session_start_740f4f0a`

```sql
CREATE INDEX knowledge_sessions_session_start_740f4f0a ON landscape.knowledge_sessions USING btree (session_start)
```
- `knowledge_sessions_user_id_fa891383`

```sql
CREATE INDEX knowledge_sessions_user_id_fa891383 ON landscape.knowledge_sessions USING btree (user_id)
```

### `land_use_pricing`

- Columns: 13
- Constraints: 5
- Foreign keys: 2
- Indexes: 8
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('land_use_pricing_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | lu_type_code | character varying(50) | NO |  |  |
| 4 | price_per_unit | numeric [15,2] | YES |  |  |
| 5 | unit_of_measure | character varying(20) | YES |  |  |
| 6 | inflation_type | character varying(50) | YES |  |  |
| 7 | created_at | timestamp with time zone | YES | now() |  |
| 8 | updated_at | timestamp with time zone | YES | now() |  |
| 9 | benchmark_id | bigint [64,0] | YES |  |  |
| 10 | market_geography | character varying(100) | YES |  |  |
| 11 | product_code | character varying(100) | YES |  | Product type code for specific lot products (e.g., 50x120, 40x100) |
| 12 | growth_rate | numeric [5,4] | YES |  | Annual price growth rate (e.g., 0.035 = 3.5% per year) |
| 13 | growth_rate_set_id | integer [32,0] | YES |  | FK to core_fin_growth_rate_sets for stepped/complex growth rates. Use this OR growth_rate field, not both. |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| land_use_pricing_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) |
| land_use_pricing_growth_rate_set_id_fkey | FOREIGN KEY | FOREIGN KEY (growth_rate_set_id) REFERENCES core_fin_growth_rate_sets(set_id) ON DELETE SET NULL |
| land_use_pricing_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| land_use_pricing_project_lu_product_key | UNIQUE | UNIQUE (project_id, lu_type_code, product_code) |
| land_use_pricing_project_type_product_key | UNIQUE | UNIQUE (project_id, lu_type_code, product_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| land_use_pricing_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | NO ACTION |
| land_use_pricing_growth_rate_set_id_fkey | growth_rate_set_id | core_fin_growth_rate_sets.set_id | NO ACTION | SET NULL |

#### Indexes

- `idx_land_use_pricing_benchmark`

```sql
CREATE INDEX idx_land_use_pricing_benchmark ON landscape.land_use_pricing USING btree (benchmark_id)
```
- `idx_land_use_pricing_geography`

```sql
CREATE INDEX idx_land_use_pricing_geography ON landscape.land_use_pricing USING btree (market_geography)
```
- `idx_land_use_pricing_growth_set`

```sql
CREATE INDEX idx_land_use_pricing_growth_set ON landscape.land_use_pricing USING btree (growth_rate_set_id)
```
- `idx_land_use_pricing_project`

```sql
CREATE INDEX idx_land_use_pricing_project ON landscape.land_use_pricing USING btree (project_id)
```
- `idx_land_use_pricing_project_product`

```sql
CREATE INDEX idx_land_use_pricing_project_product ON landscape.land_use_pricing USING btree (project_id, lu_type_code, product_code)
```
- `land_use_pricing_pkey`

```sql
CREATE UNIQUE INDEX land_use_pricing_pkey ON landscape.land_use_pricing USING btree (id)
```
- `land_use_pricing_project_lu_product_key`

```sql
CREATE UNIQUE INDEX land_use_pricing_project_lu_product_key ON landscape.land_use_pricing USING btree (project_id, lu_type_code, product_code)
```
- `land_use_pricing_project_type_product_key`

```sql
CREATE UNIQUE INDEX land_use_pricing_project_type_product_key ON landscape.land_use_pricing USING btree (project_id, lu_type_code, product_code)
```

#### Triggers

- `trg_recalc_on_pricing_change`

```sql
CREATE TRIGGER trg_recalc_on_pricing_change AFTER INSERT OR UPDATE OF growth_rate, price_per_unit ON landscape.land_use_pricing FOR EACH ROW EXECUTE FUNCTION trigger_sale_recalculation()
```

### `landscaper_absorption_detail`

- Columns: 25
- Constraints: 2
- Foreign keys: 1
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | detail_id | bigint [64,0] | NO | nextval('landscaper_absorption_detail_detail_id_seq'::regclass) |  |
| 2 | benchmark_id | bigint [64,0] | YES |  |  |
| 3 | data_source_type | character varying(50) | NO |  |  |
| 4 | source_document_id | integer [32,0] | YES |  |  |
| 5 | extraction_date | timestamp without time zone | YES | now() |  |
| 6 | as_of_period | character varying(20) | YES |  |  |
| 7 | subdivision_name | character varying(200) | YES |  |  |
| 8 | mpc_name | character varying(200) | YES |  |  |
| 9 | city | character varying(100) | YES |  |  |
| 10 | state | character varying(2) | YES |  |  |
| 11 | market_geography | character varying(100) | YES |  |  |
| 12 | annual_sales | integer [32,0] | YES |  |  |
| 13 | monthly_rate | numeric [8,2] | YES |  |  |
| 14 | yoy_change_pct | numeric [6,2] | YES |  |  |
| 15 | lot_size_sf | integer [32,0] | YES |  |  |
| 16 | price_point_low | numeric [12,2] | YES |  |  |
| 17 | price_point_high | numeric [12,2] | YES |  |  |
| 18 | builder_name | character varying(100) | YES |  |  |
| 19 | active_subdivisions_count | integer [32,0] | YES |  |  |
| 20 | product_mix_json | jsonb | YES |  |  |
| 21 | market_tier | character varying(20) | YES |  |  |
| 22 | competitive_supply | character varying(20) | YES |  |  |
| 23 | notes | text | YES |  |  |
| 24 | created_at | timestamp without time zone | YES | now() |  |
| 25 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| landscaper_absorption_detail_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) |
| landscaper_absorption_detail_pkey | PRIMARY KEY | PRIMARY KEY (detail_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| landscaper_absorption_detail_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_landscaper_absorption_benchmark`

```sql
CREATE INDEX idx_landscaper_absorption_benchmark ON landscape.landscaper_absorption_detail USING btree (benchmark_id)
```
- `idx_landscaper_absorption_geography`

```sql
CREATE INDEX idx_landscaper_absorption_geography ON landscape.landscaper_absorption_detail USING btree (market_geography)
```
- `idx_landscaper_absorption_lot_size`

```sql
CREATE INDEX idx_landscaper_absorption_lot_size ON landscape.landscaper_absorption_detail USING btree (lot_size_sf)
```
- `idx_landscaper_absorption_period`

```sql
CREATE INDEX idx_landscaper_absorption_period ON landscape.landscaper_absorption_detail USING btree (as_of_period)
```
- `idx_landscaper_absorption_source`

```sql
CREATE INDEX idx_landscaper_absorption_source ON landscape.landscaper_absorption_detail USING btree (data_source_type)
```
- `landscaper_absorption_detail_pkey`

```sql
CREATE UNIQUE INDEX landscaper_absorption_detail_pkey ON landscape.landscaper_absorption_detail USING btree (detail_id)
```

### `landscaper_activity`

- Columns: 16
- Constraints: 5
- Foreign keys: 1
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | activity_id | integer [32,0] | NO | nextval('landscaper_activity_activity_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | activity_type | character varying(20) | NO |  |  |
| 4 | title | character varying(100) | NO |  |  |
| 5 | summary | text | NO |  |  |
| 6 | status | character varying(20) | NO | 'pending'::character varying |  |
| 7 | confidence | character varying(20) | YES |  |  |
| 8 | link | character varying(255) | YES |  |  |
| 9 | blocked_by | text | YES |  |  |
| 10 | details | jsonb | YES |  |  |
| 11 | highlight_fields | jsonb | YES |  |  |
| 12 | is_read | boolean | NO | false |  |
| 13 | source_type | character varying(50) | YES |  |  |
| 14 | source_id | character varying(100) | YES |  |  |
| 15 | created_at | timestamp with time zone | NO | now() |  |
| 16 | updated_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| landscaper_activity_activity_type_check | CHECK | CHECK (((activity_type)::text = ANY ((ARRAY['status'::character varying, 'decision'::character varying, 'update'::character varying, 'alert'::character varying])::text[]))) |
| landscaper_activity_confidence_check | CHECK | CHECK ((((confidence)::text = ANY ((ARRAY['high'::character varying, 'medium'::character varying, 'low'::character varying])::text[])) OR (confidence IS NULL))) |
| landscaper_activity_status_check | CHECK | CHECK (((status)::text = ANY ((ARRAY['complete'::character varying, 'partial'::character varying, 'blocked'::character varying, 'pending'::character varying])::text[]))) |
| landscaper_activity_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| landscaper_activity_pkey | PRIMARY KEY | PRIMARY KEY (activity_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| landscaper_activity_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_landscaper_activity_created`

```sql
CREATE INDEX idx_landscaper_activity_created ON landscape.landscaper_activity USING btree (project_id, created_at DESC)
```
- `idx_landscaper_activity_project`

```sql
CREATE INDEX idx_landscaper_activity_project ON landscape.landscaper_activity USING btree (project_id)
```
- `idx_landscaper_activity_project_created`

```sql
CREATE INDEX idx_landscaper_activity_project_created ON landscape.landscaper_activity USING btree (project_id, created_at DESC)
```
- `idx_landscaper_activity_project_read`

```sql
CREATE INDEX idx_landscaper_activity_project_read ON landscape.landscaper_activity USING btree (project_id, is_read)
```
- `idx_landscaper_activity_read`

```sql
CREATE INDEX idx_landscaper_activity_read ON landscape.landscaper_activity USING btree (project_id, is_read)
```
- `idx_landscaper_activity_source`

```sql
CREATE INDEX idx_landscaper_activity_source ON landscape.landscaper_activity USING btree (source_type, source_id)
```
- `landscaper_activity_pkey`

```sql
CREATE UNIQUE INDEX landscaper_activity_pkey ON landscape.landscaper_activity USING btree (activity_id)
```

### `landscaper_advice`

- Columns: 9
- Constraints: 3
- Foreign keys: 2
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | advice_id | integer [32,0] | NO |  |  |
| 2 | assumption_key | character varying(100) | NO |  |  |
| 3 | lifecycle_stage | character varying(50) | NO |  |  |
| 4 | suggested_value | numeric [15,4] | NO |  |  |
| 5 | confidence_level | character varying(20) | NO |  |  |
| 6 | created_at | timestamp with time zone | NO |  |  |
| 7 | notes | text | YES |  |  |
| 8 | message_id | character varying(100) | YES |  |  |
| 9 | project_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| landscaper_advice_message_id_5653931d_fk_landscape | FOREIGN KEY | FOREIGN KEY (message_id) REFERENCES landscaper_chat_message(message_id) DEFERRABLE INITIALLY DEFERRED |
| landscaper_advice_project_id_6fb9f5af_fk_tbl_project_project_id | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) DEFERRABLE INITIALLY DEFERRED |
| landscaper_advice_pkey | PRIMARY KEY | PRIMARY KEY (advice_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| landscaper_advice_message_id_5653931d_fk_landscape | message_id | landscaper_chat_message.message_id | NO ACTION | NO ACTION |
| landscaper_advice_project_id_6fb9f5af_fk_tbl_project_project_id | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `landscaper__created_57ae5a_idx`

```sql
CREATE INDEX landscaper__created_57ae5a_idx ON landscape.landscaper_advice USING btree (created_at)
```
- `landscaper__project_948878_idx`

```sql
CREATE INDEX landscaper__project_948878_idx ON landscape.landscaper_advice USING btree (project_id, assumption_key)
```
- `landscaper__project_e8f509_idx`

```sql
CREATE INDEX landscaper__project_e8f509_idx ON landscape.landscaper_advice USING btree (project_id, lifecycle_stage)
```
- `landscaper_advice_message_id_5653931d`

```sql
CREATE INDEX landscaper_advice_message_id_5653931d ON landscape.landscaper_advice USING btree (message_id)
```
- `landscaper_advice_message_id_5653931d_like`

```sql
CREATE INDEX landscaper_advice_message_id_5653931d_like ON landscape.landscaper_advice USING btree (message_id varchar_pattern_ops)
```
- `landscaper_advice_pkey`

```sql
CREATE UNIQUE INDEX landscaper_advice_pkey ON landscape.landscaper_advice USING btree (advice_id)
```
- `landscaper_advice_project_id_6fb9f5af`

```sql
CREATE INDEX landscaper_advice_project_id_6fb9f5af ON landscape.landscaper_advice USING btree (project_id)
```

### `landscaper_chat_embedding`

- Columns: 6
- Constraints: 3
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | uuid | NO | gen_random_uuid() |  |
| 2 | message_id | uuid | NO |  |  |
| 3 | thread_id | uuid | NO |  |  |
| 4 | project_id | integer [32,0] | NO |  |  |
| 5 | embedding | USER-DEFINED | YES |  | OpenAI text-embedding-3-small vector (1536 dimensions) |
| 6 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| landscaper_chat_embedding_message_id_fkey | FOREIGN KEY | FOREIGN KEY (message_id) REFERENCES landscaper_thread_message(id) ON DELETE CASCADE |
| landscaper_chat_embedding_thread_id_fkey | FOREIGN KEY | FOREIGN KEY (thread_id) REFERENCES landscaper_chat_thread(id) ON DELETE CASCADE |
| landscaper_chat_embedding_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| landscaper_chat_embedding_message_id_fkey | message_id | landscaper_thread_message.id | NO ACTION | CASCADE |
| landscaper_chat_embedding_thread_id_fkey | thread_id | landscaper_chat_thread.id | NO ACTION | CASCADE |

#### Indexes

- `idx_chat_embedding_project`

```sql
CREATE INDEX idx_chat_embedding_project ON landscape.landscaper_chat_embedding USING btree (project_id)
```
- `idx_chat_embedding_thread`

```sql
CREATE INDEX idx_chat_embedding_thread ON landscape.landscaper_chat_embedding USING btree (thread_id)
```
- `idx_chat_embedding_vector`

```sql
CREATE INDEX idx_chat_embedding_vector ON landscape.landscaper_chat_embedding USING ivfflat (embedding vector_cosine_ops) WITH (lists='100')
```
- `landscaper_chat_embedding_pkey`

```sql
CREATE UNIQUE INDEX landscaper_chat_embedding_pkey ON landscape.landscaper_chat_embedding USING btree (id)
```

### `landscaper_chat_message`

- Columns: 8
- Constraints: 3
- Foreign keys: 2
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | message_id | character varying(100) | NO |  |  |
| 2 | role | character varying(20) | NO |  |  |
| 3 | content | text | NO |  |  |
| 4 | timestamp | timestamp with time zone | NO |  |  |
| 5 | metadata | jsonb | YES |  |  |
| 6 | project_id | integer [32,0] | NO |  |  |
| 7 | user_id | bigint [64,0] | YES |  |  |
| 8 | active_tab | character varying(20) | YES | 'home'::character varying |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| landscaper_chat_mess_project_id_fc77d355_fk_tbl_proje | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) DEFERRABLE INITIALLY DEFERRED |
| landscaper_chat_message_user_id_263e4adb_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| landscaper_chat_message_pkey | PRIMARY KEY | PRIMARY KEY (message_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| landscaper_chat_mess_project_id_fc77d355_fk_tbl_proje | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| landscaper_chat_message_user_id_263e4adb_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `idx_chat_message_project_tab`

```sql
CREATE INDEX idx_chat_message_project_tab ON landscape.landscaper_chat_message USING btree (project_id, active_tab)
```
- `landscaper__project_0fbb3d_idx`

```sql
CREATE INDEX landscaper__project_0fbb3d_idx ON landscape.landscaper_chat_message USING btree (project_id, "timestamp")
```
- `landscaper__timesta_8945c8_idx`

```sql
CREATE INDEX landscaper__timesta_8945c8_idx ON landscape.landscaper_chat_message USING btree ("timestamp")
```
- `landscaper_chat_message_message_id_27da4cf7_like`

```sql
CREATE INDEX landscaper_chat_message_message_id_27da4cf7_like ON landscape.landscaper_chat_message USING btree (message_id varchar_pattern_ops)
```
- `landscaper_chat_message_pkey`

```sql
CREATE UNIQUE INDEX landscaper_chat_message_pkey ON landscape.landscaper_chat_message USING btree (message_id)
```
- `landscaper_chat_message_project_id_fc77d355`

```sql
CREATE INDEX landscaper_chat_message_project_id_fc77d355 ON landscape.landscaper_chat_message USING btree (project_id)
```
- `landscaper_chat_message_user_id_263e4adb`

```sql
CREATE INDEX landscaper_chat_message_user_id_263e4adb ON landscape.landscaper_chat_message USING btree (user_id)
```

### `landscaper_chat_thread`

- Columns: 10
- Constraints: 2
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | uuid | NO | gen_random_uuid() |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | page_context | character varying(50) | NO |  | Folder/page context: home, property, operations, feasibility, capitalization, reports, documents |
| 4 | subtab_context | character varying(50) | YES |  | Optional subtab context for finer granularity (reserved for future use) |
| 5 | title | character varying(255) | YES |  | Thread title, auto-generated after first AI response, user-editable |
| 6 | summary | text | YES |  | AI-generated summary of thread for cross-thread RAG retrieval |
| 7 | is_active | boolean | YES | true | Whether this thread is currently active (only one per page context) |
| 8 | created_at | timestamp with time zone | YES | now() |  |
| 9 | updated_at | timestamp with time zone | YES | now() |  |
| 10 | closed_at | timestamp with time zone | YES |  | Timestamp when thread was closed (user started new or idle timeout) |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| landscaper_chat_thread_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| landscaper_chat_thread_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| landscaper_chat_thread_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_thread_active`

```sql
CREATE INDEX idx_thread_active ON landscape.landscaper_chat_thread USING btree (project_id, is_active) WHERE (is_active = true)
```
- `idx_thread_page`

```sql
CREATE INDEX idx_thread_page ON landscape.landscaper_chat_thread USING btree (project_id, page_context)
```
- `idx_thread_project`

```sql
CREATE INDEX idx_thread_project ON landscape.landscaper_chat_thread USING btree (project_id)
```
- `idx_thread_updated`

```sql
CREATE INDEX idx_thread_updated ON landscape.landscaper_chat_thread USING btree (project_id, updated_at DESC)
```
- `landscaper_chat_thread_pkey`

```sql
CREATE UNIQUE INDEX landscaper_chat_thread_pkey ON landscape.landscaper_chat_thread USING btree (id)
```

### `landscaper_thread_message`

- Columns: 6
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | uuid | NO | gen_random_uuid() |  |
| 2 | thread_id | uuid | NO |  |  |
| 3 | role | character varying(20) | NO |  | Message sender: user or assistant |
| 4 | content | text | NO |  |  |
| 5 | metadata | jsonb | YES |  | Additional data: tool calls, sources, mutation proposals, etc. |
| 6 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| landscaper_thread_message_role_check | CHECK | CHECK (((role)::text = ANY ((ARRAY['user'::character varying, 'assistant'::character varying])::text[]))) |
| landscaper_thread_message_thread_id_fkey | FOREIGN KEY | FOREIGN KEY (thread_id) REFERENCES landscaper_chat_thread(id) ON DELETE CASCADE |
| landscaper_thread_message_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| landscaper_thread_message_thread_id_fkey | thread_id | landscaper_chat_thread.id | NO ACTION | CASCADE |

#### Indexes

- `idx_message_created`

```sql
CREATE INDEX idx_message_created ON landscape.landscaper_thread_message USING btree (thread_id, created_at)
```
- `idx_message_thread`

```sql
CREATE INDEX idx_message_thread ON landscape.landscaper_thread_message USING btree (thread_id)
```
- `landscaper_thread_message_pkey`

```sql
CREATE UNIQUE INDEX landscaper_thread_message_pkey ON landscape.landscaper_thread_message USING btree (id)
```

### `lkp_building_class`

- Columns: 3
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | code | character varying(10) | NO |  |  |
| 2 | display_name | character varying(50) | NO |  |  |
| 3 | description | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lkp_building_class_pkey | PRIMARY KEY | PRIMARY KEY (code) |

#### Indexes

- `lkp_building_class_pkey`

```sql
CREATE UNIQUE INDEX lkp_building_class_pkey ON landscape.lkp_building_class USING btree (code)
```

### `lkp_buyer_seller_type`

- Columns: 3
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | code | character varying(50) | NO |  |  |
| 2 | display_name | character varying(100) | NO |  |  |
| 3 | sort_order | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lkp_buyer_seller_type_pkey | PRIMARY KEY | PRIMARY KEY (code) |

#### Indexes

- `lkp_buyer_seller_type_pkey`

```sql
CREATE UNIQUE INDEX lkp_buyer_seller_type_pkey ON landscape.lkp_buyer_seller_type USING btree (code)
```

### `lkp_price_status`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | code | character varying(50) | NO |  |  |
| 2 | display_name | character varying(100) | NO |  |  |
| 3 | description | text | YES |  |  |
| 4 | reliability_score | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lkp_price_status_pkey | PRIMARY KEY | PRIMARY KEY (code) |

#### Indexes

- `lkp_price_status_pkey`

```sql
CREATE UNIQUE INDEX lkp_price_status_pkey ON landscape.lkp_price_status USING btree (code)
```

### `lkp_sale_type`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | code | character varying(50) | NO |  |  |
| 2 | display_name | character varying(100) | NO |  |  |
| 3 | description | text | YES |  |  |
| 4 | sort_order | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lkp_sale_type_pkey | PRIMARY KEY | PRIMARY KEY (code) |

#### Indexes

- `lkp_sale_type_pkey`

```sql
CREATE UNIQUE INDEX lkp_sale_type_pkey ON landscape.lkp_sale_type USING btree (code)
```

### `lu_acreage_allocation_type`

- Columns: 8
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | allocation_type_id | integer [32,0] | NO | nextval('lu_acreage_allocation_type_allocation_type_id_seq'::regclass) |  |
| 2 | allocation_type_code | character varying(50) | NO |  |  |
| 3 | allocation_type_name | character varying(100) | NO |  |  |
| 4 | description | text | YES |  |  |
| 5 | is_developable | boolean | YES | false |  |
| 6 | sort_order | integer [32,0] | YES | 0 |  |
| 7 | is_active | boolean | YES | true |  |
| 8 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_acreage_allocation_type_pkey | PRIMARY KEY | PRIMARY KEY (allocation_type_id) |
| lu_acreage_allocation_type_allocation_type_code_key | UNIQUE | UNIQUE (allocation_type_code) |

#### Indexes

- `lu_acreage_allocation_type_allocation_type_code_key`

```sql
CREATE UNIQUE INDEX lu_acreage_allocation_type_allocation_type_code_key ON landscape.lu_acreage_allocation_type USING btree (allocation_type_code)
```
- `lu_acreage_allocation_type_pkey`

```sql
CREATE UNIQUE INDEX lu_acreage_allocation_type_pkey ON landscape.lu_acreage_allocation_type USING btree (allocation_type_id)
```

### `lu_com_spec`

- Columns: 15
- Constraints: 5
- Foreign keys: 2
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | com_spec_id | bigint [64,0] | NO |  |  |
| 2 | type_id | bigint [64,0] | NO |  |  |
| 3 | far_min | numeric [6,2] | YES |  |  |
| 4 | far_max | numeric [6,2] | YES |  |  |
| 5 | cov_max_pct | numeric [5,2] | YES |  |  |
| 6 | pk_per_ksf | numeric [5,2] | YES |  |  |
| 7 | hgt_max_ft | numeric [6,2] | YES |  |  |
| 8 | sb_front_ft | numeric [6,2] | YES |  |  |
| 9 | sb_side_ft | numeric [6,2] | YES |  |  |
| 10 | sb_corner_ft | numeric [6,2] | YES |  |  |
| 11 | sb_rear_ft | numeric [6,2] | YES |  |  |
| 12 | os_min_pct | numeric [5,2] | YES |  |  |
| 13 | notes | text | YES |  |  |
| 14 | eff_date | date | YES |  |  |
| 15 | doc_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_com_spec_cov_max_pct_check | CHECK | CHECK (((cov_max_pct >= (0)::numeric) AND (cov_max_pct <= (100)::numeric))) |
| lu_com_spec_os_min_pct_check | CHECK | CHECK (((os_min_pct >= (0)::numeric) AND (os_min_pct <= (100)::numeric))) |
| lu_com_spec_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES planning_doc(doc_id) ON UPDATE CASCADE ON DELETE SET NULL |
| lu_com_spec_subtype_id_fkey | FOREIGN KEY | FOREIGN KEY (type_id) REFERENCES lu_type(type_id) ON UPDATE CASCADE |
| lu_com_spec_pkey | PRIMARY KEY | PRIMARY KEY (com_spec_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| lu_com_spec_doc_id_fkey | doc_id | planning_doc.doc_id | CASCADE | SET NULL |
| lu_com_spec_subtype_id_fkey | type_id | lu_type.type_id | CASCADE | NO ACTION |

#### Indexes

- `lu_com_spec_pkey`

```sql
CREATE UNIQUE INDEX lu_com_spec_pkey ON landscape.lu_com_spec USING btree (com_spec_id)
```

### `lu_family`

- Columns: 5
- Constraints: 2
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | family_id | bigint [64,0] | NO |  |  |
| 2 | code | text | NO |  |  |
| 3 | name | text | NO |  |  |
| 4 | active | boolean | NO | true |  |
| 5 | notes | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_family_pkey | PRIMARY KEY | PRIMARY KEY (family_id) |
| lu_family_code_key | UNIQUE | UNIQUE (code) |

#### Indexes

- `idx_lu_family_active`

```sql
CREATE INDEX idx_lu_family_active ON landscape.lu_family USING btree (active)
```
- `lu_family_code_key`

```sql
CREATE UNIQUE INDEX lu_family_code_key ON landscape.lu_family USING btree (code)
```
- `lu_family_pkey`

```sql
CREATE UNIQUE INDEX lu_family_pkey ON landscape.lu_family USING btree (family_id)
```

### `lu_lease_status`

- Columns: 5
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | status_code | character varying(50) | NO |  |  |
| 2 | status_name | character varying(100) | NO |  |  |
| 3 | description | text | YES |  |  |
| 4 | affects_occupancy | boolean | YES | true |  |
| 5 | display_order | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_lease_status_pkey | PRIMARY KEY | PRIMARY KEY (status_code) |

#### Indexes

- `lu_lease_status_pkey`

```sql
CREATE UNIQUE INDEX lu_lease_status_pkey ON landscape.lu_lease_status USING btree (status_code)
```

### `lu_lease_type`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | type_code | character varying(50) | NO |  |  |
| 2 | type_name | character varying(100) | NO |  |  |
| 3 | description | text | YES |  |  |
| 4 | display_order | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_lease_type_pkey | PRIMARY KEY | PRIMARY KEY (type_code) |

#### Indexes

- `lu_lease_type_pkey`

```sql
CREATE UNIQUE INDEX lu_lease_type_pkey ON landscape.lu_lease_type USING btree (type_code)
```

### `lu_market`

- Columns: 5
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | market_id | integer [32,0] | NO | nextval('lu_market_market_id_seq'::regclass) |  |
| 2 | market_code | character varying(50) | NO |  |  |
| 3 | market_name | character varying(200) | NO |  |  |
| 4 | state | character varying(2) | YES |  |  |
| 5 | is_active | boolean | YES | true |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_market_pkey | PRIMARY KEY | PRIMARY KEY (market_id) |
| lu_market_market_code_key | UNIQUE | UNIQUE (market_code) |

#### Indexes

- `lu_market_market_code_key`

```sql
CREATE UNIQUE INDEX lu_market_market_code_key ON landscape.lu_market USING btree (market_code)
```
- `lu_market_pkey`

```sql
CREATE UNIQUE INDEX lu_market_pkey ON landscape.lu_market USING btree (market_id)
```

### `lu_media_classification`

- Columns: 11
- Constraints: 4
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | classification_id | integer [32,0] | NO | nextval('lu_media_classification_classification_id_seq'::regclass) |  |
| 2 | classification_code | character varying(50) | NO |  |  |
| 3 | classification_name | character varying(100) | NO |  |  |
| 4 | description | text | YES |  |  |
| 5 | badge_color | character varying(20) | NO |  | Color token for DMS list view badges. Maps to CoreUI CSS variables. |
| 6 | badge_icon | character varying(50) | YES |  |  |
| 7 | sort_order | integer [32,0] | NO | 0 |  |
| 8 | is_active | boolean | NO | true |  |
| 9 | created_at | timestamp with time zone | NO | now() |  |
| 10 | content_intent | character varying(20) | YES |  | What the image represents: visual_asset, data_source, hybrid, decoration, unknown |
| 11 | default_action | character varying(20) | YES |  | Default action for preview modal: save_image, extract_data, both, ignore |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_content_intent | CHECK | CHECK (((content_intent)::text = ANY ((ARRAY['visual_asset'::character varying, 'data_source'::character varying, 'hybrid'::character varying, 'decoration'::character varying, 'unknown'::character varying])::text[]))) |
| chk_default_action | CHECK | CHECK (((default_action)::text = ANY ((ARRAY['save_image'::character varying, 'extract_data'::character varying, 'both'::character varying, 'ignore'::character varying])::text[]))) |
| lu_media_classification_pkey | PRIMARY KEY | PRIMARY KEY (classification_id) |
| lu_media_classification_classification_code_key | UNIQUE | UNIQUE (classification_code) |

#### Indexes

- `lu_media_classification_classification_code_key`

```sql
CREATE UNIQUE INDEX lu_media_classification_classification_code_key ON landscape.lu_media_classification USING btree (classification_code)
```
- `lu_media_classification_pkey`

```sql
CREATE UNIQUE INDEX lu_media_classification_pkey ON landscape.lu_media_classification USING btree (classification_id)
```

### `lu_picklist_display_config`

- Columns: 6
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | config_id | integer [32,0] | NO | nextval('lu_picklist_display_config_config_id_seq'::regclass) |  |
| 2 | list_code | character varying(50) | NO |  |  |
| 3 | context | character varying(50) | NO |  |  |
| 4 | display_format | character varying(20) | NO |  |  |
| 5 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 6 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_picklist_display_config_pkey | PRIMARY KEY | PRIMARY KEY (config_id) |
| lu_picklist_display_config_list_code_context_key | UNIQUE | UNIQUE (list_code, context) |

#### Indexes

- `lu_picklist_display_config_list_code_context_key`

```sql
CREATE UNIQUE INDEX lu_picklist_display_config_list_code_context_key ON landscape.lu_picklist_display_config USING btree (list_code, context)
```
- `lu_picklist_display_config_pkey`

```sql
CREATE UNIQUE INDEX lu_picklist_display_config_pkey ON landscape.lu_picklist_display_config USING btree (config_id)
```

### `lu_property_subtype`

- Columns: 7
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | subtype_id | integer [32,0] | NO | nextval('lu_property_subtype_subtype_id_seq'::regclass) |  |
| 2 | property_type_code | character varying(10) | NO |  |  |
| 3 | subtype_code | character varying(50) | NO |  |  |
| 4 | subtype_name | character varying(100) | NO |  |  |
| 5 | sort_order | integer [32,0] | YES | 0 |  |
| 6 | is_active | boolean | YES | true |  |
| 7 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_property_subtype_pkey | PRIMARY KEY | PRIMARY KEY (subtype_id) |
| lu_property_subtype_property_type_code_subtype_code_key | UNIQUE | UNIQUE (property_type_code, subtype_code) |

#### Indexes

- `lu_property_subtype_pkey`

```sql
CREATE UNIQUE INDEX lu_property_subtype_pkey ON landscape.lu_property_subtype USING btree (subtype_id)
```
- `lu_property_subtype_property_type_code_subtype_code_key`

```sql
CREATE UNIQUE INDEX lu_property_subtype_property_type_code_subtype_code_key ON landscape.lu_property_subtype USING btree (property_type_code, subtype_code)
```

### `lu_recovery_structure`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | structure_code | character varying(50) | NO |  |  |
| 2 | structure_name | character varying(100) | NO |  |  |
| 3 | description | text | YES |  |  |
| 4 | display_order | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_recovery_structure_pkey | PRIMARY KEY | PRIMARY KEY (structure_code) |

#### Indexes

- `lu_recovery_structure_pkey`

```sql
CREATE UNIQUE INDEX lu_recovery_structure_pkey ON landscape.lu_recovery_structure USING btree (structure_code)
```

### `lu_res_spec`

- Columns: 18
- Constraints: 5
- Foreign keys: 2
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | res_spec_id | bigint [64,0] | NO |  |  |
| 2 | type_id | bigint [64,0] | NO |  |  |
| 3 | dua_min | numeric [6,2] | YES |  |  |
| 4 | dua_max | numeric [6,2] | YES |  |  |
| 5 | lot_w_min_ft | numeric [6,2] | YES |  |  |
| 6 | lot_d_min_ft | numeric [6,2] | YES |  |  |
| 7 | lot_area_min_sf | numeric [10,2] | YES |  |  |
| 8 | sb_front_ft | numeric [6,2] | YES |  |  |
| 9 | sb_side_ft | numeric [6,2] | YES |  |  |
| 10 | sb_corner_ft | numeric [6,2] | YES |  |  |
| 11 | sb_rear_ft | numeric [6,2] | YES |  |  |
| 12 | hgt_max_ft | numeric [6,2] | YES |  |  |
| 13 | cov_max_pct | numeric [5,2] | YES |  |  |
| 14 | os_min_pct | numeric [5,2] | YES |  |  |
| 15 | pk_per_unit | numeric [4,2] | YES |  |  |
| 16 | notes | text | YES |  |  |
| 17 | eff_date | date | YES |  |  |
| 18 | doc_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_res_spec_cov_max_pct_check | CHECK | CHECK (((cov_max_pct >= (0)::numeric) AND (cov_max_pct <= (100)::numeric))) |
| lu_res_spec_os_min_pct_check | CHECK | CHECK (((os_min_pct >= (0)::numeric) AND (os_min_pct <= (100)::numeric))) |
| lu_res_spec_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (doc_id) REFERENCES planning_doc(doc_id) ON UPDATE CASCADE ON DELETE SET NULL |
| lu_res_spec_subtype_id_fkey | FOREIGN KEY | FOREIGN KEY (type_id) REFERENCES lu_type(type_id) ON UPDATE CASCADE |
| lu_res_spec_pkey | PRIMARY KEY | PRIMARY KEY (res_spec_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| lu_res_spec_doc_id_fkey | doc_id | planning_doc.doc_id | CASCADE | SET NULL |
| lu_res_spec_subtype_id_fkey | type_id | lu_type.type_id | CASCADE | NO ACTION |

#### Indexes

- `lu_res_spec_pkey`

```sql
CREATE UNIQUE INDEX lu_res_spec_pkey ON landscape.lu_res_spec USING btree (res_spec_id)
```

### `lu_subtype`

- Columns: 9
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | subtype_id | integer [32,0] | NO | nextval('lu_subtype_subtype_id_seq1'::regclass) |  |
| 2 | family_id | integer [32,0] | YES |  |  |
| 3 | code | character varying(20) | NO |  |  |
| 4 | name | character varying(100) | NO |  |  |
| 5 | ord | integer [32,0] | YES | 0 |  |
| 6 | active | boolean | YES | true |  |
| 7 | notes | text | YES |  |  |
| 8 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 9 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_subtype_family_id_fkey1 | FOREIGN KEY | FOREIGN KEY (family_id) REFERENCES lu_family(family_id) ON DELETE CASCADE |
| lu_subtype_pkey1 | PRIMARY KEY | PRIMARY KEY (subtype_id) |
| lu_subtype_family_id_code_key | UNIQUE | UNIQUE (family_id, code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| lu_subtype_family_id_fkey1 | family_id | lu_family.family_id | NO ACTION | CASCADE |

#### Indexes

- `lu_subtype_family_id_code_key`

```sql
CREATE UNIQUE INDEX lu_subtype_family_id_code_key ON landscape.lu_subtype USING btree (family_id, code)
```
- `lu_subtype_pkey1`

```sql
CREATE UNIQUE INDEX lu_subtype_pkey1 ON landscape.lu_subtype USING btree (subtype_id)
```

### `lu_type`

- Columns: 7
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | type_id | bigint [64,0] | NO |  |  |
| 2 | family_id | bigint [64,0] | NO |  |  |
| 3 | code | text | NO |  |  |
| 4 | name | text | NO |  |  |
| 5 | ord | integer [32,0] | YES |  |  |
| 6 | active | boolean | NO | true |  |
| 7 | notes | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| lu_subtype_family_id_fkey | FOREIGN KEY | FOREIGN KEY (family_id) REFERENCES lu_family(family_id) ON UPDATE CASCADE |
| lu_subtype_pkey | PRIMARY KEY | PRIMARY KEY (type_id) |
| lu_subtype_code_key | UNIQUE | UNIQUE (code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| lu_subtype_family_id_fkey | family_id | lu_family.family_id | CASCADE | NO ACTION |

#### Indexes

- `idx_lu_subtype_active`

```sql
CREATE INDEX idx_lu_subtype_active ON landscape.lu_type USING btree (active)
```
- `idx_lu_subtype_family`

```sql
CREATE INDEX idx_lu_subtype_family ON landscape.lu_type USING btree (family_id)
```
- `lu_subtype_code_key`

```sql
CREATE UNIQUE INDEX lu_subtype_code_key ON landscape.lu_type USING btree (code)
```
- `lu_subtype_pkey`

```sql
CREATE UNIQUE INDEX lu_subtype_pkey ON landscape.lu_type USING btree (type_id)
```

### `management_overhead`

- Columns: 12
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('management_overhead_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | item_name | character varying(255) | NO |  |  |
| 4 | amount | numeric [15,2] | NO |  |  |
| 5 | frequency | character varying(20) | YES | 'monthly'::character varying |  |
| 6 | start_period | integer [32,0] | YES | 1 |  |
| 7 | duration_periods | integer [32,0] | YES | 1 |  |
| 8 | container_level | character varying(20) | YES |  |  |
| 9 | container_id | bigint [64,0] | YES |  |  |
| 10 | notes | text | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 12 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| management_overhead_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| management_overhead_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| management_overhead_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_management_overhead_project`

```sql
CREATE INDEX idx_management_overhead_project ON landscape.management_overhead USING btree (project_id)
```
- `management_overhead_pkey`

```sql
CREATE UNIQUE INDEX management_overhead_pkey ON landscape.management_overhead USING btree (id)
```

### `market_activity`

- Columns: 11
- Constraints: 2
- Foreign keys: 0
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('market_activity_id_seq'::regclass) |  |
| 2 | msa_code | character varying(10) | NO |  | Metropolitan Statistical Area code (Census CBSA code). E.g., 38060 for Phoenix-Mesa-Chandler. |
| 3 | source | character varying(50) | NO |  | Data source identifier. E.g., HBACA, Census, MLS, CoStar. |
| 4 | metric_type | character varying(50) | NO |  | Type of market activity metric. E.g., permits, closings, starts, absorptions. |
| 5 | geography_type | character varying(50) | NO |  | Granularity of the geography. E.g., jurisdiction, county, msa, zip, submarket. |
| 6 | geography_name | character varying(100) | NO |  | Name of the geographic area. E.g., Buckeye, Maricopa County, Phoenix MSA. |
| 7 | period_type | character varying(20) | NO |  | Reporting period cadence. E.g., monthly, quarterly, annual. |
| 8 | period_end_date | date | NO |  | End date of the reporting period. Monthly uses last day of month (2025-01-31), quarterly uses last day of quarter (2025-03-31), annual uses Dec 31. |
| 9 | value | integer [32,0] | NO |  | The metric value for this period. Interpretation depends on metric_type. |
| 10 | notes | text | YES |  |  |
| 11 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| market_activity_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| market_activity_msa_code_source_metric_type_geography_type__key | UNIQUE | UNIQUE (msa_code, source, metric_type, geography_type, geography_name, period_end_date) |

#### Indexes

- `idx_market_activity_geo_type`

```sql
CREATE INDEX idx_market_activity_geo_type ON landscape.market_activity USING btree (msa_code, geography_type)
```
- `idx_market_activity_lookup`

```sql
CREATE INDEX idx_market_activity_lookup ON landscape.market_activity USING btree (msa_code, geography_name, period_end_date DESC)
```
- `idx_market_activity_period`

```sql
CREATE INDEX idx_market_activity_period ON landscape.market_activity USING btree (period_end_date DESC)
```
- `idx_market_activity_source`

```sql
CREATE INDEX idx_market_activity_source ON landscape.market_activity USING btree (source, metric_type)
```
- `market_activity_msa_code_source_metric_type_geography_type__key`

```sql
CREATE UNIQUE INDEX market_activity_msa_code_source_metric_type_geography_type__key ON landscape.market_activity USING btree (msa_code, source, metric_type, geography_type, geography_name, period_end_date)
```
- `market_activity_pkey`

```sql
CREATE UNIQUE INDEX market_activity_pkey ON landscape.market_activity USING btree (id)
```

### `market_assumptions`

- Columns: 12
- Constraints: 1
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | integer [32,0] | NO |  |  |
| 2 | commission_basis | text | YES |  | Lookup code from list commission_basis (e.g., NET, GROSS) |
| 3 | demand_unit | text | YES |  | Lookup code from list housing_demand_unit (e.g., UNIT_YR) |
| 4 | uom | text | YES |  | Lookup code from list uom (e.g., LS, SF, UNIT) |
| 5 | updated_at | timestamp with time zone | NO | now() |  |
| 6 | lu_type_code | character varying(50) | YES |  |  |
| 7 | price_per_unit | numeric [15,2] | YES |  |  |
| 8 | unit_of_measure | character varying(20) | YES |  |  |
| 9 | inflation_type | character varying(50) | YES |  |  |
| 10 | dvl_per_year | numeric [15,2] | YES |  | Market factor DVL in dollars per year ($/Yr) |
| 11 | dvl_per_quarter | numeric [15,2] | YES |  | Market factor DVL in dollars per quarter ($/Qtr) |
| 12 | dvl_per_month | numeric [15,2] | YES |  | Market factor DVL in dollars per month ($/Mo) |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| market_assumptions_pkey | PRIMARY KEY | PRIMARY KEY (project_id) |

#### Indexes

- `idx_market_assumptions_dvl_timeseries`

```sql
CREATE INDEX idx_market_assumptions_dvl_timeseries ON landscape.market_assumptions USING btree (project_id, dvl_per_year, dvl_per_quarter, dvl_per_month)
```
- `idx_market_assumptions_project_lutype`

```sql
CREATE INDEX idx_market_assumptions_project_lutype ON landscape.market_assumptions USING btree (project_id, lu_type_code)
```
- `market_assumptions_pkey`

```sql
CREATE UNIQUE INDEX market_assumptions_pkey ON landscape.market_assumptions USING btree (project_id)
```

### `market_competitive_project_exclusions`

- Columns: 5
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('market_competitive_project_exclusions_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | source_project_id | character varying(100) | NO |  | Reference to mkt_new_home_project.source_project_id that was excluded |
| 4 | excluded_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 5 | excluded_reason | character varying(200) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| market_competitive_project_exclusions_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| market_competitive_project_exclusions_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| market_competitive_project_exc_project_id_source_project_id_key | UNIQUE | UNIQUE (project_id, source_project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| market_competitive_project_exclusions_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_exclusions_project`

```sql
CREATE INDEX idx_comp_exclusions_project ON landscape.market_competitive_project_exclusions USING btree (project_id)
```
- `market_competitive_project_exc_project_id_source_project_id_key`

```sql
CREATE UNIQUE INDEX market_competitive_project_exc_project_id_source_project_id_key ON landscape.market_competitive_project_exclusions USING btree (project_id, source_project_id)
```
- `market_competitive_project_exclusions_pkey`

```sql
CREATE UNIQUE INDEX market_competitive_project_exclusions_pkey ON landscape.market_competitive_project_exclusions USING btree (id)
```

### `market_competitive_project_products`

- Columns: 23
- Constraints: 3
- Foreign keys: 2
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('market_competitive_project_products_id_seq'::regclass) |  |
| 2 | competitive_project_id | integer [32,0] | NO |  |  |
| 3 | product_id | integer [32,0] | YES |  | FK to res_lot_product. Nullable if lot width not yet in product library. |
| 4 | lot_width_ft | integer [32,0] | YES |  | Denormalized lot width for display/filtering even if product not linked |
| 5 | lot_dimensions | character varying(20) | YES |  |  |
| 6 | unit_size_min_sf | integer [32,0] | YES |  |  |
| 7 | unit_size_max_sf | integer [32,0] | YES |  |  |
| 8 | unit_size_avg_sf | integer [32,0] | YES |  |  |
| 9 | price_min | numeric [12,2] | YES |  |  |
| 10 | price_max | numeric [12,2] | YES |  |  |
| 11 | price_avg | numeric [12,2] | YES |  |  |
| 12 | price_per_sf_avg | numeric [8,2] | YES |  |  |
| 13 | units_planned | integer [32,0] | YES |  |  |
| 14 | units_sold | integer [32,0] | YES |  |  |
| 15 | units_remaining | integer [32,0] | YES |  |  |
| 16 | qmi_count | integer [32,0] | YES |  |  |
| 17 | sales_rate_monthly | numeric [6,2] | YES |  |  |
| 18 | sales_rate_3m_avg | numeric [6,2] | YES |  |  |
| 19 | sales_rate_6m_avg | numeric [6,2] | YES |  |  |
| 20 | mos_vdl | numeric [6,2] | YES |  | Months of Supply at Vacant Developed Lot stage |
| 21 | mos_inventory | numeric [6,2] | YES |  |  |
| 22 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 23 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| market_competitive_project_products_competitive_project_id_fkey | FOREIGN KEY | FOREIGN KEY (competitive_project_id) REFERENCES market_competitive_projects(id) ON DELETE CASCADE |
| market_competitive_project_products_product_id_fkey | FOREIGN KEY | FOREIGN KEY (product_id) REFERENCES res_lot_product(product_id) ON DELETE SET NULL |
| market_competitive_project_products_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| market_competitive_project_products_competitive_project_id_fkey | competitive_project_id | market_competitive_projects.id | NO ACTION | CASCADE |
| market_competitive_project_products_product_id_fkey | product_id | res_lot_product.product_id | NO ACTION | SET NULL |

#### Indexes

- `idx_comp_products_competitive_project`

```sql
CREATE INDEX idx_comp_products_competitive_project ON landscape.market_competitive_project_products USING btree (competitive_project_id)
```
- `idx_comp_products_lot_width`

```sql
CREATE INDEX idx_comp_products_lot_width ON landscape.market_competitive_project_products USING btree (lot_width_ft)
```
- `idx_comp_products_project_product`

```sql
CREATE UNIQUE INDEX idx_comp_products_project_product ON landscape.market_competitive_project_products USING btree (competitive_project_id, product_id) WHERE (product_id IS NOT NULL)
```
- `idx_comp_products_project_width`

```sql
CREATE UNIQUE INDEX idx_comp_products_project_width ON landscape.market_competitive_project_products USING btree (competitive_project_id, lot_width_ft) WHERE ((product_id IS NULL) AND (lot_width_ft IS NOT NULL))
```
- `market_competitive_project_products_pkey`

```sql
CREATE UNIQUE INDEX market_competitive_project_products_pkey ON landscape.market_competitive_project_products USING btree (id)
```

#### Triggers

- `trigger_update_market_comp_products_timestamp`

```sql
CREATE TRIGGER trigger_update_market_comp_products_timestamp BEFORE UPDATE ON landscape.market_competitive_project_products FOR EACH ROW EXECUTE FUNCTION update_market_comp_products_timestamp()
```

### `market_competitive_projects`

- Columns: 22
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('market_competitive_projects_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | master_plan_name | character varying(200) | YES |  |  |
| 4 | comp_name | character varying(200) | NO |  |  |
| 5 | builder_name | character varying(200) | YES |  |  |
| 6 | comp_address | text | YES |  |  |
| 7 | latitude | numeric [10,8] | YES |  |  |
| 8 | longitude | numeric [11,8] | YES |  |  |
| 9 | city | character varying(100) | YES |  |  |
| 10 | zip_code | character varying(10) | YES |  |  |
| 11 | total_units | integer [32,0] | YES |  |  |
| 12 | price_min | numeric [15,2] | YES |  |  |
| 13 | price_max | numeric [15,2] | YES |  |  |
| 14 | absorption_rate_monthly | numeric [8,2] | YES |  |  |
| 15 | status | character varying(50) | YES | 'selling'::character varying |  |
| 16 | data_source | character varying(50) | YES | 'manual'::character varying | Source: manual, Zonda, landscaper_ai, mls, public_records |
| 17 | source_url | text | YES |  |  |
| 18 | notes | text | YES |  |  |
| 19 | source_project_id | character varying(100) | YES |  | Reference to mkt_new_home_project.source_project_id for Zonda-sourced data |
| 20 | effective_date | date | YES |  | Date of the Zonda snapshot used (from mkt_new_home_project.effective_date) |
| 21 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 22 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| market_competitive_projects_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| market_competitive_projects_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| market_competitive_projects_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_market_comps_project`

```sql
CREATE INDEX idx_market_comps_project ON landscape.market_competitive_projects USING btree (project_id)
```
- `idx_market_comps_project_source_unique`

```sql
CREATE UNIQUE INDEX idx_market_comps_project_source_unique ON landscape.market_competitive_projects USING btree (project_id, source_project_id) WHERE (source_project_id IS NOT NULL)
```
- `idx_market_comps_source_project`

```sql
CREATE INDEX idx_market_comps_source_project ON landscape.market_competitive_projects USING btree (source_project_id)
```
- `market_competitive_projects_pkey`

```sql
CREATE UNIQUE INDEX market_competitive_projects_pkey ON landscape.market_competitive_projects USING btree (id)
```

#### Triggers

- `trigger_update_market_comp_timestamp`

```sql
CREATE TRIGGER trigger_update_market_comp_timestamp BEFORE UPDATE ON landscape.market_competitive_projects FOR EACH ROW EXECUTE FUNCTION update_market_comp_timestamp()
```

### `mkt_data_source_registry`

- Columns: 18
- Constraints: 2
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | source_id | integer [32,0] | NO |  |  |
| 2 | source_code | character varying(50) | NO |  |  |
| 3 | source_name | character varying(200) | NO |  |  |
| 4 | source_type | character varying(50) | NO |  |  |
| 5 | collection_method | text | YES |  |  |
| 6 | update_frequency | character varying(50) | YES |  |  |
| 7 | typical_lag_days | integer [32,0] | YES |  |  |
| 8 | coverage_geography | character varying(200) | YES |  |  |
| 9 | coverage_description | text | YES |  |  |
| 10 | field_definitions | jsonb | NO |  |  |
| 11 | known_limitations | text | YES |  |  |
| 12 | caveats | text | YES |  |  |
| 13 | is_authoritative_for | jsonb | NO |  |  |
| 14 | website_url | text | YES |  |  |
| 15 | documentation_url | text | YES |  |  |
| 16 | is_active | boolean | NO |  |  |
| 17 | created_at | timestamp with time zone | NO |  |  |
| 18 | updated_at | timestamp with time zone | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| mkt_data_source_registry_pkey | PRIMARY KEY | PRIMARY KEY (source_id) |
| mkt_data_source_registry_source_code_key | UNIQUE | UNIQUE (source_code) |

#### Indexes

- `mkt_data_source_registry_pkey`

```sql
CREATE UNIQUE INDEX mkt_data_source_registry_pkey ON landscape.mkt_data_source_registry USING btree (source_id)
```
- `mkt_data_source_registry_source_code_609b59ab_like`

```sql
CREATE INDEX mkt_data_source_registry_source_code_609b59ab_like ON landscape.mkt_data_source_registry USING btree (source_code varchar_pattern_ops)
```
- `mkt_data_source_registry_source_code_key`

```sql
CREATE UNIQUE INDEX mkt_data_source_registry_source_code_key ON landscape.mkt_data_source_registry USING btree (source_code)
```

### `mkt_new_home_project`

- Columns: 101
- Constraints: 3
- Foreign keys: 1
- Indexes: 15
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | record_id | bigint [64,0] | NO |  |  |
| 2 | source_project_id | character varying(100) | YES |  |  |
| 3 | source_subdivision_id | character varying(100) | YES |  |  |
| 4 | effective_date | date | NO |  |  |
| 5 | source_file | character varying(200) | YES |  |  |
| 6 | survey_period | character varying(20) | YES |  |  |
| 7 | project_name | character varying(200) | NO |  |  |
| 8 | master_plan_name | character varying(200) | YES |  |  |
| 9 | master_plan_id | character varying(50) | YES |  |  |
| 10 | master_plan_developer | character varying(200) | YES |  |  |
| 11 | builder_name | character varying(200) | YES |  |  |
| 12 | parent_builder | character varying(200) | YES |  |  |
| 13 | status | character varying(30) | YES |  |  |
| 14 | product_type | character varying(50) | YES |  |  |
| 15 | product_style | character varying(50) | YES |  |  |
| 16 | is_active_adult | boolean | NO |  |  |
| 17 | characteristics | text | YES |  |  |
| 18 | lot_size_sf | integer [32,0] | YES |  |  |
| 19 | lot_width_ft | integer [32,0] | YES |  |  |
| 20 | lot_depth_ft | integer [32,0] | YES |  |  |
| 21 | lot_dimensions | character varying(20) | YES |  |  |
| 22 | unit_size_min_sf | integer [32,0] | YES |  |  |
| 23 | unit_size_max_sf | integer [32,0] | YES |  |  |
| 24 | unit_size_avg_sf | integer [32,0] | YES |  |  |
| 25 | price_min | numeric [12,2] | YES |  |  |
| 26 | price_max | numeric [12,2] | YES |  |  |
| 27 | price_avg | numeric [12,2] | YES |  |  |
| 28 | price_per_sf_avg | numeric [8,2] | YES |  |  |
| 29 | price_change_date | date | YES |  |  |
| 30 | units_planned | integer [32,0] | YES |  |  |
| 31 | units_sold | integer [32,0] | YES |  |  |
| 32 | units_remaining | integer [32,0] | YES |  |  |
| 33 | qmi_count | integer [32,0] | YES |  |  |
| 34 | open_date | date | YES |  |  |
| 35 | sold_out_date | date | YES |  |  |
| 36 | sales_rate_monthly | numeric [6,2] | YES |  |  |
| 37 | sales_rate_3m_avg | numeric [6,2] | YES |  |  |
| 38 | sales_rate_6m_avg | numeric [6,2] | YES |  |  |
| 39 | sales_rate_12m_avg | numeric [6,2] | YES |  |  |
| 40 | sales_change_date | date | YES |  |  |
| 41 | annual_starts | integer [32,0] | YES |  |  |
| 42 | annual_closings | integer [32,0] | YES |  |  |
| 43 | quarterly_starts | integer [32,0] | YES |  |  |
| 44 | quarterly_closings | integer [32,0] | YES |  |  |
| 45 | pipeline_excavation | integer [32,0] | YES |  |  |
| 46 | pipeline_survey_stakes | integer [32,0] | YES |  |  |
| 47 | pipeline_street_paving | integer [32,0] | YES |  |  |
| 48 | pipeline_streets_in | integer [32,0] | YES |  |  |
| 49 | pipeline_vdl | integer [32,0] | YES |  |  |
| 50 | pipeline_vacant_land | integer [32,0] | YES |  |  |
| 51 | pipeline_under_construction | integer [32,0] | YES |  |  |
| 52 | pipeline_finished_vacant | integer [32,0] | YES |  |  |
| 53 | models_count | integer [32,0] | YES |  |  |
| 54 | occupied_count | integer [32,0] | YES |  |  |
| 55 | future_inventory_count | integer [32,0] | YES |  |  |
| 56 | mos_vdl | numeric [6,2] | YES |  |  |
| 57 | mos_inventory | numeric [6,2] | YES |  |  |
| 58 | mos_finished_vacant | numeric [6,2] | YES |  |  |
| 59 | incentive_qmi_pct | numeric [5,2] | YES |  |  |
| 60 | incentive_qmi_amt | numeric [12,2] | YES |  |  |
| 61 | incentive_qmi_type | character varying(100) | YES |  |  |
| 62 | incentive_tbb_pct | numeric [5,2] | YES |  |  |
| 63 | incentive_tbb_amt | numeric [12,2] | YES |  |  |
| 64 | incentive_tbb_type | character varying(100) | YES |  |  |
| 65 | incentive_broker_pct | numeric [5,2] | YES |  |  |
| 66 | incentive_broker_amt | numeric [12,2] | YES |  |  |
| 67 | incentive_broker_type | character varying(100) | YES |  |  |
| 68 | hoa_fee_monthly | numeric [8,2] | YES |  |  |
| 69 | hoa_fee_2_monthly | numeric [8,2] | YES |  |  |
| 70 | hoa_fee_per_sqft | numeric [6,4] | YES |  |  |
| 71 | assessment_rate | numeric [5,3] | YES |  |  |
| 72 | assessment_description | text | YES |  |  |
| 73 | latitude | numeric [10,6] | YES |  |  |
| 74 | longitude | numeric [11,6] | YES |  |  |
| 75 | address | character varying(300) | YES |  |  |
| 76 | city | character varying(100) | YES |  |  |
| 77 | zip_code | character varying(10) | YES |  |  |
| 78 | county | character varying(100) | YES |  |  |
| 79 | county_fips | integer [32,0] | YES |  |  |
| 80 | cbsa_name | character varying(100) | YES |  |  |
| 81 | cbsa_code | integer [32,0] | YES |  |  |
| 82 | state | character varying(2) | YES |  |  |
| 83 | boundary_names | text | YES |  |  |
| 84 | school_district | character varying(200) | YES |  |  |
| 85 | school_elementary | text | YES |  |  |
| 86 | school_rating_elementary | character varying(50) | YES |  |  |
| 87 | school_middle | text | YES |  |  |
| 88 | school_rating_middle | character varying(50) | YES |  |  |
| 89 | school_high | text | YES |  |  |
| 90 | school_rating_high | character varying(50) | YES |  |  |
| 91 | website_url | text | YES |  |  |
| 92 | office_phone | character varying(20) | YES |  |  |
| 93 | lu_family_id | bigint [64,0] | YES |  |  |
| 94 | lu_density_id | bigint [64,0] | YES |  |  |
| 95 | lu_type_id | bigint [64,0] | YES |  |  |
| 96 | lu_product_id | bigint [64,0] | YES |  |  |
| 97 | lu_linkage_method | character varying(20) | YES |  |  |
| 98 | lu_linkage_confidence | numeric [3,2] | YES |  |  |
| 99 | ingestion_timestamp | timestamp with time zone | NO |  |  |
| 100 | updated_at | timestamp with time zone | NO |  |  |
| 101 | source_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| mkt_new_home_project_source_id_cbf21c81_fk_mkt_data_ | FOREIGN KEY | FOREIGN KEY (source_id) REFERENCES mkt_data_source_registry(source_id) DEFERRABLE INITIALLY DEFERRED |
| mkt_new_home_project_pkey | PRIMARY KEY | PRIMARY KEY (record_id) |
| uq_mkt_project_source_date | UNIQUE | UNIQUE (source_id, source_project_id, effective_date) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| mkt_new_home_project_source_id_cbf21c81_fk_mkt_data_ | source_id | mkt_data_source_registry.source_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_mkt_nhp_builder`

```sql
CREATE INDEX idx_mkt_nhp_builder ON landscape.mkt_new_home_project USING btree (builder_name)
```
- `idx_mkt_nhp_cbsa`

```sql
CREATE INDEX idx_mkt_nhp_cbsa ON landscape.mkt_new_home_project USING btree (cbsa_code)
```
- `idx_mkt_nhp_city`

```sql
CREATE INDEX idx_mkt_nhp_city ON landscape.mkt_new_home_project USING btree (city)
```
- `idx_mkt_nhp_effective_date`

```sql
CREATE INDEX idx_mkt_nhp_effective_date ON landscape.mkt_new_home_project USING btree (effective_date)
```
- `idx_mkt_nhp_location`

```sql
CREATE INDEX idx_mkt_nhp_location ON landscape.mkt_new_home_project USING btree (latitude, longitude)
```
- `idx_mkt_nhp_lot_width`

```sql
CREATE INDEX idx_mkt_nhp_lot_width ON landscape.mkt_new_home_project USING btree (lot_width_ft)
```
- `idx_mkt_nhp_lu_product`

```sql
CREATE INDEX idx_mkt_nhp_lu_product ON landscape.mkt_new_home_project USING btree (lu_product_id)
```
- `idx_mkt_nhp_lu_type`

```sql
CREATE INDEX idx_mkt_nhp_lu_type ON landscape.mkt_new_home_project USING btree (lu_type_id)
```
- `idx_mkt_nhp_master_plan`

```sql
CREATE INDEX idx_mkt_nhp_master_plan ON landscape.mkt_new_home_project USING btree (master_plan_name)
```
- `idx_mkt_nhp_project_name`

```sql
CREATE INDEX idx_mkt_nhp_project_name ON landscape.mkt_new_home_project USING btree (project_name)
```
- `idx_mkt_nhp_source`

```sql
CREATE INDEX idx_mkt_nhp_source ON landscape.mkt_new_home_project USING btree (source_id)
```
- `idx_mkt_nhp_status`

```sql
CREATE INDEX idx_mkt_nhp_status ON landscape.mkt_new_home_project USING btree (status)
```
- `mkt_new_home_project_pkey`

```sql
CREATE UNIQUE INDEX mkt_new_home_project_pkey ON landscape.mkt_new_home_project USING btree (record_id)
```
- `mkt_new_home_project_source_id_cbf21c81`

```sql
CREATE INDEX mkt_new_home_project_source_id_cbf21c81 ON landscape.mkt_new_home_project USING btree (source_id)
```
- `uq_mkt_project_source_date`

```sql
CREATE UNIQUE INDEX uq_mkt_project_source_date ON landscape.mkt_new_home_project USING btree (source_id, source_project_id, effective_date)
```

### `mkt_permit_history`

- Columns: 16
- Constraints: 3
- Foreign keys: 1
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | record_id | bigint [64,0] | NO |  |  |
| 2 | source_file | character varying(200) | YES |  |  |
| 3 | permit_month | date | NO |  |  |
| 4 | jurisdiction_name | character varying(100) | NO |  |  |
| 5 | jurisdiction_type | character varying(50) | YES |  |  |
| 6 | county | character varying(100) | YES |  |  |
| 7 | state | character varying(2) | NO |  |  |
| 8 | cbsa_code | integer [32,0] | YES |  |  |
| 9 | permits_sf | integer [32,0] | YES |  |  |
| 10 | permits_mf | integer [32,0] | YES |  |  |
| 11 | permits_total | integer [32,0] | YES |  |  |
| 12 | permits_detached | integer [32,0] | YES |  |  |
| 13 | permits_attached | integer [32,0] | YES |  |  |
| 14 | permits_custom | integer [32,0] | YES |  |  |
| 15 | ingestion_timestamp | timestamp with time zone | NO |  |  |
| 16 | source_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| mkt_permit_history_source_id_4d1eb402_fk_mkt_data_ | FOREIGN KEY | FOREIGN KEY (source_id) REFERENCES mkt_data_source_registry(source_id) DEFERRABLE INITIALLY DEFERRED |
| mkt_permit_history_pkey | PRIMARY KEY | PRIMARY KEY (record_id) |
| uq_mkt_permit_month_jurisdiction | UNIQUE | UNIQUE (source_id, permit_month, jurisdiction_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| mkt_permit_history_source_id_4d1eb402_fk_mkt_data_ | source_id | mkt_data_source_registry.source_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_mkt_permit_jurisdiction`

```sql
CREATE INDEX idx_mkt_permit_jurisdiction ON landscape.mkt_permit_history USING btree (jurisdiction_name)
```
- `idx_mkt_permit_month`

```sql
CREATE INDEX idx_mkt_permit_month ON landscape.mkt_permit_history USING btree (permit_month)
```
- `idx_mkt_permit_source`

```sql
CREATE INDEX idx_mkt_permit_source ON landscape.mkt_permit_history USING btree (source_id)
```
- `mkt_permit_history_pkey`

```sql
CREATE UNIQUE INDEX mkt_permit_history_pkey ON landscape.mkt_permit_history USING btree (record_id)
```
- `mkt_permit_history_source_id_4d1eb402`

```sql
CREATE INDEX mkt_permit_history_source_id_4d1eb402 ON landscape.mkt_permit_history USING btree (source_id)
```
- `uq_mkt_permit_month_jurisdiction`

```sql
CREATE UNIQUE INDEX uq_mkt_permit_month_jurisdiction ON landscape.mkt_permit_history USING btree (source_id, permit_month, jurisdiction_name)
```

### `mutation_audit_log`

- Columns: 17
- Constraints: 2
- Foreign keys: 0
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | audit_id | integer [32,0] | NO | nextval('mutation_audit_log_audit_id_seq'::regclass) |  |
| 2 | mutation_id | uuid | YES |  |  |
| 3 | project_id | integer [32,0] | NO |  |  |
| 4 | mutation_type | character varying(50) | NO |  |  |
| 5 | table_name | character varying(100) | NO |  |  |
| 6 | field_name | character varying(100) | YES |  |  |
| 7 | record_id | character varying(100) | YES |  |  |
| 8 | old_value | jsonb | YES |  |  |
| 9 | new_value | jsonb | YES |  |  |
| 10 | action | character varying(20) | NO |  |  |
| 11 | error_message | text | YES |  |  |
| 12 | reason | text | YES |  |  |
| 13 | source_message_id | character varying(100) | YES |  |  |
| 14 | source_documents | jsonb | YES |  |  |
| 15 | initiated_by | character varying(50) | YES | 'landscaper_ai'::character varying |  |
| 16 | confirmed_by | character varying(255) | YES |  |  |
| 17 | created_at | timestamp with time zone | NO | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| mutation_audit_log_action_check | CHECK | CHECK (((action)::text = ANY ((ARRAY['proposed'::character varying, 'confirmed'::character varying, 'rejected'::character varying, 'expired'::character varying, 'executed'::character varying, 'failed'::character varying])::text[]))) |
| mutation_audit_log_pkey | PRIMARY KEY | PRIMARY KEY (audit_id) |

#### Indexes

- `idx_mutation_audit_mutation_id`

```sql
CREATE INDEX idx_mutation_audit_mutation_id ON landscape.mutation_audit_log USING btree (mutation_id) WHERE (mutation_id IS NOT NULL)
```
- `idx_mutation_audit_project_time`

```sql
CREATE INDEX idx_mutation_audit_project_time ON landscape.mutation_audit_log USING btree (project_id, created_at DESC)
```
- `idx_mutation_audit_table_record`

```sql
CREATE INDEX idx_mutation_audit_table_record ON landscape.mutation_audit_log USING btree (table_name, record_id) WHERE (record_id IS NOT NULL)
```
- `mutation_audit_log_pkey`

```sql
CREATE UNIQUE INDEX mutation_audit_log_pkey ON landscape.mutation_audit_log USING btree (audit_id)
```

### `mv_doc_search`

- Columns: 28
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | doc_id | bigint [64,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | workspace_id | bigint [64,0] | YES |  |  |
| 4 | doc_name | character varying(500) | YES |  |  |
| 5 | doc_type | character varying(100) | YES |  |  |
| 6 | discipline | character varying(100) | YES |  |  |
| 7 | status | character varying(50) | YES |  |  |
| 8 | version_no | integer [32,0] | YES |  |  |
| 9 | storage_uri | text | YES |  |  |
| 10 | mime_type | character varying(100) | YES |  |  |
| 11 | file_size_bytes | bigint [64,0] | YES |  |  |
| 12 | doc_date | date | YES |  |  |
| 13 | contract_value | numeric [15,2] | YES |  |  |
| 14 | priority | character varying(20) | YES |  |  |
| 15 | profile_json | jsonb | YES |  |  |
| 16 | created_at | timestamp with time zone | YES |  |  |
| 17 | updated_at | timestamp with time zone | YES |  |  |
| 18 | project_name | character varying(255) | YES |  |  |
| 19 | phase_name | text | YES |  |  |
| 20 | parcel_name | text | YES |  |  |
| 21 | folder_id | integer [32,0] | YES |  |  |
| 22 | folder_path | text | YES |  |  |
| 23 | folder_name | character varying(255) | YES |  |  |
| 24 | extracted_text | text | YES |  |  |
| 25 | word_count | integer [32,0] | YES |  |  |
| 26 | media_scan_status | character varying(20) | YES |  |  |
| 27 | media_scan_json | jsonb | YES |  |  |
| 28 | searchable_text | text | YES |  |  |

### `opex_account_migration_map`

- Columns: 5
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | old_account_id | integer [32,0] | NO |  |  |
| 2 | new_category_id | integer [32,0] | NO |  |  |
| 3 | account_number | character varying(20) | YES |  |  |
| 4 | account_name | character varying(255) | YES |  |  |
| 5 | migrated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| opex_account_migration_map_pkey | PRIMARY KEY | PRIMARY KEY (old_account_id) |

#### Indexes

- `opex_account_migration_map_pkey`

```sql
CREATE UNIQUE INDEX opex_account_migration_map_pkey ON landscape.opex_account_migration_map USING btree (old_account_id)
```

### `opex_benchmark`

- Columns: 19
- Constraints: 2
- Foreign keys: 0
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('opex_benchmark_id_seq'::regclass) |  |
| 2 | source | character varying(50) | NO |  |  |
| 3 | source_year | integer [32,0] | NO |  |  |
| 4 | report_name | character varying(255) | YES |  |  |
| 5 | property_type | character varying(50) | NO |  |  |
| 6 | property_subtype | character varying(100) | YES |  |  |
| 7 | geographic_scope | character varying(50) | NO |  |  |
| 8 | geography_name | character varying(100) | YES |  |  |
| 9 | expense_category | character varying(100) | NO |  |  |
| 10 | expense_subcategory | character varying(100) | YES |  |  |
| 11 | per_unit_amount | numeric [12,2] | YES |  |  |
| 12 | per_sf_amount | numeric [10,4] | YES |  |  |
| 13 | pct_of_egi | numeric [5,2] | YES |  |  |
| 14 | pct_of_gpi | numeric [5,2] | YES |  |  |
| 15 | sample_size | integer [32,0] | YES |  |  |
| 16 | sample_units | integer [32,0] | YES |  |  |
| 17 | notes | text | YES |  |  |
| 18 | created_at | timestamp without time zone | YES | now() |  |
| 19 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| opex_benchmark_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| opex_benchmark_source_source_year_property_type_geographic__key | UNIQUE | UNIQUE (source, source_year, property_type, geographic_scope, geography_name, expense_category, expense_subcategory) |

#### Indexes

- `idx_opex_benchmark_category`

```sql
CREATE INDEX idx_opex_benchmark_category ON landscape.opex_benchmark USING btree (expense_category, expense_subcategory)
```
- `idx_opex_benchmark_geography`

```sql
CREATE INDEX idx_opex_benchmark_geography ON landscape.opex_benchmark USING btree (geographic_scope, geography_name)
```
- `idx_opex_benchmark_property`

```sql
CREATE INDEX idx_opex_benchmark_property ON landscape.opex_benchmark USING btree (property_type, property_subtype)
```
- `idx_opex_benchmark_source_year`

```sql
CREATE INDEX idx_opex_benchmark_source_year ON landscape.opex_benchmark USING btree (source, source_year)
```
- `opex_benchmark_pkey`

```sql
CREATE UNIQUE INDEX opex_benchmark_pkey ON landscape.opex_benchmark USING btree (id)
```
- `opex_benchmark_source_source_year_property_type_geographic__key`

```sql
CREATE UNIQUE INDEX opex_benchmark_source_source_year_property_type_geographic__key ON landscape.opex_benchmark USING btree (source, source_year, property_type, geographic_scope, geography_name, expense_category, expense_subcategory)
```

### `opex_label_mapping`

- Columns: 8
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | mapping_id | integer [32,0] | NO | nextval('opex_label_mapping_mapping_id_seq'::regclass) |  |
| 2 | source_label | character varying(255) | NO |  |  |
| 3 | normalized_label | character varying(255) | YES |  |  |
| 4 | parent_category | character varying(100) | NO |  |  |
| 5 | target_field | character varying(100) | YES |  |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | created_by | bigint [64,0] | YES |  |  |
| 8 | times_used | integer [32,0] | YES | 1 |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| opex_label_mapping_pkey | PRIMARY KEY | PRIMARY KEY (mapping_id) |
| opex_label_mapping_source_label_key | UNIQUE | UNIQUE (source_label) |

#### Indexes

- `opex_label_mapping_pkey`

```sql
CREATE UNIQUE INDEX opex_label_mapping_pkey ON landscape.opex_label_mapping USING btree (mapping_id)
```
- `opex_label_mapping_source_label_key`

```sql
CREATE UNIQUE INDEX opex_label_mapping_source_label_key ON landscape.opex_label_mapping USING btree (source_label)
```

### `pending_mutations`

- Columns: 19
- Constraints: 4
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | mutation_id | uuid | NO | gen_random_uuid() |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | mutation_type | character varying(50) | NO |  |  |
| 4 | table_name | character varying(100) | NO |  |  |
| 5 | field_name | character varying(100) | YES |  |  |
| 6 | record_id | character varying(100) | YES |  |  |
| 7 | current_value | jsonb | YES |  |  |
| 8 | proposed_value | jsonb | NO |  |  |
| 9 | reason | text | NO |  |  |
| 10 | source_message_id | character varying(100) | YES |  |  |
| 11 | source_documents | jsonb | YES | '[]'::jsonb |  |
| 12 | is_high_risk | boolean | NO | false |  |
| 13 | status | character varying(20) | NO | 'pending'::character varying |  |
| 14 | created_at | timestamp with time zone | NO | now() |  |
| 15 | expires_at | timestamp with time zone | NO | (now() + '01:00:00'::interval) |  |
| 16 | resolved_at | timestamp with time zone | YES |  |  |
| 17 | resolved_by | character varying(255) | YES |  |  |
| 18 | batch_id | uuid | YES |  |  |
| 19 | sequence_in_batch | integer [32,0] | YES | 0 |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| pending_mutations_mutation_type_check | CHECK | CHECK (((mutation_type)::text = ANY ((ARRAY['field_update'::character varying, 'bulk_update'::character varying, 'opex_upsert'::character varying, 'rental_comp_upsert'::character varying, 'assumption_upsert'::character varying, 'rent_roll_batch'::character varying, 'comparable_upsert'::character varying, 'comparable_delete'::character varying, 'capital_stack_upsert'::character varying, 'capital_stack_delete'::character varying, 'budget_upsert'::character varying, 'budget_delete'::character varying])::text[]))) |
| pending_mutations_status_check | CHECK | CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'confirmed'::character varying, 'rejected'::character varying, 'expired'::character varying, 'superseded'::character varying])::text[]))) |
| pending_mutations_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| pending_mutations_pkey | PRIMARY KEY | PRIMARY KEY (mutation_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| pending_mutations_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_pending_mutations_batch`

```sql
CREATE INDEX idx_pending_mutations_batch ON landscape.pending_mutations USING btree (batch_id) WHERE (batch_id IS NOT NULL)
```
- `idx_pending_mutations_expires`

```sql
CREATE INDEX idx_pending_mutations_expires ON landscape.pending_mutations USING btree (expires_at) WHERE ((status)::text = 'pending'::text)
```
- `idx_pending_mutations_message`

```sql
CREATE INDEX idx_pending_mutations_message ON landscape.pending_mutations USING btree (source_message_id) WHERE (source_message_id IS NOT NULL)
```
- `idx_pending_mutations_project_status`

```sql
CREATE INDEX idx_pending_mutations_project_status ON landscape.pending_mutations USING btree (project_id, status)
```
- `pending_mutations_pkey`

```sql
CREATE UNIQUE INDEX pending_mutations_pkey ON landscape.pending_mutations USING btree (mutation_id)
```

### `planning_doc`

- Columns: 9
- Constraints: 2
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | doc_id | bigint [64,0] | NO |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | jurisdiction_id | bigint [64,0] | YES |  |  |
| 4 | doc_type | text | NO |  |  |
| 5 | title | text | NO |  |  |
| 6 | doc_url | text | YES |  |  |
| 7 | eff_date | date | YES |  |  |
| 8 | section_ref | text | YES |  |  |
| 9 | notes | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| planning_doc_doc_type_check | CHECK | CHECK ((doc_type = ANY (ARRAY['PAD'::text, 'DA'::text, 'CODE'::text, 'OTHER'::text]))) |
| planning_doc_pkey | PRIMARY KEY | PRIMARY KEY (doc_id) |

#### Indexes

- `planning_doc_pkey`

```sql
CREATE UNIQUE INDEX planning_doc_pkey ON landscape.planning_doc USING btree (doc_id)
```

### `project_boundaries`

- Columns: 7
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | boundary_id | integer [32,0] | NO | nextval('project_boundaries_boundary_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | parcel_count | integer [32,0] | NO |  |  |
| 4 | total_acres | numeric [10,4] | NO |  |  |
| 5 | dissolved_geometry | USER-DEFINED | YES |  | Dissolved geometry when multiple parcels are selected |
| 6 | created_at | timestamp without time zone | YES | now() |  |
| 7 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| project_boundaries_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| project_boundaries_pkey | PRIMARY KEY | PRIMARY KEY (boundary_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| project_boundaries_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_project_boundaries_geometry`

```sql
CREATE INDEX idx_project_boundaries_geometry ON landscape.project_boundaries USING gist (dissolved_geometry)
```
- `idx_project_boundaries_project_id`

```sql
CREATE INDEX idx_project_boundaries_project_id ON landscape.project_boundaries USING btree (project_id)
```
- `project_boundaries_pkey`

```sql
CREATE UNIQUE INDEX project_boundaries_pkey ON landscape.project_boundaries USING btree (boundary_id)
```

#### Triggers

- `trigger_update_project_boundaries_timestamp`

```sql
CREATE TRIGGER trigger_update_project_boundaries_timestamp BEFORE UPDATE ON landscape.project_boundaries FOR EACH ROW EXECUTE FUNCTION update_project_boundaries_timestamp()
```

### `project_jurisdiction_mapping`

- Columns: 10
- Constraints: 4
- Foreign keys: 3
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | mapping_id | bigint [64,0] | NO |  |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | glossary_id | uuid | YES |  |  |
| 4 | family_name | text | YES |  |  |
| 5 | density_code | text | YES |  |  |
| 6 | type_code | text | YES |  |  |
| 7 | user_approved | boolean | YES | false |  |
| 8 | notes | text | YES |  |  |
| 9 | created_at | timestamp with time zone | YES | now() |  |
| 10 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| project_jurisdiction_mapping_density_code_fkey | FOREIGN KEY | FOREIGN KEY (density_code) REFERENCES density_classification(code) |
| project_jurisdiction_mapping_glossary_id_fkey | FOREIGN KEY | FOREIGN KEY (glossary_id) REFERENCES glossary_zoning(glossary_id) |
| project_jurisdiction_mapping_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| project_jurisdiction_mapping_pkey | PRIMARY KEY | PRIMARY KEY (mapping_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| project_jurisdiction_mapping_density_code_fkey | density_code | density_classification.code | NO ACTION | NO ACTION |
| project_jurisdiction_mapping_glossary_id_fkey | glossary_id | glossary_zoning.glossary_id | NO ACTION | NO ACTION |
| project_jurisdiction_mapping_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `project_jurisdiction_mapping_pkey`

```sql
CREATE UNIQUE INDEX project_jurisdiction_mapping_pkey ON landscape.project_jurisdiction_mapping USING btree (mapping_id)
```

### `project_parcel_boundaries`

- Columns: 9
- Constraints: 3
- Foreign keys: 2
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | parcel_boundary_id | integer [32,0] | NO | nextval('project_parcel_boundaries_parcel_boundary_id_seq'::regclass) |  |
| 2 | boundary_id | integer [32,0] | NO |  |  |
| 3 | project_id | integer [32,0] | NO |  |  |
| 4 | parcel_id | text | NO |  | Pinal County tax parcel identifier |
| 5 | geometry | USER-DEFINED | NO |  |  |
| 6 | gross_acres | numeric [10,4] | YES |  |  |
| 7 | owner_name | text | YES |  |  |
| 8 | site_address | text | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| project_parcel_boundaries_boundary_id_fkey | FOREIGN KEY | FOREIGN KEY (boundary_id) REFERENCES project_boundaries(boundary_id) ON DELETE CASCADE |
| project_parcel_boundaries_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| project_parcel_boundaries_pkey | PRIMARY KEY | PRIMARY KEY (parcel_boundary_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| project_parcel_boundaries_boundary_id_fkey | boundary_id | project_boundaries.boundary_id | NO ACTION | CASCADE |
| project_parcel_boundaries_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_project_parcel_boundaries_boundary_id`

```sql
CREATE INDEX idx_project_parcel_boundaries_boundary_id ON landscape.project_parcel_boundaries USING btree (boundary_id)
```
- `idx_project_parcel_boundaries_geometry`

```sql
CREATE INDEX idx_project_parcel_boundaries_geometry ON landscape.project_parcel_boundaries USING gist (geometry)
```
- `idx_project_parcel_boundaries_parcel_id`

```sql
CREATE INDEX idx_project_parcel_boundaries_parcel_id ON landscape.project_parcel_boundaries USING btree (parcel_id)
```
- `idx_project_parcel_boundaries_project_id`

```sql
CREATE INDEX idx_project_parcel_boundaries_project_id ON landscape.project_parcel_boundaries USING btree (project_id)
```
- `project_parcel_boundaries_pkey`

```sql
CREATE UNIQUE INDEX project_parcel_boundaries_pkey ON landscape.project_parcel_boundaries USING btree (parcel_boundary_id)
```

### `report_templates`

- Columns: 10
- Constraints: 1
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | template_name | character varying(200) | NO |  |  |
| 3 | description | text | YES |  |  |
| 4 | output_format | character varying(20) | NO |  |  |
| 5 | assigned_tabs | jsonb | NO |  |  |
| 6 | sections | jsonb | NO |  |  |
| 7 | is_active | boolean | NO |  |  |
| 8 | created_at | timestamp with time zone | NO |  |  |
| 9 | updated_at | timestamp with time zone | NO |  |  |
| 10 | created_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| report_templates_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Indexes

- `idx_report_active`

```sql
CREATE INDEX idx_report_active ON landscape.report_templates USING btree (is_active)
```
- `report_templates_pkey`

```sql
CREATE UNIQUE INDEX report_templates_pkey ON landscape.report_templates USING btree (id)
```

### `res_lot_product`

- Columns: 9
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | product_id | bigint [64,0] | NO |  |  |
| 2 | code | text | NO |  | Product code (42x120, SF50, ADU, etc.) |
| 3 | lot_w_ft | integer [32,0] | NO |  | Lot width (ft) |
| 4 | lot_d_ft | integer [32,0] | NO |  | Lot depth (ft) |
| 5 | lot_area_sf | integer [32,0] | YES |  | Lot area (SF) |
| 6 | type_id | bigint [64,0] | YES |  |  |
| 7 | is_active | boolean | YES | true |  |
| 8 | created_at | timestamp without time zone | YES | now() |  |
| 9 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| res_lot_product_type_id_fkey | FOREIGN KEY | FOREIGN KEY (type_id) REFERENCES lu_type(type_id) |
| res_lot_product_pkey | PRIMARY KEY | PRIMARY KEY (product_id) |
| res_lot_product_code_key | UNIQUE | UNIQUE (code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| res_lot_product_type_id_fkey | type_id | lu_type.type_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_res_lot_product_active`

```sql
CREATE INDEX idx_res_lot_product_active ON landscape.res_lot_product USING btree (is_active)
```
- `idx_res_lot_product_type`

```sql
CREATE INDEX idx_res_lot_product_type ON landscape.res_lot_product USING btree (type_id)
```
- `res_lot_product_code_key`

```sql
CREATE UNIQUE INDEX res_lot_product_code_key ON landscape.res_lot_product USING btree (code)
```
- `res_lot_product_pkey`

```sql
CREATE UNIQUE INDEX res_lot_product_pkey ON landscape.res_lot_product USING btree (product_id)
```

### `sale_names`

- Columns: 6
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('sale_names_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | sale_date | date | NO |  | The date parcels were sold. All parcels with the same sale_date belong to the same transaction. |
| 4 | sale_name | character varying(200) | YES |  | User-defined label for the sale (e.g., "Retail Portfolio Sale", "Phase 1 Bulk Sale") |
| 5 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 6 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| sale_names_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| sale_names_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| sale_names_project_id_sale_date_key | UNIQUE | UNIQUE (project_id, sale_date) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| sale_names_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_sale_names_project`

```sql
CREATE INDEX idx_sale_names_project ON landscape.sale_names USING btree (project_id)
```
- `sale_names_pkey`

```sql
CREATE UNIQUE INDEX sale_names_pkey ON landscape.sale_names USING btree (id)
```
- `sale_names_project_id_sale_date_key`

```sql
CREATE UNIQUE INDEX sale_names_project_id_sale_date_key ON landscape.sale_names USING btree (project_id, sale_date)
```

### `spatial_ref_sys`

- Columns: 5
- Constraints: 2
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | srid | integer [32,0] | NO |  |  |
| 2 | auth_name | character varying(256) | YES |  |  |
| 3 | auth_srid | integer [32,0] | YES |  |  |
| 4 | srtext | character varying(2048) | YES |  |  |
| 5 | proj4text | character varying(2048) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| spatial_ref_sys_srid_check | CHECK | CHECK (((srid > 0) AND (srid <= 998999))) |
| spatial_ref_sys_pkey | PRIMARY KEY | PRIMARY KEY (srid) |

#### Indexes

- `spatial_ref_sys_pkey`

```sql
CREATE UNIQUE INDEX spatial_ref_sys_pkey ON landscape.spatial_ref_sys USING btree (srid)
```

### `tbl_absorption_schedule`

- Columns: 23
- Constraints: 8
- Foreign keys: 5
- Indexes: 6
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | absorption_id | bigint [64,0] | NO | nextval('tbl_absorption_schedule_absorption_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | area_id | bigint [64,0] | YES |  |  |
| 4 | phase_id | bigint [64,0] | YES |  |  |
| 5 | parcel_id | bigint [64,0] | YES |  |  |
| 6 | revenue_stream_name | character varying(200) | NO |  |  |
| 7 | revenue_category | character varying(100) | YES |  |  |
| 8 | lu_family_name | character varying(100) | YES |  |  |
| 9 | lu_type_code | character varying(50) | YES |  |  |
| 10 | product_code | character varying(100) | YES |  |  |
| 11 | start_period | integer [32,0] | YES |  |  |
| 12 | periods_to_complete | integer [32,0] | YES |  |  |
| 13 | timing_method | character varying(50) | YES | 'ABSOLUTE'::character varying | ABSOLUTE (fixed period), DEPENDENT (on trigger), or MANUAL |
| 14 | units_per_period | numeric [8,2] | YES |  |  |
| 15 | total_units | integer [32,0] | YES |  |  |
| 16 | base_price_per_unit | numeric [12,2] | YES |  |  |
| 17 | price_escalation_pct | numeric [6,5] | YES | 0 | Per-period price escalation rate |
| 18 | scenario_name | character varying(100) | YES | 'Base Case'::character varying |  |
| 19 | probability_weight | numeric [5,4] | YES | 1.0 |  |
| 20 | notes | text | YES |  |  |
| 21 | created_at | timestamp without time zone | YES | now() |  |
| 22 | updated_at | timestamp without time zone | YES | now() |  |
| 23 | scenario_id | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_absorption_schedule_probability_weight_check | CHECK | CHECK (((probability_weight >= (0)::numeric) AND (probability_weight <= (1)::numeric))) |
| tbl_absorption_schedule_timing_method_check | CHECK | CHECK (((timing_method)::text = ANY ((ARRAY['ABSOLUTE'::character varying, 'DEPENDENT'::character varying, 'MANUAL'::character varying])::text[]))) |
| tbl_absorption_schedule_area_id_fkey | FOREIGN KEY | FOREIGN KEY (area_id) REFERENCES tbl_area(area_id) ON DELETE CASCADE |
| tbl_absorption_schedule_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) ON DELETE CASCADE |
| tbl_absorption_schedule_phase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) ON DELETE CASCADE |
| tbl_absorption_schedule_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_absorption_schedule_scenario_id_fkey | FOREIGN KEY | FOREIGN KEY (scenario_id) REFERENCES tbl_scenario(scenario_id) ON DELETE CASCADE |
| tbl_absorption_schedule_pkey | PRIMARY KEY | PRIMARY KEY (absorption_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_absorption_schedule_area_id_fkey | area_id | tbl_area.area_id | NO ACTION | CASCADE |
| tbl_absorption_schedule_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | CASCADE |
| tbl_absorption_schedule_phase_id_fkey | phase_id | tbl_phase.phase_id | NO ACTION | CASCADE |
| tbl_absorption_schedule_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_absorption_schedule_scenario_id_fkey | scenario_id | tbl_scenario.scenario_id | NO ACTION | CASCADE |

#### Indexes

- `idx_absorption_parcel`

```sql
CREATE INDEX idx_absorption_parcel ON landscape.tbl_absorption_schedule USING btree (parcel_id)
```
- `idx_absorption_phase`

```sql
CREATE INDEX idx_absorption_phase ON landscape.tbl_absorption_schedule USING btree (phase_id)
```
- `idx_absorption_product`

```sql
CREATE INDEX idx_absorption_product ON landscape.tbl_absorption_schedule USING btree (product_code)
```
- `idx_absorption_project_period`

```sql
CREATE INDEX idx_absorption_project_period ON landscape.tbl_absorption_schedule USING btree (project_id, start_period)
```
- `idx_absorption_scenario`

```sql
CREATE INDEX idx_absorption_scenario ON landscape.tbl_absorption_schedule USING btree (scenario_id)
```
- `tbl_absorption_schedule_pkey`

```sql
CREATE UNIQUE INDEX tbl_absorption_schedule_pkey ON landscape.tbl_absorption_schedule USING btree (absorption_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_absorption_schedule FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_acquisition`

- Columns: 17
- Constraints: 6
- Foreign keys: 5
- Indexes: 7
- Triggers: 2

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | acquisition_id | integer [32,0] | NO | nextval('tbl_acquisition_acquisition_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | contact_id | integer [32,0] | YES |  |  |
| 4 | event_date | date | YES |  |  |
| 5 | event_type | character varying(100) | YES |  |  |
| 6 | description | text | YES |  |  |
| 7 | amount | numeric [15,2] | YES |  |  |
| 8 | is_applied_to_purchase | boolean | YES | true |  |
| 9 | units_conveyed | numeric [10,2] | YES |  |  |
| 10 | measure_id | integer [32,0] | YES |  |  |
| 11 | notes | text | YES |  |  |
| 12 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 13 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 14 | goes_hard_date | date | YES |  |  |
| 15 | is_conditional | boolean | YES | false |  |
| 16 | category_id | integer [32,0] | YES |  | FK to core_unit_cost_category - Level 1 category (1100, 1200, 1300 series) |
| 17 | subcategory_id | integer [32,0] | YES |  | FK to core_unit_cost_category - Level 2 subcategory (1110, 1120, etc.) |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_acquisition_category_id_fkey | FOREIGN KEY | FOREIGN KEY (category_id) REFERENCES core_unit_cost_category(category_id) |
| tbl_acquisition_contact_id_fkey | FOREIGN KEY | FOREIGN KEY (contact_id) REFERENCES tbl_contacts_legacy(contact_id) |
| tbl_acquisition_measure_id_fkey | FOREIGN KEY | FOREIGN KEY (measure_id) REFERENCES tbl_measures(measure_id) |
| tbl_acquisition_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_acquisition_subcategory_id_fkey | FOREIGN KEY | FOREIGN KEY (subcategory_id) REFERENCES core_unit_cost_category(category_id) |
| tbl_acquisition_pkey | PRIMARY KEY | PRIMARY KEY (acquisition_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_acquisition_category_id_fkey | category_id | core_unit_cost_category.category_id | NO ACTION | NO ACTION |
| tbl_acquisition_contact_id_fkey | contact_id | tbl_contacts_legacy.contact_id | NO ACTION | NO ACTION |
| tbl_acquisition_measure_id_fkey | measure_id | tbl_measures.measure_id | NO ACTION | NO ACTION |
| tbl_acquisition_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| tbl_acquisition_subcategory_id_fkey | subcategory_id | core_unit_cost_category.category_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_acquisition_category_id`

```sql
CREATE INDEX idx_acquisition_category_id ON landscape.tbl_acquisition USING btree (category_id)
```
- `idx_acquisition_contact_id`

```sql
CREATE INDEX idx_acquisition_contact_id ON landscape.tbl_acquisition USING btree (contact_id)
```
- `idx_acquisition_project_id`

```sql
CREATE INDEX idx_acquisition_project_id ON landscape.tbl_acquisition USING btree (project_id)
```
- `idx_acquisition_subcategory_id`

```sql
CREATE INDEX idx_acquisition_subcategory_id ON landscape.tbl_acquisition USING btree (subcategory_id)
```
- `idx_tbl_acquisition_category_id`

```sql
CREATE INDEX idx_tbl_acquisition_category_id ON landscape.tbl_acquisition USING btree (category_id)
```
- `idx_tbl_acquisition_subcategory_id`

```sql
CREATE INDEX idx_tbl_acquisition_subcategory_id ON landscape.tbl_acquisition USING btree (subcategory_id)
```
- `tbl_acquisition_pkey`

```sql
CREATE UNIQUE INDEX tbl_acquisition_pkey ON landscape.tbl_acquisition USING btree (acquisition_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_acquisition FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
- `update_acquisition_updated_at`

```sql
CREATE TRIGGER update_acquisition_updated_at BEFORE UPDATE ON landscape.tbl_acquisition FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_acquisition_backup_20260202`

- Columns: 17
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | acquisition_id | integer [32,0] | YES |  |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | contact_id | integer [32,0] | YES |  |  |
| 4 | event_date | date | YES |  |  |
| 5 | event_type | character varying(100) | YES |  |  |
| 6 | description | text | YES |  |  |
| 7 | amount | numeric [15,2] | YES |  |  |
| 8 | is_applied_to_purchase | boolean | YES |  |  |
| 9 | units_conveyed | numeric [10,2] | YES |  |  |
| 10 | measure_id | integer [32,0] | YES |  |  |
| 11 | notes | text | YES |  |  |
| 12 | created_at | timestamp without time zone | YES |  |  |
| 13 | updated_at | timestamp without time zone | YES |  |  |
| 14 | goes_hard_date | date | YES |  |  |
| 15 | is_conditional | boolean | YES |  |  |
| 16 | category_id | integer [32,0] | YES |  |  |
| 17 | subcategory_id | integer [32,0] | YES |  |  |

### `tbl_acreage_allocation`

- Columns: 15
- Constraints: 7
- Foreign keys: 5
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | allocation_id | integer [32,0] | NO | nextval('tbl_acreage_allocation_allocation_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | phase_id | bigint [64,0] | YES |  |  |
| 4 | parcel_id | bigint [64,0] | YES |  |  |
| 5 | allocation_type_id | integer [32,0] | YES |  |  |
| 6 | allocation_type_code | character varying(50) | YES |  |  |
| 7 | acres | numeric [12,4] | NO |  |  |
| 8 | source_doc_id | bigint [64,0] | YES |  |  |
| 9 | source_page | integer [32,0] | YES |  |  |
| 10 | source_snippet | text | YES |  |  |
| 11 | confidence_score | numeric [3,2] | YES |  |  |
| 12 | notes | text | YES |  |  |
| 13 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 14 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 15 | created_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| positive_acres | CHECK | CHECK ((acres >= (0)::numeric)) |
| tbl_acreage_allocation_allocation_type_id_fkey | FOREIGN KEY | FOREIGN KEY (allocation_type_id) REFERENCES lu_acreage_allocation_type(allocation_type_id) |
| tbl_acreage_allocation_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) ON DELETE SET NULL |
| tbl_acreage_allocation_phase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) ON DELETE SET NULL |
| tbl_acreage_allocation_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_acreage_allocation_source_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (source_doc_id) REFERENCES core_doc(doc_id) ON DELETE SET NULL |
| tbl_acreage_allocation_pkey | PRIMARY KEY | PRIMARY KEY (allocation_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_acreage_allocation_allocation_type_id_fkey | allocation_type_id | lu_acreage_allocation_type.allocation_type_id | NO ACTION | NO ACTION |
| tbl_acreage_allocation_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | SET NULL |
| tbl_acreage_allocation_phase_id_fkey | phase_id | tbl_phase.phase_id | NO ACTION | SET NULL |
| tbl_acreage_allocation_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_acreage_allocation_source_doc_id_fkey | source_doc_id | core_doc.doc_id | NO ACTION | SET NULL |

#### Indexes

- `idx_acreage_project`

```sql
CREATE INDEX idx_acreage_project ON landscape.tbl_acreage_allocation USING btree (project_id)
```
- `idx_acreage_project_phase`

```sql
CREATE INDEX idx_acreage_project_phase ON landscape.tbl_acreage_allocation USING btree (project_id, phase_id)
```
- `idx_acreage_project_type`

```sql
CREATE INDEX idx_acreage_project_type ON landscape.tbl_acreage_allocation USING btree (project_id, allocation_type_code)
```
- `idx_acreage_type`

```sql
CREATE INDEX idx_acreage_type ON landscape.tbl_acreage_allocation USING btree (allocation_type_code)
```
- `tbl_acreage_allocation_pkey`

```sql
CREATE UNIQUE INDEX tbl_acreage_allocation_pkey ON landscape.tbl_acreage_allocation USING btree (allocation_id)
```

#### Triggers

- `trg_acreage_allocation_updated`

```sql
CREATE TRIGGER trg_acreage_allocation_updated BEFORE UPDATE ON landscape.tbl_acreage_allocation FOR EACH ROW EXECUTE FUNCTION update_acreage_allocation_timestamp()
```

### `tbl_additional_income`

- Columns: 8
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | additional_income_id | integer [32,0] | NO |  |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | parking_spaces | integer [32,0] | YES | 0 |  |
| 4 | parking_rate_monthly | numeric [10,2] | YES |  |  |
| 5 | parking_annual | numeric [15,2] | YES |  |  |
| 6 | other_income | jsonb | YES | '[]'::jsonb | JSON array: [{label, amount, frequency}, ...] |
| 7 | created_at | timestamp with time zone | YES | now() |  |
| 8 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_additional_income_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_additional_income_pkey | PRIMARY KEY | PRIMARY KEY (additional_income_id) |
| uq_additional_income_lease | UNIQUE | UNIQUE (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_additional_income_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_additional_income_lease`

```sql
CREATE INDEX idx_additional_income_lease ON landscape.tbl_additional_income USING btree (lease_id)
```
- `tbl_additional_income_pkey`

```sql
CREATE UNIQUE INDEX tbl_additional_income_pkey ON landscape.tbl_additional_income USING btree (additional_income_id)
```
- `uq_additional_income_lease`

```sql
CREATE UNIQUE INDEX uq_additional_income_lease ON landscape.tbl_additional_income USING btree (lease_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_additional_income FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_ai_adjustment_suggestions`

- Columns: 9
- Constraints: 4
- Foreign keys: 1
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | ai_suggestion_id | integer [32,0] | NO | nextval('tbl_ai_adjustment_suggestions_ai_suggestion_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | adjustment_type | character varying(50) | NO |  |  |
| 4 | suggested_pct | numeric [7,4] | YES |  |  |
| 5 | confidence_level | character varying(20) | YES |  | AI confidence in the suggestion: high (strong data support), medium (moderate support), low (weak data), none (insufficient data) |
| 6 | justification | text | YES |  |  |
| 7 | model_version | character varying(50) | YES |  |  |
| 8 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 9 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_ai_adjustment_suggestions_confidence_level_check | CHECK | CHECK (((confidence_level)::text = ANY ((ARRAY['high'::character varying, 'medium'::character varying, 'low'::character varying, 'none'::character varying])::text[]))) |
| tbl_ai_adjustment_suggestions_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_ai_adjustment_suggestions_pkey | PRIMARY KEY | PRIMARY KEY (ai_suggestion_id) |
| tbl_ai_adjustment_suggestions_comparable_id_adjustment_type_key | UNIQUE | UNIQUE (comparable_id, adjustment_type) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_ai_adjustment_suggestions_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_ai_suggestions_comparable`

```sql
CREATE INDEX idx_ai_suggestions_comparable ON landscape.tbl_ai_adjustment_suggestions USING btree (comparable_id)
```
- `idx_ai_suggestions_type`

```sql
CREATE INDEX idx_ai_suggestions_type ON landscape.tbl_ai_adjustment_suggestions USING btree (adjustment_type)
```
- `tbl_ai_adjustment_suggestions_comparable_id_adjustment_type_key`

```sql
CREATE UNIQUE INDEX tbl_ai_adjustment_suggestions_comparable_id_adjustment_type_key ON landscape.tbl_ai_adjustment_suggestions USING btree (comparable_id, adjustment_type)
```
- `tbl_ai_adjustment_suggestions_pkey`

```sql
CREATE UNIQUE INDEX tbl_ai_adjustment_suggestions_pkey ON landscape.tbl_ai_adjustment_suggestions USING btree (ai_suggestion_id)
```

#### Triggers

- `trigger_update_ai_suggestion_timestamp`

```sql
CREATE TRIGGER trigger_update_ai_suggestion_timestamp BEFORE UPDATE ON landscape.tbl_ai_adjustment_suggestions FOR EACH ROW EXECUTE FUNCTION update_ai_suggestion_timestamp()
```

### `tbl_alpha_feedback`

- Columns: 9
- Constraints: 1
- Foreign keys: 0
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('tbl_alpha_feedback_id_seq'::regclass) |  |
| 2 | page_context | character varying(100) | YES |  |  |
| 3 | project_id | integer [32,0] | YES |  |  |
| 4 | user_id | integer [32,0] | YES |  |  |
| 5 | feedback | text | NO |  |  |
| 6 | status | character varying(50) | YES | 'new'::character varying |  |
| 7 | notes | text | YES |  |  |
| 8 | submitted_at | timestamp without time zone | YES | now() |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_alpha_feedback_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Indexes

- `idx_alpha_feedback_page`

```sql
CREATE INDEX idx_alpha_feedback_page ON landscape.tbl_alpha_feedback USING btree (page_context)
```
- `idx_alpha_feedback_status`

```sql
CREATE INDEX idx_alpha_feedback_status ON landscape.tbl_alpha_feedback USING btree (status)
```
- `idx_alpha_feedback_submitted`

```sql
CREATE INDEX idx_alpha_feedback_submitted ON landscape.tbl_alpha_feedback USING btree (submitted_at)
```
- `tbl_alpha_feedback_pkey`

```sql
CREATE UNIQUE INDEX tbl_alpha_feedback_pkey ON landscape.tbl_alpha_feedback USING btree (id)
```

### `tbl_analysis_type_config`

- Columns: 15
- Constraints: 2
- Foreign keys: 0
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | config_id | bigint [64,0] | NO | nextval('tbl_analysis_type_config_config_id_seq'::regclass) |  |
| 2 | analysis_type | character varying(50) | NO |  | Analysis type code: VALUATION, INVESTMENT, DEVELOPMENT, FEASIBILITY |
| 3 | tile_hbu | boolean | YES | false | Show Highest & Best Use tile in project navigation |
| 4 | tile_valuation | boolean | YES | false | Show Valuation tile (three approaches) in project navigation |
| 5 | tile_capitalization | boolean | YES | false | Show Capitalization (debt/equity) tile in project navigation |
| 6 | tile_returns | boolean | YES | false | Show Returns (IRR, sensitivity) tile in project navigation |
| 7 | tile_development_budget | boolean | YES | false | Show Development Budget tile in project navigation |
| 8 | requires_capital_stack | boolean | YES | false |  |
| 9 | requires_comparable_sales | boolean | YES | false |  |
| 10 | requires_income_approach | boolean | YES | false |  |
| 11 | requires_cost_approach | boolean | YES | false |  |
| 12 | available_reports | jsonb | YES | '[]'::jsonb |  |
| 13 | landscaper_context | text | YES |  | System prompt context injected into Landscaper for analysis-type-aware behavior |
| 14 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 15 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_analysis_type_config_pkey | PRIMARY KEY | PRIMARY KEY (config_id) |
| tbl_analysis_type_config_analysis_type_key | UNIQUE | UNIQUE (analysis_type) |

#### Indexes

- `idx_analysis_type_config_type`

```sql
CREATE INDEX idx_analysis_type_config_type ON landscape.tbl_analysis_type_config USING btree (analysis_type)
```
- `tbl_analysis_type_config_analysis_type_key`

```sql
CREATE UNIQUE INDEX tbl_analysis_type_config_analysis_type_key ON landscape.tbl_analysis_type_config USING btree (analysis_type)
```
- `tbl_analysis_type_config_pkey`

```sql
CREATE UNIQUE INDEX tbl_analysis_type_config_pkey ON landscape.tbl_analysis_type_config USING btree (config_id)
```

#### Triggers

- `trg_analysis_type_config_updated_at`

```sql
CREATE TRIGGER trg_analysis_type_config_updated_at BEFORE UPDATE ON landscape.tbl_analysis_type_config FOR EACH ROW EXECUTE FUNCTION update_analysis_type_config_timestamp()
```

### `tbl_approval`

- Columns: 5
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | approval_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | approval_type | character varying(100) | YES |  |  |
| 4 | approval_date | date | YES |  |  |
| 5 | notes | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_approval_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_approval_pkey | PRIMARY KEY | PRIMARY KEY (approval_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_approval_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `tbl_approval_pkey`

```sql
CREATE UNIQUE INDEX tbl_approval_pkey ON landscape.tbl_approval USING btree (approval_id)
```

### `tbl_area`

- Columns: 4
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | area_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | area_alias | character varying(255) | NO |  |  |
| 4 | area_no | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_planarea_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON UPDATE RESTRICT ON DELETE RESTRICT |
| tbl_planarea_pkey | PRIMARY KEY | PRIMARY KEY (area_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_planarea_project_id_fkey | project_id | tbl_project.project_id | RESTRICT | RESTRICT |

#### Indexes

- `tbl_planarea_pkey`

```sql
CREATE UNIQUE INDEX tbl_planarea_pkey ON landscape.tbl_area USING btree (area_id)
```
- `ux_planarea_project_area`

```sql
CREATE UNIQUE INDEX ux_planarea_project_area ON landscape.tbl_area USING btree (project_id, area_no) WHERE (area_no IS NOT NULL)
```

### `tbl_assumptionrule`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | rule_id | integer [32,0] | NO |  |  |
| 2 | rule_category | character varying(50) | YES |  |  |
| 3 | rule_key | character varying(100) | YES |  |  |
| 4 | rule_value | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_assumptionrule_pkey | PRIMARY KEY | PRIMARY KEY (rule_id) |

#### Indexes

- `tbl_assumptionrule_pkey`

```sql
CREATE UNIQUE INDEX tbl_assumptionrule_pkey ON landscape.tbl_assumptionrule USING btree (rule_id)
```

### `tbl_base_rent`

- Columns: 15
- Constraints: 4
- Foreign keys: 1
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | base_rent_id | integer [32,0] | NO |  |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | period_number | integer [32,0] | NO |  |  |
| 4 | period_start_date | date | NO |  |  |
| 5 | period_end_date | date | NO |  |  |
| 6 | rent_type | character varying(50) | YES | 'Fixed'::character varying | Fixed, Free, Percentage, Market, or Turnover |
| 7 | base_rent_psf_annual | numeric [10,2] | YES |  |  |
| 8 | base_rent_annual | numeric [15,2] | YES |  |  |
| 9 | base_rent_monthly | numeric [15,2] | YES |  |  |
| 10 | percentage_rent_rate | numeric [5,2] | YES |  |  |
| 11 | percentage_rent_breakpoint | numeric [15,2] | YES |  |  |
| 12 | percentage_rent_annual | numeric [15,2] | YES |  |  |
| 13 | free_rent_months | integer [32,0] | YES | 0 |  |
| 14 | created_at | timestamp with time zone | YES | now() |  |
| 15 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_base_rent_dates | CHECK | CHECK ((period_end_date >= period_start_date)) |
| tbl_base_rent_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_base_rent_pkey | PRIMARY KEY | PRIMARY KEY (base_rent_id) |
| uq_base_rent_lease_period | UNIQUE | UNIQUE (lease_id, period_number) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_base_rent_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_base_rent_dates`

```sql
CREATE INDEX idx_base_rent_dates ON landscape.tbl_base_rent USING btree (period_start_date, period_end_date)
```
- `idx_base_rent_lease`

```sql
CREATE INDEX idx_base_rent_lease ON landscape.tbl_base_rent USING btree (lease_id)
```
- `tbl_base_rent_pkey`

```sql
CREATE UNIQUE INDEX tbl_base_rent_pkey ON landscape.tbl_base_rent USING btree (base_rent_id)
```
- `uq_base_rent_lease_period`

```sql
CREATE UNIQUE INDEX uq_base_rent_lease_period ON landscape.tbl_base_rent USING btree (lease_id, period_number)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_base_rent FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_benchmark_ai_suggestions`

- Columns: 23
- Constraints: 7
- Foreign keys: 4
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | suggestion_id | bigint [64,0] | NO | nextval('tbl_benchmark_ai_suggestions_suggestion_id_seq'::regclass) |  |
| 2 | user_id | text | NO |  |  |
| 3 | document_id | bigint [64,0] | NO |  |  |
| 4 | project_id | bigint [64,0] | YES |  |  |
| 5 | extraction_date | timestamp without time zone | YES | now() |  |
| 6 | category | character varying(50) | NO |  |  |
| 7 | subcategory | character varying(100) | YES |  |  |
| 8 | suggested_name | character varying(200) | NO |  |  |
| 9 | suggested_value | numeric [12,4] | NO |  |  |
| 10 | suggested_uom | character varying(20) | YES |  |  |
| 11 | market_geography | character varying(100) | YES |  |  |
| 12 | property_type | character varying(50) | YES |  |  |
| 13 | confidence_score | numeric [3,2] | YES |  |  |
| 14 | extraction_context | jsonb | YES |  |  |
| 15 | existing_benchmark_id | bigint [64,0] | YES |  |  |
| 16 | variance_percentage | numeric [6,2] | YES |  |  |
| 17 | inflation_adjusted_comparison | jsonb | YES |  |  |
| 18 | status | character varying(20) | YES | 'pending'::character varying |  |
| 19 | user_response | jsonb | YES |  |  |
| 20 | reviewed_at | timestamp without time zone | YES |  |  |
| 21 | reviewed_by | text | YES |  |  |
| 22 | created_benchmark_id | bigint [64,0] | YES |  |  |
| 23 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| valid_category_suggestion | CHECK | CHECK (((category)::text = ANY ((ARRAY['growth_rate'::character varying, 'transaction_cost'::character varying, 'unit_cost'::character varying, 'absorption'::character varying, 'contingency'::character varying, 'market_timing'::character varying, 'land_use_pricing'::character varying, 'commission'::character varying, 'op_cost'::character varying, 'income'::character varying, 'capital_stack'::character varying, 'debt_standard'::character varying])::text[]))) |
| valid_suggestion_status | CHECK | CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'approved'::character varying, 'rejected'::character varying, 'modified'::character varying])::text[]))) |
| tbl_benchmark_ai_suggestions_created_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (created_benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) |
| tbl_benchmark_ai_suggestions_document_id_fkey | FOREIGN KEY | FOREIGN KEY (document_id) REFERENCES core_doc(doc_id) |
| tbl_benchmark_ai_suggestions_existing_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (existing_benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) |
| tbl_benchmark_ai_suggestions_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_benchmark_ai_suggestions_pkey | PRIMARY KEY | PRIMARY KEY (suggestion_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_benchmark_ai_suggestions_created_benchmark_id_fkey | created_benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | NO ACTION |
| tbl_benchmark_ai_suggestions_document_id_fkey | document_id | core_doc.doc_id | NO ACTION | NO ACTION |
| tbl_benchmark_ai_suggestions_existing_benchmark_id_fkey | existing_benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | NO ACTION |
| tbl_benchmark_ai_suggestions_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_ai_suggestion_category`

```sql
CREATE INDEX idx_ai_suggestion_category ON landscape.tbl_benchmark_ai_suggestions USING btree (category)
```
- `idx_ai_suggestion_document`

```sql
CREATE INDEX idx_ai_suggestion_document ON landscape.tbl_benchmark_ai_suggestions USING btree (document_id)
```
- `idx_ai_suggestion_extraction_date`

```sql
CREATE INDEX idx_ai_suggestion_extraction_date ON landscape.tbl_benchmark_ai_suggestions USING btree (extraction_date)
```
- `idx_ai_suggestion_status`

```sql
CREATE INDEX idx_ai_suggestion_status ON landscape.tbl_benchmark_ai_suggestions USING btree (status)
```
- `idx_ai_suggestion_user`

```sql
CREATE INDEX idx_ai_suggestion_user ON landscape.tbl_benchmark_ai_suggestions USING btree (user_id)
```
- `tbl_benchmark_ai_suggestions_pkey`

```sql
CREATE UNIQUE INDEX tbl_benchmark_ai_suggestions_pkey ON landscape.tbl_benchmark_ai_suggestions USING btree (suggestion_id)
```

### `tbl_benchmark_contingency`

- Columns: 4
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | benchmark_id | integer [32,0] | NO |  |  |
| 2 | percentage | numeric [5,2] | NO |  |  |
| 3 | created_at | timestamp with time zone | YES | now() |  |
| 4 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_benchmark_contingency_percentage_check | CHECK | CHECK (((percentage >= (0)::numeric) AND (percentage <= (100)::numeric))) |
| tbl_benchmark_contingency_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) ON DELETE CASCADE |
| tbl_benchmark_contingency_pkey | PRIMARY KEY | PRIMARY KEY (benchmark_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_benchmark_contingency_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | CASCADE |

#### Indexes

- `idx_benchmark_contingency_benchmark_id`

```sql
CREATE INDEX idx_benchmark_contingency_benchmark_id ON landscape.tbl_benchmark_contingency USING btree (benchmark_id)
```
- `tbl_benchmark_contingency_pkey`

```sql
CREATE UNIQUE INDEX tbl_benchmark_contingency_pkey ON landscape.tbl_benchmark_contingency USING btree (benchmark_id)
```

### `tbl_benchmark_transaction_cost`

- Columns: 10
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | transaction_cost_id | bigint [64,0] | NO | nextval('tbl_benchmark_transaction_cost_transaction_cost_id_seq'::regclass) |  |
| 2 | benchmark_id | bigint [64,0] | NO |  |  |
| 3 | cost_type | character varying(50) | NO |  |  |
| 4 | value | numeric [12,2] | YES |  |  |
| 5 | value_type | character varying(20) | NO |  |  |
| 6 | basis | character varying(50) | YES |  |  |
| 7 | deal_size_min | numeric [12,2] | YES |  |  |
| 8 | deal_size_max | numeric [12,2] | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |
| 10 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| valid_value_type | CHECK | CHECK (((value_type)::text = ANY ((ARRAY['percentage'::character varying, 'flat_fee'::character varying, 'per_unit'::character varying])::text[]))) |
| tbl_benchmark_transaction_cost_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) ON DELETE CASCADE |
| tbl_benchmark_transaction_cost_pkey | PRIMARY KEY | PRIMARY KEY (transaction_cost_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_benchmark_transaction_cost_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | CASCADE |

#### Indexes

- `idx_transaction_cost_benchmark`

```sql
CREATE INDEX idx_transaction_cost_benchmark ON landscape.tbl_benchmark_transaction_cost USING btree (benchmark_id)
```
- `idx_transaction_cost_type`

```sql
CREATE INDEX idx_transaction_cost_type ON landscape.tbl_benchmark_transaction_cost USING btree (cost_type)
```
- `tbl_benchmark_transaction_cost_pkey`

```sql
CREATE UNIQUE INDEX tbl_benchmark_transaction_cost_pkey ON landscape.tbl_benchmark_transaction_cost USING btree (transaction_cost_id)
```

### `tbl_benchmark_unit_cost`

- Columns: 11
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | unit_cost_id | bigint [64,0] | NO | nextval('tbl_benchmark_unit_cost_unit_cost_id_seq'::regclass) |  |
| 2 | benchmark_id | bigint [64,0] | NO |  |  |
| 3 | value | numeric [12,2] | NO |  |  |
| 4 | uom_code | character varying(20) | NO |  |  |
| 5 | uom_alt_code | character varying(20) | YES |  |  |
| 6 | low_value | numeric [12,2] | YES |  |  |
| 7 | high_value | numeric [12,2] | YES |  |  |
| 8 | cost_phase | character varying(50) | YES |  |  |
| 9 | work_type | character varying(100) | YES |  |  |
| 10 | created_at | timestamp without time zone | YES | now() |  |
| 11 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_benchmark_unit_cost_benchmark_id_fkey | FOREIGN KEY | FOREIGN KEY (benchmark_id) REFERENCES tbl_global_benchmark_registry(benchmark_id) ON DELETE CASCADE |
| tbl_benchmark_unit_cost_pkey | PRIMARY KEY | PRIMARY KEY (unit_cost_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_benchmark_unit_cost_benchmark_id_fkey | benchmark_id | tbl_global_benchmark_registry.benchmark_id | NO ACTION | CASCADE |

#### Indexes

- `idx_unit_cost_benchmark`

```sql
CREATE INDEX idx_unit_cost_benchmark ON landscape.tbl_benchmark_unit_cost USING btree (benchmark_id)
```
- `idx_unit_cost_phase`

```sql
CREATE INDEX idx_unit_cost_phase ON landscape.tbl_benchmark_unit_cost USING btree (cost_phase)
```
- `idx_unit_cost_work_type`

```sql
CREATE INDEX idx_unit_cost_work_type ON landscape.tbl_benchmark_unit_cost USING btree (work_type)
```
- `tbl_benchmark_unit_cost_pkey`

```sql
CREATE UNIQUE INDEX tbl_benchmark_unit_cost_pkey ON landscape.tbl_benchmark_unit_cost USING btree (unit_cost_id)
```

### `tbl_budget`

- Columns: 12
- Constraints: 3
- Foreign keys: 2
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | budget_id | integer [32,0] | NO |  |  |
| 2 | devphase_id | integer [32,0] | YES |  |  |
| 3 | budget_category | text | NO |  |  |
| 4 | budget_subcategory | text | YES |  |  |
| 5 | amount | numeric | YES |  |  |
| 6 | source_table | character varying(50) | YES |  |  |
| 7 | source_id | integer [32,0] | YES |  |  |
| 8 | measure_id | integer [32,0] | YES |  |  |
| 9 | cost_per_unit | numeric [15,2] | YES |  |  |
| 10 | quantity | numeric [10,2] | YES |  |  |
| 11 | expense_type | character varying(50) | YES | 'Capital'::character varying | Capital or Operating |
| 12 | budget_timing_method | character varying(50) | YES | 'Lump Sum'::character varying | Lump Sum, S-Curve, Linear, or Custom |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_budget_devphase_id_fkey | FOREIGN KEY | FOREIGN KEY (devphase_id) REFERENCES tbl_phase(phase_id) ON UPDATE RESTRICT ON DELETE RESTRICT |
| tbl_budget_measure_id_fkey | FOREIGN KEY | FOREIGN KEY (measure_id) REFERENCES tbl_measures(measure_id) |
| tbl_budget_pkey | PRIMARY KEY | PRIMARY KEY (budget_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_budget_devphase_id_fkey | devphase_id | tbl_phase.phase_id | RESTRICT | RESTRICT |
| tbl_budget_measure_id_fkey | measure_id | tbl_measures.measure_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_budget_pkey`

```sql
CREATE UNIQUE INDEX tbl_budget_pkey ON landscape.tbl_budget USING btree (budget_id)
```

### `tbl_budget_fact`

- Columns: 17
- Constraints: 6
- Foreign keys: 4
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | budget_fact_id | integer [32,0] | NO | nextval('tbl_budget_fact_budget_fact_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | phase_id | bigint [64,0] | YES |  |  |
| 4 | category_id | bigint [64,0] | YES |  |  |
| 5 | category_name | character varying(200) | YES |  |  |
| 6 | line_item_name | character varying(200) | YES |  |  |
| 7 | total_cost | numeric [15,2] | YES |  |  |
| 8 | cost_per_unit | numeric [12,2] | YES |  |  |
| 9 | cost_per_sf | numeric [10,2] | YES |  |  |
| 10 | quantity | numeric [12,2] | YES |  |  |
| 11 | unit_of_measure | character varying(50) | YES |  |  |
| 12 | source_doc_id | bigint [64,0] | YES |  |  |
| 13 | confidence_score | numeric [3,2] | YES |  |  |
| 14 | notes | text | YES |  |  |
| 15 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 16 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 17 | created_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_budget_fact_category_id_fkey | FOREIGN KEY | FOREIGN KEY (category_id) REFERENCES core_unit_cost_category(category_id) ON DELETE SET NULL |
| tbl_budget_fact_phase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) ON DELETE SET NULL |
| tbl_budget_fact_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_budget_fact_source_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (source_doc_id) REFERENCES core_doc(doc_id) ON DELETE SET NULL |
| tbl_budget_fact_pkey | PRIMARY KEY | PRIMARY KEY (budget_fact_id) |
| uq_budget_project_category | UNIQUE | UNIQUE (project_id, category_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_budget_fact_category_id_fkey | category_id | core_unit_cost_category.category_id | NO ACTION | SET NULL |
| tbl_budget_fact_phase_id_fkey | phase_id | tbl_phase.phase_id | NO ACTION | SET NULL |
| tbl_budget_fact_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_budget_fact_source_doc_id_fkey | source_doc_id | core_doc.doc_id | NO ACTION | SET NULL |

#### Indexes

- `idx_budget_fact_category`

```sql
CREATE INDEX idx_budget_fact_category ON landscape.tbl_budget_fact USING btree (category_id)
```
- `idx_budget_fact_project`

```sql
CREATE INDEX idx_budget_fact_project ON landscape.tbl_budget_fact USING btree (project_id)
```
- `idx_budget_fact_project_category`

```sql
CREATE INDEX idx_budget_fact_project_category ON landscape.tbl_budget_fact USING btree (project_id, category_name)
```
- `tbl_budget_fact_pkey`

```sql
CREATE UNIQUE INDEX tbl_budget_fact_pkey ON landscape.tbl_budget_fact USING btree (budget_fact_id)
```
- `uq_budget_project_category`

```sql
CREATE UNIQUE INDEX uq_budget_project_category ON landscape.tbl_budget_fact USING btree (project_id, category_name)
```

#### Triggers

- `trg_budget_fact_updated`

```sql
CREATE TRIGGER trg_budget_fact_updated BEFORE UPDATE ON landscape.tbl_budget_fact FOR EACH ROW EXECUTE FUNCTION update_budget_fact_timestamp()
```

### `tbl_budget_items`

- Columns: 20
- Constraints: 6
- Foreign keys: 3
- Indexes: 4
- Triggers: 3

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | budget_item_id | integer [32,0] | NO | nextval('tbl_budget_items_budget_item_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | structure_id | integer [32,0] | NO |  |  |
| 4 | amount | numeric [15,2] | YES |  |  |
| 5 | quantity | numeric [10,2] | YES |  |  |
| 6 | cost_per_unit | numeric [15,2] | YES |  |  |
| 7 | notes | text | YES |  |  |
| 8 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 9 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 10 | migrated_at | timestamp with time zone | YES |  |  |
| 11 | timing_method | character varying(50) | YES | 'ABSOLUTE'::character varying | ABSOLUTE (fixed period), DEPENDENT (on trigger), or MANUAL |
| 12 | timing_locked | boolean | YES | false |  |
| 13 | s_curve_profile | character varying(50) | YES | 'LINEAR'::character varying | LINEAR, FRONT_LOADED, BACK_LOADED, or BELL_CURVE |
| 14 | actual_amount | numeric [15,2] | YES | 0 |  |
| 15 | actual_quantity | numeric [12,2] | YES | 0 |  |
| 16 | actual_period_id | bigint [64,0] | YES |  |  |
| 17 | variance_amount | numeric [15,2] | YES |  | Budget - Actual amount |
| 18 | variance_pct | numeric [6,4] | YES |  |  |
| 19 | start_period | integer [32,0] | YES |  | Calculated or manually set start period (P0, P1, etc.) |
| 20 | periods_to_complete | integer [32,0] | YES |  | Duration in periods for this budget item |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_budget_items_s_curve_profile_check | CHECK | CHECK (((s_curve_profile)::text = ANY ((ARRAY['LINEAR'::character varying, 'FRONT_LOADED'::character varying, 'BACK_LOADED'::character varying, 'BELL_CURVE'::character varying])::text[]))) |
| tbl_budget_items_timing_method_check | CHECK | CHECK (((timing_method)::text = ANY ((ARRAY['ABSOLUTE'::character varying, 'DEPENDENT'::character varying, 'MANUAL'::character varying])::text[]))) |
| tbl_budget_items_actual_period_id_fkey | FOREIGN KEY | FOREIGN KEY (actual_period_id) REFERENCES tbl_calculation_period(period_id) |
| tbl_budget_items_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_budget_items_structure_id_fkey | FOREIGN KEY | FOREIGN KEY (structure_id) REFERENCES tbl_budget_structure(structure_id) |
| tbl_budget_items_pkey | PRIMARY KEY | PRIMARY KEY (budget_item_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_budget_items_actual_period_id_fkey | actual_period_id | tbl_calculation_period.period_id | NO ACTION | NO ACTION |
| tbl_budget_items_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| tbl_budget_items_structure_id_fkey | structure_id | tbl_budget_structure.structure_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_budget_items_project`

```sql
CREATE INDEX idx_budget_items_project ON landscape.tbl_budget_items USING btree (project_id)
```
- `idx_budget_items_structure`

```sql
CREATE INDEX idx_budget_items_structure ON landscape.tbl_budget_items USING btree (structure_id)
```
- `idx_budget_items_timing`

```sql
CREATE INDEX idx_budget_items_timing ON landscape.tbl_budget_items USING btree (project_id, start_period, timing_method)
```
- `tbl_budget_items_pkey`

```sql
CREATE UNIQUE INDEX tbl_budget_items_pkey ON landscape.tbl_budget_items USING btree (budget_item_id)
```

#### Triggers

- `trg_budget_items_variance`

```sql
CREATE TRIGGER trg_budget_items_variance BEFORE INSERT OR UPDATE ON landscape.tbl_budget_items FOR EACH ROW EXECUTE FUNCTION update_budget_variance()
```
- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_budget_items FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
- `update_budget_items_updated_at`

```sql
CREATE TRIGGER update_budget_items_updated_at BEFORE UPDATE ON landscape.tbl_budget_items FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_budget_structure`

- Columns: 14
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 2

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | structure_id | integer [32,0] | NO | nextval('tbl_budget_structure_structure_id_seq'::regclass) |  |
| 2 | scope | character varying(100) | NO |  |  |
| 3 | category | character varying(100) | NO |  |  |
| 4 | detail | character varying(200) | NO |  |  |
| 5 | cost_method | character varying(20) | YES | '$$'::character varying |  |
| 6 | measure_id | integer [32,0] | YES |  |  |
| 7 | is_system | boolean | YES | true |  |
| 8 | created_by | integer [32,0] | YES |  |  |
| 9 | sort_order | integer [32,0] | YES | 0 |  |
| 10 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 11 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 12 | start_period | integer [32,0] | YES |  |  |
| 13 | periods_to_complete | integer [32,0] | YES |  |  |
| 14 | migrated_at | timestamp with time zone | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_budget_structure_measure_id_fkey | FOREIGN KEY | FOREIGN KEY (measure_id) REFERENCES tbl_measures(measure_id) |
| tbl_budget_structure_pkey | PRIMARY KEY | PRIMARY KEY (structure_id) |
| tbl_budget_structure_scope_category_detail_key | UNIQUE | UNIQUE (scope, category, detail) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_budget_structure_measure_id_fkey | measure_id | tbl_measures.measure_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_budget_structure_scope`

```sql
CREATE INDEX idx_budget_structure_scope ON landscape.tbl_budget_structure USING btree (scope)
```
- `tbl_budget_structure_pkey`

```sql
CREATE UNIQUE INDEX tbl_budget_structure_pkey ON landscape.tbl_budget_structure USING btree (structure_id)
```
- `tbl_budget_structure_scope_category_detail_key`

```sql
CREATE UNIQUE INDEX tbl_budget_structure_scope_category_detail_key ON landscape.tbl_budget_structure USING btree (scope, category, detail)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_budget_structure FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
- `update_budget_structure_updated_at`

```sql
CREATE TRIGGER update_budget_structure_updated_at BEFORE UPDATE ON landscape.tbl_budget_structure FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_budget_timing`

- Columns: 6
- Constraints: 4
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | timing_id | bigint [64,0] | NO |  |  |
| 2 | fact_id | bigint [64,0] | NO |  |  |
| 3 | period_id | bigint [64,0] | NO |  |  |
| 4 | amount | numeric | NO |  |  |
| 5 | timing_method | character varying(20) | YES | 'distributed'::character varying |  |
| 6 | created_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| fk_budget_timing_fact | FOREIGN KEY | FOREIGN KEY (fact_id) REFERENCES core_fin_fact_budget(fact_id) ON DELETE CASCADE |
| fk_budget_timing_period | FOREIGN KEY | FOREIGN KEY (period_id) REFERENCES tbl_calculation_period(period_id) ON DELETE CASCADE |
| tbl_budget_timing_pkey | PRIMARY KEY | PRIMARY KEY (timing_id) |
| uq_budget_timing | UNIQUE | UNIQUE (fact_id, period_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_budget_timing_fact | fact_id | core_fin_fact_budget.fact_id | NO ACTION | CASCADE |
| fk_budget_timing_period | period_id | tbl_calculation_period.period_id | NO ACTION | CASCADE |

#### Indexes

- `idx_budget_timing_fact`

```sql
CREATE INDEX idx_budget_timing_fact ON landscape.tbl_budget_timing USING btree (fact_id)
```
- `idx_budget_timing_period`

```sql
CREATE INDEX idx_budget_timing_period ON landscape.tbl_budget_timing USING btree (period_id)
```
- `tbl_budget_timing_pkey`

```sql
CREATE UNIQUE INDEX tbl_budget_timing_pkey ON landscape.tbl_budget_timing USING btree (timing_id)
```
- `uq_budget_timing`

```sql
CREATE UNIQUE INDEX uq_budget_timing ON landscape.tbl_budget_timing USING btree (fact_id, period_id)
```

### `tbl_cabinet`

- Columns: 8
- Constraints: 2
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | cabinet_id | bigint [64,0] | NO | nextval('tbl_cabinet_cabinet_id_seq'::regclass) | Primary key |
| 2 | cabinet_name | character varying(200) | NO |  | Display name for the cabinet |
| 3 | owner_user_id | text | NO |  | Auth provider user ID (e.g., Clerk user ID) |
| 4 | cabinet_type | character varying(50) | YES | 'standard'::character varying | Type of cabinet: standard (default), enterprise (multi-user), personal (single user) |
| 5 | settings | jsonb | YES | '{}'::jsonb | JSON object storing cabinet-level preferences and configuration |
| 6 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 7 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 8 | is_active | boolean | YES | true |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cabinet_cabinet_type_check | CHECK | CHECK (((cabinet_type)::text = ANY ((ARRAY['standard'::character varying, 'enterprise'::character varying, 'personal'::character varying])::text[]))) |
| tbl_cabinet_pkey | PRIMARY KEY | PRIMARY KEY (cabinet_id) |

#### Indexes

- `idx_cabinet_active`

```sql
CREATE INDEX idx_cabinet_active ON landscape.tbl_cabinet USING btree (is_active) WHERE (is_active = true)
```
- `idx_cabinet_owner`

```sql
CREATE INDEX idx_cabinet_owner ON landscape.tbl_cabinet USING btree (owner_user_id)
```
- `tbl_cabinet_pkey`

```sql
CREATE UNIQUE INDEX tbl_cabinet_pkey ON landscape.tbl_cabinet USING btree (cabinet_id)
```

### `tbl_calculation_period`

- Columns: 12
- Constraints: 5
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | period_id | bigint [64,0] | NO |  |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | period_start_date | date | NO |  |  |
| 4 | period_end_date | date | NO |  |  |
| 5 | period_type | character varying(20) | NO |  |  |
| 6 | period_sequence | integer [32,0] | NO |  |  |
| 7 | created_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |
| 8 | fiscal_year | integer [32,0] | YES |  |  |
| 9 | fiscal_quarter | integer [32,0] | YES |  |  |
| 10 | period_status | character varying(50) | YES | 'OPEN'::character varying | OPEN (active), CLOSED (finalized), or LOCKED (no changes allowed) |
| 11 | closed_date | timestamp without time zone | YES |  |  |
| 12 | closed_by_user_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ck_calculation_period_dates | CHECK | CHECK ((period_end_date >= period_start_date)) |
| tbl_calculation_period_period_status_check | CHECK | CHECK (((period_status)::text = ANY ((ARRAY['OPEN'::character varying, 'CLOSED'::character varying, 'LOCKED'::character varying])::text[]))) |
| fk_calculation_period_project | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_calculation_period_pkey | PRIMARY KEY | PRIMARY KEY (period_id) |
| uq_calculation_period_sequence | UNIQUE | UNIQUE (project_id, period_sequence) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_calculation_period_project | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_calculation_period_project`

```sql
CREATE INDEX idx_calculation_period_project ON landscape.tbl_calculation_period USING btree (project_id, period_sequence)
```
- `tbl_calculation_period_pkey`

```sql
CREATE UNIQUE INDEX tbl_calculation_period_pkey ON landscape.tbl_calculation_period USING btree (period_id)
```
- `uq_calculation_period_sequence`

```sql
CREATE UNIQUE INDEX uq_calculation_period_sequence ON landscape.tbl_calculation_period USING btree (project_id, period_sequence)
```

### `tbl_cap_rate_comps`

- Columns: 9
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | cap_rate_comp_id | integer [32,0] | NO | nextval('tbl_cap_rate_comps_cap_rate_comp_id_seq'::regclass) |  |
| 2 | income_approach_id | integer [32,0] | YES |  |  |
| 3 | property_address | character varying(255) | YES |  |  |
| 4 | sale_price | numeric [15,2] | YES |  |  |
| 5 | noi | numeric [12,2] | YES |  |  |
| 6 | implied_cap_rate | numeric [5,4] | YES |  |  |
| 7 | sale_date | date | YES |  |  |
| 8 | notes | text | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cap_rate_comps_income_approach_id_fkey | FOREIGN KEY | FOREIGN KEY (income_approach_id) REFERENCES tbl_income_approach(income_approach_id) ON DELETE CASCADE |
| tbl_cap_rate_comps_pkey | PRIMARY KEY | PRIMARY KEY (cap_rate_comp_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cap_rate_comps_income_approach_id_fkey | income_approach_id | tbl_income_approach.income_approach_id | NO ACTION | CASCADE |

#### Indexes

- `idx_cap_rate_comps_income_approach`

```sql
CREATE INDEX idx_cap_rate_comps_income_approach ON landscape.tbl_cap_rate_comps USING btree (income_approach_id)
```
- `tbl_cap_rate_comps_pkey`

```sql
CREATE UNIQUE INDEX tbl_cap_rate_comps_pkey ON landscape.tbl_cap_rate_comps USING btree (cap_rate_comp_id)
```

### `tbl_capex_reserve`

- Columns: 20
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | capex_id | bigint [64,0] | NO | nextval('tbl_capex_reserve_capex_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | capex_per_unit_annual | numeric [8,2] | NO | 300 |  |
| 4 | immediate_capex | numeric [12,2] | YES | 0 |  |
| 5 | roof_reserve_per_unit | numeric [6,2] | YES | 50 |  |
| 6 | hvac_reserve_per_unit | numeric [6,2] | YES | 75 |  |
| 7 | appliance_reserve_per_unit | numeric [6,2] | YES | 100 |  |
| 8 | other_reserve_per_unit | numeric [6,2] | YES | 75 |  |
| 9 | roof_replacement_year | integer [32,0] | YES |  |  |
| 10 | roof_replacement_cost | numeric [12,2] | YES |  |  |
| 11 | hvac_replacement_cycle_years | integer [32,0] | YES | 15 |  |
| 12 | hvac_replacement_cost_per_unit | numeric [8,2] | YES |  |  |
| 13 | parking_lot_reseal_year | integer [32,0] | YES |  |  |
| 14 | parking_lot_reseal_cost | numeric [10,2] | YES |  |  |
| 15 | exterior_paint_cycle_years | integer [32,0] | YES | 7 |  |
| 16 | exterior_paint_cost | numeric [10,2] | YES |  |  |
| 17 | elevator_modernization_cost | numeric [10,2] | YES |  |  |
| 18 | unit_renovation_per_turn | numeric [8,2] | YES |  |  |
| 19 | created_at | timestamp without time zone | YES | now() |  |
| 20 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_capex_reserve_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_capex_reserve_pkey | PRIMARY KEY | PRIMARY KEY (capex_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_capex_reserve_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_capex_project`

```sql
CREATE INDEX idx_capex_project ON landscape.tbl_capex_reserve USING btree (project_id)
```
- `tbl_capex_reserve_pkey`

```sql
CREATE UNIQUE INDEX tbl_capex_reserve_pkey ON landscape.tbl_capex_reserve USING btree (capex_id)
```

### `tbl_capital_call`

- Columns: 10
- Constraints: 3
- Foreign keys: 2
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | capital_call_id | bigint [64,0] | NO | nextval('tbl_capital_call_capital_call_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | period_id | bigint [64,0] | YES |  |  |
| 4 | call_amount | numeric [12,2] | NO |  |  |
| 5 | call_date | date | YES |  |  |
| 6 | call_purpose | character varying(200) | YES |  |  |
| 7 | lp_amount | numeric [12,2] | YES |  |  |
| 8 | gp_amount | numeric [12,2] | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |
| 10 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_capital_call_period_id_fkey | FOREIGN KEY | FOREIGN KEY (period_id) REFERENCES tbl_calculation_period(period_id) |
| tbl_capital_call_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_capital_call_pkey | PRIMARY KEY | PRIMARY KEY (capital_call_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_capital_call_period_id_fkey | period_id | tbl_calculation_period.period_id | NO ACTION | NO ACTION |
| tbl_capital_call_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_capital_call_project`

```sql
CREATE INDEX idx_capital_call_project ON landscape.tbl_capital_call USING btree (project_id)
```
- `tbl_capital_call_pkey`

```sql
CREATE UNIQUE INDEX tbl_capital_call_pkey ON landscape.tbl_capital_call USING btree (capital_call_id)
```

### `tbl_capital_reserves`

- Columns: 14
- Constraints: 5
- Foreign keys: 2
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | reserve_id | bigint [64,0] | NO | nextval('tbl_capital_reserves_reserve_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | reserve_type | character varying(50) | NO |  |  |
| 4 | reserve_name | character varying(200) | NO |  |  |
| 5 | trigger_type | character varying(50) | NO |  |  |
| 6 | trigger_lease_id | bigint [64,0] | YES |  |  |
| 7 | trigger_period | integer [32,0] | YES |  |  |
| 8 | amount | numeric [12,2] | NO |  |  |
| 9 | amount_per_sf | numeric [10,2] | YES |  |  |
| 10 | recurrence_frequency_months | integer [32,0] | YES |  |  |
| 11 | recurrence_end_period | integer [32,0] | YES |  |  |
| 12 | notes | text | YES |  |  |
| 13 | created_at | timestamp with time zone | YES | now() |  |
| 14 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_capital_reserves_reserve_type_check | CHECK | CHECK (((reserve_type)::text = ANY ((ARRAY['TI'::character varying, 'LC'::character varying, 'CAPEX'::character varying, 'STRUCTURAL_RESERVE'::character varying])::text[]))) |
| tbl_capital_reserves_trigger_type_check | CHECK | CHECK (((trigger_type)::text = ANY ((ARRAY['LEASE_EXPIRATION'::character varying, 'SCHEDULED'::character varying, 'RECURRING'::character varying, 'IMMEDIATE'::character varying])::text[]))) |
| tbl_capital_reserves_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_capital_reserves_trigger_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (trigger_lease_id) REFERENCES tbl_rent_roll(rent_roll_id) ON DELETE SET NULL |
| tbl_capital_reserves_pkey | PRIMARY KEY | PRIMARY KEY (reserve_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_capital_reserves_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_capital_reserves_trigger_lease_id_fkey | trigger_lease_id | tbl_rent_roll.rent_roll_id | NO ACTION | SET NULL |

#### Indexes

- `idx_capital_reserves_lease`

```sql
CREATE INDEX idx_capital_reserves_lease ON landscape.tbl_capital_reserves USING btree (trigger_lease_id)
```
- `idx_capital_reserves_project`

```sql
CREATE INDEX idx_capital_reserves_project ON landscape.tbl_capital_reserves USING btree (project_id)
```
- `idx_capital_reserves_trigger`

```sql
CREATE INDEX idx_capital_reserves_trigger ON landscape.tbl_capital_reserves USING btree (trigger_type)
```
- `idx_capital_reserves_type`

```sql
CREATE INDEX idx_capital_reserves_type ON landscape.tbl_capital_reserves USING btree (reserve_type)
```
- `tbl_capital_reserves_pkey`

```sql
CREATE UNIQUE INDEX tbl_capital_reserves_pkey ON landscape.tbl_capital_reserves USING btree (reserve_id)
```

### `tbl_capitalization`

- Columns: 5
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | capitalization_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | capital_source | text | NO |  |  |
| 4 | amount | numeric | YES |  |  |
| 5 | notes | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_capitalization_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON UPDATE RESTRICT ON DELETE CASCADE |
| tbl_capitalization_pkey | PRIMARY KEY | PRIMARY KEY (capitalization_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_capitalization_project_id_fkey | project_id | tbl_project.project_id | RESTRICT | CASCADE |

#### Indexes

- `tbl_capitalization_pkey`

```sql
CREATE UNIQUE INDEX tbl_capitalization_pkey ON landscape.tbl_capitalization USING btree (capitalization_id)
```

### `tbl_cashflow`

- Columns: 15
- Constraints: 6
- Foreign keys: 5
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | cashflow_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | period_id | integer [32,0] | NO |  |  |
| 4 | parcel_id | integer [32,0] | YES |  |  |
| 5 | phase_id | integer [32,0] | YES |  |  |
| 6 | lot_id | integer [32,0] | YES |  |  |
| 7 | lease_id | integer [32,0] | YES |  |  |
| 8 | cashflow_category | character varying(100) | NO |  | Revenue, Operating Expense, Capital Expense, Financing, or Distribution |
| 9 | cashflow_subcategory | character varying(100) | YES |  |  |
| 10 | amount | numeric [15,2] | NO |  |  |
| 11 | cumulative_amount | numeric [15,2] | YES |  |  |
| 12 | calculation_method | character varying(50) | YES |  | S-Curve, Linear, Lump Sum, or Lease Schedule |
| 13 | source_table | character varying(100) | YES |  |  |
| 14 | source_id | integer [32,0] | YES |  |  |
| 15 | calculated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cashflow_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) |
| tbl_cashflow_lot_id_fkey | FOREIGN KEY | FOREIGN KEY (lot_id) REFERENCES tbl_lot(lot_id) |
| tbl_cashflow_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) |
| tbl_cashflow_phase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) |
| tbl_cashflow_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_cashflow_pkey | PRIMARY KEY | PRIMARY KEY (cashflow_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cashflow_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | NO ACTION |
| tbl_cashflow_lot_id_fkey | lot_id | tbl_lot.lot_id | NO ACTION | NO ACTION |
| tbl_cashflow_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | NO ACTION |
| tbl_cashflow_phase_id_fkey | phase_id | tbl_phase.phase_id | NO ACTION | NO ACTION |
| tbl_cashflow_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_cashflow_category`

```sql
CREATE INDEX idx_cashflow_category ON landscape.tbl_cashflow USING btree (cashflow_category)
```
- `idx_cashflow_lease`

```sql
CREATE INDEX idx_cashflow_lease ON landscape.tbl_cashflow USING btree (lease_id, period_id)
```
- `idx_cashflow_parcel`

```sql
CREATE INDEX idx_cashflow_parcel ON landscape.tbl_cashflow USING btree (parcel_id, period_id)
```
- `idx_cashflow_phase`

```sql
CREATE INDEX idx_cashflow_phase ON landscape.tbl_cashflow USING btree (phase_id, period_id)
```
- `idx_cashflow_project_period`

```sql
CREATE INDEX idx_cashflow_project_period ON landscape.tbl_cashflow USING btree (project_id, period_id)
```
- `tbl_cashflow_pkey`

```sql
CREATE UNIQUE INDEX tbl_cashflow_pkey ON landscape.tbl_cashflow USING btree (cashflow_id)
```

### `tbl_cashflow_summary`

- Columns: 21
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | summary_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | period_id | integer [32,0] | NO |  |  |
| 4 | gross_revenue | numeric [15,2] | YES | 0 |  |
| 5 | vacancy_loss | numeric [15,2] | YES | 0 |  |
| 6 | credit_loss | numeric [15,2] | YES | 0 |  |
| 7 | effective_gross_income | numeric [15,2] | YES | 0 |  |
| 8 | operating_expenses | numeric [15,2] | YES | 0 |  |
| 9 | net_operating_income | numeric [15,2] | YES | 0 |  |
| 10 | capital_expenditures | numeric [15,2] | YES | 0 |  |
| 11 | tenant_improvements | numeric [15,2] | YES | 0 |  |
| 12 | leasing_commissions | numeric [15,2] | YES | 0 |  |
| 13 | debt_service | numeric [15,2] | YES | 0 |  |
| 14 | interest_expense | numeric [15,2] | YES | 0 |  |
| 15 | principal_payment | numeric [15,2] | YES | 0 |  |
| 16 | cash_flow_before_tax | numeric [15,2] | YES | 0 |  |
| 17 | equity_contributions | numeric [15,2] | YES | 0 |  |
| 18 | equity_distributions | numeric [15,2] | YES | 0 |  |
| 19 | net_cash_flow | numeric [15,2] | YES | 0 |  |
| 20 | cumulative_net_cash_flow | numeric [15,2] | YES | 0 |  |
| 21 | calculated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cashflow_summary_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_cashflow_summary_pkey | PRIMARY KEY | PRIMARY KEY (summary_id) |
| uq_summary_project_period | UNIQUE | UNIQUE (project_id, period_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cashflow_summary_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_summary_project_period`

```sql
CREATE INDEX idx_summary_project_period ON landscape.tbl_cashflow_summary USING btree (project_id, period_id)
```
- `tbl_cashflow_summary_pkey`

```sql
CREATE UNIQUE INDEX tbl_cashflow_summary_pkey ON landscape.tbl_cashflow_summary USING btree (summary_id)
```
- `uq_summary_project_period`

```sql
CREATE UNIQUE INDEX uq_summary_project_period ON landscape.tbl_cashflow_summary USING btree (project_id, period_id)
```

### `tbl_changelog`

- Columns: 8
- Constraints: 1
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | changelog_id | integer [32,0] | NO |  |  |
| 2 | version | character varying(20) | NO |  |  |
| 3 | deployed_at | timestamp with time zone | NO |  |  |
| 4 | auto_generated_notes | text | YES |  |  |
| 5 | published_notes | text | YES |  |  |
| 6 | is_published | boolean | NO |  |  |
| 7 | created_at | timestamp with time zone | NO |  |  |
| 8 | updated_at | timestamp with time zone | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_changelog_pkey | PRIMARY KEY | PRIMARY KEY (changelog_id) |

#### Indexes

- `idx_changelog_deployed`

```sql
CREATE INDEX idx_changelog_deployed ON landscape.tbl_changelog USING btree (deployed_at DESC)
```
- `idx_changelog_version`

```sql
CREATE INDEX idx_changelog_version ON landscape.tbl_changelog USING btree (version)
```
- `tbl_changelog_pkey`

```sql
CREATE UNIQUE INDEX tbl_changelog_pkey ON landscape.tbl_changelog USING btree (changelog_id)
```

### `tbl_closing_event`

- Columns: 24
- Constraints: 5
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | closing_id | bigint [64,0] | NO | nextval('tbl_closing_event_closing_id_seq'::regclass) |  |
| 2 | sale_event_id | bigint [64,0] | NO |  |  |
| 3 | closing_sequence | integer [32,0] | NO |  | Closing number within sale (1, 2, 3, ...) |
| 4 | closing_date | date | NO |  |  |
| 5 | lots_closed | integer [32,0] | NO |  | Number of units/lots closing in this takedown |
| 6 | base_price_per_unit | numeric [12,2] | YES |  |  |
| 7 | inflated_price_per_unit | numeric [12,2] | YES |  | Price per unit after applying growth rate from base date to closing date |
| 8 | uom_code | character varying(10) | YES |  |  |
| 9 | gross_proceeds | numeric [15,2] | YES |  |  |
| 10 | gross_value | numeric [15,2] | YES |  | Gross sale value (lots_closed × inflated_price_per_unit) |
| 11 | onsite_costs | numeric [15,2] | YES |  |  |
| 12 | less_commissions_amount | numeric [12,2] | YES |  |  |
| 13 | commission_amount | numeric [15,2] | YES |  |  |
| 14 | less_closing_costs | numeric [12,2] | YES |  |  |
| 15 | closing_costs | numeric [15,2] | YES |  |  |
| 16 | less_improvements_credit | numeric [12,2] | YES |  |  |
| 17 | net_proceeds | numeric [15,2] | YES |  | Net proceeds after all deductions |
| 18 | cumulative_lots_closed | integer [32,0] | YES |  |  |
| 19 | lots_remaining | integer [32,0] | YES |  |  |
| 20 | escrow_release_amount | numeric [12,2] | YES |  |  |
| 21 | escrow_release_date | date | YES |  |  |
| 22 | notes | text | YES |  |  |
| 23 | created_at | timestamp without time zone | YES | now() |  |
| 24 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| closing_sequence_positive | CHECK | CHECK ((closing_sequence > 0)) |
| closing_units_positive | CHECK | CHECK ((lots_closed > 0)) |
| tbl_closing_event_sale_event_id_fkey | FOREIGN KEY | FOREIGN KEY (sale_event_id) REFERENCES tbl_parcel_sale_event(sale_event_id) ON DELETE CASCADE |
| tbl_closing_event_pkey | PRIMARY KEY | PRIMARY KEY (closing_id) |
| tbl_closing_event_sale_event_id_closing_sequence_key | UNIQUE | UNIQUE (sale_event_id, closing_sequence) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_closing_event_sale_event_id_fkey | sale_event_id | tbl_parcel_sale_event.sale_event_id | NO ACTION | CASCADE |

#### Indexes

- `idx_closing_date`

```sql
CREATE INDEX idx_closing_date ON landscape.tbl_closing_event USING btree (closing_date)
```
- `idx_closing_sale_event`

```sql
CREATE INDEX idx_closing_sale_event ON landscape.tbl_closing_event USING btree (sale_event_id)
```
- `idx_closing_sequence`

```sql
CREATE INDEX idx_closing_sequence ON landscape.tbl_closing_event USING btree (sale_event_id, closing_sequence)
```
- `tbl_closing_event_pkey`

```sql
CREATE UNIQUE INDEX tbl_closing_event_pkey ON landscape.tbl_closing_event USING btree (closing_id)
```
- `tbl_closing_event_sale_event_id_closing_sequence_key`

```sql
CREATE UNIQUE INDEX tbl_closing_event_sale_event_id_closing_sequence_key ON landscape.tbl_closing_event USING btree (sale_event_id, closing_sequence)
```

### `tbl_commercial_lease`

- Columns: 30
- Constraints: 4
- Foreign keys: 3
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | NO | nextval('tbl_cre_lease_lease_id_seq'::regclass) |  |
| 2 | income_property_id | integer [32,0] | YES |  |  |
| 3 | space_id | integer [32,0] | YES |  |  |
| 4 | tenant_id | integer [32,0] | YES |  |  |
| 5 | lease_number | character varying(50) | YES |  |  |
| 6 | lease_type | character varying(50) | YES |  |  |
| 7 | lease_status | character varying(50) | YES |  |  |
| 8 | lease_execution_date | date | YES |  |  |
| 9 | lease_commencement_date | date | YES |  |  |
| 10 | rent_commencement_date | date | YES |  |  |
| 11 | lease_expiration_date | date | YES |  |  |
| 12 | lease_term_months | integer [32,0] | YES |  |  |
| 13 | leased_sf | numeric [10,2] | YES |  |  |
| 14 | number_of_options | integer [32,0] | YES |  |  |
| 15 | option_term_months | integer [32,0] | YES |  |  |
| 16 | option_notice_months | integer [32,0] | YES |  |  |
| 17 | early_termination_allowed | boolean | YES | false |  |
| 18 | termination_notice_months | integer [32,0] | YES |  |  |
| 19 | termination_penalty_amount | numeric [12,2] | YES |  |  |
| 20 | security_deposit_amount | numeric [12,2] | YES |  |  |
| 21 | security_deposit_months | numeric [4,2] | YES |  |  |
| 22 | expansion_rights | boolean | YES | false |  |
| 23 | right_of_first_refusal | boolean | YES | false |  |
| 24 | exclusive_use_clause | text | YES |  |  |
| 25 | co_tenancy_clause | text | YES |  |  |
| 26 | radius_restriction | text | YES |  |  |
| 27 | notes | text | YES |  |  |
| 28 | created_at | timestamp without time zone | YES | now() |  |
| 29 | updated_at | timestamp without time zone | YES | now() |  |
| 30 | lease_type_code | character varying(10) | YES | 'CRE'::character varying |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_lease_cre_property_id_fkey | FOREIGN KEY | FOREIGN KEY (income_property_id) REFERENCES tbl_income_property(income_property_id) |
| tbl_cre_lease_space_id_fkey | FOREIGN KEY | FOREIGN KEY (space_id) REFERENCES tbl_space(space_id) |
| tbl_cre_lease_tenant_id_fkey | FOREIGN KEY | FOREIGN KEY (tenant_id) REFERENCES tbl_tenant(tenant_id) |
| tbl_cre_lease_pkey | PRIMARY KEY | PRIMARY KEY (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cre_lease_cre_property_id_fkey | income_property_id | tbl_income_property.income_property_id | NO ACTION | NO ACTION |
| tbl_cre_lease_space_id_fkey | space_id | tbl_space.space_id | NO ACTION | NO ACTION |
| tbl_cre_lease_tenant_id_fkey | tenant_id | tbl_tenant.tenant_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_cre_lease_expiration`

```sql
CREATE INDEX idx_cre_lease_expiration ON landscape.tbl_commercial_lease USING btree (lease_expiration_date)
```
- `idx_cre_lease_space_id`

```sql
CREATE INDEX idx_cre_lease_space_id ON landscape.tbl_commercial_lease USING btree (space_id)
```
- `idx_cre_lease_status`

```sql
CREATE INDEX idx_cre_lease_status ON landscape.tbl_commercial_lease USING btree (lease_status)
```
- `idx_cre_lease_tenant`

```sql
CREATE INDEX idx_cre_lease_tenant ON landscape.tbl_commercial_lease USING btree (tenant_id)
```
- `idx_cre_lease_tenant_id`

```sql
CREATE INDEX idx_cre_lease_tenant_id ON landscape.tbl_commercial_lease USING btree (tenant_id)
```
- `idx_lease_income_property`

```sql
CREATE INDEX idx_lease_income_property ON landscape.tbl_commercial_lease USING btree (income_property_id)
```
- `tbl_cre_lease_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_lease_pkey ON landscape.tbl_commercial_lease USING btree (lease_id)
```

### `tbl_contact`

- Columns: 26
- Constraints: 3
- Foreign keys: 1
- Indexes: 8
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | contact_id | bigint [64,0] | NO | nextval('tbl_contact_contact_id_seq'::regclass) | Primary key |
| 2 | cabinet_id | bigint [64,0] | NO |  | Foreign key to owning cabinet |
| 3 | contact_type | character varying(50) | NO |  | Classification: Person, Company, Entity, Fund, Government, Other |
| 4 | name | character varying(200) | NO |  | Full name (person) or legal name (entity) |
| 5 | display_name | character varying(200) | YES |  | Optional short name for display |
| 6 | first_name | character varying(100) | YES |  | First name (persons only) |
| 7 | last_name | character varying(100) | YES |  | Last name (persons only) |
| 8 | title | character varying(100) | YES |  | Job title (persons only) |
| 9 | company_name | character varying(200) | YES |  | Employer (persons) or parent company (entities) |
| 10 | entity_type | character varying(100) | YES |  | Legal entity type: LLC, LP, Corporation, Trust, etc. |
| 11 | email | character varying(255) | YES |  |  |
| 12 | phone | character varying(50) | YES |  |  |
| 13 | phone_mobile | character varying(50) | YES |  |  |
| 14 | address_line1 | character varying(255) | YES |  |  |
| 15 | address_line2 | character varying(255) | YES |  |  |
| 16 | city | character varying(100) | YES |  |  |
| 17 | state | character varying(50) | YES |  |  |
| 18 | postal_code | character varying(20) | YES |  |  |
| 19 | country | character varying(100) | YES | 'United States'::character varying |  |
| 20 | notes | text | YES |  |  |
| 21 | tags | jsonb | YES | '[]'::jsonb | JSON array of flexible tags for categorization |
| 22 | custom_fields | jsonb | YES | '{}'::jsonb | JSON object for enterprise-specific custom fields |
| 23 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 24 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 25 | created_by | text | YES |  |  |
| 26 | is_active | boolean | YES | true |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_contact_contact_type_check | CHECK | CHECK (((contact_type)::text = ANY ((ARRAY['Person'::character varying, 'Company'::character varying, 'Entity'::character varying, 'Fund'::character varying, 'Government'::character varying, 'Other'::character varying])::text[]))) |
| tbl_contact_cabinet_id_fkey | FOREIGN KEY | FOREIGN KEY (cabinet_id) REFERENCES tbl_cabinet(cabinet_id) ON DELETE CASCADE |
| tbl_contact_pkey | PRIMARY KEY | PRIMARY KEY (contact_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_contact_cabinet_id_fkey | cabinet_id | tbl_cabinet.cabinet_id | NO ACTION | CASCADE |

#### Indexes

- `idx_contact_active`

```sql
CREATE INDEX idx_contact_active ON landscape.tbl_contact USING btree (cabinet_id, is_active) WHERE (is_active = true)
```
- `idx_contact_cabinet`

```sql
CREATE INDEX idx_contact_cabinet ON landscape.tbl_contact USING btree (cabinet_id)
```
- `idx_contact_company`

```sql
CREATE INDEX idx_contact_company ON landscape.tbl_contact USING btree (cabinet_id, company_name) WHERE (company_name IS NOT NULL)
```
- `idx_contact_email`

```sql
CREATE INDEX idx_contact_email ON landscape.tbl_contact USING btree (cabinet_id, email) WHERE (email IS NOT NULL)
```
- `idx_contact_name`

```sql
CREATE INDEX idx_contact_name ON landscape.tbl_contact USING btree (cabinet_id, name)
```
- `idx_contact_search`

```sql
CREATE INDEX idx_contact_search ON landscape.tbl_contact USING gin (to_tsvector('english'::regconfig, (((((COALESCE(name, ''::character varying))::text || ' '::text) || (COALESCE(company_name, ''::character varying))::text) || ' '::text) || (COALESCE(email, ''::character varying))::text)))
```
- `idx_contact_type`

```sql
CREATE INDEX idx_contact_type ON landscape.tbl_contact USING btree (cabinet_id, contact_type)
```
- `tbl_contact_pkey`

```sql
CREATE UNIQUE INDEX tbl_contact_pkey ON landscape.tbl_contact USING btree (contact_id)
```

### `tbl_contact_relationship`

- Columns: 11
- Constraints: 7
- Foreign keys: 3
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | relationship_id | bigint [64,0] | NO | nextval('tbl_contact_relationship_relationship_id_seq'::regclass) | Primary key |
| 2 | cabinet_id | bigint [64,0] | NO |  | Redundant for query optimization; must match both contacts cabinet_id |
| 3 | contact_id | bigint [64,0] | NO |  | Source contact in the relationship |
| 4 | related_to_id | bigint [64,0] | NO |  | Target contact in the relationship |
| 5 | relationship_type | character varying(50) | NO |  | Type of relationship: Employee, Principal, Subsidiary, Affiliate, Member, Counsel, Advisor, Spouse, Other |
| 6 | role_title | character varying(200) | YES |  | Optional title/position in the relationship (e.g., "Managing Partner") |
| 7 | start_date | date | YES |  | When the relationship began |
| 8 | end_date | date | YES |  | When the relationship ended (NULL if current) |
| 9 | notes | text | YES |  |  |
| 10 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 11 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_no_self_relationship | CHECK | CHECK ((contact_id <> related_to_id)) |
| tbl_contact_relationship_relationship_type_check | CHECK | CHECK (((relationship_type)::text = ANY ((ARRAY['Employee'::character varying, 'Principal'::character varying, 'Subsidiary'::character varying, 'Affiliate'::character varying, 'Member'::character varying, 'Counsel'::character varying, 'Advisor'::character varying, 'Spouse'::character varying, 'Other'::character varying])::text[]))) |
| tbl_contact_relationship_cabinet_id_fkey | FOREIGN KEY | FOREIGN KEY (cabinet_id) REFERENCES tbl_cabinet(cabinet_id) ON DELETE CASCADE |
| tbl_contact_relationship_contact_id_fkey | FOREIGN KEY | FOREIGN KEY (contact_id) REFERENCES tbl_contact(contact_id) ON DELETE CASCADE |
| tbl_contact_relationship_related_to_id_fkey | FOREIGN KEY | FOREIGN KEY (related_to_id) REFERENCES tbl_contact(contact_id) ON DELETE CASCADE |
| tbl_contact_relationship_pkey | PRIMARY KEY | PRIMARY KEY (relationship_id) |
| uq_contact_relationship | UNIQUE | UNIQUE (contact_id, related_to_id, relationship_type) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_contact_relationship_cabinet_id_fkey | cabinet_id | tbl_cabinet.cabinet_id | NO ACTION | CASCADE |
| tbl_contact_relationship_contact_id_fkey | contact_id | tbl_contact.contact_id | NO ACTION | CASCADE |
| tbl_contact_relationship_related_to_id_fkey | related_to_id | tbl_contact.contact_id | NO ACTION | CASCADE |

#### Indexes

- `idx_contact_rel_cabinet`

```sql
CREATE INDEX idx_contact_rel_cabinet ON landscape.tbl_contact_relationship USING btree (cabinet_id)
```
- `idx_contact_rel_contact`

```sql
CREATE INDEX idx_contact_rel_contact ON landscape.tbl_contact_relationship USING btree (contact_id)
```
- `idx_contact_rel_current`

```sql
CREATE INDEX idx_contact_rel_current ON landscape.tbl_contact_relationship USING btree (contact_id, related_to_id) WHERE (end_date IS NULL)
```
- `idx_contact_rel_related`

```sql
CREATE INDEX idx_contact_rel_related ON landscape.tbl_contact_relationship USING btree (related_to_id)
```
- `idx_contact_rel_type`

```sql
CREATE INDEX idx_contact_rel_type ON landscape.tbl_contact_relationship USING btree (relationship_type)
```
- `tbl_contact_relationship_pkey`

```sql
CREATE UNIQUE INDEX tbl_contact_relationship_pkey ON landscape.tbl_contact_relationship USING btree (relationship_id)
```
- `uq_contact_relationship`

```sql
CREATE UNIQUE INDEX uq_contact_relationship ON landscape.tbl_contact_relationship USING btree (contact_id, related_to_id, relationship_type)
```

### `tbl_contact_role`

- Columns: 12
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | role_id | integer [32,0] | NO | nextval('tbl_contact_role_role_id_seq'::regclass) | Primary key |
| 2 | cabinet_id | bigint [64,0] | YES |  | NULL for system roles, cabinet_id for custom roles |
| 3 | role_code | character varying(50) | NO |  | Internal identifier (snake_case) |
| 4 | role_label | character varying(100) | NO |  | Human-readable display label |
| 5 | role_category | character varying(50) | NO |  | Grouping category for UI organization |
| 6 | typical_contact_types | jsonb | YES | '["Company", "Entity", "Person"]'::jsonb | JSON array of contact types this role typically applies to |
| 7 | description | text | YES |  |  |
| 8 | display_order | integer [32,0] | YES | 100 |  |
| 9 | is_system | boolean | YES | false | TRUE for built-in roles that cannot be deleted |
| 10 | is_active | boolean | YES | true |  |
| 11 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 12 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_contact_role_role_category_check | CHECK | CHECK (((role_category)::text = ANY ((ARRAY['Principal'::character varying, 'Financing'::character varying, 'Advisor'::character varying, 'Contact'::character varying, 'Other'::character varying])::text[]))) |
| tbl_contact_role_cabinet_id_fkey | FOREIGN KEY | FOREIGN KEY (cabinet_id) REFERENCES tbl_cabinet(cabinet_id) ON DELETE CASCADE |
| tbl_contact_role_pkey | PRIMARY KEY | PRIMARY KEY (role_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_contact_role_cabinet_id_fkey | cabinet_id | tbl_cabinet.cabinet_id | NO ACTION | CASCADE |

#### Indexes

- `idx_contact_role_cabinet`

```sql
CREATE INDEX idx_contact_role_cabinet ON landscape.tbl_contact_role USING btree (cabinet_id)
```
- `idx_contact_role_category`

```sql
CREATE INDEX idx_contact_role_category ON landscape.tbl_contact_role USING btree (role_category)
```
- `idx_contact_role_unique`

```sql
CREATE UNIQUE INDEX idx_contact_role_unique ON landscape.tbl_contact_role USING btree (COALESCE(cabinet_id, (0)::bigint), role_code)
```
- `tbl_contact_role_pkey`

```sql
CREATE UNIQUE INDEX tbl_contact_role_pkey ON landscape.tbl_contact_role USING btree (role_id)
```

### `tbl_contacts_legacy`

- Columns: 31
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 2

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | contact_id | integer [32,0] | NO | nextval('tbl_contacts_contact_id_seq'::regclass) |  |
| 2 | company_name | character varying(255) | YES |  |  |
| 3 | contact_person | character varying(255) | YES |  |  |
| 4 | email | character varying(255) | YES |  |  |
| 5 | phone | character varying(50) | YES |  |  |
| 6 | address_line1 | character varying(255) | YES |  |  |
| 7 | address_line2 | character varying(255) | YES |  |  |
| 8 | city | character varying(100) | YES |  |  |
| 9 | state | character varying(50) | YES |  |  |
| 10 | zip | character varying(20) | YES |  |  |
| 11 | is_parent | boolean | YES | false |  |
| 12 | parent_company_name | character varying(255) | YES |  |  |
| 13 | parent_contact_person | character varying(255) | YES |  |  |
| 14 | parent_email | character varying(255) | YES |  |  |
| 15 | parent_phone | character varying(50) | YES |  |  |
| 16 | parent_address_line1 | character varying(255) | YES |  |  |
| 17 | parent_address_line2 | character varying(255) | YES |  |  |
| 18 | parent_city | character varying(100) | YES |  |  |
| 19 | parent_state | character varying(50) | YES |  |  |
| 20 | parent_zip | character varying(20) | YES |  |  |
| 21 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 22 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 23 | contact_role | character varying(50) | YES |  | Contact role type: property_contact, listing_broker, owner_representative, or custom |
| 24 | title | character varying(100) | YES |  | Contact job title (e.g., Regional Manager, Sr. Vice President) |
| 25 | company | character varying(200) | YES |  | Company/organization name |
| 26 | phone_direct | character varying(50) | YES |  |  |
| 27 | phone_mobile | character varying(50) | YES |  |  |
| 28 | notes | text | YES |  | Additional notes or context about this contact |
| 29 | sort_order | integer [32,0] | YES | 0 |  |
| 30 | project_id | integer [32,0] | YES |  |  |
| 31 | contact_name | character varying(255) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_contacts_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_contacts_pkey | PRIMARY KEY | PRIMARY KEY (contact_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_contacts_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_contacts_company_name`

```sql
CREATE INDEX idx_contacts_company_name ON landscape.tbl_contacts_legacy USING btree (company_name)
```
- `idx_contacts_project_role`

```sql
CREATE INDEX idx_contacts_project_role ON landscape.tbl_contacts_legacy USING btree (project_id, contact_role)
```
- `tbl_contacts_pkey`

```sql
CREATE UNIQUE INDEX tbl_contacts_pkey ON landscape.tbl_contacts_legacy USING btree (contact_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_contacts_legacy FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
- `update_contacts_updated_at`

```sql
CREATE TRIGGER update_contacts_updated_at BEFORE UPDATE ON landscape.tbl_contacts_legacy FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_cost_allocation`

- Columns: 11
- Constraints: 6
- Foreign keys: 3
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | allocation_id | bigint [64,0] | NO | nextval('tbl_cost_allocation_allocation_id_seq'::regclass) |  |
| 2 | finance_structure_id | bigint [64,0] | NO |  |  |
| 3 | container_id | bigint [64,0] | NO |  |  |
| 4 | allocation_percentage | numeric [6,3] | NO |  | Percentage of finance structure budget allocated to this container. Sum across all allocations for a structure should equal 100%. |
| 5 | allocation_basis | character varying(50) | YES |  |  |
| 6 | allocated_budget_amount | numeric [15,2] | YES |  |  |
| 7 | spent_to_date | numeric [15,2] | YES | 0 |  |
| 8 | cost_to_complete | numeric [15,2] | YES |  | Remaining budget allocated to this container. Used in sale settlement calculations. |
| 9 | created_at | timestamp without time zone | YES | now() |  |
| 10 | updated_at | timestamp without time zone | YES | now() |  |
| 11 | scenario_id | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| valid_percentage | CHECK | CHECK (((allocation_percentage >= (0)::numeric) AND (allocation_percentage <= (100)::numeric))) |
| tbl_cost_allocation_container_id_fkey | FOREIGN KEY | FOREIGN KEY (container_id) REFERENCES tbl_division(division_id) ON DELETE CASCADE |
| tbl_cost_allocation_finance_structure_id_fkey | FOREIGN KEY | FOREIGN KEY (finance_structure_id) REFERENCES tbl_finance_structure(finance_structure_id) ON DELETE CASCADE |
| tbl_cost_allocation_scenario_id_fkey | FOREIGN KEY | FOREIGN KEY (scenario_id) REFERENCES tbl_scenario(scenario_id) ON DELETE CASCADE |
| tbl_cost_allocation_pkey | PRIMARY KEY | PRIMARY KEY (allocation_id) |
| unique_allocation | UNIQUE | UNIQUE (finance_structure_id, container_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cost_allocation_container_id_fkey | container_id | tbl_division.division_id | NO ACTION | CASCADE |
| tbl_cost_allocation_finance_structure_id_fkey | finance_structure_id | tbl_finance_structure.finance_structure_id | NO ACTION | CASCADE |
| tbl_cost_allocation_scenario_id_fkey | scenario_id | tbl_scenario.scenario_id | NO ACTION | CASCADE |

#### Indexes

- `idx_cost_alloc_container`

```sql
CREATE INDEX idx_cost_alloc_container ON landscape.tbl_cost_allocation USING btree (container_id)
```
- `idx_cost_alloc_structure`

```sql
CREATE INDEX idx_cost_alloc_structure ON landscape.tbl_cost_allocation USING btree (finance_structure_id)
```
- `idx_cost_allocation_scenario`

```sql
CREATE INDEX idx_cost_allocation_scenario ON landscape.tbl_cost_allocation USING btree (scenario_id)
```
- `tbl_cost_allocation_pkey`

```sql
CREATE UNIQUE INDEX tbl_cost_allocation_pkey ON landscape.tbl_cost_allocation USING btree (allocation_id)
```
- `unique_allocation`

```sql
CREATE UNIQUE INDEX unique_allocation ON landscape.tbl_cost_allocation USING btree (finance_structure_id, container_id)
```

### `tbl_cost_approach`

- Columns: 25
- Constraints: 4
- Foreign keys: 1
- Indexes: 2
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | cost_approach_id | integer [32,0] | NO | nextval('tbl_cost_approach_cost_approach_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | land_valuation_method | character varying(50) | YES |  | Method used to value land: sales_comparison, allocation, extraction, other |
| 4 | land_area_sf | numeric [12,2] | YES |  |  |
| 5 | land_value_per_sf | numeric [10,2] | YES |  |  |
| 6 | total_land_value | numeric [15,2] | YES |  |  |
| 7 | cost_method | character varying(50) | YES |  | Method used to estimate replacement cost: comparative_unit, unit_in_place, quantity_survey, marshall_swift, other |
| 8 | building_area_sf | numeric [12,2] | YES |  |  |
| 9 | cost_per_sf | numeric [10,2] | YES |  |  |
| 10 | base_replacement_cost | numeric [15,2] | YES |  |  |
| 11 | entrepreneurial_incentive_pct | numeric [5,2] | YES |  |  |
| 12 | total_replacement_cost | numeric [15,2] | YES |  |  |
| 13 | physical_curable | numeric [12,2] | YES |  |  |
| 14 | physical_incurable_short | numeric [12,2] | YES |  |  |
| 15 | physical_incurable_long | numeric [12,2] | YES |  |  |
| 16 | functional_curable | numeric [12,2] | YES |  |  |
| 17 | functional_incurable | numeric [12,2] | YES |  |  |
| 18 | external_obsolescence | numeric [12,2] | YES |  |  |
| 19 | total_depreciation | numeric [15,2] | YES |  |  |
| 20 | depreciated_improvements | numeric [15,2] | YES |  |  |
| 21 | site_improvements_cost | numeric [12,2] | YES |  |  |
| 22 | site_improvements_description | text | YES |  |  |
| 23 | indicated_value | numeric [15,2] | YES |  |  |
| 24 | created_at | timestamp without time zone | YES | now() |  |
| 25 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| check_cost_method | CHECK | CHECK (((cost_method)::text = ANY ((ARRAY['comparative_unit'::character varying, 'unit_in_place'::character varying, 'quantity_survey'::character varying, 'marshall_swift'::character varying, 'other'::character varying])::text[]))) |
| check_land_method | CHECK | CHECK (((land_valuation_method)::text = ANY ((ARRAY['sales_comparison'::character varying, 'allocation'::character varying, 'extraction'::character varying, 'other'::character varying])::text[]))) |
| tbl_cost_approach_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_cost_approach_pkey | PRIMARY KEY | PRIMARY KEY (cost_approach_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cost_approach_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_cost_approach_project`

```sql
CREATE UNIQUE INDEX idx_cost_approach_project ON landscape.tbl_cost_approach USING btree (project_id)
```
- `tbl_cost_approach_pkey`

```sql
CREATE UNIQUE INDEX tbl_cost_approach_pkey ON landscape.tbl_cost_approach USING btree (cost_approach_id)
```

#### Triggers

- `update_cost_approach_updated_at`

```sql
CREATE TRIGGER update_cost_approach_updated_at BEFORE UPDATE ON landscape.tbl_cost_approach FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_cost_approach_depreciation`

- Columns: 14
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | depreciation_id | integer [32,0] | NO |  |  |
| 2 | physical_curable | numeric [12,2] | NO |  |  |
| 3 | physical_incurable_short | numeric [12,2] | NO |  |  |
| 4 | physical_incurable_long | numeric [12,2] | NO |  |  |
| 5 | functional_curable | numeric [12,2] | NO |  |  |
| 6 | functional_incurable | numeric [12,2] | NO |  |  |
| 7 | external_obsolescence | numeric [12,2] | NO |  |  |
| 8 | effective_age_years | integer [32,0] | YES |  |  |
| 9 | remaining_life_years | integer [32,0] | YES |  |  |
| 10 | depreciation_method | character varying(50) | YES |  |  |
| 11 | notes | text | YES |  |  |
| 12 | created_at | timestamp with time zone | NO |  |  |
| 13 | updated_at | timestamp with time zone | NO |  |  |
| 14 | project_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cost_approach_de_project_id_fd37fd12_fk_tbl_proje | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) DEFERRABLE INITIALLY DEFERRED |
| tbl_cost_approach_depreciation_pkey | PRIMARY KEY | PRIMARY KEY (depreciation_id) |
| tbl_cost_approach_depreciation_project_id_key | UNIQUE | UNIQUE (project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cost_approach_de_project_id_fd37fd12_fk_tbl_proje | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_cost_approach_depreciation_pkey`

```sql
CREATE UNIQUE INDEX tbl_cost_approach_depreciation_pkey ON landscape.tbl_cost_approach_depreciation USING btree (depreciation_id)
```
- `tbl_cost_approach_depreciation_project_id_key`

```sql
CREATE UNIQUE INDEX tbl_cost_approach_depreciation_project_id_key ON landscape.tbl_cost_approach_depreciation USING btree (project_id)
```

### `tbl_dcf_analysis`

- Columns: 24
- Constraints: 9
- Foreign keys: 5
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | dcf_analysis_id | bigint [64,0] | NO | nextval('tbl_dcf_analysis_dcf_analysis_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | property_type | character varying(20) | NO |  | Property type discriminator: land_dev (from LAND project_type_code) or cre (all other types) |
| 4 | hold_period_years | integer [32,0] | YES |  |  |
| 5 | discount_rate | numeric [6,4] | YES |  | Discount rate for DCF NPV calculation (decimal, e.g., 0.085 = 8.5%) |
| 6 | exit_cap_rate | numeric [6,4] | YES |  | Terminal/exit cap rate for reversion value (decimal, e.g., 0.06 = 6%) |
| 7 | selling_costs_pct | numeric [5,4] | YES |  |  |
| 8 | going_in_cap_rate | numeric [6,4] | YES |  |  |
| 9 | cap_rate_method | character varying(20) | YES |  |  |
| 10 | sensitivity_interval | numeric [6,4] | YES |  |  |
| 11 | vacancy_rate | numeric [5,4] | YES |  |  |
| 12 | stabilized_vacancy | numeric [5,4] | YES |  |  |
| 13 | credit_loss | numeric [5,4] | YES |  |  |
| 14 | management_fee_pct | numeric [5,4] | YES |  |  |
| 15 | reserves_per_unit | numeric [10,2] | YES |  |  |
| 16 | income_growth_set_id | integer [32,0] | YES |  | FK to core_fin_growth_rate_sets for CRE income growth (rent escalation) |
| 17 | expense_growth_set_id | integer [32,0] | YES |  | FK to core_fin_growth_rate_sets for CRE expense growth (OpEx inflation) |
| 18 | price_growth_set_id | integer [32,0] | YES |  | FK to core_fin_growth_rate_sets for Land Dev price appreciation |
| 19 | cost_inflation_set_id | integer [32,0] | YES |  | FK to core_fin_growth_rate_sets for Land Dev development cost inflation |
| 20 | bulk_sale_enabled | boolean | YES | false | Land Dev: Whether to model bulk sale of remaining inventory at exit |
| 21 | bulk_sale_period | integer [32,0] | YES |  |  |
| 22 | bulk_sale_discount_pct | numeric [5,4] | YES |  | Land Dev: Discount applied to remaining inventory in bulk sale (decimal) |
| 23 | created_at | timestamp with time zone | YES | now() |  |
| 24 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_dcf_cap_rate_method | CHECK | CHECK (((cap_rate_method IS NULL) OR ((cap_rate_method)::text = ANY ((ARRAY['comp_sales'::character varying, 'band'::character varying, 'survey'::character varying, 'direct_entry'::character varying])::text[])))) |
| chk_dcf_property_type | CHECK | CHECK (((property_type)::text = ANY ((ARRAY['cre'::character varying, 'land_dev'::character varying])::text[]))) |
| tbl_dcf_analysis_cost_inflation_set_id_fkey | FOREIGN KEY | FOREIGN KEY (cost_inflation_set_id) REFERENCES core_fin_growth_rate_sets(set_id) ON DELETE SET NULL |
| tbl_dcf_analysis_expense_growth_set_id_fkey | FOREIGN KEY | FOREIGN KEY (expense_growth_set_id) REFERENCES core_fin_growth_rate_sets(set_id) ON DELETE SET NULL |
| tbl_dcf_analysis_income_growth_set_id_fkey | FOREIGN KEY | FOREIGN KEY (income_growth_set_id) REFERENCES core_fin_growth_rate_sets(set_id) ON DELETE SET NULL |
| tbl_dcf_analysis_price_growth_set_id_fkey | FOREIGN KEY | FOREIGN KEY (price_growth_set_id) REFERENCES core_fin_growth_rate_sets(set_id) ON DELETE SET NULL |
| tbl_dcf_analysis_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_dcf_analysis_pkey | PRIMARY KEY | PRIMARY KEY (dcf_analysis_id) |
| uq_dcf_analysis_project_type | UNIQUE | UNIQUE (project_id, property_type) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_dcf_analysis_cost_inflation_set_id_fkey | cost_inflation_set_id | core_fin_growth_rate_sets.set_id | NO ACTION | SET NULL |
| tbl_dcf_analysis_expense_growth_set_id_fkey | expense_growth_set_id | core_fin_growth_rate_sets.set_id | NO ACTION | SET NULL |
| tbl_dcf_analysis_income_growth_set_id_fkey | income_growth_set_id | core_fin_growth_rate_sets.set_id | NO ACTION | SET NULL |
| tbl_dcf_analysis_price_growth_set_id_fkey | price_growth_set_id | core_fin_growth_rate_sets.set_id | NO ACTION | SET NULL |
| tbl_dcf_analysis_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_dcf_analysis_project`

```sql
CREATE INDEX idx_dcf_analysis_project ON landscape.tbl_dcf_analysis USING btree (project_id)
```
- `idx_dcf_analysis_property_type`

```sql
CREATE INDEX idx_dcf_analysis_property_type ON landscape.tbl_dcf_analysis USING btree (property_type)
```
- `tbl_dcf_analysis_pkey`

```sql
CREATE UNIQUE INDEX tbl_dcf_analysis_pkey ON landscape.tbl_dcf_analysis USING btree (dcf_analysis_id)
```
- `uq_dcf_analysis_project_type`

```sql
CREATE UNIQUE INDEX uq_dcf_analysis_project_type ON landscape.tbl_dcf_analysis USING btree (project_id, property_type)
```

#### Triggers

- `trg_dcf_analysis_updated`

```sql
CREATE TRIGGER trg_dcf_analysis_updated BEFORE UPDATE ON landscape.tbl_dcf_analysis FOR EACH ROW EXECUTE FUNCTION update_dcf_analysis_updated_at()
```

### `tbl_debt_draw_schedule`

- Columns: 30
- Constraints: 5
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | draw_id | bigint [64,0] | NO |  |  |
| 2 | loan_id | bigint [64,0] | NO |  |  |
| 3 | period_id | bigint [64,0] | NO |  |  |
| 4 | draw_number | integer [32,0] | YES |  |  |
| 5 | draw_amount | numeric [15,2] | YES |  |  |
| 6 | cumulative_drawn | numeric [15,2] | YES |  |  |
| 7 | available_remaining | numeric [15,2] | YES |  |  |
| 8 | beginning_balance | numeric [15,2] | YES |  |  |
| 9 | ending_balance | numeric [15,2] | YES |  |  |
| 10 | draw_date | date | YES |  |  |
| 11 | draw_purpose | character varying(200) | YES |  |  |
| 12 | draw_status | character varying(20) | YES | 'PROJECTED'::character varying |  |
| 13 | interest_rate_pct | numeric [6,4] | YES |  |  |
| 14 | interest_amount | numeric [12,2] | YES |  |  |
| 15 | interest_expense | numeric [12,2] | YES |  |  |
| 16 | interest_paid | numeric [12,2] | YES |  |  |
| 17 | deferred_interest | numeric [12,2] | YES | 0 |  |
| 18 | cumulative_interest | numeric [12,2] | YES |  |  |
| 19 | principal_payment | numeric [12,2] | YES |  |  |
| 20 | outstanding_balance | numeric [15,2] | YES |  |  |
| 21 | unused_fee_charge | numeric [10,2] | YES | 0 |  |
| 22 | commitment_fee_charge | numeric [10,2] | YES | 0 |  |
| 23 | other_fees | numeric [10,2] | YES | 0 |  |
| 24 | request_date | date | YES |  |  |
| 25 | approval_date | date | YES |  |  |
| 26 | funding_date | date | YES |  |  |
| 27 | inspector_approval | boolean | YES |  |  |
| 28 | lender_approval | boolean | YES |  |  |
| 29 | created_at | timestamp with time zone | YES | now() |  |
| 30 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_debt_draw_schedule_draw_status_check | CHECK | CHECK (((draw_status)::text = ANY ((ARRAY['PROJECTED'::character varying, 'REQUESTED'::character varying, 'FUNDED'::character varying, 'ACTUAL'::character varying])::text[]))) |
| tbl_debt_draw_schedule_loan_id_fkey | FOREIGN KEY | FOREIGN KEY (loan_id) REFERENCES tbl_loan(loan_id) ON DELETE CASCADE |
| tbl_debt_draw_schedule_period_id_fkey | FOREIGN KEY | FOREIGN KEY (period_id) REFERENCES tbl_calculation_period(period_id) ON DELETE CASCADE |
| tbl_debt_draw_schedule_pkey | PRIMARY KEY | PRIMARY KEY (draw_id) |
| tbl_debt_draw_schedule_loan_id_period_id_key | UNIQUE | UNIQUE (loan_id, period_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_debt_draw_schedule_loan_id_fkey | loan_id | tbl_loan.loan_id | NO ACTION | CASCADE |
| tbl_debt_draw_schedule_period_id_fkey | period_id | tbl_calculation_period.period_id | NO ACTION | CASCADE |

#### Indexes

- `idx_debt_draw_loan`

```sql
CREATE INDEX idx_debt_draw_loan ON landscape.tbl_debt_draw_schedule USING btree (loan_id, period_id)
```
- `idx_debt_draw_period`

```sql
CREATE INDEX idx_debt_draw_period ON landscape.tbl_debt_draw_schedule USING btree (period_id)
```
- `tbl_debt_draw_schedule_loan_id_period_id_key`

```sql
CREATE UNIQUE INDEX tbl_debt_draw_schedule_loan_id_period_id_key ON landscape.tbl_debt_draw_schedule USING btree (loan_id, period_id)
```
- `tbl_debt_draw_schedule_pkey`

```sql
CREATE UNIQUE INDEX tbl_debt_draw_schedule_pkey ON landscape.tbl_debt_draw_schedule USING btree (draw_id)
```

### `tbl_division`

- Columns: 18
- Constraints: 6
- Foreign keys: 2
- Indexes: 5
- Triggers: 4

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | division_id | bigint [64,0] | NO |  | Primary key for division (formerly container_id) |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | parent_division_id | bigint [64,0] | YES |  | Parent division in hierarchy (NULL for tier 0) |
| 4 | tier | integer [32,0] | NO |  | Hierarchy depth: 0=Project, 1=Area/Property, 2=Phase/Building, 3=Parcel/Unit |
| 5 | division_code | character varying(50) | NO |  |  |
| 6 | display_name | character varying(200) | NO |  |  |
| 7 | sort_order | integer [32,0] | YES | 0 |  |
| 8 | attributes | jsonb | YES |  |  |
| 9 | is_active | boolean | YES | true |  |
| 10 | created_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |
| 11 | updated_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |
| 12 | sale_phase_code | character varying(20) | YES |  | Phase grouping for parcel sales (container-level tracking) |
| 13 | custom_sale_date | date | YES |  | Custom sale date override for container |
| 14 | has_sale_overrides | boolean | YES | false | True if container has custom sale overrides |
| 15 | option_deposit_pct | numeric [5,4] | YES |  | Option deposit as decimal (0.15 = 15%). Stored as decimal, NOT percentage. |
| 16 | option_deposit_cap_pct | numeric [5,4] | YES |  | Deposit cap ratio as decimal (0.20 = 20%). Stored as decimal, NOT percentage. |
| 17 | retail_lot_price | numeric [12,2] | YES |  | Per-lot option/takedown price ($). |
| 18 | premium_pct | numeric [5,4] | YES |  | Phase premium as decimal (0.15 = 15%). Stored as decimal, NOT percentage. |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ck_container_parent_level | CHECK | CHECK ((((tier = 1) AND (parent_division_id IS NULL)) OR ((tier = ANY (ARRAY[2, 3, 4, 5])) AND (parent_division_id IS NOT NULL)))) |
| tbl_container_container_level_check | CHECK | CHECK (((tier >= 1) AND (tier <= 5))) |
| fk_container_parent | FOREIGN KEY | FOREIGN KEY (parent_division_id) REFERENCES tbl_division(division_id) ON DELETE CASCADE |
| fk_container_project | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_container_pkey | PRIMARY KEY | PRIMARY KEY (division_id) |
| uq_container_code | UNIQUE | UNIQUE (project_id, division_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_container_parent | parent_division_id | tbl_division.division_id | NO ACTION | CASCADE |
| fk_container_project | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_container_project_level`

```sql
CREATE INDEX idx_container_project_level ON landscape.tbl_division USING btree (project_id, tier, sort_order, division_id)
```
- `idx_container_sale_phase`

```sql
CREATE INDEX idx_container_sale_phase ON landscape.tbl_division USING btree (project_id, sale_phase_code) WHERE (sale_phase_code IS NOT NULL)
```
- `idx_division_parent`

```sql
CREATE INDEX idx_division_parent ON landscape.tbl_division USING btree (parent_division_id)
```
- `tbl_container_pkey`

```sql
CREATE UNIQUE INDEX tbl_container_pkey ON landscape.tbl_division USING btree (division_id)
```
- `uq_container_code`

```sql
CREATE UNIQUE INDEX uq_container_code ON landscape.tbl_division USING btree (project_id, division_code)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
- `trigger_auto_populate_sort_order`

```sql
CREATE TRIGGER trigger_auto_populate_sort_order BEFORE INSERT ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION auto_populate_sort_order()
```
- `trigger_update_container_timestamp`

```sql
CREATE TRIGGER trigger_update_container_timestamp BEFORE UPDATE ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
- `trigger_validate_container_parent`

```sql
CREATE TRIGGER trigger_validate_container_parent BEFORE INSERT OR UPDATE ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION validate_container_parent()
```

### `tbl_document_project`

- Columns: 6
- Constraints: 5
- Foreign keys: 2
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | document_project_id | bigint [64,0] | NO | nextval('tbl_document_project_document_project_id_seq'::regclass) |  |
| 2 | document_id | bigint [64,0] | NO |  |  |
| 3 | project_id | bigint [64,0] | NO |  |  |
| 4 | relationship_type | character varying(50) | YES | 'attached'::character varying |  |
| 5 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 6 | created_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_document_project_relationship_type_check | CHECK | CHECK (((relationship_type)::text = ANY ((ARRAY['attached'::character varying, 'reference'::character varying, 'source'::character varying])::text[]))) |
| tbl_document_project_document_id_fkey | FOREIGN KEY | FOREIGN KEY (document_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| tbl_document_project_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_document_project_pkey | PRIMARY KEY | PRIMARY KEY (document_project_id) |
| uq_document_project | UNIQUE | UNIQUE (document_id, project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_document_project_document_id_fkey | document_id | core_doc.doc_id | NO ACTION | CASCADE |
| tbl_document_project_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_doc_project_doc`

```sql
CREATE INDEX idx_doc_project_doc ON landscape.tbl_document_project USING btree (document_id)
```
- `idx_doc_project_project`

```sql
CREATE INDEX idx_doc_project_project ON landscape.tbl_document_project USING btree (project_id)
```
- `idx_doc_project_type`

```sql
CREATE INDEX idx_doc_project_type ON landscape.tbl_document_project USING btree (relationship_type)
```
- `tbl_document_project_pkey`

```sql
CREATE UNIQUE INDEX tbl_document_project_pkey ON landscape.tbl_document_project USING btree (document_project_id)
```
- `uq_document_project`

```sql
CREATE UNIQUE INDEX uq_document_project ON landscape.tbl_document_project USING btree (document_id, project_id)
```

### `tbl_dynamic_column_definition`

- Columns: 14
- Constraints: 5
- Foreign keys: 3
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | table_name | character varying(100) | NO |  |  |
| 3 | column_key | character varying(100) | NO |  |  |
| 4 | display_label | character varying(100) | NO |  |  |
| 5 | data_type | character varying(20) | NO |  |  |
| 6 | format_pattern | character varying(50) | YES |  |  |
| 7 | source | character varying(20) | NO |  |  |
| 8 | created_at | timestamp with time zone | NO |  |  |
| 9 | is_active | boolean | NO |  |  |
| 10 | is_proposed | boolean | NO |  |  |
| 11 | display_order | integer [32,0] | NO |  |  |
| 12 | created_by_id | bigint [64,0] | YES |  |  |
| 13 | project_id | integer [32,0] | NO |  |  |
| 14 | proposed_from_document_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_dynamic_column_d_created_by_id_9b1688b7_fk_auth_user | FOREIGN KEY | FOREIGN KEY (created_by_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| tbl_dynamic_column_d_project_id_1c6c3338_fk_tbl_proje | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) DEFERRABLE INITIALLY DEFERRED |
| tbl_dynamic_column_d_proposed_from_docume_2d43666b_fk_core_doc_ | FOREIGN KEY | FOREIGN KEY (proposed_from_document_id) REFERENCES core_doc(doc_id) DEFERRABLE INITIALLY DEFERRED |
| tbl_dynamic_column_definition_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| tbl_dynamic_column_defin_project_id_table_name_co_83f0e5e0_uniq | UNIQUE | UNIQUE (project_id, table_name, column_key) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_dynamic_column_d_created_by_id_9b1688b7_fk_auth_user | created_by_id | auth_user.id | NO ACTION | NO ACTION |
| tbl_dynamic_column_d_project_id_1c6c3338_fk_tbl_proje | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| tbl_dynamic_column_d_proposed_from_docume_2d43666b_fk_core_doc_ | proposed_from_document_id | core_doc.doc_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_dynamic_column_defin_project_id_table_name_co_83f0e5e0_uniq`

```sql
CREATE UNIQUE INDEX tbl_dynamic_column_defin_project_id_table_name_co_83f0e5e0_uniq ON landscape.tbl_dynamic_column_definition USING btree (project_id, table_name, column_key)
```
- `tbl_dynamic_column_definit_proposed_from_document_id_2d43666b`

```sql
CREATE INDEX tbl_dynamic_column_definit_proposed_from_document_id_2d43666b ON landscape.tbl_dynamic_column_definition USING btree (proposed_from_document_id)
```
- `tbl_dynamic_column_definition_created_by_id_9b1688b7`

```sql
CREATE INDEX tbl_dynamic_column_definition_created_by_id_9b1688b7 ON landscape.tbl_dynamic_column_definition USING btree (created_by_id)
```
- `tbl_dynamic_column_definition_pkey`

```sql
CREATE UNIQUE INDEX tbl_dynamic_column_definition_pkey ON landscape.tbl_dynamic_column_definition USING btree (id)
```
- `tbl_dynamic_column_definition_project_id_1c6c3338`

```sql
CREATE INDEX tbl_dynamic_column_definition_project_id_1c6c3338 ON landscape.tbl_dynamic_column_definition USING btree (project_id)
```

### `tbl_dynamic_column_value`

- Columns: 11
- Constraints: 4
- Foreign keys: 2
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | row_id | integer [32,0] | NO |  |  |
| 3 | value_text | text | YES |  |  |
| 4 | value_number | numeric [18,4] | YES |  |  |
| 5 | value_boolean | boolean | YES |  |  |
| 6 | value_date | date | YES |  |  |
| 7 | confidence | double precision [53] | YES |  |  |
| 8 | created_at | timestamp with time zone | NO |  |  |
| 9 | updated_at | timestamp with time zone | NO |  |  |
| 10 | column_definition_id | bigint [64,0] | NO |  |  |
| 11 | extracted_from_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_dynamic_column_v_column_definition_id_2b1ec228_fk_tbl_dynam | FOREIGN KEY | FOREIGN KEY (column_definition_id) REFERENCES tbl_dynamic_column_definition(id) DEFERRABLE INITIALLY DEFERRED |
| tbl_dynamic_column_v_extracted_from_id_9be121bb_fk_core_doc_ | FOREIGN KEY | FOREIGN KEY (extracted_from_id) REFERENCES core_doc(doc_id) DEFERRABLE INITIALLY DEFERRED |
| tbl_dynamic_column_value_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| tbl_dynamic_column_value_column_definition_id_row_e387982d_uniq | UNIQUE | UNIQUE (column_definition_id, row_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_dynamic_column_v_column_definition_id_2b1ec228_fk_tbl_dynam | column_definition_id | tbl_dynamic_column_definition.id | NO ACTION | NO ACTION |
| tbl_dynamic_column_v_extracted_from_id_9be121bb_fk_core_doc_ | extracted_from_id | core_doc.doc_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_dynamic_column__134554_idx`

```sql
CREATE INDEX tbl_dynamic_column__134554_idx ON landscape.tbl_dynamic_column_value USING btree (column_definition_id, row_id)
```
- `tbl_dynamic_column_value_column_definition_id_2b1ec228`

```sql
CREATE INDEX tbl_dynamic_column_value_column_definition_id_2b1ec228 ON landscape.tbl_dynamic_column_value USING btree (column_definition_id)
```
- `tbl_dynamic_column_value_column_definition_id_row_e387982d_uniq`

```sql
CREATE UNIQUE INDEX tbl_dynamic_column_value_column_definition_id_row_e387982d_uniq ON landscape.tbl_dynamic_column_value USING btree (column_definition_id, row_id)
```
- `tbl_dynamic_column_value_extracted_from_id_9be121bb`

```sql
CREATE INDEX tbl_dynamic_column_value_extracted_from_id_9be121bb ON landscape.tbl_dynamic_column_value USING btree (extracted_from_id)
```
- `tbl_dynamic_column_value_pkey`

```sql
CREATE UNIQUE INDEX tbl_dynamic_column_value_pkey ON landscape.tbl_dynamic_column_value USING btree (id)
```
- `tbl_dynamic_row_id_9def5e_idx`

```sql
CREATE INDEX tbl_dynamic_row_id_9def5e_idx ON landscape.tbl_dynamic_column_value USING btree (row_id)
```

### `tbl_equity`

- Columns: 43
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | equity_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | equity_name | character varying(255) | NO |  |  |
| 4 | equity_class | character varying(50) | NO |  | Class A, Class B, GP, LP, Sponsor, or Investor |
| 5 | equity_tier | integer [32,0] | YES | 1 | Waterfall sequencing (1 = first priority) |
| 6 | commitment_amount | numeric [15,2] | NO |  |  |
| 7 | funded_amount | numeric [15,2] | YES | 0 |  |
| 8 | preferred_return_pct | numeric [5,2] | YES |  |  |
| 9 | preferred_return_compounds | boolean | YES | false |  |
| 10 | promote_pct | numeric [5,2] | YES |  |  |
| 11 | promote_tier_2_threshold | numeric [15,2] | YES |  |  |
| 12 | promote_tier_2_pct | numeric [5,2] | YES |  |  |
| 13 | notes | text | YES |  |  |
| 14 | created_at | timestamp with time zone | YES | now() |  |
| 15 | updated_at | timestamp with time zone | YES | now() |  |
| 16 | partner_type | character varying(10) | YES |  |  |
| 17 | partner_name | character varying(200) | YES |  |  |
| 18 | ownership_pct | numeric [5,2] | YES | 0 |  |
| 19 | capital_contributed | numeric [15,2] | YES | 0 |  |
| 20 | unreturned_capital | numeric [15,2] | YES | 0 |  |
| 21 | cumulative_distributions | numeric [15,2] | YES | 0 |  |
| 22 | accrued_preferred_return | numeric [12,2] | YES | 0 |  |
| 23 | preferred_return_paid_to_date | numeric [12,2] | YES | 0 |  |
| 24 | catch_up_pct | numeric [5,2] | YES |  |  |
| 25 | promote_trigger_type | character varying(20) | YES | 'irr'::character varying |  |
| 26 | promote_tier_1_threshold | numeric [6,3] | YES |  |  |
| 27 | promote_tier_3_threshold | numeric [6,3] | YES |  |  |
| 28 | promote_tier_3_pct | numeric [5,2] | YES |  |  |
| 29 | irr_target_pct | numeric [6,3] | YES |  |  |
| 30 | equity_multiple_target | numeric [5,2] | YES |  |  |
| 31 | cash_on_cash_target_pct | numeric [6,3] | YES |  |  |
| 32 | distribution_frequency | character varying(20) | YES | 'Quarterly'::character varying |  |
| 33 | distribution_priority | integer [32,0] | YES |  |  |
| 34 | can_defer_distributions | boolean | YES | false |  |
| 35 | management_fee_pct | numeric [5,3] | YES |  |  |
| 36 | management_fee_base | character varying(20) | YES | 'equity'::character varying |  |
| 37 | acquisition_fee_pct | numeric [5,3] | YES |  |  |
| 38 | disposition_fee_pct | numeric [5,3] | YES |  |  |
| 39 | promote_fee_pct | numeric [5,3] | YES |  |  |
| 40 | has_clawback | boolean | YES | false |  |
| 41 | clawback_threshold_pct | numeric [6,3] | YES |  |  |
| 42 | has_lookback | boolean | YES | true |  |
| 43 | lookback_at_sale | boolean | YES | true |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_equity_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_equity_pkey | PRIMARY KEY | PRIMARY KEY (equity_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_equity_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_equity_project`

```sql
CREATE INDEX idx_equity_project ON landscape.tbl_equity USING btree (project_id)
```
- `idx_equity_tier`

```sql
CREATE INDEX idx_equity_tier ON landscape.tbl_equity USING btree (project_id, equity_tier)
```
- `tbl_equity_pkey`

```sql
CREATE UNIQUE INDEX tbl_equity_pkey ON landscape.tbl_equity USING btree (equity_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_equity FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_equity_distribution`

- Columns: 11
- Constraints: 5
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | distribution_id | bigint [64,0] | NO | nextval('tbl_equity_distribution_distribution_id_seq'::regclass) |  |
| 2 | partner_id | bigint [64,0] | NO |  |  |
| 3 | period_id | bigint [64,0] | YES |  |  |
| 4 | distribution_type | character varying(50) | NO |  | CAPITAL_CALL, RETURN_OF_CAPITAL, PREFERRED_RETURN, PROMOTE, or RESIDUAL |
| 5 | amount | numeric [15,2] | NO |  |  |
| 6 | cumulative_amount | numeric [15,2] | YES |  |  |
| 7 | unpaid_preferred_return | numeric [15,2] | YES | 0 |  |
| 8 | distribution_date | date | YES |  |  |
| 9 | distribution_status | character varying(50) | YES | 'PROJECTED'::character varying |  |
| 10 | notes | text | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_equity_distribution_distribution_status_check | CHECK | CHECK (((distribution_status)::text = ANY ((ARRAY['PROJECTED'::character varying, 'APPROVED'::character varying, 'PAID'::character varying])::text[]))) |
| tbl_equity_distribution_distribution_type_check | CHECK | CHECK (((distribution_type)::text = ANY ((ARRAY['CAPITAL_CALL'::character varying, 'RETURN_OF_CAPITAL'::character varying, 'PREFERRED_RETURN'::character varying, 'PROMOTE'::character varying, 'RESIDUAL'::character varying])::text[]))) |
| tbl_equity_distribution_partner_id_fkey | FOREIGN KEY | FOREIGN KEY (partner_id) REFERENCES tbl_equity_partner(partner_id) ON DELETE CASCADE |
| tbl_equity_distribution_period_id_fkey | FOREIGN KEY | FOREIGN KEY (period_id) REFERENCES tbl_calculation_period(period_id) ON DELETE CASCADE |
| tbl_equity_distribution_pkey | PRIMARY KEY | PRIMARY KEY (distribution_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_equity_distribution_partner_id_fkey | partner_id | tbl_equity_partner.partner_id | NO ACTION | CASCADE |
| tbl_equity_distribution_period_id_fkey | period_id | tbl_calculation_period.period_id | NO ACTION | CASCADE |

#### Indexes

- `idx_equity_distribution_partner`

```sql
CREATE INDEX idx_equity_distribution_partner ON landscape.tbl_equity_distribution USING btree (partner_id, period_id)
```
- `idx_equity_distribution_period`

```sql
CREATE INDEX idx_equity_distribution_period ON landscape.tbl_equity_distribution USING btree (period_id)
```
- `idx_equity_distribution_type`

```sql
CREATE INDEX idx_equity_distribution_type ON landscape.tbl_equity_distribution USING btree (distribution_type)
```
- `tbl_equity_distribution_pkey`

```sql
CREATE UNIQUE INDEX tbl_equity_distribution_pkey ON landscape.tbl_equity_distribution USING btree (distribution_id)
```

### `tbl_equity_partner`

- Columns: 12
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | partner_id | bigint [64,0] | NO | nextval('tbl_equity_partner_partner_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | partner_name | character varying(200) | NO |  |  |
| 4 | partner_class | character varying(50) | NO |  | GP, LP, COMMON, or PREFERRED |
| 5 | ownership_pct | numeric [5,4] | YES |  |  |
| 6 | committed_capital | numeric [15,2] | YES |  |  |
| 7 | preferred_return_pct | numeric [6,5] | YES |  |  |
| 8 | promote_pct | numeric [5,4] | YES |  |  |
| 9 | hurdle_irr_pct | numeric [6,5] | YES |  |  |
| 10 | notes | text | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |
| 12 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_equity_partner_partner_class_check | CHECK | CHECK (((partner_class)::text = ANY ((ARRAY['GP'::character varying, 'LP'::character varying, 'COMMON'::character varying, 'PREFERRED'::character varying])::text[]))) |
| tbl_equity_partner_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_equity_partner_pkey | PRIMARY KEY | PRIMARY KEY (partner_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_equity_partner_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_equity_partner_class`

```sql
CREATE INDEX idx_equity_partner_class ON landscape.tbl_equity_partner USING btree (partner_class)
```
- `idx_equity_partner_project`

```sql
CREATE INDEX idx_equity_partner_project ON landscape.tbl_equity_partner USING btree (project_id)
```
- `tbl_equity_partner_pkey`

```sql
CREATE UNIQUE INDEX tbl_equity_partner_pkey ON landscape.tbl_equity_partner USING btree (partner_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_equity_partner FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_equity_structure`

- Columns: 12
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | equity_structure_id | bigint [64,0] | NO | nextval('tbl_equity_structure_equity_structure_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | lp_ownership_pct | numeric [5,2] | NO |  |  |
| 4 | gp_ownership_pct | numeric [5,2] | NO |  |  |
| 5 | preferred_return_pct | numeric [6,3] | NO | 0.08 |  |
| 6 | gp_promote_after_pref | numeric [5,2] | YES | 0.20 |  |
| 7 | catch_up_pct | numeric [5,2] | YES |  |  |
| 8 | equity_multiple_target | numeric [5,2] | YES |  |  |
| 9 | irr_target_pct | numeric [6,3] | YES |  |  |
| 10 | distribution_frequency | character varying(20) | YES | 'Quarterly'::character varying |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |
| 12 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_equity_structure_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_equity_structure_pkey | PRIMARY KEY | PRIMARY KEY (equity_structure_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_equity_structure_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_equity_structure_pkey`

```sql
CREATE UNIQUE INDEX tbl_equity_structure_pkey ON landscape.tbl_equity_structure USING btree (equity_structure_id)
```

### `tbl_escalation`

- Columns: 15
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | escalation_id | integer [32,0] | NO |  |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | escalation_type | character varying(50) | NO |  | Fixed Percentage, CPI, Fixed Dollar, or Stepped |
| 4 | escalation_pct | numeric [5,2] | YES |  |  |
| 5 | escalation_frequency | character varying(50) | YES | 'Annual'::character varying |  |
| 6 | compound_escalation | boolean | YES | true |  |
| 7 | cpi_index | character varying(100) | YES |  |  |
| 8 | cpi_floor_pct | numeric [5,2] | YES |  |  |
| 9 | cpi_cap_pct | numeric [5,2] | YES |  |  |
| 10 | tenant_cpi_share_pct | numeric [5,2] | YES | 100.00 |  |
| 11 | annual_increase_amount | numeric [15,2] | YES |  |  |
| 12 | step_schedule | jsonb | YES |  | JSON array: [{step_start_date, step_amount}, ...] |
| 13 | first_escalation_date | date | YES |  |  |
| 14 | created_at | timestamp with time zone | YES | now() |  |
| 15 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_escalation_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_escalation_pkey | PRIMARY KEY | PRIMARY KEY (escalation_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_escalation_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_escalation_lease`

```sql
CREATE INDEX idx_escalation_lease ON landscape.tbl_escalation USING btree (lease_id)
```
- `idx_escalation_type`

```sql
CREATE INDEX idx_escalation_type ON landscape.tbl_escalation USING btree (escalation_type)
```
- `tbl_escalation_pkey`

```sql
CREATE UNIQUE INDEX tbl_escalation_pkey ON landscape.tbl_escalation USING btree (escalation_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_escalation FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_expansion_option`

- Columns: 23
- Constraints: 4
- Foreign keys: 3
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | expansion_option_id | integer [32,0] | NO | nextval('tbl_expansion_option_expansion_option_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | option_type | character varying(50) | YES |  |  |
| 4 | target_space_id | integer [32,0] | YES |  |  |
| 5 | target_space_description | character varying(255) | YES |  |  |
| 6 | expansion_sf_min | numeric [10,2] | YES |  |  |
| 7 | expansion_sf_max | numeric [10,2] | YES |  |  |
| 8 | option_start_date | date | YES |  |  |
| 9 | option_end_date | date | YES |  |  |
| 10 | must_take_date | date | YES |  |  |
| 11 | notice_period_days | integer [32,0] | YES |  |  |
| 12 | landlord_notice_required | boolean | YES | false |  |
| 13 | response_period_days | integer [32,0] | YES |  |  |
| 14 | expansion_rent_method | character varying(50) | YES |  |  |
| 15 | expansion_rent_psf | numeric [8,2] | YES |  |  |
| 16 | expansion_rent_spread_psf | numeric [8,2] | YES |  |  |
| 17 | option_exercised | boolean | YES | false |  |
| 18 | exercise_date | date | YES |  |  |
| 19 | exercised_space_id | integer [32,0] | YES |  |  |
| 20 | exercised_sf | numeric [10,2] | YES |  |  |
| 21 | notes | text | YES |  |  |
| 22 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 23 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_expansion_option_exercised_space_id_fkey | FOREIGN KEY | FOREIGN KEY (exercised_space_id) REFERENCES tbl_space(space_id) ON DELETE SET NULL |
| tbl_expansion_option_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_expansion_option_target_space_id_fkey | FOREIGN KEY | FOREIGN KEY (target_space_id) REFERENCES tbl_space(space_id) ON DELETE SET NULL |
| tbl_expansion_option_pkey | PRIMARY KEY | PRIMARY KEY (expansion_option_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_expansion_option_exercised_space_id_fkey | exercised_space_id | tbl_space.space_id | NO ACTION | SET NULL |
| tbl_expansion_option_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |
| tbl_expansion_option_target_space_id_fkey | target_space_id | tbl_space.space_id | NO ACTION | SET NULL |

#### Indexes

- `idx_expansion_lease`

```sql
CREATE INDEX idx_expansion_lease ON landscape.tbl_expansion_option USING btree (lease_id)
```
- `idx_expansion_target`

```sql
CREATE INDEX idx_expansion_target ON landscape.tbl_expansion_option USING btree (target_space_id)
```
- `tbl_expansion_option_pkey`

```sql
CREATE UNIQUE INDEX tbl_expansion_option_pkey ON landscape.tbl_expansion_option USING btree (expansion_option_id)
```

### `tbl_expense_detail`

- Columns: 13
- Constraints: 3
- Foreign keys: 2
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | expense_detail_id | bigint [64,0] | NO | nextval('tbl_expense_detail_expense_detail_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | expense_id | bigint [64,0] | YES |  |  |
| 4 | expense_category | character varying(100) | NO |  |  |
| 5 | expense_subcategory | character varying(100) | YES |  |  |
| 6 | amount_annual | numeric [12,2] | NO |  |  |
| 7 | per_unit_monthly | numeric [8,2] | YES |  |  |
| 8 | per_sf_annual | numeric [6,2] | YES |  |  |
| 9 | escalation_pct | numeric [5,3] | YES | 0.03 |  |
| 10 | escalation_start_year | integer [32,0] | YES | 1 |  |
| 11 | notes | text | YES |  |  |
| 12 | created_at | timestamp without time zone | YES | now() |  |
| 13 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_expense_detail_expense_id_fkey | FOREIGN KEY | FOREIGN KEY (expense_id) REFERENCES tbl_operating_expense(expense_id) |
| tbl_expense_detail_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_expense_detail_pkey | PRIMARY KEY | PRIMARY KEY (expense_detail_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_expense_detail_expense_id_fkey | expense_id | tbl_operating_expense.expense_id | NO ACTION | NO ACTION |
| tbl_expense_detail_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_expense_detail_category`

```sql
CREATE INDEX idx_expense_detail_category ON landscape.tbl_expense_detail USING btree (expense_category)
```
- `idx_expense_detail_project`

```sql
CREATE INDEX idx_expense_detail_project ON landscape.tbl_expense_detail USING btree (project_id)
```
- `tbl_expense_detail_pkey`

```sql
CREATE UNIQUE INDEX tbl_expense_detail_pkey ON landscape.tbl_expense_detail USING btree (expense_detail_id)
```

### `tbl_expense_recovery`

- Columns: 11
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | expense_recovery_id | integer [32,0] | NO | nextval('tbl_expense_recovery_expense_recovery_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | YES |  |  |
| 3 | recovery_structure | character varying(50) | YES |  |  |
| 4 | recovery_method | character varying(50) | YES |  |  |
| 5 | property_tax_recovery_pct | numeric [6,3] | YES | 0 |  |
| 6 | insurance_recovery_pct | numeric [6,3] | YES | 0 |  |
| 7 | cam_recovery_pct | numeric [6,3] | YES | 0 |  |
| 8 | utilities_recovery_pct | numeric [6,3] | YES | 0 |  |
| 9 | expense_cap_psf | numeric [8,2] | YES |  |  |
| 10 | expense_cap_escalation_pct | numeric [6,3] | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_expense_recovery_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_commercial_lease(lease_id) |
| tbl_cre_expense_recovery_pkey | PRIMARY KEY | PRIMARY KEY (expense_recovery_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cre_expense_recovery_lease_id_fkey | lease_id | tbl_commercial_lease.lease_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_cre_expense_recovery_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_expense_recovery_pkey ON landscape.tbl_expense_recovery USING btree (expense_recovery_id)
```

### `tbl_extraction_job`

- Columns: 13
- Constraints: 2
- Foreign keys: 1
- Indexes: 11
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | job_id | bigint [64,0] | NO |  |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | document_id | bigint [64,0] | NO |  |  |
| 4 | scope | character varying(50) | NO |  |  |
| 5 | status | character varying(20) | NO |  |  |
| 6 | total_items | integer [32,0] | YES |  |  |
| 7 | processed_items | integer [32,0] | NO |  |  |
| 8 | created_at | timestamp with time zone | NO |  |  |
| 9 | started_at | timestamp with time zone | YES |  |  |
| 10 | completed_at | timestamp with time zone | YES |  |  |
| 11 | error_message | text | YES |  |  |
| 12 | result_summary | jsonb | YES |  |  |
| 13 | created_by_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_extraction_job_created_by_id_01e1ec43_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (created_by_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| tbl_extraction_job_pkey | PRIMARY KEY | PRIMARY KEY (job_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_extraction_job_created_by_id_01e1ec43_fk_auth_user_id | created_by_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_extract_project_e44a1d_idx`

```sql
CREATE INDEX tbl_extract_project_e44a1d_idx ON landscape.tbl_extraction_job USING btree (project_id, scope, status)
```
- `tbl_extract_project_f3cb1f_idx`

```sql
CREATE INDEX tbl_extract_project_f3cb1f_idx ON landscape.tbl_extraction_job USING btree (project_id, created_at)
```
- `tbl_extraction_job_created_at_a693d081`

```sql
CREATE INDEX tbl_extraction_job_created_at_a693d081 ON landscape.tbl_extraction_job USING btree (created_at)
```
- `tbl_extraction_job_created_by_id_01e1ec43`

```sql
CREATE INDEX tbl_extraction_job_created_by_id_01e1ec43 ON landscape.tbl_extraction_job USING btree (created_by_id)
```
- `tbl_extraction_job_document_id_fe10aa7e`

```sql
CREATE INDEX tbl_extraction_job_document_id_fe10aa7e ON landscape.tbl_extraction_job USING btree (document_id)
```
- `tbl_extraction_job_pkey`

```sql
CREATE UNIQUE INDEX tbl_extraction_job_pkey ON landscape.tbl_extraction_job USING btree (job_id)
```
- `tbl_extraction_job_project_id_443a23a8`

```sql
CREATE INDEX tbl_extraction_job_project_id_443a23a8 ON landscape.tbl_extraction_job USING btree (project_id)
```
- `tbl_extraction_job_scope_5f01c2d9`

```sql
CREATE INDEX tbl_extraction_job_scope_5f01c2d9 ON landscape.tbl_extraction_job USING btree (scope)
```
- `tbl_extraction_job_scope_5f01c2d9_like`

```sql
CREATE INDEX tbl_extraction_job_scope_5f01c2d9_like ON landscape.tbl_extraction_job USING btree (scope varchar_pattern_ops)
```
- `tbl_extraction_job_status_31566a48`

```sql
CREATE INDEX tbl_extraction_job_status_31566a48 ON landscape.tbl_extraction_job USING btree (status)
```
- `tbl_extraction_job_status_31566a48_like`

```sql
CREATE INDEX tbl_extraction_job_status_31566a48_like ON landscape.tbl_extraction_job USING btree (status varchar_pattern_ops)
```

### `tbl_extraction_log`

- Columns: 16
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | log_id | integer [32,0] | NO | nextval('tbl_extraction_log_log_id_seq'::regclass) |  |
| 2 | mapping_id | integer [32,0] | YES |  |  |
| 3 | project_id | integer [32,0] | YES |  |  |
| 4 | doc_id | integer [32,0] | YES |  |  |
| 5 | source_pattern_matched | character varying(200) | YES |  |  |
| 6 | extracted_value | text | YES |  |  |
| 7 | transformed_value | text | YES |  |  |
| 8 | previous_value | text | YES |  |  |
| 9 | confidence_score | numeric [5,4] | YES |  |  |
| 10 | extraction_context | text | YES |  |  |
| 11 | was_written | boolean | NO | false |  |
| 12 | was_accepted | boolean | YES |  | NULL = pending review, true = user accepted, false = user rejected |
| 13 | rejection_reason | text | YES |  |  |
| 14 | extracted_at | timestamp with time zone | YES | now() |  |
| 15 | reviewed_at | timestamp with time zone | YES |  |  |
| 16 | reviewed_by | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_extraction_log_mapping_id_fkey | FOREIGN KEY | FOREIGN KEY (mapping_id) REFERENCES tbl_extraction_mapping(mapping_id) ON DELETE SET NULL |
| tbl_extraction_log_pkey | PRIMARY KEY | PRIMARY KEY (log_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_extraction_log_mapping_id_fkey | mapping_id | tbl_extraction_mapping.mapping_id | NO ACTION | SET NULL |

#### Indexes

- `idx_extraction_log_doc`

```sql
CREATE INDEX idx_extraction_log_doc ON landscape.tbl_extraction_log USING btree (doc_id)
```
- `idx_extraction_log_mapping`

```sql
CREATE INDEX idx_extraction_log_mapping ON landscape.tbl_extraction_log USING btree (mapping_id)
```
- `idx_extraction_log_project`

```sql
CREATE INDEX idx_extraction_log_project ON landscape.tbl_extraction_log USING btree (project_id)
```
- `tbl_extraction_log_pkey`

```sql
CREATE UNIQUE INDEX tbl_extraction_log_pkey ON landscape.tbl_extraction_log USING btree (log_id)
```

### `tbl_extraction_mapping`

- Columns: 18
- Constraints: 5
- Foreign keys: 0
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | mapping_id | integer [32,0] | NO | nextval('tbl_extraction_mapping_mapping_id_seq'::regclass) |  |
| 2 | document_type | character varying(50) | NO |  | Document type: OM, RENT_ROLL, T12, APPRAISAL, LOAN_DOC, PSA, PCR, ENVIRONMENTAL, SURVEY, ZONING, TAX_BILL, INSURANCE, MARKET_STUDY, DEV_BUDGET, PROFORMA |
| 3 | source_pattern | character varying(200) | NO |  | The label or pattern to look for in documents (e.g., "Year Built", "Total Units") |
| 4 | source_aliases | jsonb | YES |  | Additional patterns that map to the same field (e.g., ["Units", "Unit Count"] for total_units) |
| 5 | target_table | character varying(100) | NO |  |  |
| 6 | target_field | character varying(100) | NO |  |  |
| 7 | data_type | character varying(20) | NO | 'text'::character varying |  |
| 8 | transform_rule | character varying(100) | YES |  | Value transformation: strip_currency, percent_to_decimal, parse_date, extract_number, none |
| 9 | confidence | character varying(10) | NO | 'Medium'::character varying | Extraction confidence level: High (auto-write), Medium (write with flag), Low (report only) |
| 10 | auto_write | boolean | NO | true |  |
| 11 | overwrite_existing | boolean | NO | false |  |
| 12 | is_active | boolean | NO | true |  |
| 13 | is_system | boolean | NO | true | System mappings cannot be deleted by users |
| 14 | notes | text | YES |  |  |
| 15 | created_by | integer [32,0] | YES |  |  |
| 16 | created_at | timestamp with time zone | YES | now() |  |
| 17 | updated_by | integer [32,0] | YES |  |  |
| 18 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_confidence | CHECK | CHECK (((confidence)::text = ANY ((ARRAY['High'::character varying, 'Medium'::character varying, 'Low'::character varying])::text[]))) |
| chk_data_type | CHECK | CHECK (((data_type IS NULL) OR ((data_type)::text = ANY ((ARRAY['text'::character varying, 'number'::character varying, 'currency'::character varying, 'date'::character varying, 'boolean'::character varying, 'enum'::character varying])::text[])))) |
| chk_data_type | CHECK | CHECK (((data_type)::text = ANY ((ARRAY['text'::character varying, 'integer'::character varying, 'decimal'::character varying, 'boolean'::character varying, 'date'::character varying, 'json'::character varying])::text[]))) |
| tbl_extraction_mapping_pkey | PRIMARY KEY | PRIMARY KEY (mapping_id) |
| uq_mapping_pattern_field | UNIQUE | UNIQUE (document_type, source_pattern, target_table, target_field) |

#### Indexes

- `idx_extraction_mapping_active`

```sql
CREATE INDEX idx_extraction_mapping_active ON landscape.tbl_extraction_mapping USING btree (is_active) WHERE (is_active = true)
```
- `idx_extraction_mapping_doctype`

```sql
CREATE INDEX idx_extraction_mapping_doctype ON landscape.tbl_extraction_mapping USING btree (document_type)
```
- `idx_extraction_mapping_target`

```sql
CREATE INDEX idx_extraction_mapping_target ON landscape.tbl_extraction_mapping USING btree (target_table, target_field)
```
- `tbl_extraction_mapping_pkey`

```sql
CREATE UNIQUE INDEX tbl_extraction_mapping_pkey ON landscape.tbl_extraction_mapping USING btree (mapping_id)
```
- `uq_mapping_pattern_field`

```sql
CREATE UNIQUE INDEX uq_mapping_pattern_field ON landscape.tbl_extraction_mapping USING btree (document_type, source_pattern, target_table, target_field)
```

### `tbl_field_catalog`

- Columns: 21
- Constraints: 2
- Foreign keys: 0
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | field_id | bigint [64,0] | NO | nextval('tbl_field_catalog_field_id_seq'::regclass) |  |
| 2 | table_name | character varying(100) | NO |  |  |
| 3 | field_name | character varying(100) | NO |  |  |
| 4 | display_name | character varying(200) | YES |  |  |
| 5 | description | text | YES |  |  |
| 6 | data_type | character varying(50) | NO |  |  |
| 7 | is_editable | boolean | YES | true |  |
| 8 | is_required | boolean | YES | false |  |
| 9 | is_calculated | boolean | YES | false |  |
| 10 | calculation_source | text | YES |  |  |
| 11 | valid_values | jsonb | YES |  |  |
| 12 | default_value | text | YES |  |  |
| 13 | unit_of_measure | character varying(50) | YES |  |  |
| 14 | min_value | numeric | YES |  |  |
| 15 | max_value | numeric | YES |  |  |
| 16 | field_group | character varying(100) | YES |  |  |
| 17 | display_order | integer [32,0] | YES | 0 |  |
| 18 | applies_to_types | ARRAY | YES |  |  |
| 19 | is_active | boolean | YES | true |  |
| 20 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 21 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_field_catalog_pkey | PRIMARY KEY | PRIMARY KEY (field_id) |
| tbl_field_catalog_table_name_field_name_key | UNIQUE | UNIQUE (table_name, field_name) |

#### Indexes

- `idx_field_catalog_editable`

```sql
CREATE INDEX idx_field_catalog_editable ON landscape.tbl_field_catalog USING btree (is_editable) WHERE (is_editable = true)
```
- `idx_field_catalog_group`

```sql
CREATE INDEX idx_field_catalog_group ON landscape.tbl_field_catalog USING btree (field_group)
```
- `idx_field_catalog_table`

```sql
CREATE INDEX idx_field_catalog_table ON landscape.tbl_field_catalog USING btree (table_name)
```
- `tbl_field_catalog_pkey`

```sql
CREATE UNIQUE INDEX tbl_field_catalog_pkey ON landscape.tbl_field_catalog USING btree (field_id)
```
- `tbl_field_catalog_table_name_field_name_key`

```sql
CREATE UNIQUE INDEX tbl_field_catalog_table_name_field_name_key ON landscape.tbl_field_catalog USING btree (table_name, field_name)
```

### `tbl_finance_structure`

- Columns: 18
- Constraints: 7
- Foreign keys: 2
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | finance_structure_id | bigint [64,0] | NO | nextval('tbl_finance_structure_finance_structure_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | structure_code | character varying(50) | NO |  |  |
| 4 | structure_name | character varying(200) | NO |  |  |
| 5 | description | text | YES |  |  |
| 6 | structure_type | character varying(50) | NO |  | capital_cost_pool: One-time infrastructure/development costs. operating_obligation_pool: Recurring expenses like ground leases. |
| 7 | total_budget_amount | numeric [15,2] | YES |  |  |
| 8 | budget_category | character varying(100) | YES |  |  |
| 9 | is_recurring | boolean | YES | false |  |
| 10 | recurrence_frequency | character varying(20) | YES |  |  |
| 11 | annual_amount | numeric [12,2] | YES |  |  |
| 12 | allocation_method | character varying(50) | NO |  | Determines how costs are allocated: equal (split evenly), by_area (proportional to acres/sf), by_units (proportional to lots/units), by_custom_pct (manual percentages). |
| 13 | is_active | boolean | YES | true |  |
| 14 | created_at | timestamp without time zone | YES | now() |  |
| 15 | updated_at | timestamp without time zone | YES | now() |  |
| 16 | created_by | character varying(100) | YES |  |  |
| 17 | updated_by | character varying(100) | YES |  |  |
| 18 | scenario_id | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_finance_structure_allocation_method_check | CHECK | CHECK (((allocation_method)::text = ANY ((ARRAY['equal'::character varying, 'by_area'::character varying, 'by_units'::character varying, 'by_custom_pct'::character varying])::text[]))) |
| tbl_finance_structure_recurrence_frequency_check | CHECK | CHECK (((recurrence_frequency IS NULL) OR ((recurrence_frequency)::text = ANY ((ARRAY['annual'::character varying, 'monthly'::character varying, 'quarterly'::character varying])::text[])))) |
| tbl_finance_structure_structure_type_check | CHECK | CHECK (((structure_type)::text = ANY ((ARRAY['capital_cost_pool'::character varying, 'operating_obligation_pool'::character varying])::text[]))) |
| tbl_finance_structure_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_finance_structure_scenario_id_fkey | FOREIGN KEY | FOREIGN KEY (scenario_id) REFERENCES tbl_scenario(scenario_id) ON DELETE CASCADE |
| tbl_finance_structure_pkey | PRIMARY KEY | PRIMARY KEY (finance_structure_id) |
| unique_structure_code | UNIQUE | UNIQUE (project_id, structure_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_finance_structure_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_finance_structure_scenario_id_fkey | scenario_id | tbl_scenario.scenario_id | NO ACTION | CASCADE |

#### Indexes

- `idx_finance_structure_active`

```sql
CREATE INDEX idx_finance_structure_active ON landscape.tbl_finance_structure USING btree (is_active) WHERE (is_active = true)
```
- `idx_finance_structure_project`

```sql
CREATE INDEX idx_finance_structure_project ON landscape.tbl_finance_structure USING btree (project_id)
```
- `idx_finance_structure_scenario`

```sql
CREATE INDEX idx_finance_structure_scenario ON landscape.tbl_finance_structure USING btree (scenario_id)
```
- `idx_finance_structure_type`

```sql
CREATE INDEX idx_finance_structure_type ON landscape.tbl_finance_structure USING btree (structure_type)
```
- `tbl_finance_structure_pkey`

```sql
CREATE UNIQUE INDEX tbl_finance_structure_pkey ON landscape.tbl_finance_structure USING btree (finance_structure_id)
```
- `unique_structure_code`

```sql
CREATE UNIQUE INDEX unique_structure_code ON landscape.tbl_finance_structure USING btree (project_id, structure_code)
```

### `tbl_global_benchmark_registry`

- Columns: 23
- Constraints: 6
- Foreign keys: 2
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | benchmark_id | bigint [64,0] | NO | nextval('tbl_global_benchmark_registry_benchmark_id_seq'::regclass) |  |
| 2 | user_id | text | NO |  |  |
| 3 | category | character varying(50) | NO |  |  |
| 4 | subcategory | character varying(100) | YES |  |  |
| 5 | benchmark_name | character varying(200) | NO |  |  |
| 6 | description | text | YES |  |  |
| 7 | market_geography | character varying(100) | YES |  |  |
| 8 | property_type | character varying(50) | YES |  |  |
| 9 | source_type | character varying(50) | NO |  |  |
| 10 | source_document_id | bigint [64,0] | YES |  |  |
| 11 | source_project_id | bigint [64,0] | YES |  |  |
| 12 | extraction_date | date | YES |  |  |
| 13 | confidence_level | character varying(20) | YES | 'medium'::character varying |  |
| 14 | usage_count | integer [32,0] | YES | 0 |  |
| 15 | as_of_date | date | NO | CURRENT_DATE |  |
| 16 | cpi_index_value | numeric [10,4] | YES |  |  |
| 17 | context_metadata | jsonb | YES |  |  |
| 18 | is_active | boolean | YES | true |  |
| 19 | is_global | boolean | YES | false |  |
| 20 | created_at | timestamp without time zone | YES | now() |  |
| 21 | updated_at | timestamp without time zone | YES | now() |  |
| 22 | created_by | text | YES |  |  |
| 23 | updated_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| valid_category | CHECK | CHECK (((category)::text = ANY ((ARRAY['growth_rate'::character varying, 'transaction_cost'::character varying, 'unit_cost'::character varying, 'absorption'::character varying, 'contingency'::character varying, 'market_timing'::character varying, 'land_use_pricing'::character varying, 'commission'::character varying, 'op_cost'::character varying, 'income'::character varying, 'capital_stack'::character varying, 'debt_standard'::character varying])::text[]))) |
| valid_confidence | CHECK | CHECK (((confidence_level)::text = ANY ((ARRAY['high'::character varying, 'medium'::character varying, 'low'::character varying])::text[]))) |
| valid_source_type | CHECK | CHECK (((source_type)::text = ANY ((ARRAY['user_input'::character varying, 'document_extraction'::character varying, 'project_data'::character varying, 'system_default'::character varying])::text[]))) |
| tbl_global_benchmark_registry_source_document_id_fkey | FOREIGN KEY | FOREIGN KEY (source_document_id) REFERENCES core_doc(doc_id) |
| tbl_global_benchmark_registry_source_project_id_fkey | FOREIGN KEY | FOREIGN KEY (source_project_id) REFERENCES tbl_project(project_id) |
| tbl_global_benchmark_registry_pkey | PRIMARY KEY | PRIMARY KEY (benchmark_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_global_benchmark_registry_source_document_id_fkey | source_document_id | core_doc.doc_id | NO ACTION | NO ACTION |
| tbl_global_benchmark_registry_source_project_id_fkey | source_project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_benchmark_registry_active`

```sql
CREATE INDEX idx_benchmark_registry_active ON landscape.tbl_global_benchmark_registry USING btree (is_active)
```
- `idx_benchmark_registry_as_of_date`

```sql
CREATE INDEX idx_benchmark_registry_as_of_date ON landscape.tbl_global_benchmark_registry USING btree (as_of_date)
```
- `idx_benchmark_registry_category`

```sql
CREATE INDEX idx_benchmark_registry_category ON landscape.tbl_global_benchmark_registry USING btree (category, subcategory)
```
- `idx_benchmark_registry_geography`

```sql
CREATE INDEX idx_benchmark_registry_geography ON landscape.tbl_global_benchmark_registry USING btree (market_geography)
```
- `idx_benchmark_registry_property_type`

```sql
CREATE INDEX idx_benchmark_registry_property_type ON landscape.tbl_global_benchmark_registry USING btree (property_type)
```
- `idx_benchmark_registry_user`

```sql
CREATE INDEX idx_benchmark_registry_user ON landscape.tbl_global_benchmark_registry USING btree (user_id)
```
- `tbl_global_benchmark_registry_pkey`

```sql
CREATE UNIQUE INDEX tbl_global_benchmark_registry_pkey ON landscape.tbl_global_benchmark_registry USING btree (benchmark_id)
```

### `tbl_hbu_analysis`

- Columns: 39
- Constraints: 5
- Foreign keys: 2
- Indexes: 5
- Triggers: 2

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | hbu_id | bigint [64,0] | NO | nextval('tbl_hbu_analysis_hbu_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | scenario_name | character varying(200) | NO |  |  |
| 4 | scenario_type | character varying(50) | NO |  | as_vacant = site without improvements; as_improved = with current/proposed improvements; alternative = comparison scenario for feasibility |
| 5 | legal_permissible | boolean | YES |  |  |
| 6 | legal_zoning_code | character varying(100) | YES |  |  |
| 7 | legal_zoning_source_doc_id | bigint [64,0] | YES |  |  |
| 8 | legal_permitted_uses | jsonb | YES |  |  |
| 9 | legal_requires_variance | boolean | YES | false |  |
| 10 | legal_variance_type | character varying(200) | YES |  |  |
| 11 | legal_narrative | text | YES |  |  |
| 12 | physical_possible | boolean | YES |  |  |
| 13 | physical_site_adequate | boolean | YES |  |  |
| 14 | physical_topography_suitable | boolean | YES |  |  |
| 15 | physical_utilities_available | boolean | YES |  |  |
| 16 | physical_access_adequate | boolean | YES |  |  |
| 17 | physical_constraints | jsonb | YES |  |  |
| 18 | physical_narrative | text | YES |  |  |
| 19 | economic_feasible | boolean | YES |  |  |
| 20 | economic_development_cost | numeric [15,2] | YES |  |  |
| 21 | economic_stabilized_value | numeric [15,2] | YES |  |  |
| 22 | economic_residual_land_value | numeric [15,2] | YES |  |  |
| 23 | economic_profit_margin_pct | numeric [5,2] | YES |  |  |
| 24 | economic_irr_pct | numeric [5,2] | YES |  |  |
| 25 | economic_feasibility_threshold | character varying(50) | YES |  |  |
| 26 | economic_narrative | text | YES |  |  |
| 27 | is_maximally_productive | boolean | YES | false | TRUE for the scenario that represents the highest and best use conclusion |
| 28 | productivity_rank | integer [32,0] | YES |  | Ranking among feasible scenarios (1 = winner) |
| 29 | productivity_metric | character varying(50) | YES |  | Metric used for comparison: residual_land_value, irr, or profit_margin |
| 30 | productivity_narrative | text | YES |  |  |
| 31 | conclusion_use_type | character varying(200) | YES |  |  |
| 32 | conclusion_density | character varying(100) | YES |  |  |
| 33 | conclusion_summary | text | YES |  |  |
| 34 | conclusion_full_narrative | text | YES |  |  |
| 35 | status | character varying(50) | YES | 'draft'::character varying |  |
| 36 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 37 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 38 | created_by | text | YES |  |  |
| 39 | updated_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_hbu_analysis_scenario_type_check | CHECK | CHECK (((scenario_type)::text = ANY ((ARRAY['as_vacant'::character varying, 'as_improved'::character varying, 'alternative'::character varying])::text[]))) |
| tbl_hbu_analysis_status_check | CHECK | CHECK (((status)::text = ANY ((ARRAY['draft'::character varying, 'ai_generated'::character varying, 'user_reviewed'::character varying, 'final'::character varying])::text[]))) |
| tbl_hbu_analysis_legal_zoning_source_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (legal_zoning_source_doc_id) REFERENCES core_doc(doc_id) ON DELETE SET NULL |
| tbl_hbu_analysis_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_hbu_analysis_pkey | PRIMARY KEY | PRIMARY KEY (hbu_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_hbu_analysis_legal_zoning_source_doc_id_fkey | legal_zoning_source_doc_id | core_doc.doc_id | NO ACTION | SET NULL |
| tbl_hbu_analysis_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_hbu_maximally_productive`

```sql
CREATE INDEX idx_hbu_maximally_productive ON landscape.tbl_hbu_analysis USING btree (project_id, is_maximally_productive) WHERE (is_maximally_productive = true)
```
- `idx_hbu_project`

```sql
CREATE INDEX idx_hbu_project ON landscape.tbl_hbu_analysis USING btree (project_id)
```
- `idx_hbu_scenario_type`

```sql
CREATE INDEX idx_hbu_scenario_type ON landscape.tbl_hbu_analysis USING btree (project_id, scenario_type)
```
- `idx_hbu_status`

```sql
CREATE INDEX idx_hbu_status ON landscape.tbl_hbu_analysis USING btree (project_id, status)
```
- `tbl_hbu_analysis_pkey`

```sql
CREATE UNIQUE INDEX tbl_hbu_analysis_pkey ON landscape.tbl_hbu_analysis USING btree (hbu_id)
```

#### Triggers

- `trg_hbu_analysis_updated_at`

```sql
CREATE TRIGGER trg_hbu_analysis_updated_at BEFORE UPDATE ON landscape.tbl_hbu_analysis FOR EACH ROW EXECUTE FUNCTION update_hbu_analysis_timestamp()
```
- `trg_hbu_updated_at`

```sql
CREATE TRIGGER trg_hbu_updated_at BEFORE UPDATE ON landscape.tbl_hbu_analysis FOR EACH ROW EXECUTE FUNCTION fn_hbu_updated_at()
```

### `tbl_hbu_comparable_use`

- Columns: 15
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | comparable_use_id | bigint [64,0] | NO | nextval('tbl_hbu_comparable_use_comparable_use_id_seq'::regclass) |  |
| 2 | hbu_id | bigint [64,0] | NO |  |  |
| 3 | use_name | character varying(200) | NO |  | Name of the potential use (e.g., "200-Unit Garden Apartments", "150-Unit Townhomes") |
| 4 | use_category | character varying(100) | YES |  | Broad category: Residential, Commercial, Industrial, Mixed-Use, etc. |
| 5 | is_legally_permissible | boolean | YES |  |  |
| 6 | is_physically_possible | boolean | YES |  |  |
| 7 | is_economically_feasible | boolean | YES |  |  |
| 8 | proposed_density | character varying(100) | YES |  |  |
| 9 | development_cost | numeric [15,2] | YES |  |  |
| 10 | stabilized_value | numeric [15,2] | YES |  |  |
| 11 | residual_land_value | numeric [15,2] | YES |  |  |
| 12 | irr_pct | numeric [5,2] | YES |  |  |
| 13 | feasibility_rank | integer [32,0] | YES |  | Ranking among uses within this H&BU analysis |
| 14 | notes | text | YES |  |  |
| 15 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_hbu_comparable_use_hbu_id_fkey | FOREIGN KEY | FOREIGN KEY (hbu_id) REFERENCES tbl_hbu_analysis(hbu_id) ON DELETE CASCADE |
| tbl_hbu_comparable_use_pkey | PRIMARY KEY | PRIMARY KEY (comparable_use_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_hbu_comparable_use_hbu_id_fkey | hbu_id | tbl_hbu_analysis.hbu_id | NO ACTION | CASCADE |

#### Indexes

- `idx_hbu_comparable_use_hbu`

```sql
CREATE INDEX idx_hbu_comparable_use_hbu ON landscape.tbl_hbu_comparable_use USING btree (hbu_id)
```
- `idx_hbu_comparable_use_rank`

```sql
CREATE INDEX idx_hbu_comparable_use_rank ON landscape.tbl_hbu_comparable_use USING btree (hbu_id, feasibility_rank)
```
- `tbl_hbu_comparable_use_pkey`

```sql
CREATE UNIQUE INDEX tbl_hbu_comparable_use_pkey ON landscape.tbl_hbu_comparable_use USING btree (comparable_use_id)
```

### `tbl_hbu_zoning_document`

- Columns: 13
- Constraints: 3
- Foreign keys: 2
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | zoning_doc_id | bigint [64,0] | NO | nextval('tbl_hbu_zoning_document_zoning_doc_id_seq'::regclass) |  |
| 2 | hbu_id | bigint [64,0] | NO |  |  |
| 3 | document_id | bigint [64,0] | NO |  |  |
| 4 | jurisdiction_name | character varying(200) | YES |  |  |
| 5 | zoning_designation | character varying(100) | YES |  |  |
| 6 | permitted_uses_extracted | jsonb | YES |  |  |
| 7 | conditional_uses_extracted | jsonb | YES |  |  |
| 8 | prohibited_uses_extracted | jsonb | YES |  |  |
| 9 | development_standards_extracted | jsonb | YES |  | JSONB with extracted standards: max_density, max_height, max_far, setbacks, parking_ratio |
| 10 | extraction_confidence | numeric [5,4] | YES |  | AI extraction confidence score (0.0000 to 1.0000) |
| 11 | extraction_date | timestamp with time zone | YES |  |  |
| 12 | user_verified | boolean | YES | false | TRUE if a user has reviewed and verified the AI extractions |
| 13 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_hbu_zoning_document_document_id_fkey | FOREIGN KEY | FOREIGN KEY (document_id) REFERENCES core_doc(doc_id) ON DELETE CASCADE |
| tbl_hbu_zoning_document_hbu_id_fkey | FOREIGN KEY | FOREIGN KEY (hbu_id) REFERENCES tbl_hbu_analysis(hbu_id) ON DELETE CASCADE |
| tbl_hbu_zoning_document_pkey | PRIMARY KEY | PRIMARY KEY (zoning_doc_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_hbu_zoning_document_document_id_fkey | document_id | core_doc.doc_id | NO ACTION | CASCADE |
| tbl_hbu_zoning_document_hbu_id_fkey | hbu_id | tbl_hbu_analysis.hbu_id | NO ACTION | CASCADE |

#### Indexes

- `idx_hbu_zoning_doc_document`

```sql
CREATE INDEX idx_hbu_zoning_doc_document ON landscape.tbl_hbu_zoning_document USING btree (document_id)
```
- `idx_hbu_zoning_doc_hbu`

```sql
CREATE INDEX idx_hbu_zoning_doc_hbu ON landscape.tbl_hbu_zoning_document USING btree (hbu_id)
```
- `tbl_hbu_zoning_document_pkey`

```sql
CREATE UNIQUE INDEX tbl_hbu_zoning_document_pkey ON landscape.tbl_hbu_zoning_document USING btree (zoning_doc_id)
```

### `tbl_income_approach`

- Columns: 16
- Constraints: 7
- Foreign keys: 1
- Indexes: 2
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | income_approach_id | integer [32,0] | NO | nextval('tbl_income_approach_income_approach_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | market_cap_rate_method | character varying(50) | YES |  | Method for determining market cap rate: comp_sales, band_investment, investor_survey, other |
| 4 | selected_cap_rate | numeric [5,4] | YES |  |  |
| 5 | cap_rate_justification | text | YES |  |  |
| 6 | direct_cap_value | numeric [15,2] | YES |  |  |
| 7 | forecast_period_years | integer [32,0] | YES |  |  |
| 8 | terminal_cap_rate | numeric [5,4] | YES |  |  |
| 9 | discount_rate | numeric [5,4] | YES |  |  |
| 10 | dcf_value | numeric [15,2] | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |
| 12 | updated_at | timestamp without time zone | YES | now() |  |
| 13 | noi_capitalization_basis | character varying(20) | YES | 'forward_12'::character varying | NOI basis for direct cap: trailing_12, forward_12, avg_straddle, stabilized |
| 14 | stabilized_vacancy_rate | numeric [5,4] | YES | 0.05 | Market-standard vacancy rate for stabilized NOI calculation (0.05 = 5%) |
| 15 | cap_rate_interval | numeric [5,4] | YES | 0.0050 | Interval for cap rate sensitivity analysis (0.0050 = 50 bps) |
| 16 | discount_rate_interval | numeric [5,4] | YES | 0.0050 | Interval for discount rate sensitivity analysis (0.0050 = 50 bps) |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| check_cap_rate_method | CHECK | CHECK (((market_cap_rate_method)::text = ANY ((ARRAY['comp_sales'::character varying, 'band_investment'::character varying, 'investor_survey'::character varying, 'other'::character varying])::text[]))) |
| check_noi_basis | CHECK | CHECK (((noi_capitalization_basis)::text = ANY ((ARRAY['trailing_12'::character varying, 'forward_12'::character varying, 'avg_straddle'::character varying, 'stabilized'::character varying])::text[]))) |
| check_selected_cap_rate | CHECK | CHECK (((selected_cap_rate IS NULL) OR ((selected_cap_rate >= 0.01) AND (selected_cap_rate <= 0.15)))) |
| check_stabilized_vacancy_rate_ia | CHECK | CHECK (((stabilized_vacancy_rate IS NULL) OR ((stabilized_vacancy_rate >= (0)::numeric) AND (stabilized_vacancy_rate <= 0.50)))) |
| check_terminal_cap_rate | CHECK | CHECK (((terminal_cap_rate IS NULL) OR ((terminal_cap_rate >= 0.01) AND (terminal_cap_rate <= 0.15)))) |
| tbl_income_approach_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_income_approach_pkey | PRIMARY KEY | PRIMARY KEY (income_approach_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_income_approach_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_income_approach_project`

```sql
CREATE UNIQUE INDEX idx_income_approach_project ON landscape.tbl_income_approach USING btree (project_id)
```
- `tbl_income_approach_pkey`

```sql
CREATE UNIQUE INDEX tbl_income_approach_pkey ON landscape.tbl_income_approach USING btree (income_approach_id)
```

#### Triggers

- `update_income_approach_updated_at`

```sql
CREATE TRIGGER update_income_approach_updated_at BEFORE UPDATE ON landscape.tbl_income_approach FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_income_property`

- Columns: 26
- Constraints: 3
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | income_property_id | integer [32,0] | NO | nextval('tbl_income_property_income_property_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | parcel_id | integer [32,0] | YES |  |  |
| 4 | property_name | character varying(200) | YES |  |  |
| 5 | property_type | character varying(50) | YES |  |  |
| 6 | property_subtype | character varying(50) | YES |  |  |
| 7 | total_building_sf | numeric [12,2] | YES |  |  |
| 8 | rentable_sf | numeric [12,2] | YES |  |  |
| 9 | usable_sf | numeric [12,2] | YES |  |  |
| 10 | common_area_sf | numeric [12,2] | YES |  |  |
| 11 | load_factor | numeric [5,4] | YES |  |  |
| 12 | year_built | integer [32,0] | YES |  |  |
| 13 | year_renovated | integer [32,0] | YES |  |  |
| 14 | number_of_floors | integer [32,0] | YES |  |  |
| 15 | number_of_units | integer [32,0] | YES |  |  |
| 16 | parking_spaces | integer [32,0] | YES |  |  |
| 17 | parking_ratio | numeric [5,2] | YES |  |  |
| 18 | property_status | character varying(50) | YES |  |  |
| 19 | stabilization_date | date | YES |  |  |
| 20 | stabilized_occupancy_pct | numeric [5,2] | YES |  |  |
| 21 | acquisition_date | date | YES |  |  |
| 22 | acquisition_price | numeric [15,2] | YES |  |  |
| 23 | current_assessed_value | numeric [15,2] | YES |  |  |
| 24 | created_at | timestamp without time zone | YES | now() |  |
| 25 | updated_at | timestamp without time zone | YES | now() |  |
| 26 | property_type_code | character varying(10) | YES | 'CRE'::character varying |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_property_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) |
| tbl_cre_property_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_cre_property_pkey | PRIMARY KEY | PRIMARY KEY (income_property_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cre_property_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | NO ACTION |
| tbl_cre_property_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_cre_property_status`

```sql
CREATE INDEX idx_cre_property_status ON landscape.tbl_income_property USING btree (property_status)
```
- `idx_cre_property_type`

```sql
CREATE INDEX idx_cre_property_type ON landscape.tbl_income_property USING btree (property_type)
```
- `idx_income_property_project`

```sql
CREATE INDEX idx_income_property_project ON landscape.tbl_income_property USING btree (project_id)
```
- `tbl_cre_property_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_property_pkey ON landscape.tbl_income_property USING btree (income_property_id)
```

### `tbl_income_property_ind_ext`

- Columns: 42
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | income_property_id | integer [32,0] | NO |  |  |
| 2 | industrial_type | character varying(50) | YES |  |  |
| 3 | building_class | character varying(10) | YES |  |  |
| 4 | clear_height_ft | numeric [6,2] | YES |  |  |
| 5 | min_clear_height_ft | numeric [6,2] | YES |  |  |
| 6 | column_spacing | character varying(50) | YES |  |  |
| 7 | floor_thickness_inches | numeric [4,1] | YES |  |  |
| 8 | floor_load_psf | numeric [8,2] | YES |  |  |
| 9 | dock_high_doors | integer [32,0] | YES | 0 |  |
| 10 | grade_level_doors | integer [32,0] | YES | 0 |  |
| 11 | drive_in_doors | integer [32,0] | YES | 0 |  |
| 12 | dock_door_ratio | numeric [8,4] | YES |  |  |
| 13 | dock_levelers | integer [32,0] | YES | 0 |  |
| 14 | dock_seals | integer [32,0] | YES | 0 |  |
| 15 | truck_court_depth_ft | numeric [8,2] | YES |  |  |
| 16 | trailer_parking_spaces | integer [32,0] | YES | 0 |  |
| 17 | auto_parking_spaces | integer [32,0] | YES | 0 |  |
| 18 | secured_truck_yard | boolean | YES | false |  |
| 19 | electrical_service | character varying(50) | YES |  |  |
| 20 | electrical_amps | integer [32,0] | YES |  |  |
| 21 | electrical_volts | integer [32,0] | YES |  |  |
| 22 | backup_generator | boolean | YES | false |  |
| 23 | generator_kw | integer [32,0] | YES |  |  |
| 24 | sprinkler_system | character varying(50) | YES |  |  |
| 25 | sprinkler_density | character varying(50) | YES |  |  |
| 26 | fire_pump | boolean | YES | false |  |
| 27 | fire_pump_gpm | integer [32,0] | YES |  |  |
| 28 | hvac_type | character varying(50) | YES |  |  |
| 29 | office_hvac_tons | integer [32,0] | YES |  |  |
| 30 | warehouse_hvac_tons | integer [32,0] | YES |  |  |
| 31 | rail_served | boolean | YES | false |  |
| 32 | rail_car_capacity | integer [32,0] | YES |  |  |
| 33 | rail_siding_ft | numeric [8,2] | YES |  |  |
| 34 | phase_1_date | date | YES |  |  |
| 35 | phase_2_required | boolean | YES | false |  |
| 36 | environmental_issues | text | YES |  |  |
| 37 | food_grade | boolean | YES | false |  |
| 38 | pharma_grade | boolean | YES | false |  |
| 39 | temperature_controlled | boolean | YES | false |  |
| 40 | temperature_zones | integer [32,0] | YES |  |  |
| 41 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 42 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_income_property_ind_ext_income_property_id_fkey | FOREIGN KEY | FOREIGN KEY (income_property_id) REFERENCES tbl_income_property(income_property_id) ON DELETE CASCADE |
| tbl_income_property_ind_ext_pkey | PRIMARY KEY | PRIMARY KEY (income_property_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_income_property_ind_ext_income_property_id_fkey | income_property_id | tbl_income_property.income_property_id | NO ACTION | CASCADE |

#### Indexes

- `idx_income_property_ind_clear_height`

```sql
CREATE INDEX idx_income_property_ind_clear_height ON landscape.tbl_income_property_ind_ext USING btree (clear_height_ft)
```
- `idx_income_property_ind_type`

```sql
CREATE INDEX idx_income_property_ind_type ON landscape.tbl_income_property_ind_ext USING btree (industrial_type)
```
- `tbl_income_property_ind_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_income_property_ind_ext_pkey ON landscape.tbl_income_property_ind_ext USING btree (income_property_id)
```

### `tbl_income_property_mf_ext`

- Columns: 37
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | income_property_id | integer [32,0] | NO |  |  |
| 2 | total_units | integer [32,0] | YES |  |  |
| 3 | total_bedrooms | integer [32,0] | YES |  |  |
| 4 | avg_unit_sf | numeric [10,2] | YES |  |  |
| 5 | studio_count | integer [32,0] | YES | 0 |  |
| 6 | one_bed_count | integer [32,0] | YES | 0 |  |
| 7 | two_bed_count | integer [32,0] | YES | 0 |  |
| 8 | three_bed_count | integer [32,0] | YES | 0 |  |
| 9 | four_plus_bed_count | integer [32,0] | YES | 0 |  |
| 10 | has_pool | boolean | YES | false |  |
| 11 | has_fitness_center | boolean | YES | false |  |
| 12 | has_clubhouse | boolean | YES | false |  |
| 13 | has_business_center | boolean | YES | false |  |
| 14 | has_pet_park | boolean | YES | false |  |
| 15 | has_ev_charging | boolean | YES | false |  |
| 16 | has_package_lockers | boolean | YES | false |  |
| 17 | has_controlled_access | boolean | YES | false |  |
| 18 | surface_parking_spaces | integer [32,0] | YES | 0 |  |
| 19 | covered_parking_spaces | integer [32,0] | YES | 0 |  |
| 20 | garage_parking_spaces | integer [32,0] | YES | 0 |  |
| 21 | parking_revenue_monthly | numeric [12,2] | YES |  |  |
| 22 | utility_billing_type | character varying(50) | YES |  |  |
| 23 | water_metering | character varying(50) | YES |  |  |
| 24 | electric_metering | character varying(50) | YES |  |  |
| 25 | gas_metering | character varying(50) | YES |  |  |
| 26 | class_rating | character varying(10) | YES |  |  |
| 27 | repositioning_potential | boolean | YES | false |  |
| 28 | value_add_score | integer [32,0] | YES |  |  |
| 29 | is_rent_controlled | boolean | YES | false |  |
| 30 | rent_control_jurisdiction | character varying(100) | YES |  |  |
| 31 | allowable_annual_increase_pct | numeric [5,2] | YES |  |  |
| 32 | has_affordable_units | boolean | YES | false |  |
| 33 | affordable_unit_count | integer [32,0] | YES | 0 |  |
| 34 | lihtc_expiration_date | date | YES |  |  |
| 35 | section_8_contract_date | date | YES |  |  |
| 36 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 37 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_income_property_mf_ext_income_property_id_fkey | FOREIGN KEY | FOREIGN KEY (income_property_id) REFERENCES tbl_income_property(income_property_id) ON DELETE CASCADE |
| tbl_income_property_mf_ext_pkey | PRIMARY KEY | PRIMARY KEY (income_property_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_income_property_mf_ext_income_property_id_fkey | income_property_id | tbl_income_property.income_property_id | NO ACTION | CASCADE |

#### Indexes

- `idx_income_property_mf_class`

```sql
CREATE INDEX idx_income_property_mf_class ON landscape.tbl_income_property_mf_ext USING btree (class_rating)
```
- `tbl_income_property_mf_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_income_property_mf_ext_pkey ON landscape.tbl_income_property_mf_ext USING btree (income_property_id)
```

### `tbl_income_property_ret_ext`

- Columns: 32
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | income_property_id | integer [32,0] | NO |  |  |
| 2 | retail_type | character varying(50) | YES |  |  |
| 3 | anchor_count | integer [32,0] | YES | 0 |  |
| 4 | junior_anchor_count | integer [32,0] | YES | 0 |  |
| 5 | inline_shop_count | integer [32,0] | YES |  |  |
| 6 | pad_site_count | integer [32,0] | YES | 0 |  |
| 7 | outparcel_count | integer [32,0] | YES | 0 |  |
| 8 | daily_traffic_count | integer [32,0] | YES |  |  |
| 9 | traffic_count_date | date | YES |  |  |
| 10 | signalized_intersection | boolean | YES | false |  |
| 11 | highway_visibility | boolean | YES | false |  |
| 12 | pylon_sign | boolean | YES | false |  |
| 13 | monument_sign | boolean | YES | false |  |
| 14 | population_1_mile | integer [32,0] | YES |  |  |
| 15 | population_3_mile | integer [32,0] | YES |  |  |
| 16 | population_5_mile | integer [32,0] | YES |  |  |
| 17 | median_hh_income_3_mile | numeric [12,2] | YES |  |  |
| 18 | daytime_population_3_mile | integer [32,0] | YES |  |  |
| 19 | parking_ratio | numeric [5,2] | YES |  |  |
| 20 | surface_parking_spaces | integer [32,0] | YES |  |  |
| 21 | structured_parking_spaces | integer [32,0] | YES |  |  |
| 22 | parking_field_condition | character varying(50) | YES |  |  |
| 23 | national_tenant_pct | numeric [5,2] | YES |  |  |
| 24 | regional_tenant_pct | numeric [5,2] | YES |  |  |
| 25 | local_tenant_pct | numeric [5,2] | YES |  |  |
| 26 | food_tenant_pct | numeric [5,2] | YES |  |  |
| 27 | service_tenant_pct | numeric [5,2] | YES |  |  |
| 28 | sales_psf_inline | numeric [10,2] | YES |  |  |
| 29 | sales_psf_anchor | numeric [10,2] | YES |  |  |
| 30 | occupancy_cost_ratio | numeric [5,2] | YES |  |  |
| 31 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 32 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_income_property_ret_ext_income_property_id_fkey | FOREIGN KEY | FOREIGN KEY (income_property_id) REFERENCES tbl_income_property(income_property_id) ON DELETE CASCADE |
| tbl_income_property_ret_ext_pkey | PRIMARY KEY | PRIMARY KEY (income_property_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_income_property_ret_ext_income_property_id_fkey | income_property_id | tbl_income_property.income_property_id | NO ACTION | CASCADE |

#### Indexes

- `idx_income_property_ret_type`

```sql
CREATE INDEX idx_income_property_ret_type ON landscape.tbl_income_property_ret_ext USING btree (retail_type)
```
- `tbl_income_property_ret_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_income_property_ret_ext_pkey ON landscape.tbl_income_property_ret_ext USING btree (income_property_id)
```

### `tbl_inventory_item`

- Columns: 22
- Constraints: 7
- Foreign keys: 5
- Indexes: 12
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | item_id | bigint [64,0] | NO | nextval('tbl_inventory_item_item_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | property_type | character varying(50) | NO |  |  |
| 4 | item_code | character varying(100) | NO |  |  |
| 5 | hierarchy_values | jsonb | YES | '{}'::jsonb | JSON object with hierarchy column values, e.g., {"building": "North", "floor": "5"} |
| 6 | container_id | bigint [64,0] | YES |  |  |
| 7 | data_values | jsonb | YES | '{}'::jsonb | JSON object with data column values, e.g., {"square_feet": 750, "rent": 1450} |
| 8 | available_date | date | YES |  |  |
| 9 | absorption_month | integer [32,0] | YES |  |  |
| 10 | lease_start_date | date | YES |  |  |
| 11 | lease_end_date | date | YES |  |  |
| 12 | status | character varying(50) | YES |  |  |
| 13 | is_speculative | boolean | YES | false |  |
| 14 | is_active | boolean | YES | true |  |
| 15 | sort_order | integer [32,0] | YES | 0 |  |
| 16 | notes | text | YES |  |  |
| 17 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 18 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 19 | family_id | bigint [64,0] | YES |  | FK to lu_family - top level land use classification |
| 20 | type_id | bigint [64,0] | YES |  | FK to lu_type - second level classification |
| 21 | product_id | bigint [64,0] | YES |  | FK to res_lot_product - specific lot dimensions |
| 22 | density_code | character varying(10) | YES |  | Density classification (VLDR, LDR, MDR, HDR) |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_inventory_item_container_id_fkey | FOREIGN KEY | FOREIGN KEY (container_id) REFERENCES tbl_division(division_id) ON DELETE SET NULL |
| tbl_inventory_item_family_id_fkey | FOREIGN KEY | FOREIGN KEY (family_id) REFERENCES lu_family(family_id) |
| tbl_inventory_item_product_id_fkey | FOREIGN KEY | FOREIGN KEY (product_id) REFERENCES res_lot_product(product_id) |
| tbl_inventory_item_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_inventory_item_type_id_fkey | FOREIGN KEY | FOREIGN KEY (type_id) REFERENCES lu_type(type_id) |
| tbl_inventory_item_pkey | PRIMARY KEY | PRIMARY KEY (item_id) |
| uq_inventory_item_code | UNIQUE | UNIQUE (project_id, item_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_inventory_item_container_id_fkey | container_id | tbl_division.division_id | NO ACTION | SET NULL |
| tbl_inventory_item_family_id_fkey | family_id | lu_family.family_id | NO ACTION | NO ACTION |
| tbl_inventory_item_product_id_fkey | product_id | res_lot_product.product_id | NO ACTION | NO ACTION |
| tbl_inventory_item_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_inventory_item_type_id_fkey | type_id | lu_type.type_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_inventory_active`

```sql
CREATE INDEX idx_inventory_active ON landscape.tbl_inventory_item USING btree (is_active) WHERE (is_active = true)
```
- `idx_inventory_code`

```sql
CREATE INDEX idx_inventory_code ON landscape.tbl_inventory_item USING btree (item_code)
```
- `idx_inventory_container`

```sql
CREATE INDEX idx_inventory_container ON landscape.tbl_inventory_item USING btree (container_id)
```
- `idx_inventory_data_gin`

```sql
CREATE INDEX idx_inventory_data_gin ON landscape.tbl_inventory_item USING gin (data_values)
```
- `idx_inventory_family`

```sql
CREATE INDEX idx_inventory_family ON landscape.tbl_inventory_item USING btree (family_id)
```
- `idx_inventory_hierarchy_gin`

```sql
CREATE INDEX idx_inventory_hierarchy_gin ON landscape.tbl_inventory_item USING gin (hierarchy_values)
```
- `idx_inventory_product`

```sql
CREATE INDEX idx_inventory_product ON landscape.tbl_inventory_item USING btree (product_id)
```
- `idx_inventory_project`

```sql
CREATE INDEX idx_inventory_project ON landscape.tbl_inventory_item USING btree (project_id)
```
- `idx_inventory_status`

```sql
CREATE INDEX idx_inventory_status ON landscape.tbl_inventory_item USING btree (status)
```
- `idx_inventory_type`

```sql
CREATE INDEX idx_inventory_type ON landscape.tbl_inventory_item USING btree (property_type)
```
- `tbl_inventory_item_pkey`

```sql
CREATE UNIQUE INDEX tbl_inventory_item_pkey ON landscape.tbl_inventory_item USING btree (item_id)
```
- `uq_inventory_item_code`

```sql
CREATE UNIQUE INDEX uq_inventory_item_code ON landscape.tbl_inventory_item USING btree (project_id, item_code)
```

#### Triggers

- `trg_auto_create_containers`

```sql
CREATE TRIGGER trg_auto_create_containers AFTER INSERT OR UPDATE ON landscape.tbl_inventory_item FOR EACH ROW EXECUTE FUNCTION trigger_auto_create_containers()
```

### `tbl_item_dependency`

- Columns: 14
- Constraints: 3
- Foreign keys: 0
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | dependency_id | bigint [64,0] | NO | nextval('tbl_item_dependency_dependency_id_seq'::regclass) |  |
| 2 | dependent_item_type | character varying(50) | NO |  |  |
| 3 | dependent_item_table | character varying(100) | NO |  |  |
| 4 | dependent_item_id | bigint [64,0] | NO |  |  |
| 5 | trigger_item_type | character varying(50) | YES |  |  |
| 6 | trigger_item_table | character varying(100) | YES |  |  |
| 7 | trigger_item_id | bigint [64,0] | YES |  |  |
| 8 | trigger_event | character varying(50) | NO | 'ABSOLUTE'::character varying | ABSOLUTE, START, COMPLETE, PCT_COMPLETE, CUMULATIVE_AMOUNT, UNIT_COUNT, PERIOD_COUNT |
| 9 | trigger_value | numeric [15,2] | YES |  |  |
| 10 | offset_periods | integer [32,0] | YES | 0 |  |
| 11 | is_hard_dependency | boolean | YES | false | If true, dependent cannot proceed if trigger condition not met |
| 12 | notes | text | YES |  |  |
| 13 | created_at | timestamp without time zone | YES | now() |  |
| 14 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_item_dependency_dependent_item_type_check | CHECK | CHECK (((dependent_item_type)::text = ANY ((ARRAY['COST'::character varying, 'REVENUE'::character varying, 'FINANCING'::character varying])::text[]))) |
| tbl_item_dependency_trigger_event_check | CHECK | CHECK (((trigger_event)::text = ANY ((ARRAY['ABSOLUTE'::character varying, 'START'::character varying, 'COMPLETE'::character varying, 'PCT_COMPLETE'::character varying, 'CUMULATIVE_AMOUNT'::character varying, 'UNIT_COUNT'::character varying, 'PERIOD_COUNT'::character varying])::text[]))) |
| tbl_item_dependency_pkey | PRIMARY KEY | PRIMARY KEY (dependency_id) |

#### Indexes

- `idx_item_dependency_dependent`

```sql
CREATE INDEX idx_item_dependency_dependent ON landscape.tbl_item_dependency USING btree (dependent_item_type, dependent_item_id)
```
- `idx_item_dependency_trigger`

```sql
CREATE INDEX idx_item_dependency_trigger ON landscape.tbl_item_dependency USING btree (trigger_item_type, trigger_item_id)
```
- `tbl_item_dependency_pkey`

```sql
CREATE UNIQUE INDEX tbl_item_dependency_pkey ON landscape.tbl_item_dependency USING btree (dependency_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_item_dependency FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_land_comp_adjustments`

- Columns: 7
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | adjustment_id | integer [32,0] | NO |  |  |
| 2 | adjustment_type | character varying(50) | NO |  |  |
| 3 | adjustment_pct | numeric [6,3] | YES |  |  |
| 4 | adjustment_amount | numeric [12,2] | YES |  |  |
| 5 | justification | text | YES |  |  |
| 6 | created_at | timestamp with time zone | NO |  |  |
| 7 | land_comparable_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_land_comp_adjust_land_comparable_id_366c2e08_fk_tbl_land_ | FOREIGN KEY | FOREIGN KEY (land_comparable_id) REFERENCES tbl_land_comparables(land_comparable_id) DEFERRABLE INITIALLY DEFERRED |
| tbl_land_comp_adjustments_pkey | PRIMARY KEY | PRIMARY KEY (adjustment_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_land_comp_adjust_land_comparable_id_366c2e08_fk_tbl_land_ | land_comparable_id | tbl_land_comparables.land_comparable_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_land_comp_adjustments_land_comparable_id_366c2e08`

```sql
CREATE INDEX tbl_land_comp_adjustments_land_comparable_id_366c2e08 ON landscape.tbl_land_comp_adjustments USING btree (land_comparable_id)
```
- `tbl_land_comp_adjustments_pkey`

```sql
CREATE UNIQUE INDEX tbl_land_comp_adjustments_pkey ON landscape.tbl_land_comp_adjustments USING btree (adjustment_id)
```

### `tbl_land_comparables`

- Columns: 20
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | land_comparable_id | integer [32,0] | NO |  |  |
| 2 | comp_number | integer [32,0] | YES |  |  |
| 3 | address | character varying(255) | YES |  |  |
| 4 | city | character varying(100) | YES |  |  |
| 5 | state | character varying(2) | YES |  |  |
| 6 | zip | character varying(10) | YES |  |  |
| 7 | sale_date | date | YES |  |  |
| 8 | sale_price | numeric [15,2] | YES |  |  |
| 9 | land_area_sf | numeric [12,2] | YES |  |  |
| 10 | land_area_acres | numeric [10,4] | YES |  |  |
| 11 | price_per_sf | numeric [10,2] | YES |  |  |
| 12 | price_per_acre | numeric [12,2] | YES |  |  |
| 13 | zoning | character varying(100) | YES |  |  |
| 14 | source | character varying(100) | YES |  |  |
| 15 | latitude | numeric [10,7] | YES |  |  |
| 16 | longitude | numeric [10,7] | YES |  |  |
| 17 | notes | text | YES |  |  |
| 18 | created_at | timestamp with time zone | NO |  |  |
| 19 | updated_at | timestamp with time zone | NO |  |  |
| 20 | project_id | integer [32,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_land_comparables_project_id_ed54f396_fk_tbl_proje | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) DEFERRABLE INITIALLY DEFERRED |
| tbl_land_comparables_pkey | PRIMARY KEY | PRIMARY KEY (land_comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_land_comparables_project_id_ed54f396_fk_tbl_proje | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_land_comparables_pkey`

```sql
CREATE UNIQUE INDEX tbl_land_comparables_pkey ON landscape.tbl_land_comparables USING btree (land_comparable_id)
```
- `tbl_land_comparables_project_id_ed54f396`

```sql
CREATE INDEX tbl_land_comparables_project_id_ed54f396 ON landscape.tbl_land_comparables USING btree (project_id)
```

### `tbl_landuse`

- Columns: 10
- Constraints: 3
- Foreign keys: 1
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | landuse_id | integer [32,0] | NO |  |  |
| 2 | landuse_code | character varying(10) | NO |  |  |
| 3 | landuse_type | character varying(50) | YES |  |  |
| 4 | type_id | integer [32,0] | YES |  |  |
| 5 | name | character varying(100) | YES |  |  |
| 6 | description | text | YES |  |  |
| 7 | active | boolean | YES | true |  |
| 8 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 9 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 10 | subtype_id | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_landuse_subtype_id_fkey | FOREIGN KEY | FOREIGN KEY (type_id) REFERENCES lu_type(type_id) ON DELETE SET NULL |
| tbl_landuse_pkey | PRIMARY KEY | PRIMARY KEY (landuse_id) |
| tbl_landuse_landuse_code_key | UNIQUE | UNIQUE (landuse_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_landuse_subtype_id_fkey | type_id | lu_type.type_id | NO ACTION | SET NULL |

#### Indexes

- `idx_tbl_landuse_active`

```sql
CREATE INDEX idx_tbl_landuse_active ON landscape.tbl_landuse USING btree (active)
```
- `idx_tbl_landuse_code`

```sql
CREATE INDEX idx_tbl_landuse_code ON landscape.tbl_landuse USING btree (landuse_code)
```
- `idx_tbl_landuse_subtype`

```sql
CREATE INDEX idx_tbl_landuse_subtype ON landscape.tbl_landuse USING btree (type_id)
```
- `tbl_landuse_landuse_code_key`

```sql
CREATE UNIQUE INDEX tbl_landuse_landuse_code_key ON landscape.tbl_landuse USING btree (landuse_code)
```
- `tbl_landuse_pkey`

```sql
CREATE UNIQUE INDEX tbl_landuse_pkey ON landscape.tbl_landuse USING btree (landuse_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_landuse FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_landuse_program`

- Columns: 10
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | landuse_code | character varying(64) | NO |  |  |
| 2 | rsf_to_gfa_eff | numeric [5,3] | YES |  |  |
| 3 | employee_density | numeric [10,2] | YES |  |  |
| 4 | floor_plate_efficiency | numeric [5,2] | YES |  |  |
| 5 | clear_height_ft | numeric [6,2] | YES |  |  |
| 6 | loading_dock_ratio | numeric [8,3] | YES |  |  |
| 7 | truck_court_depth_ft | numeric [6,2] | YES |  |  |
| 8 | trailer_parking_ratio | numeric [8,3] | YES |  |  |
| 9 | created_at | timestamp with time zone | YES | now() |  |
| 10 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_landuse_program_pkey | PRIMARY KEY | PRIMARY KEY (landuse_code) |

#### Indexes

- `tbl_landuse_program_pkey`

```sql
CREATE UNIQUE INDEX tbl_landuse_program_pkey ON landscape.tbl_landuse_program USING btree (landuse_code)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_landuse_program FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_lease`

- Columns: 42
- Constraints: 6
- Foreign keys: 3
- Indexes: 7
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | parcel_id | integer [32,0] | YES |  |  |
| 4 | lot_id | integer [32,0] | YES |  |  |
| 5 | tenant_name | character varying(255) | NO |  |  |
| 6 | tenant_contact | character varying(255) | YES |  |  |
| 7 | tenant_email | character varying(255) | YES |  |  |
| 8 | tenant_phone | character varying(50) | YES |  |  |
| 9 | tenant_classification | character varying(50) | YES |  | Anchor, Major, Inline, or Kiosk |
| 10 | lease_status | character varying(50) | YES | 'Speculative'::character varying | Contract, Speculative, Month-to-Month, Holdover, or Expired |
| 11 | lease_type | character varying(50) | YES |  |  |
| 12 | suite_number | character varying(50) | YES |  |  |
| 13 | floor_number | integer [32,0] | YES |  |  |
| 14 | lease_execution_date | date | YES |  |  |
| 15 | lease_commencement_date | date | NO |  |  |
| 16 | rent_start_date | date | YES |  |  |
| 17 | lease_expiration_date | date | NO |  |  |
| 18 | lease_term_months | integer [32,0] | NO |  |  |
| 19 | leased_sf | numeric [12,2] | NO |  |  |
| 20 | usable_sf | numeric [12,2] | YES |  |  |
| 21 | number_of_renewal_options | integer [32,0] | YES | 0 |  |
| 22 | renewal_option_term_months | integer [32,0] | YES |  |  |
| 23 | renewal_notice_months | integer [32,0] | YES |  |  |
| 24 | renewal_probability_pct | numeric [5,2] | YES | 50.00 |  |
| 25 | early_termination_allowed | boolean | YES | false |  |
| 26 | termination_notice_months | integer [32,0] | YES |  |  |
| 27 | termination_penalty_amount | numeric [15,2] | YES |  |  |
| 28 | security_deposit_amount | numeric [15,2] | YES |  |  |
| 29 | security_deposit_months | integer [32,0] | YES |  |  |
| 30 | affects_occupancy | boolean | YES | true |  |
| 31 | expansion_rights | boolean | YES | false |  |
| 32 | right_of_first_refusal | boolean | YES | false |  |
| 33 | exclusive_use_clause | text | YES |  |  |
| 34 | co_tenancy_clause | text | YES |  |  |
| 35 | radius_restriction | character varying(255) | YES |  |  |
| 36 | notes | text | YES |  |  |
| 37 | lease_metadata | jsonb | YES | '{}'::jsonb |  |
| 38 | created_at | timestamp with time zone | YES | now() |  |
| 39 | created_by | character varying(100) | YES |  |  |
| 40 | updated_at | timestamp with time zone | YES | now() |  |
| 41 | updated_by | character varying(100) | YES |  |  |
| 42 | lease_type_code | character varying(10) | YES | 'CRE'::character varying |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_lease_dates | CHECK | CHECK ((lease_expiration_date >= lease_commencement_date)) |
| chk_lease_dates | CHECK | CHECK ((lease_end_date > lease_start_date)) |
| tbl_lease_lot_id_fkey | FOREIGN KEY | FOREIGN KEY (lot_id) REFERENCES tbl_lot(lot_id) |
| tbl_lease_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) |
| tbl_lease_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_lease_pkey | PRIMARY KEY | PRIMARY KEY (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_lease_lot_id_fkey | lot_id | tbl_lot.lot_id | NO ACTION | NO ACTION |
| tbl_lease_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | NO ACTION |
| tbl_lease_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_lease_expiration`

```sql
CREATE INDEX idx_lease_expiration ON landscape.tbl_lease USING btree (lease_expiration_date)
```
- `idx_lease_lot`

```sql
CREATE INDEX idx_lease_lot ON landscape.tbl_lease USING btree (lot_id)
```
- `idx_lease_parcel`

```sql
CREATE INDEX idx_lease_parcel ON landscape.tbl_lease USING btree (parcel_id)
```
- `idx_lease_project`

```sql
CREATE INDEX idx_lease_project ON landscape.tbl_lease USING btree (project_id)
```
- `idx_lease_status`

```sql
CREATE INDEX idx_lease_status ON landscape.tbl_lease USING btree (lease_status, affects_occupancy)
```
- `idx_lease_tenant`

```sql
CREATE INDEX idx_lease_tenant ON landscape.tbl_lease USING btree (tenant_name)
```
- `tbl_lease_pkey`

```sql
CREATE UNIQUE INDEX tbl_lease_pkey ON landscape.tbl_lease USING btree (lease_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_lease FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_lease_assumptions`

- Columns: 17
- Constraints: 5
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | assumption_id | bigint [64,0] | NO | nextval('tbl_lease_assumptions_assumption_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | space_type | character varying(50) | NO |  |  |
| 4 | market_rent_psf_annual | numeric [10,2] | NO |  |  |
| 5 | market_rent_growth_rate | numeric [6,5] | YES | 0.025 |  |
| 6 | renewal_probability | numeric [5,4] | YES | 0.70 |  |
| 7 | downtime_months | integer [32,0] | YES | 6 |  |
| 8 | ti_psf_renewal | numeric [10,2] | YES | 0 |  |
| 9 | ti_psf_new_tenant | numeric [10,2] | YES | 0 |  |
| 10 | lc_psf_renewal | numeric [10,2] | YES | 0 |  |
| 11 | lc_psf_new_tenant | numeric [10,2] | YES | 0 |  |
| 12 | free_rent_months_renewal | integer [32,0] | YES | 0 |  |
| 13 | free_rent_months_new_tenant | integer [32,0] | YES | 3 |  |
| 14 | effective_date | date | YES | CURRENT_DATE |  |
| 15 | notes | text | YES |  |  |
| 16 | created_at | timestamp with time zone | YES | now() |  |
| 17 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_lease_assumptions_renewal_probability_check | CHECK | CHECK (((renewal_probability >= (0)::numeric) AND (renewal_probability <= (1)::numeric))) |
| tbl_lease_assumptions_space_type_check | CHECK | CHECK (((space_type)::text = ANY ((ARRAY['OFFICE'::character varying, 'RETAIL'::character varying, 'INDUSTRIAL'::character varying, 'MEDICAL'::character varying, 'FLEX'::character varying, 'OTHER'::character varying])::text[]))) |
| tbl_lease_assumptions_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_lease_assumptions_pkey | PRIMARY KEY | PRIMARY KEY (assumption_id) |
| tbl_lease_assumptions_project_id_space_type_effective_date_key | UNIQUE | UNIQUE (project_id, space_type, effective_date) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_lease_assumptions_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_lease_assumptions_project`

```sql
CREATE INDEX idx_lease_assumptions_project ON landscape.tbl_lease_assumptions USING btree (project_id)
```
- `idx_lease_assumptions_space_type`

```sql
CREATE INDEX idx_lease_assumptions_space_type ON landscape.tbl_lease_assumptions USING btree (space_type)
```
- `tbl_lease_assumptions_pkey`

```sql
CREATE UNIQUE INDEX tbl_lease_assumptions_pkey ON landscape.tbl_lease_assumptions USING btree (assumption_id)
```
- `tbl_lease_assumptions_project_id_space_type_effective_date_key`

```sql
CREATE UNIQUE INDEX tbl_lease_assumptions_project_id_space_type_effective_date_key ON landscape.tbl_lease_assumptions USING btree (project_id, space_type, effective_date)
```

### `tbl_lease_ind_ext`

- Columns: 21
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | NO |  |  |
| 2 | rent_structure | character varying(50) | YES |  |  |
| 3 | cam_includes_roof | boolean | YES | true |  |
| 4 | cam_includes_structure | boolean | YES | true |  |
| 5 | cam_includes_parking | boolean | YES | true |  |
| 6 | management_fee_pct | numeric [5,2] | YES |  |  |
| 7 | landlord_ti_allowance | numeric [12,2] | YES |  |  |
| 8 | landlord_ti_psf | numeric [8,2] | YES |  |  |
| 9 | tenant_ti_investment | numeric [12,2] | YES |  |  |
| 10 | clear_height_requirement_ft | numeric [6,2] | YES |  |  |
| 11 | dock_requirement | integer [32,0] | YES |  |  |
| 12 | power_requirement_amps | integer [32,0] | YES |  |  |
| 13 | operating_hours | character varying(100) | YES |  |  |
| 14 | hazmat_use | boolean | YES | false |  |
| 15 | hazmat_description | text | YES |  |  |
| 16 | expansion_option_sf | numeric [10,2] | YES |  |  |
| 17 | expansion_option_rent_psf | numeric [8,2] | YES |  |  |
| 18 | contraction_option | boolean | YES | false |  |
| 19 | contraction_date | date | YES |  |  |
| 20 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 21 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_lease_ind_ext_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_lease_ind_ext_pkey | PRIMARY KEY | PRIMARY KEY (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_lease_ind_ext_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `tbl_lease_ind_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_lease_ind_ext_pkey ON landscape.tbl_lease_ind_ext USING btree (lease_id)
```

### `tbl_lease_mf_ext`

- Columns: 21
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | NO |  |  |
| 2 | base_rent_monthly | numeric [10,2] | YES |  |  |
| 3 | pet_rent_monthly | numeric [10,2] | YES |  |  |
| 4 | parking_rent_monthly | numeric [10,2] | YES |  |  |
| 5 | storage_rent_monthly | numeric [10,2] | YES |  |  |
| 6 | other_rent_monthly | numeric [10,2] | YES |  |  |
| 7 | move_in_concession | numeric [10,2] | YES |  |  |
| 8 | recurring_concession | numeric [10,2] | YES |  |  |
| 9 | concession_months | integer [32,0] | YES |  |  |
| 10 | net_effective_rent | numeric [10,2] | YES |  |  |
| 11 | household_size | integer [32,0] | YES |  |  |
| 12 | household_income | numeric [12,2] | YES |  |  |
| 13 | income_to_rent_ratio | numeric [5,2] | YES |  |  |
| 14 | mtm_rate_premium_pct | numeric [5,2] | YES |  |  |
| 15 | renewal_probability_pct | numeric [5,2] | YES |  |  |
| 16 | is_affordable_unit | boolean | YES | false |  |
| 17 | ami_percentage | integer [32,0] | YES |  |  |
| 18 | voucher_type | character varying(50) | YES |  |  |
| 19 | voucher_amount | numeric [10,2] | YES |  |  |
| 20 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 21 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_lease_mf_ext_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_lease_mf_ext_pkey | PRIMARY KEY | PRIMARY KEY (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_lease_mf_ext_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `tbl_lease_mf_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_lease_mf_ext_pkey ON landscape.tbl_lease_mf_ext USING btree (lease_id)
```

### `tbl_lease_ret_ext`

- Columns: 31
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | NO |  |  |
| 2 | rent_structure | character varying(50) | YES |  |  |
| 3 | cam_base_year | integer [32,0] | YES |  |  |
| 4 | cam_base_amount | numeric [12,2] | YES |  |  |
| 5 | cam_cap_amount | numeric [12,2] | YES |  |  |
| 6 | cam_cap_escalation_pct | numeric [5,2] | YES |  |  |
| 7 | cam_controllable_cap | boolean | YES | false |  |
| 8 | admin_fee_pct | numeric [5,2] | YES |  |  |
| 9 | tax_base_year | integer [32,0] | YES |  |  |
| 10 | tax_base_amount | numeric [12,2] | YES |  |  |
| 11 | tax_cap_amount | numeric [12,2] | YES |  |  |
| 12 | insurance_base_year | integer [32,0] | YES |  |  |
| 13 | insurance_base_amount | numeric [12,2] | YES |  |  |
| 14 | natural_breakpoint | boolean | YES | false |  |
| 15 | artificial_breakpoint | boolean | YES | false |  |
| 16 | breakpoint_amount | numeric [14,2] | YES |  |  |
| 17 | percentage_rate | numeric [5,2] | YES |  |  |
| 18 | percentage_rent_exclusions | text | YES |  |  |
| 19 | opening_co_tenancy | text | YES |  |  |
| 20 | operating_co_tenancy | text | YES |  |  |
| 21 | co_tenancy_remedy | character varying(50) | YES |  |  |
| 22 | rent_reduction_pct | numeric [5,2] | YES |  |  |
| 23 | exclusive_use_clause | text | YES |  |  |
| 24 | exclusive_radius_miles | numeric [5,2] | YES |  |  |
| 25 | kick_out_date | date | YES |  |  |
| 26 | kick_out_sales_threshold | numeric [14,2] | YES |  |  |
| 27 | assignment_fee | numeric [10,2] | YES |  |  |
| 28 | subletting_allowed | boolean | YES | false |  |
| 29 | profit_sharing_pct | numeric [5,2] | YES |  |  |
| 30 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 31 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_lease_ret_ext_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_lease_ret_ext_pkey | PRIMARY KEY | PRIMARY KEY (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_lease_ret_ext_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_lease_ret_structure`

```sql
CREATE INDEX idx_lease_ret_structure ON landscape.tbl_lease_ret_ext USING btree (rent_structure)
```
- `tbl_lease_ret_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_lease_ret_ext_pkey ON landscape.tbl_lease_ret_ext USING btree (lease_id)
```

### `tbl_lease_revenue_timing`

- Columns: 14
- Constraints: 4
- Foreign keys: 2
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | timing_id | bigint [64,0] | NO | nextval('tbl_lease_revenue_timing_timing_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | lease_id | bigint [64,0] | NO |  |  |
| 4 | period_id | integer [32,0] | NO |  |  |
| 5 | base_rent | numeric [12,2] | YES | 0 |  |
| 6 | escalated_rent | numeric [12,2] | YES | 0 |  |
| 7 | percentage_rent | numeric [12,2] | YES | 0 |  |
| 8 | cam_recovery | numeric [12,2] | YES | 0 |  |
| 9 | tax_recovery | numeric [12,2] | YES | 0 |  |
| 10 | insurance_recovery | numeric [12,2] | YES | 0 |  |
| 11 | vacancy_loss | numeric [12,2] | YES | 0 |  |
| 12 | free_rent_adjustment | numeric [12,2] | YES | 0 |  |
| 13 | effective_gross_rent | numeric [12,2] | YES | 0 |  |
| 14 | calculation_date | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_lease_revenue_timing_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_rent_roll(rent_roll_id) ON DELETE CASCADE |
| tbl_lease_revenue_timing_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_lease_revenue_timing_pkey | PRIMARY KEY | PRIMARY KEY (timing_id) |
| tbl_lease_revenue_timing_lease_id_period_id_key | UNIQUE | UNIQUE (lease_id, period_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_lease_revenue_timing_lease_id_fkey | lease_id | tbl_rent_roll.rent_roll_id | NO ACTION | CASCADE |
| tbl_lease_revenue_timing_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_lease_revenue_timing_lease`

```sql
CREATE INDEX idx_lease_revenue_timing_lease ON landscape.tbl_lease_revenue_timing USING btree (lease_id)
```
- `idx_lease_revenue_timing_period`

```sql
CREATE INDEX idx_lease_revenue_timing_period ON landscape.tbl_lease_revenue_timing USING btree (period_id)
```
- `idx_lease_revenue_timing_project`

```sql
CREATE INDEX idx_lease_revenue_timing_project ON landscape.tbl_lease_revenue_timing USING btree (project_id)
```
- `idx_lease_revenue_timing_project_period`

```sql
CREATE INDEX idx_lease_revenue_timing_project_period ON landscape.tbl_lease_revenue_timing USING btree (project_id, period_id)
```
- `tbl_lease_revenue_timing_lease_id_period_id_key`

```sql
CREATE UNIQUE INDEX tbl_lease_revenue_timing_lease_id_period_id_key ON landscape.tbl_lease_revenue_timing USING btree (lease_id, period_id)
```
- `tbl_lease_revenue_timing_pkey`

```sql
CREATE UNIQUE INDEX tbl_lease_revenue_timing_pkey ON landscape.tbl_lease_revenue_timing USING btree (timing_id)
```

### `tbl_leasing_commission`

- Columns: 8
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | commission_id | integer [32,0] | NO |  |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | base_commission_pct | numeric [5,2] | YES |  |  |
| 4 | renewal_commission_pct | numeric [5,2] | YES |  |  |
| 5 | tiers | jsonb | YES | '[]'::jsonb | JSON array: [{breakpoint_psf, rate_pct}, ...] |
| 6 | commission_amount | numeric [15,2] | YES |  |  |
| 7 | created_at | timestamp with time zone | YES | now() |  |
| 8 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_leasing_commission_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_leasing_commission_pkey | PRIMARY KEY | PRIMARY KEY (commission_id) |
| uq_commission_lease | UNIQUE | UNIQUE (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_leasing_commission_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_commission_lease`

```sql
CREATE INDEX idx_commission_lease ON landscape.tbl_leasing_commission USING btree (lease_id)
```
- `tbl_leasing_commission_pkey`

```sql
CREATE UNIQUE INDEX tbl_leasing_commission_pkey ON landscape.tbl_leasing_commission USING btree (commission_id)
```
- `uq_commission_lease`

```sql
CREATE UNIQUE INDEX uq_commission_lease ON landscape.tbl_leasing_commission USING btree (lease_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_leasing_commission FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_loan`

- Columns: 85
- Constraints: 14
- Foreign keys: 3
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | loan_id | bigint [64,0] | NO |  |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | loan_name | character varying(255) | NO |  |  |
| 4 | loan_type | character varying(50) | NO |  |  |
| 5 | structure_type | character varying(20) | NO | 'TERM'::character varying | TERM = fixed proceeds with amortization schedule; REVOLVER = draw-based with variable balance |
| 6 | lender_name | character varying(255) | YES |  |  |
| 7 | seniority | integer [32,0] | NO | 1 | Payment/lien priority: 1=senior, 2=subordinate, 3=mezzanine, etc. |
| 8 | status | character varying(20) | YES | 'active'::character varying |  |
| 9 | commitment_amount | numeric [15,2] | NO |  |  |
| 10 | loan_amount | numeric [15,2] | YES |  |  |
| 11 | loan_to_cost_pct | numeric [5,2] | YES |  |  |
| 12 | loan_to_value_pct | numeric [5,2] | YES |  |  |
| 13 | interest_rate_pct | numeric [6,3] | YES |  | Interest rate as display percentage, e.g. 5.750 = 5.75% |
| 14 | interest_rate_decimal | numeric [6,5] | YES |  | Interest rate as decimal for calculations, e.g. 0.05750 = 5.75% |
| 15 | interest_type | character varying(50) | YES | 'Fixed'::character varying |  |
| 16 | interest_index | character varying(50) | YES |  |  |
| 17 | interest_spread_bps | integer [32,0] | YES |  |  |
| 18 | rate_floor_pct | numeric [6,3] | YES |  |  |
| 19 | rate_cap_pct | numeric [6,3] | YES |  |  |
| 20 | rate_reset_frequency | character varying(20) | YES |  |  |
| 21 | interest_calculation | character varying(50) | YES | 'SIMPLE'::character varying |  |
| 22 | interest_payment_method | character varying(50) | YES | 'paid_current'::character varying |  |
| 23 | loan_start_date | date | YES |  |  |
| 24 | loan_maturity_date | date | YES |  |  |
| 25 | maturity_period_id | bigint [64,0] | YES |  |  |
| 26 | loan_term_months | integer [32,0] | YES |  |  |
| 27 | loan_term_years | integer [32,0] | YES |  |  |
| 28 | amortization_months | integer [32,0] | YES |  |  |
| 29 | amortization_years | integer [32,0] | YES |  |  |
| 30 | interest_only_months | integer [32,0] | YES | 0 |  |
| 31 | payment_frequency | character varying(50) | YES | 'MONTHLY'::character varying |  |
| 32 | commitment_date | date | YES |  |  |
| 33 | origination_fee_pct | numeric [5,4] | YES |  |  |
| 34 | exit_fee_pct | numeric [5,3] | YES |  |  |
| 35 | unused_fee_pct | numeric [5,4] | YES |  |  |
| 36 | commitment_fee_pct | numeric [5,3] | YES |  |  |
| 37 | extension_fee_bps | integer [32,0] | YES |  |  |
| 38 | extension_fee_amount | numeric [12,2] | YES |  |  |
| 39 | prepayment_penalty_years | integer [32,0] | YES |  |  |
| 40 | interest_reserve_amount | numeric [15,2] | YES |  |  |
| 41 | interest_reserve_funded_upfront | boolean | YES | false |  |
| 42 | reserve_requirements | jsonb | YES | '{}'::jsonb |  |
| 43 | replacement_reserve_per_unit | numeric [8,2] | YES |  |  |
| 44 | tax_insurance_escrow_months | integer [32,0] | YES |  |  |
| 45 | initial_reserve_months | integer [32,0] | YES |  |  |
| 46 | covenants | jsonb | YES | '{}'::jsonb |  |
| 47 | loan_covenant_dscr_min | numeric [5,3] | YES |  |  |
| 48 | loan_covenant_ltv_max | numeric [5,2] | YES |  |  |
| 49 | loan_covenant_occupancy_min | numeric [5,2] | YES |  |  |
| 50 | covenant_test_frequency | character varying(20) | YES | 'Quarterly'::character varying |  |
| 51 | guarantee_type | character varying(50) | YES |  |  |
| 52 | guarantor_name | character varying(200) | YES |  |  |
| 53 | recourse_carveout_provisions | text | YES |  |  |
| 54 | extension_options | integer [32,0] | YES | 0 |  |
| 55 | extension_option_years | integer [32,0] | YES |  |  |
| 56 | draw_trigger_type | character varying(50) | YES | 'COST_INCURRED'::character varying | Revolver only: what triggers a draw (cost incurred, manual, milestone, % complete) |
| 57 | commitment_balance | numeric [15,2] | YES |  |  |
| 58 | drawn_to_date | numeric [15,2] | YES | 0 |  |
| 59 | is_construction_loan | boolean | YES | false |  |
| 60 | release_price_pct | numeric [5,2] | YES |  | For land dev: lot release price as % of allocated loan basis (e.g. 110%) |
| 61 | minimum_release_amount | numeric [15,2] | YES |  |  |
| 62 | takes_out_loan_id | bigint [64,0] | YES |  | Self-referencing FK: identifies which existing loan this loan refinances/takes out |
| 63 | can_participate_in_profits | boolean | YES | false |  |
| 64 | profit_participation_tier | integer [32,0] | YES |  |  |
| 65 | profit_participation_pct | numeric [6,3] | YES |  |  |
| 66 | monthly_payment | numeric [12,2] | YES |  |  |
| 67 | annual_debt_service | numeric [12,2] | YES |  |  |
| 68 | notes | text | YES |  |  |
| 69 | created_at | timestamp with time zone | YES | now() |  |
| 70 | updated_at | timestamp with time zone | YES | now() |  |
| 71 | created_by | text | YES |  |  |
| 72 | updated_by | text | YES |  |  |
| 73 | interest_reserve_inflator | numeric [5,2] | YES | 1.0 |  |
| 74 | repayment_acceleration | numeric [5,2] | YES | 1.0 |  |
| 75 | closing_costs_appraisal | numeric [12,2] | YES |  |  |
| 76 | closing_costs_legal | numeric [12,2] | YES |  |  |
| 77 | closing_costs_other | numeric [12,2] | YES |  |  |
| 78 | recourse_type | character varying(30) | YES | 'FULL'::character varying |  |
| 79 | collateral_basis_type | character varying(30) | YES | 'PROJECT_COST'::character varying | PROJECT_COST = LTC on actual cost basis; RESIDUAL_LAND_VALUE = LTC on finished lot price minus improvements. |
| 80 | commitment_sizing_method | character varying(30) | YES | 'MANUAL'::character varying |  |
| 81 | ltv_basis_amount | numeric [15,2] | YES |  |  |
| 82 | ltc_basis_amount | numeric [15,2] | YES |  |  |
| 83 | calculated_commitment_amount | numeric [15,2] | YES |  |  |
| 84 | governing_constraint | character varying(10) | YES |  |  |
| 85 | net_loan_proceeds | numeric [15,2] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ck_loan_governing | CHECK | CHECK ((((governing_constraint)::text = ANY ((ARRAY['LTV'::character varying, 'LTC'::character varying, 'MANUAL'::character varying])::text[])) OR (governing_constraint IS NULL))) |
| ck_loan_sizing_method | CHECK | CHECK (((commitment_sizing_method)::text = ANY ((ARRAY['MANUAL'::character varying, 'LTV'::character varying, 'LTC'::character varying, 'MIN_LTV_LTC'::character varying])::text[]))) |
| tbl_loan_draw_trigger_type_check | CHECK | CHECK (((draw_trigger_type)::text = ANY ((ARRAY['COST_INCURRED'::character varying, 'MANUAL'::character varying, 'MILESTONE'::character varying, 'PCT_COMPLETE'::character varying])::text[]))) |
| tbl_loan_interest_calculation_check | CHECK | CHECK (((interest_calculation)::text = ANY ((ARRAY['SIMPLE'::character varying, 'COMPOUND'::character varying])::text[]))) |
| tbl_loan_interest_payment_method_check | CHECK | CHECK (((interest_payment_method)::text = ANY ((ARRAY['paid_current'::character varying, 'accrued_simple'::character varying, 'accrued_compound'::character varying])::text[]))) |
| tbl_loan_interest_type_check | CHECK | CHECK (((interest_type)::text = ANY ((ARRAY['Fixed'::character varying, 'Floating'::character varying])::text[]))) |
| tbl_loan_loan_type_check | CHECK | CHECK (((loan_type)::text = ANY ((ARRAY['CONSTRUCTION'::character varying, 'BRIDGE'::character varying, 'PERMANENT'::character varying, 'MEZZANINE'::character varying, 'LINE_OF_CREDIT'::character varying, 'PREFERRED_EQUITY'::character varying])::text[]))) |
| tbl_loan_payment_frequency_check | CHECK | CHECK (((payment_frequency)::text = ANY ((ARRAY['MONTHLY'::character varying, 'QUARTERLY'::character varying, 'SEMI_ANNUAL'::character varying, 'ANNUAL'::character varying, 'AT_MATURITY'::character varying])::text[]))) |
| tbl_loan_status_check | CHECK | CHECK (((status)::text = ANY ((ARRAY['active'::character varying, 'pending'::character varying, 'closed'::character varying, 'defeased'::character varying])::text[]))) |
| tbl_loan_structure_type_check | CHECK | CHECK (((structure_type)::text = ANY ((ARRAY['TERM'::character varying, 'REVOLVER'::character varying])::text[]))) |
| tbl_loan_maturity_period_id_fkey | FOREIGN KEY | FOREIGN KEY (maturity_period_id) REFERENCES tbl_calculation_period(period_id) |
| tbl_loan_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_loan_takes_out_loan_id_fkey | FOREIGN KEY | FOREIGN KEY (takes_out_loan_id) REFERENCES tbl_loan(loan_id) |
| tbl_loan_pkey | PRIMARY KEY | PRIMARY KEY (loan_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_loan_maturity_period_id_fkey | maturity_period_id | tbl_calculation_period.period_id | NO ACTION | NO ACTION |
| tbl_loan_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_loan_takes_out_loan_id_fkey | takes_out_loan_id | tbl_loan.loan_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_loan_project`

```sql
CREATE INDEX idx_loan_project ON landscape.tbl_loan USING btree (project_id)
```
- `idx_loan_seniority`

```sql
CREATE INDEX idx_loan_seniority ON landscape.tbl_loan USING btree (project_id, seniority)
```
- `idx_loan_structure`

```sql
CREATE INDEX idx_loan_structure ON landscape.tbl_loan USING btree (structure_type)
```
- `idx_loan_takes_out`

```sql
CREATE INDEX idx_loan_takes_out ON landscape.tbl_loan USING btree (takes_out_loan_id) WHERE (takes_out_loan_id IS NOT NULL)
```
- `idx_loan_type`

```sql
CREATE INDEX idx_loan_type ON landscape.tbl_loan USING btree (loan_type)
```
- `tbl_loan_pkey`

```sql
CREATE UNIQUE INDEX tbl_loan_pkey ON landscape.tbl_loan USING btree (loan_id)
```

### `tbl_loan_container`

- Columns: 6
- Constraints: 4
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | loan_container_id | bigint [64,0] | NO |  |  |
| 2 | loan_id | bigint [64,0] | NO |  |  |
| 3 | division_id | bigint [64,0] | NO |  |  |
| 4 | allocation_pct | numeric [5,2] | YES |  |  |
| 5 | collateral_type | character varying(50) | YES |  |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_loan_container_division_id_fkey | FOREIGN KEY | FOREIGN KEY (division_id) REFERENCES tbl_division(division_id) ON DELETE CASCADE |
| tbl_loan_container_loan_id_fkey | FOREIGN KEY | FOREIGN KEY (loan_id) REFERENCES tbl_loan(loan_id) ON DELETE CASCADE |
| tbl_loan_container_pkey | PRIMARY KEY | PRIMARY KEY (loan_container_id) |
| tbl_loan_container_loan_id_division_id_key | UNIQUE | UNIQUE (loan_id, division_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_loan_container_division_id_fkey | division_id | tbl_division.division_id | NO ACTION | CASCADE |
| tbl_loan_container_loan_id_fkey | loan_id | tbl_loan.loan_id | NO ACTION | CASCADE |

#### Indexes

- `idx_loan_container_division`

```sql
CREATE INDEX idx_loan_container_division ON landscape.tbl_loan_container USING btree (division_id)
```
- `idx_loan_container_loan`

```sql
CREATE INDEX idx_loan_container_loan ON landscape.tbl_loan_container USING btree (loan_id)
```
- `tbl_loan_container_loan_id_division_id_key`

```sql
CREATE UNIQUE INDEX tbl_loan_container_loan_id_division_id_key ON landscape.tbl_loan_container USING btree (loan_id, division_id)
```
- `tbl_loan_container_pkey`

```sql
CREATE UNIQUE INDEX tbl_loan_container_pkey ON landscape.tbl_loan_container USING btree (loan_container_id)
```

### `tbl_loan_finance_structure`

- Columns: 5
- Constraints: 4
- Foreign keys: 2
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | loan_fs_id | bigint [64,0] | NO |  |  |
| 2 | loan_id | bigint [64,0] | NO |  |  |
| 3 | finance_structure_id | bigint [64,0] | NO |  |  |
| 4 | contribution_pct | numeric [5,2] | YES |  |  |
| 5 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_loan_finance_structure_finance_structure_id_fkey | FOREIGN KEY | FOREIGN KEY (finance_structure_id) REFERENCES tbl_finance_structure(finance_structure_id) ON DELETE CASCADE |
| tbl_loan_finance_structure_loan_id_fkey | FOREIGN KEY | FOREIGN KEY (loan_id) REFERENCES tbl_loan(loan_id) ON DELETE CASCADE |
| tbl_loan_finance_structure_pkey | PRIMARY KEY | PRIMARY KEY (loan_fs_id) |
| tbl_loan_finance_structure_loan_id_finance_structure_id_key | UNIQUE | UNIQUE (loan_id, finance_structure_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_loan_finance_structure_finance_structure_id_fkey | finance_structure_id | tbl_finance_structure.finance_structure_id | NO ACTION | CASCADE |
| tbl_loan_finance_structure_loan_id_fkey | loan_id | tbl_loan.loan_id | NO ACTION | CASCADE |

#### Indexes

- `idx_loan_fs_loan`

```sql
CREATE INDEX idx_loan_fs_loan ON landscape.tbl_loan_finance_structure USING btree (loan_id)
```
- `idx_loan_fs_structure`

```sql
CREATE INDEX idx_loan_fs_structure ON landscape.tbl_loan_finance_structure USING btree (finance_structure_id)
```
- `tbl_loan_finance_structure_loan_id_finance_structure_id_key`

```sql
CREATE UNIQUE INDEX tbl_loan_finance_structure_loan_id_finance_structure_id_key ON landscape.tbl_loan_finance_structure USING btree (loan_id, finance_structure_id)
```
- `tbl_loan_finance_structure_pkey`

```sql
CREATE UNIQUE INDEX tbl_loan_finance_structure_pkey ON landscape.tbl_loan_finance_structure USING btree (loan_fs_id)
```

### `tbl_lot`

- Columns: 23
- Constraints: 5
- Foreign keys: 3
- Indexes: 6
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lot_id | integer [32,0] | NO |  |  |
| 2 | parcel_id | integer [32,0] | NO |  |  |
| 3 | phase_id | integer [32,0] | YES |  |  |
| 4 | project_id | integer [32,0] | NO |  |  |
| 5 | lot_number | character varying(50) | YES |  |  |
| 6 | unit_number | character varying(50) | YES |  |  |
| 7 | suite_number | character varying(50) | YES |  |  |
| 8 | unit_type | character varying(50) | YES |  | SFD-40, SFD-50, Townhome, Office Suite, Retail Space, etc. |
| 9 | lot_sf | numeric [12,2] | YES |  |  |
| 10 | unit_sf | numeric [12,2] | YES |  |  |
| 11 | bedrooms | integer [32,0] | YES |  |  |
| 12 | bathrooms | numeric [3,1] | YES |  |  |
| 13 | floor_number | integer [32,0] | YES |  |  |
| 14 | base_price | numeric [15,2] | YES |  |  |
| 15 | price_psf | numeric [10,2] | YES |  |  |
| 16 | options_price | numeric [15,2] | YES |  |  |
| 17 | total_price | numeric [15,2] | YES |  |  |
| 18 | lot_status | character varying(50) | YES | 'Available'::character varying | Available, Reserved, Sold, Closed, Leased, or Vacant |
| 19 | sale_date | date | YES |  |  |
| 20 | close_date | date | YES |  |  |
| 21 | lease_id | integer [32,0] | YES |  |  |
| 22 | created_at | timestamp with time zone | YES | now() |  |
| 23 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_lot_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) ON DELETE CASCADE |
| tbl_lot_phase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) |
| tbl_lot_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_lot_pkey | PRIMARY KEY | PRIMARY KEY (lot_id) |
| uq_lot_project_number | UNIQUE | UNIQUE (project_id, lot_number) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_lot_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | CASCADE |
| tbl_lot_phase_id_fkey | phase_id | tbl_phase.phase_id | NO ACTION | NO ACTION |
| tbl_lot_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_lot_parcel`

```sql
CREATE INDEX idx_lot_parcel ON landscape.tbl_lot USING btree (parcel_id)
```
- `idx_lot_phase`

```sql
CREATE INDEX idx_lot_phase ON landscape.tbl_lot USING btree (phase_id)
```
- `idx_lot_sale_date`

```sql
CREATE INDEX idx_lot_sale_date ON landscape.tbl_lot USING btree (sale_date) WHERE (sale_date IS NOT NULL)
```
- `idx_lot_status`

```sql
CREATE INDEX idx_lot_status ON landscape.tbl_lot USING btree (project_id, lot_status)
```
- `tbl_lot_pkey`

```sql
CREATE UNIQUE INDEX tbl_lot_pkey ON landscape.tbl_lot USING btree (lot_id)
```
- `uq_lot_project_number`

```sql
CREATE UNIQUE INDEX uq_lot_project_number ON landscape.tbl_lot USING btree (project_id, lot_number)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_lot FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_lot_type`

- Columns: 4
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | producttype_id | integer [32,0] | NO |  |  |
| 2 | producttype_name | character varying(50) | NO |  |  |
| 3 | typical_lot_width | double precision [53] | YES |  |  |
| 4 | typical_lot_depth | double precision [53] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_producttype_pkey | PRIMARY KEY | PRIMARY KEY (producttype_id) |
| tbl_producttype_producttype_name_key | UNIQUE | UNIQUE (producttype_name) |

#### Indexes

- `tbl_producttype_pkey`

```sql
CREATE UNIQUE INDEX tbl_producttype_pkey ON landscape.tbl_lot_type USING btree (producttype_id)
```
- `tbl_producttype_producttype_name_key`

```sql
CREATE UNIQUE INDEX tbl_producttype_producttype_name_key ON landscape.tbl_lot_type USING btree (producttype_name)
```

### `tbl_market_rate_analysis`

- Columns: 36
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | analysis_id | integer [32,0] | NO | nextval('tbl_market_rate_analysis_analysis_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | unit_type | character varying(50) | YES |  |  |
| 4 | bedrooms | numeric [3,1] | YES |  |  |
| 5 | bathrooms | numeric [3,1] | YES |  |  |
| 6 | subject_sqft | integer [32,0] | YES |  |  |
| 7 | comp_count | integer [32,0] | YES |  |  |
| 8 | min_rent | numeric [10,2] | YES |  |  |
| 9 | max_rent | numeric [10,2] | YES |  |  |
| 10 | avg_rent | numeric [10,2] | YES |  |  |
| 11 | median_rent | numeric [10,2] | YES |  |  |
| 12 | avg_rent_per_sf | numeric [6,2] | YES |  |  |
| 13 | location_adjustment | numeric [6,3] | YES | 0 |  |
| 14 | condition_adjustment | numeric [6,3] | YES | 0 |  |
| 15 | amenity_adjustment | numeric [6,3] | YES | 0 |  |
| 16 | size_adjustment_per_sf | numeric [6,3] | YES | 0 |  |
| 17 | recommended_market_rent | numeric [10,2] | YES |  |  |
| 18 | recommended_rent_per_sf | numeric [6,2] | YES |  |  |
| 19 | confidence_level | character varying(20) | YES | 'MEDIUM'::character varying |  |
| 20 | analysis_notes | text | YES |  |  |
| 21 | analyzed_by | character varying(100) | YES |  |  |
| 22 | analysis_date | date | YES | CURRENT_DATE |  |
| 23 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 24 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 25 | population_1mi | integer [32,0] | YES |  |  |
| 26 | population_3mi | integer [32,0] | YES |  |  |
| 27 | population_5mi | integer [32,0] | YES |  |  |
| 28 | median_hh_income_1mi | numeric [12,2] | YES |  |  |
| 29 | median_hh_income_3mi | numeric [12,2] | YES |  |  |
| 30 | avg_hh_income_5mi | numeric [12,2] | YES |  |  |
| 31 | employment_5mi | integer [32,0] | YES |  |  |
| 32 | submarket_vacancy | numeric [5,4] | YES |  |  |
| 33 | submarket_rent_growth | numeric [5,4] | YES |  |  |
| 34 | submarket_avg_rent | numeric [10,2] | YES |  |  |
| 35 | submarket_occupancy | numeric [5,4] | YES |  |  |
| 36 | new_supply_pipeline | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_market_rate_analysis_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_market_rate_analysis_pkey | PRIMARY KEY | PRIMARY KEY (analysis_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_market_rate_analysis_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_market_rate_analysis_project`

```sql
CREATE INDEX idx_market_rate_analysis_project ON landscape.tbl_market_rate_analysis USING btree (project_id)
```
- `idx_market_rate_analysis_unit_type`

```sql
CREATE INDEX idx_market_rate_analysis_unit_type ON landscape.tbl_market_rate_analysis USING btree (unit_type)
```
- `tbl_market_rate_analysis_pkey`

```sql
CREATE UNIQUE INDEX tbl_market_rate_analysis_pkey ON landscape.tbl_market_rate_analysis USING btree (analysis_id)
```

### `tbl_measures`

- Columns: 10
- Constraints: 2
- Foreign keys: 0
- Indexes: 4
- Triggers: 2

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | measure_id | integer [32,0] | NO | nextval('tbl_measures_measure_id_seq'::regclass) |  |
| 2 | measure_code | character varying(10) | NO |  |  |
| 3 | measure_name | character varying(50) | NO |  |  |
| 4 | measure_category | character varying(20) | NO |  |  |
| 5 | is_system | boolean | YES | true |  |
| 6 | created_by | integer [32,0] | YES |  |  |
| 7 | property_types | jsonb | YES |  |  |
| 8 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 9 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 10 | sort_order | integer [32,0] | YES | 0 |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_measures_pkey | PRIMARY KEY | PRIMARY KEY (measure_id) |
| tbl_measures_measure_code_key | UNIQUE | UNIQUE (measure_code) |

#### Indexes

- `idx_measures_code`

```sql
CREATE INDEX idx_measures_code ON landscape.tbl_measures USING btree (measure_code)
```
- `idx_tbl_measures_sort_order`

```sql
CREATE INDEX idx_tbl_measures_sort_order ON landscape.tbl_measures USING btree (sort_order)
```
- `tbl_measures_measure_code_key`

```sql
CREATE UNIQUE INDEX tbl_measures_measure_code_key ON landscape.tbl_measures USING btree (measure_code)
```
- `tbl_measures_pkey`

```sql
CREATE UNIQUE INDEX tbl_measures_pkey ON landscape.tbl_measures USING btree (measure_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_measures FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
- `update_measures_updated_at`

```sql
CREATE TRIGGER update_measures_updated_at BEFORE UPDATE ON landscape.tbl_measures FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_milestone`

- Columns: 15
- Constraints: 5
- Foreign keys: 4
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | milestone_id | integer [32,0] | NO | nextval('tbl_milestone_milestone_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | phase_id | bigint [64,0] | YES |  |  |
| 4 | milestone_name | character varying(200) | NO |  |  |
| 5 | milestone_type | character varying(50) | YES |  |  |
| 6 | target_date | date | YES |  |  |
| 7 | actual_date | date | YES |  |  |
| 8 | status | character varying(20) | YES | 'pending'::character varying |  |
| 9 | predecessor_milestone_id | bigint [64,0] | YES |  |  |
| 10 | notes | text | YES |  |  |
| 11 | source_doc_id | bigint [64,0] | YES |  |  |
| 12 | confidence_score | numeric [3,2] | YES |  |  |
| 13 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 14 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 15 | created_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_milestone_phase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) ON DELETE SET NULL |
| tbl_milestone_predecessor_milestone_id_fkey | FOREIGN KEY | FOREIGN KEY (predecessor_milestone_id) REFERENCES tbl_milestone(milestone_id) |
| tbl_milestone_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_milestone_source_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (source_doc_id) REFERENCES core_doc(doc_id) ON DELETE SET NULL |
| tbl_milestone_pkey | PRIMARY KEY | PRIMARY KEY (milestone_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_milestone_phase_id_fkey | phase_id | tbl_phase.phase_id | NO ACTION | SET NULL |
| tbl_milestone_predecessor_milestone_id_fkey | predecessor_milestone_id | tbl_milestone.milestone_id | NO ACTION | NO ACTION |
| tbl_milestone_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_milestone_source_doc_id_fkey | source_doc_id | core_doc.doc_id | NO ACTION | SET NULL |

#### Indexes

- `idx_milestone_project`

```sql
CREATE INDEX idx_milestone_project ON landscape.tbl_milestone USING btree (project_id)
```
- `idx_milestone_target_date`

```sql
CREATE INDEX idx_milestone_target_date ON landscape.tbl_milestone USING btree (target_date)
```
- `idx_milestone_type`

```sql
CREATE INDEX idx_milestone_type ON landscape.tbl_milestone USING btree (milestone_type)
```
- `tbl_milestone_pkey`

```sql
CREATE UNIQUE INDEX tbl_milestone_pkey ON landscape.tbl_milestone USING btree (milestone_id)
```

#### Triggers

- `trg_milestone_updated`

```sql
CREATE TRIGGER trg_milestone_updated BEFORE UPDATE ON landscape.tbl_milestone FOR EACH ROW EXECUTE FUNCTION update_milestone_timestamp()
```

### `tbl_msa`

- Columns: 9
- Constraints: 1
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | msa_id | integer [32,0] | NO | nextval('tbl_msa_msa_id_seq'::regclass) |  |
| 2 | msa_name | character varying(200) | NO |  | Full MSA name (e.g., "Phoenix-Mesa-Chandler, AZ") |
| 3 | msa_code | character varying(10) | YES |  | Official CBSA code from US Census Bureau |
| 4 | state_abbreviation | character varying(2) | NO |  | Two-letter state code |
| 5 | primary_city | character varying(100) | YES |  | Primary city in the MSA |
| 6 | is_active | boolean | YES | true | Whether this MSA is available for selection |
| 7 | display_order | integer [32,0] | YES |  | Order for displaying in dropdowns |
| 8 | created_at | timestamp without time zone | YES | now() |  |
| 9 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_msa_pkey | PRIMARY KEY | PRIMARY KEY (msa_id) |

#### Indexes

- `idx_msa_active_display_order`

```sql
CREATE INDEX idx_msa_active_display_order ON landscape.tbl_msa USING btree (is_active, display_order) WHERE (is_active = true)
```
- `tbl_msa_pkey`

```sql
CREATE UNIQUE INDEX tbl_msa_pkey ON landscape.tbl_msa USING btree (msa_id)
```

### `tbl_multifamily_lease`

- Columns: 19
- Constraints: 6
- Foreign keys: 1
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | NO | nextval('tbl_multifamily_lease_lease_id_seq'::regclass) |  |
| 2 | unit_id | bigint [64,0] | NO |  |  |
| 3 | resident_name | character varying(200) | YES |  |  |
| 4 | lease_start_date | date | YES |  |  |
| 5 | lease_end_date | date | YES |  |  |
| 6 | lease_term_months | integer [32,0] | YES |  |  |
| 7 | base_rent_monthly | numeric [10,2] | NO |  |  |
| 8 | effective_rent_monthly | numeric [10,2] | YES |  | Base rent adjusted for concessions and free months |
| 9 | months_free_rent | integer [32,0] | YES | 0 | Number of months with zero rent during lease term |
| 10 | concession_amount | numeric [10,2] | YES | 0 |  |
| 11 | security_deposit | numeric [10,2] | YES | 0 |  |
| 12 | pet_rent_monthly | numeric [8,2] | YES | 0 |  |
| 13 | parking_rent_monthly | numeric [8,2] | YES | 0 |  |
| 14 | lease_status | character varying(50) | YES | 'ACTIVE'::character varying | ACTIVE, EXPIRED, NOTICE_GIVEN, MONTH_TO_MONTH, CANCELLED |
| 15 | notice_date | date | YES |  |  |
| 16 | notice_to_vacate_days | integer [32,0] | YES |  |  |
| 17 | is_renewal | boolean | YES | false |  |
| 18 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 19 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_lease_dates | CHECK | CHECK ((lease_end_date > lease_start_date)) |
| chk_lease_dates | CHECK | CHECK ((lease_expiration_date >= lease_commencement_date)) |
| chk_lease_status | CHECK | CHECK (((lease_status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'EXPIRED'::character varying, 'NOTICE_GIVEN'::character varying, 'MONTH_TO_MONTH'::character varying, 'CANCELLED'::character varying])::text[]))) |
| chk_months_free_rent | CHECK | CHECK (((months_free_rent >= 0) AND (months_free_rent <= lease_term_months))) |
| tbl_multifamily_lease_unit_id_fkey | FOREIGN KEY | FOREIGN KEY (unit_id) REFERENCES tbl_multifamily_unit(unit_id) |
| tbl_multifamily_lease_pkey | PRIMARY KEY | PRIMARY KEY (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_multifamily_lease_unit_id_fkey | unit_id | tbl_multifamily_unit.unit_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_multifamily_lease_end_date`

```sql
CREATE INDEX idx_multifamily_lease_end_date ON landscape.tbl_multifamily_lease USING btree (lease_end_date)
```
- `idx_multifamily_lease_is_renewal`

```sql
CREATE INDEX idx_multifamily_lease_is_renewal ON landscape.tbl_multifamily_lease USING btree (is_renewal)
```
- `idx_multifamily_lease_notice_date`

```sql
CREATE INDEX idx_multifamily_lease_notice_date ON landscape.tbl_multifamily_lease USING btree (notice_date) WHERE (notice_date IS NOT NULL)
```
- `idx_multifamily_lease_start_date`

```sql
CREATE INDEX idx_multifamily_lease_start_date ON landscape.tbl_multifamily_lease USING btree (lease_start_date)
```
- `idx_multifamily_lease_status`

```sql
CREATE INDEX idx_multifamily_lease_status ON landscape.tbl_multifamily_lease USING btree (lease_status)
```
- `idx_multifamily_lease_unit`

```sql
CREATE INDEX idx_multifamily_lease_unit ON landscape.tbl_multifamily_lease USING btree (unit_id)
```
- `tbl_multifamily_lease_pkey`

```sql
CREATE UNIQUE INDEX tbl_multifamily_lease_pkey ON landscape.tbl_multifamily_lease USING btree (lease_id)
```

### `tbl_multifamily_property`

- Columns: 59
- Constraints: 3
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | multifamily_property_id | integer [32,0] | NO | nextval('tbl_multifamily_property_multifamily_property_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | parcel_id | integer [32,0] | YES |  |  |
| 4 | property_name | character varying(200) | YES |  |  |
| 5 | property_class | character varying(10) | YES |  | Property quality classification (A=Luxury, B=Quality, C=Average, D=Economy) |
| 6 | property_subtype | character varying(50) | YES |  | Architectural/structural classification |
| 7 | year_built | integer [32,0] | YES |  |  |
| 8 | year_renovated | integer [32,0] | YES |  |  |
| 9 | number_of_buildings | integer [32,0] | YES |  |  |
| 10 | number_of_floors | integer [32,0] | YES |  |  |
| 11 | total_units | integer [32,0] | YES |  |  |
| 12 | rentable_units | integer [32,0] | YES |  |  |
| 13 | total_building_sf | numeric [12,2] | YES |  |  |
| 14 | avg_unit_sf | numeric [8,2] | YES |  |  |
| 15 | parking_spaces_total | integer [32,0] | YES |  | Total parking spaces on property |
| 16 | parking_ratio | numeric [5,2] | YES |  | Parking spaces per unit (e.g., 1.5 means 150 spaces for 100 units) |
| 17 | parking_type | character varying(50) | YES |  | Primary parking configuration |
| 18 | garage_spaces | integer [32,0] | YES |  | Enclosed garage spaces (typically premium) |
| 19 | covered_spaces | integer [32,0] | YES |  | Covered carport spaces |
| 20 | tandem_spaces | integer [32,0] | YES |  | Tandem parking spaces (2 cars per space) |
| 21 | surface_spaces | integer [32,0] | YES |  | Open surface parking spaces |
| 22 | has_manager_unit | boolean | YES | false | Property has on-site manager unit(s) |
| 23 | manager_unit_count | integer [32,0] | YES | 0 | Number of manager units (typically 1) |
| 24 | manager_rent_credit_monthly | numeric [10,2] | YES |  | Monthly rent credit given to manager (foregone revenue) |
| 25 | leasing_office_count | integer [32,0] | YES | 0 | Number of units used as leasing office |
| 26 | leasing_office_sf | integer [32,0] | YES |  | Square footage of leasing office space |
| 27 | has_commercial_space | boolean | YES | false | Property includes ground-floor or mixed-use commercial space |
| 28 | commercial_sf | numeric [10,2] | YES |  | Total commercial square footage |
| 29 | commercial_unit_count | integer [32,0] | YES | 0 | Number of commercial units/suites |
| 30 | commercial_type | character varying(100) | YES |  | Type of commercial space (Retail, Office, etc.) |
| 31 | assessed_value | numeric [15,2] | YES |  | County assessor assessed value |
| 32 | assessment_year | integer [32,0] | YES |  | Year of most recent assessment |
| 33 | property_tax_rate | numeric [8,6] | YES |  | Property tax rate as decimal (1.25% = 0.0125) |
| 34 | direct_assessments_annual | numeric [10,2] | YES |  | Special assessments (Mello-Roos, CFD, etc.) |
| 35 | tax_jurisdiction | character varying(200) | YES |  | Taxing authority (city, county, district) |
| 36 | utility_recovery_method | character varying(50) | YES |  | How utilities are billed to tenants |
| 37 | rubs_recovery_pct | numeric [5,2] | YES |  | Ratio Utility Billing System recovery percentage |
| 38 | gas_metered_individually | boolean | YES | false | Each unit has separate gas meter |
| 39 | electric_metered_individually | boolean | YES | false | Each unit has separate electric meter |
| 40 | water_metered_individually | boolean | YES | false | Each unit has separate water meter |
| 41 | has_solar_panels | boolean | YES | false | Property has solar panel installation |
| 42 | solar_capacity_kw | numeric [8,2] | YES |  | Solar panel system capacity in kilowatts |
| 43 | has_tankless_water_heaters | boolean | YES | false | Units equipped with on-demand tankless water heaters |
| 44 | has_ev_charging | boolean | YES | false | Property has EV charging stations |
| 45 | ev_charging_spaces | integer [32,0] | YES |  | Number of EV charging spaces |
| 46 | energy_star_certified | boolean | YES | false |  |
| 47 | rent_control_exempt | boolean | YES | true | Property exempt from local rent control |
| 48 | rent_control_ordinance | text | YES |  | Applicable rent control law/ordinance |
| 49 | exemption_reason | character varying(200) | YES |  | Reason for rent control exemption (e.g., Built after 2007, Costa-Hawkins) |
| 50 | has_section8_units | boolean | YES | false | Property has Section 8 voucher tenants |
| 51 | section8_unit_count | integer [32,0] | YES | 0 | Number of units with Section 8 vouchers |
| 52 | affordable_housing_program | character varying(100) | YES |  | Affordable housing program participation |
| 53 | property_status | character varying(50) | YES |  |  |
| 54 | stabilization_date | date | YES |  |  |
| 55 | stabilized_occupancy_pct | numeric [5,2] | YES |  |  |
| 56 | acquisition_date | date | YES |  |  |
| 57 | acquisition_price | numeric [15,2] | YES |  |  |
| 58 | created_at | timestamp without time zone | YES | now() |  |
| 59 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_multifamily_property_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_multifamily_property_pkey | PRIMARY KEY | PRIMARY KEY (multifamily_property_id) |
| tbl_multifamily_property_project_id_key | UNIQUE | UNIQUE (project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_multifamily_property_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_multifamily_property_class`

```sql
CREATE INDEX idx_multifamily_property_class ON landscape.tbl_multifamily_property USING btree (property_class)
```
- `idx_multifamily_property_project`

```sql
CREATE INDEX idx_multifamily_property_project ON landscape.tbl_multifamily_property USING btree (project_id)
```
- `idx_multifamily_property_status`

```sql
CREATE INDEX idx_multifamily_property_status ON landscape.tbl_multifamily_property USING btree (property_status)
```
- `tbl_multifamily_property_pkey`

```sql
CREATE UNIQUE INDEX tbl_multifamily_property_pkey ON landscape.tbl_multifamily_property USING btree (multifamily_property_id)
```
- `tbl_multifamily_property_project_id_key`

```sql
CREATE UNIQUE INDEX tbl_multifamily_property_project_id_key ON landscape.tbl_multifamily_property USING btree (project_id)
```

### `tbl_multifamily_turn`

- Columns: 16
- Constraints: 5
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | turn_id | integer [32,0] | NO | nextval('tbl_multifamily_turn_turn_id_seq'::regclass) |  |
| 2 | unit_id | bigint [64,0] | NO |  |  |
| 3 | move_out_date | date | NO |  |  |
| 4 | make_ready_complete_date | date | YES |  |  |
| 5 | next_move_in_date | date | YES |  |  |
| 6 | total_vacant_days | integer [32,0] | YES |  | Days from move-out to next move-in |
| 7 | cleaning_cost | numeric [10,2] | YES | 0 |  |
| 8 | painting_cost | numeric [10,2] | YES | 0 |  |
| 9 | carpet_flooring_cost | numeric [10,2] | YES | 0 |  |
| 10 | appliance_cost | numeric [10,2] | YES | 0 |  |
| 11 | other_cost | numeric [10,2] | YES | 0 |  |
| 12 | total_make_ready_cost | numeric [10,2] | YES |  | Sum of all make-ready costs (computed column) |
| 13 | turn_status | character varying(50) | YES | 'VACANT'::character varying | VACANT, MAKE_READY, READY, LEASED |
| 14 | notes | text | YES |  |  |
| 15 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 16 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_make_ready_date | CHECK | CHECK (((make_ready_complete_date IS NULL) OR (make_ready_complete_date >= move_out_date))) |
| chk_move_in_date | CHECK | CHECK (((next_move_in_date IS NULL) OR (next_move_in_date >= move_out_date))) |
| chk_turn_status | CHECK | CHECK (((turn_status)::text = ANY ((ARRAY['VACANT'::character varying, 'MAKE_READY'::character varying, 'READY'::character varying, 'LEASED'::character varying])::text[]))) |
| tbl_multifamily_turn_unit_id_fkey | FOREIGN KEY | FOREIGN KEY (unit_id) REFERENCES tbl_multifamily_unit(unit_id) |
| tbl_multifamily_turn_pkey | PRIMARY KEY | PRIMARY KEY (turn_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_multifamily_turn_unit_id_fkey | unit_id | tbl_multifamily_unit.unit_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_multifamily_turn_make_ready_complete`

```sql
CREATE INDEX idx_multifamily_turn_make_ready_complete ON landscape.tbl_multifamily_turn USING btree (make_ready_complete_date)
```
- `idx_multifamily_turn_move_out`

```sql
CREATE INDEX idx_multifamily_turn_move_out ON landscape.tbl_multifamily_turn USING btree (move_out_date)
```
- `idx_multifamily_turn_status`

```sql
CREATE INDEX idx_multifamily_turn_status ON landscape.tbl_multifamily_turn USING btree (turn_status)
```
- `idx_multifamily_turn_unit`

```sql
CREATE INDEX idx_multifamily_turn_unit ON landscape.tbl_multifamily_turn USING btree (unit_id)
```
- `tbl_multifamily_turn_pkey`

```sql
CREATE UNIQUE INDEX tbl_multifamily_turn_pkey ON landscape.tbl_multifamily_turn USING btree (turn_id)
```

### `tbl_multifamily_unit`

- Columns: 34
- Constraints: 4
- Foreign keys: 1
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | unit_id | integer [32,0] | NO | nextval('tbl_multifamily_unit_unit_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | unit_number | character varying(50) | NO |  | Unit identifier (e.g., 101, 2A, etc.) |
| 4 | building_name | character varying(100) | YES |  |  |
| 5 | unit_type | character varying(50) | NO |  | Bedroom configuration: Studio, 1BR, 2BR, 3BR, 4BR, Penthouse |
| 6 | bedrooms | numeric [3,1] | YES |  |  |
| 7 | bathrooms | numeric [3,1] | YES |  |  |
| 8 | square_feet | integer [32,0] | NO |  |  |
| 9 | market_rent | numeric [10,2] | YES |  |  |
| 10 | renovation_status | character varying(50) | YES | 'ORIGINAL'::character varying | Current renovation state: ORIGINAL, RENOVATED, IN_PROGRESS, PLANNED |
| 11 | renovation_date | date | YES |  |  |
| 12 | renovation_cost | numeric [12,2] | YES |  |  |
| 13 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 14 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 15 | other_features | text | YES |  |  |
| 16 | is_section8 | boolean | YES | false | Unit has Section 8 voucher tenant |
| 17 | section8_contract_date | date | YES |  | HAP contract effective date |
| 18 | section8_contract_rent | numeric [10,2] | YES |  | Section 8 contract rent amount |
| 19 | has_balcony | boolean | YES | false | Unit has balcony |
| 20 | has_patio | boolean | YES | false | Unit has ground-level patio |
| 21 | balcony_sf | integer [32,0] | YES |  | Balcony/patio square footage |
| 22 | ceiling_height_ft | numeric [4,1] | YES |  | Ceiling height in feet (e.g., 10, 12, 15) |
| 23 | view_type | character varying(50) | YES |  | Type of view from unit |
| 24 | is_manager | boolean | YES | false |  |
| 25 | current_rent | numeric [10,2] | YES |  |  |
| 26 | current_rent_psf | numeric [6,2] | YES |  |  |
| 27 | market_rent_psf | numeric [6,2] | YES |  |  |
| 28 | lease_start_date | date | YES |  |  |
| 29 | lease_end_date | date | YES |  |  |
| 30 | occupancy_status | character varying(20) | YES |  |  |
| 31 | floor_number | integer [32,0] | YES |  |  |
| 32 | extra_data | jsonb | YES |  | Additional extraction data that does not map to schema fields |
| 33 | unit_category | character varying(50) | YES |  |  |
| 34 | unit_designation | character varying(100) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_renovation_status | CHECK | CHECK (((renovation_status)::text = ANY ((ARRAY['ORIGINAL'::character varying, 'RENOVATED'::character varying, 'IN_PROGRESS'::character varying, 'PLANNED'::character varying])::text[]))) |
| tbl_multifamily_unit_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_multifamily_unit_pkey | PRIMARY KEY | PRIMARY KEY (unit_id) |
| uq_unit_project_number | UNIQUE | UNIQUE (project_id, unit_number) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_multifamily_unit_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_mf_unit_extra_data_gin`

```sql
CREATE INDEX idx_mf_unit_extra_data_gin ON landscape.tbl_multifamily_unit USING gin (extra_data) WHERE (extra_data IS NOT NULL)
```
- `idx_multifamily_unit_building`

```sql
CREATE INDEX idx_multifamily_unit_building ON landscape.tbl_multifamily_unit USING btree (building_name)
```
- `idx_multifamily_unit_project`

```sql
CREATE INDEX idx_multifamily_unit_project ON landscape.tbl_multifamily_unit USING btree (project_id)
```
- `idx_multifamily_unit_renovation_status`

```sql
CREATE INDEX idx_multifamily_unit_renovation_status ON landscape.tbl_multifamily_unit USING btree (renovation_status)
```
- `idx_multifamily_unit_type`

```sql
CREATE INDEX idx_multifamily_unit_type ON landscape.tbl_multifamily_unit USING btree (unit_type)
```
- `tbl_multifamily_unit_pkey`

```sql
CREATE UNIQUE INDEX tbl_multifamily_unit_pkey ON landscape.tbl_multifamily_unit USING btree (unit_id)
```
- `uq_unit_project_number`

```sql
CREATE UNIQUE INDEX uq_unit_project_number ON landscape.tbl_multifamily_unit USING btree (project_id, unit_number)
```

### `tbl_multifamily_unit_type`

- Columns: 19
- Constraints: 7
- Foreign keys: 2
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | unit_type_id | integer [32,0] | NO | nextval('tbl_multifamily_unit_type_unit_type_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | unit_type_code | character varying(50) | YES |  | Standard unit type code (Studio, 1BR, 2BR, etc.) |
| 4 | bedrooms | numeric [3,1] | YES |  |  |
| 5 | bathrooms | numeric [3,1] | YES |  |  |
| 6 | avg_square_feet | integer [32,0] | YES |  |  |
| 7 | current_market_rent | numeric [10,2] | YES |  | Current market rent for this unit type |
| 8 | total_units | integer [32,0] | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 10 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 11 | notes | text | YES |  |  |
| 12 | other_features | text | YES |  |  |
| 13 | floorplan_doc_id | bigint [64,0] | YES |  |  |
| 14 | container_id | bigint [64,0] | YES |  | Links floor plan to container hierarchy |
| 15 | unit_type_name | character varying(100) | YES |  |  |
| 16 | unit_count | integer [32,0] | YES |  |  |
| 17 | market_rent | numeric [10,2] | YES |  |  |
| 18 | current_rent_avg | numeric [10,2] | YES |  |  |
| 19 | concessions_avg | numeric [10,2] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_avg_square_feet | CHECK | CHECK ((avg_square_feet > 0)) |
| chk_total_units | CHECK | CHECK ((total_units >= 0)) |
| tbl_multifamily_unit_type_container_id_fkey | FOREIGN KEY | FOREIGN KEY (container_id) REFERENCES tbl_division(division_id) |
| tbl_multifamily_unit_type_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_multifamily_unit_type_pkey | PRIMARY KEY | PRIMARY KEY (unit_type_id) |
| uq_unit_type_project_code | UNIQUE | UNIQUE (project_id, unit_type_code) |
| uq_unit_type_project_name | UNIQUE | UNIQUE (project_id, unit_type_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_multifamily_unit_type_container_id_fkey | container_id | tbl_division.division_id | NO ACTION | NO ACTION |
| tbl_multifamily_unit_type_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_multifamily_unit_type_code`

```sql
CREATE INDEX idx_multifamily_unit_type_code ON landscape.tbl_multifamily_unit_type USING btree (unit_type_code)
```
- `idx_multifamily_unit_type_project`

```sql
CREATE INDEX idx_multifamily_unit_type_project ON landscape.tbl_multifamily_unit_type USING btree (project_id)
```
- `tbl_multifamily_unit_type_pkey`

```sql
CREATE UNIQUE INDEX tbl_multifamily_unit_type_pkey ON landscape.tbl_multifamily_unit_type USING btree (unit_type_id)
```
- `uq_unit_type_project_code`

```sql
CREATE UNIQUE INDEX uq_unit_type_project_code ON landscape.tbl_multifamily_unit_type USING btree (project_id, unit_type_code)
```
- `uq_unit_type_project_name`

```sql
CREATE UNIQUE INDEX uq_unit_type_project_name ON landscape.tbl_multifamily_unit_type USING btree (project_id, unit_type_name)
```

### `tbl_narrative_change`

- Columns: 10
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | change_type | character varying(20) | NO |  |  |
| 3 | original_text | text | YES |  |  |
| 4 | new_text | text | YES |  |  |
| 5 | position_start | integer [32,0] | NO |  |  |
| 6 | position_end | integer [32,0] | NO |  |  |
| 7 | is_accepted | boolean | NO |  |  |
| 8 | accepted_at | timestamp with time zone | YES |  |  |
| 9 | created_at | timestamp with time zone | NO |  |  |
| 10 | version_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_narrative_change_version_id_a0640063_fk_tbl_narra | FOREIGN KEY | FOREIGN KEY (version_id) REFERENCES tbl_narrative_version(id) DEFERRABLE INITIALLY DEFERRED |
| tbl_narrative_change_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_narrative_change_version_id_a0640063_fk_tbl_narra | version_id | tbl_narrative_version.id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_narrative_change_pkey`

```sql
CREATE UNIQUE INDEX tbl_narrative_change_pkey ON landscape.tbl_narrative_change USING btree (id)
```
- `tbl_narrative_change_version_id_a0640063`

```sql
CREATE INDEX tbl_narrative_change_version_id_a0640063 ON landscape.tbl_narrative_change USING btree (version_id)
```

### `tbl_narrative_comment`

- Columns: 12
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | comment_text | text | NO |  |  |
| 3 | position_start | integer [32,0] | NO |  |  |
| 4 | position_end | integer [32,0] | NO |  |  |
| 5 | is_question | boolean | NO |  |  |
| 6 | is_resolved | boolean | NO |  |  |
| 7 | resolved_by | integer [32,0] | YES |  |  |
| 8 | resolved_at | timestamp with time zone | YES |  |  |
| 9 | landscaper_response | text | YES |  |  |
| 10 | created_by | integer [32,0] | YES |  |  |
| 11 | created_at | timestamp with time zone | NO |  |  |
| 12 | version_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_narrative_commen_version_id_97cf6d0c_fk_tbl_narra | FOREIGN KEY | FOREIGN KEY (version_id) REFERENCES tbl_narrative_version(id) DEFERRABLE INITIALLY DEFERRED |
| tbl_narrative_comment_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_narrative_commen_version_id_97cf6d0c_fk_tbl_narra | version_id | tbl_narrative_version.id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_narrative_comment_pkey`

```sql
CREATE UNIQUE INDEX tbl_narrative_comment_pkey ON landscape.tbl_narrative_comment USING btree (id)
```
- `tbl_narrative_comment_version_id_97cf6d0c`

```sql
CREATE INDEX tbl_narrative_comment_version_id_97cf6d0c ON landscape.tbl_narrative_comment USING btree (version_id)
```

### `tbl_narrative_version`

- Columns: 11
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | approach_type | character varying(50) | NO |  |  |
| 4 | version_number | integer [32,0] | NO |  |  |
| 5 | content | jsonb | NO |  |  |
| 6 | content_html | text | YES |  |  |
| 7 | content_plain | text | YES |  |  |
| 8 | status | character varying(20) | NO |  |  |
| 9 | created_by | integer [32,0] | YES |  |  |
| 10 | created_at | timestamp with time zone | NO |  |  |
| 11 | updated_at | timestamp with time zone | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_narrative_version_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| tbl_narrative_version_project_id_approach_type_4a4b4b01_uniq | UNIQUE | UNIQUE (project_id, approach_type, version_number) |

#### Indexes

- `tbl_narrative_version_pkey`

```sql
CREATE UNIQUE INDEX tbl_narrative_version_pkey ON landscape.tbl_narrative_version USING btree (id)
```
- `tbl_narrative_version_project_id_approach_type_4a4b4b01_uniq`

```sql
CREATE UNIQUE INDEX tbl_narrative_version_project_id_approach_type_4a4b4b01_uniq ON landscape.tbl_narrative_version USING btree (project_id, approach_type, version_number)
```

### `tbl_operating_expense`

- Columns: 16
- Constraints: 4
- Foreign keys: 2
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | expense_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | parcel_id | integer [32,0] | YES |  |  |
| 4 | expense_category | character varying(100) | NO |  | Management Fee, Utilities, Repairs & Maintenance, Insurance, Property Tax, Marketing, etc. |
| 5 | expense_subcategory | character varying(100) | YES |  |  |
| 6 | amount_type | character varying(50) | YES | 'Annual'::character varying | Annual, Monthly, Per SF, or Percentage of Revenue |
| 7 | amount | numeric [15,2] | YES |  |  |
| 8 | amount_psf | numeric [10,2] | YES |  |  |
| 9 | percentage_of_revenue | numeric [5,2] | YES |  |  |
| 10 | is_recoverable | boolean | YES | true |  |
| 11 | recovery_pool | character varying(50) | YES |  | CAM, Operating, Tax, or Insurance |
| 12 | annual_growth_pct | numeric [5,2] | YES | 3.00 |  |
| 13 | notes | text | YES |  |  |
| 14 | created_at | timestamp with time zone | YES | now() |  |
| 15 | updated_at | timestamp with time zone | YES | now() |  |
| 16 | category_name | character varying(200) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_operating_expense_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) |
| tbl_operating_expense_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_operating_expense_pkey | PRIMARY KEY | PRIMARY KEY (expense_id) |
| uq_opex_project_category | UNIQUE | UNIQUE (project_id, expense_category) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_operating_expense_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | NO ACTION |
| tbl_operating_expense_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_opex_category`

```sql
CREATE INDEX idx_opex_category ON landscape.tbl_operating_expense USING btree (expense_category)
```
- `idx_opex_parcel`

```sql
CREATE INDEX idx_opex_parcel ON landscape.tbl_operating_expense USING btree (parcel_id)
```
- `idx_opex_project`

```sql
CREATE INDEX idx_opex_project ON landscape.tbl_operating_expense USING btree (project_id)
```
- `tbl_operating_expense_pkey`

```sql
CREATE UNIQUE INDEX tbl_operating_expense_pkey ON landscape.tbl_operating_expense USING btree (expense_id)
```
- `uq_opex_project_category`

```sql
CREATE UNIQUE INDEX uq_opex_project_category ON landscape.tbl_operating_expense USING btree (project_id, expense_category)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_operating_expense FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_operating_expenses`

- Columns: 23
- Constraints: 9
- Foreign keys: 3
- Indexes: 10
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | opex_id | bigint [64,0] | NO | nextval('tbl_operating_expenses_opex_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | expense_category | character varying(100) | NO |  |  |
| 4 | expense_type | character varying(50) | NO |  |  |
| 5 | annual_amount | numeric [12,2] | NO |  |  |
| 6 | amount_per_sf | numeric [10,2] | YES |  |  |
| 7 | is_recoverable | boolean | YES | true |  |
| 8 | recovery_rate | numeric [6,5] | YES | 1.0 |  |
| 9 | escalation_type | character varying(50) | YES | 'FIXED_PERCENT'::character varying |  |
| 10 | escalation_rate | numeric [6,5] | YES | 0.03 |  |
| 11 | start_period | integer [32,0] | NO |  |  |
| 12 | payment_frequency | character varying(50) | YES | 'MONTHLY'::character varying |  |
| 13 | notes | text | YES |  |  |
| 14 | created_at | timestamp with time zone | YES | now() |  |
| 15 | updated_at | timestamp with time zone | YES | now() |  |
| 16 | account_id | integer [32,0] | YES |  | Links expense to Chart of Accounts (only leaf accounts) |
| 17 | calculation_basis | character varying(50) | YES | 'FIXED_AMOUNT'::character varying | Determines how annual_amount is calculated: FIXED_AMOUNT (user entry), PER_UNSOLD_PARCEL (unit_amount × parcel count), PER_UNSOLD_ACRE (unit_amount × acres), PER_PCT_UNSOLD (unit_amount × % unsold) |
| 18 | unit_amount | numeric [10,2] | YES |  | Cost per unit for inventory-linked calculations. E.g., $5,000 per parcel for property taxes, $200 per acre for landscape maintenance |
| 19 | is_auto_calculated | boolean | YES | false | If TRUE, annual_amount is computed automatically and should be read-only in UI. If FALSE, user can edit annual_amount directly. |
| 20 | category_id | integer [32,0] | YES |  |  |
| 21 | statement_discriminator | character varying(100) | YES | 'default'::character varying |  |
| 22 | parent_category | character varying(100) | YES | 'unclassified'::character varying |  |
| 23 | source | character varying(20) | YES | 'user'::character varying | Tracks data origin: user = user-created, ingestion = Landscaper extracted, user_modified = user edited ingested value |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_calculation_basis | CHECK | CHECK (((calculation_basis)::text = ANY ((ARRAY['FIXED_AMOUNT'::character varying, 'PER_UNSOLD_PARCEL'::character varying, 'PER_UNSOLD_ACRE'::character varying, 'PER_PCT_UNSOLD'::character varying])::text[]))) |
| tbl_operating_expenses_escalation_type_check | CHECK | CHECK (((escalation_type)::text = ANY ((ARRAY['NONE'::character varying, 'FIXED_PERCENT'::character varying, 'CPI'::character varying])::text[]))) |
| tbl_operating_expenses_expense_type_check | CHECK | CHECK (((expense_type)::text = ANY ((ARRAY['CAM'::character varying, 'TAXES'::character varying, 'INSURANCE'::character varying, 'MANAGEMENT'::character varying, 'UTILITIES'::character varying, 'REPAIRS'::character varying, 'OTHER'::character varying])::text[]))) |
| tbl_operating_expenses_payment_frequency_check | CHECK | CHECK (((payment_frequency)::text = ANY ((ARRAY['MONTHLY'::character varying, 'QUARTERLY'::character varying, 'ANNUAL'::character varying])::text[]))) |
| tbl_operating_expenses_recovery_rate_check | CHECK | CHECK (((recovery_rate >= (0)::numeric) AND (recovery_rate <= (1)::numeric))) |
| fk_operating_expenses_category | FOREIGN KEY | FOREIGN KEY (category_id) REFERENCES core_unit_cost_category(category_id) |
| tbl_operating_expenses_account_id_fkey | FOREIGN KEY | FOREIGN KEY (account_id) REFERENCES tbl_opex_accounts_deprecated(account_id) |
| tbl_operating_expenses_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_operating_expenses_pkey | PRIMARY KEY | PRIMARY KEY (opex_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_operating_expenses_category | category_id | core_unit_cost_category.category_id | NO ACTION | NO ACTION |
| tbl_operating_expenses_account_id_fkey | account_id | tbl_opex_accounts_deprecated.account_id | NO ACTION | NO ACTION |
| tbl_operating_expenses_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_operating_expenses_account`

```sql
CREATE INDEX idx_operating_expenses_account ON landscape.tbl_operating_expenses USING btree (account_id)
```
- `idx_operating_expenses_category_id`

```sql
CREATE INDEX idx_operating_expenses_category_id ON landscape.tbl_operating_expenses USING btree (category_id)
```
- `idx_opex_project_account`

```sql
CREATE INDEX idx_opex_project_account ON landscape.tbl_operating_expenses USING btree (project_id, account_id)
```
- `idx_opex_project_statement`

```sql
CREATE INDEX idx_opex_project_statement ON landscape.tbl_operating_expenses USING btree (project_id, statement_discriminator)
```
- `idx_opex_recoverable`

```sql
CREATE INDEX idx_opex_recoverable ON landscape.tbl_operating_expenses USING btree (is_recoverable)
```
- `idx_opex_source`

```sql
CREATE INDEX idx_opex_source ON landscape.tbl_operating_expenses USING btree (source)
```
- `idx_opex_type`

```sql
CREATE INDEX idx_opex_type ON landscape.tbl_operating_expenses USING btree (expense_type)
```
- `tbl_operating_expenses_pkey`

```sql
CREATE UNIQUE INDEX tbl_operating_expenses_pkey ON landscape.tbl_operating_expenses USING btree (opex_id)
```
- `ux_opex_proj_acct_stmt`

```sql
CREATE UNIQUE INDEX ux_opex_proj_acct_stmt ON landscape.tbl_operating_expenses USING btree (project_id, account_id, statement_discriminator) WHERE (account_id IS NOT NULL)
```
- `ux_opex_proj_cat_stmt`

```sql
CREATE UNIQUE INDEX ux_opex_proj_cat_stmt ON landscape.tbl_operating_expenses USING btree (project_id, category_id, statement_discriminator) WHERE (category_id IS NOT NULL)
```

### `tbl_operations_user_inputs`

- Columns: 25
- Constraints: 5
- Foreign keys: 2
- Indexes: 6
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | input_id | integer [32,0] | NO | nextval('tbl_operations_user_inputs_input_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | section | character varying(50) | NO |  | Section of the P&L: rental_income, vacancy_deductions, other_income, operating_expenses |
| 4 | line_item_key | character varying(100) | NO |  | Unique key within section. Format varies by section: - rental_income: "unit_type:1BR", "unit_type:2BR", etc. - vacancy_deductions: "physical_vacancy", "credit_loss", "concessions", "manager_unit" - other_income: category_id as string or "custom:label" - operating_expenses: account_number (5110, 5200) or "custom:label" |
| 5 | category_id | integer [32,0] | YES |  |  |
| 6 | label | character varying(200) | YES |  |  |
| 7 | parent_key | character varying(100) | YES |  |  |
| 8 | sort_order | integer [32,0] | YES | 0 |  |
| 9 | as_is_value | numeric [14,2] | YES |  |  |
| 10 | as_is_count | integer [32,0] | YES |  |  |
| 11 | as_is_rate | numeric [14,4] | YES |  |  |
| 12 | as_is_per_sf | numeric [10,4] | YES |  |  |
| 13 | as_is_growth_rate | numeric [6,4] | YES |  |  |
| 14 | as_is_growth_type | character varying(20) | YES | 'global'::character varying | Type of growth rate: global (uses project default), custom (overridden), fee_based (% of EGI) |
| 15 | post_reno_value | numeric [14,2] | YES |  |  |
| 16 | post_reno_count | integer [32,0] | YES |  |  |
| 17 | post_reno_rate | numeric [14,4] | YES |  |  |
| 18 | post_reno_per_sf | numeric [10,4] | YES |  |  |
| 19 | post_reno_growth_rate | numeric [6,4] | YES |  |  |
| 20 | is_percentage | boolean | YES | false |  |
| 21 | is_calculated | boolean | YES | false |  |
| 22 | calculation_base | character varying(50) | YES |  | For percentage-based items, what total to calculate against: gpr, nri, egi |
| 23 | notes | text | YES |  |  |
| 24 | created_at | timestamp with time zone | YES | now() |  |
| 25 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_operations_user_inputs_section_check | CHECK | CHECK (((section)::text = ANY ((ARRAY['rental_income'::character varying, 'vacancy_deductions'::character varying, 'other_income'::character varying, 'operating_expenses'::character varying])::text[]))) |
| tbl_operations_user_inputs_category_id_fkey | FOREIGN KEY | FOREIGN KEY (category_id) REFERENCES core_unit_cost_category(category_id) |
| tbl_operations_user_inputs_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_operations_user_inputs_pkey | PRIMARY KEY | PRIMARY KEY (input_id) |
| tbl_operations_user_inputs_project_id_section_line_item_key_key | UNIQUE | UNIQUE (project_id, section, line_item_key) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_operations_user_inputs_category_id_fkey | category_id | core_unit_cost_category.category_id | NO ACTION | NO ACTION |
| tbl_operations_user_inputs_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_ops_inputs_category`

```sql
CREATE INDEX idx_ops_inputs_category ON landscape.tbl_operations_user_inputs USING btree (category_id) WHERE (category_id IS NOT NULL)
```
- `idx_ops_inputs_parent`

```sql
CREATE INDEX idx_ops_inputs_parent ON landscape.tbl_operations_user_inputs USING btree (project_id, section, parent_key) WHERE (parent_key IS NOT NULL)
```
- `idx_ops_inputs_project`

```sql
CREATE INDEX idx_ops_inputs_project ON landscape.tbl_operations_user_inputs USING btree (project_id)
```
- `idx_ops_inputs_section`

```sql
CREATE INDEX idx_ops_inputs_section ON landscape.tbl_operations_user_inputs USING btree (project_id, section)
```
- `tbl_operations_user_inputs_pkey`

```sql
CREATE UNIQUE INDEX tbl_operations_user_inputs_pkey ON landscape.tbl_operations_user_inputs USING btree (input_id)
```
- `tbl_operations_user_inputs_project_id_section_line_item_key_key`

```sql
CREATE UNIQUE INDEX tbl_operations_user_inputs_project_id_section_line_item_key_key ON landscape.tbl_operations_user_inputs USING btree (project_id, section, line_item_key)
```

#### Triggers

- `trg_operations_inputs_updated`

```sql
CREATE TRIGGER trg_operations_inputs_updated BEFORE UPDATE ON landscape.tbl_operations_user_inputs FOR EACH ROW EXECUTE FUNCTION update_operations_inputs_timestamp()
```

### `tbl_opex_accounts_deprecated`

- Columns: 10
- Constraints: 5
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | account_id | integer [32,0] | NO | nextval('tbl_opex_accounts_account_id_seq'::regclass) |  |
| 2 | account_number | character varying(10) | NO |  |  |
| 3 | account_name | character varying(200) | NO |  |  |
| 4 | account_level | integer [32,0] | NO |  | 1=Parent, 2=Child, 3=Grandchild |
| 5 | parent_account_id | integer [32,0] | YES |  | Links child/grandchild to parent account |
| 6 | is_calculated | boolean | YES | true | TRUE = amount is SUM of children; FALSE = user-entered amount |
| 7 | is_active | boolean | YES | true |  |
| 8 | sort_order | integer [32,0] | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |
| 10 | applicable_property_types | ARRAY | YES | ARRAY['MF'::text, 'OFF'::text, 'RET'::text, 'IND'::text, 'HTL'::text, 'MXU'::text, 'LAND'::text] | Array of project_type_code values where this account is visible. Enables property-type-specific filtering for the Operations tab. |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_account_level | CHECK | CHECK ((account_level = ANY (ARRAY[1, 2, 3]))) |
| chk_parent_level | CHECK | CHECK ((((account_level = 1) AND (parent_account_id IS NULL)) OR ((account_level = 2) AND (parent_account_id IS NOT NULL)) OR ((account_level = 3) AND (parent_account_id IS NOT NULL)))) |
| tbl_opex_accounts_parent_account_id_fkey | FOREIGN KEY | FOREIGN KEY (parent_account_id) REFERENCES tbl_opex_accounts_deprecated(account_id) |
| tbl_opex_accounts_pkey | PRIMARY KEY | PRIMARY KEY (account_id) |
| tbl_opex_accounts_account_number_key | UNIQUE | UNIQUE (account_number) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_opex_accounts_parent_account_id_fkey | parent_account_id | tbl_opex_accounts_deprecated.account_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_opex_accounts_level`

```sql
CREATE INDEX idx_opex_accounts_level ON landscape.tbl_opex_accounts_deprecated USING btree (account_level)
```
- `idx_opex_accounts_number`

```sql
CREATE INDEX idx_opex_accounts_number ON landscape.tbl_opex_accounts_deprecated USING btree (account_number)
```
- `idx_opex_accounts_parent`

```sql
CREATE INDEX idx_opex_accounts_parent ON landscape.tbl_opex_accounts_deprecated USING btree (parent_account_id)
```
- `tbl_opex_accounts_account_number_key`

```sql
CREATE UNIQUE INDEX tbl_opex_accounts_account_number_key ON landscape.tbl_opex_accounts_deprecated USING btree (account_number)
```
- `tbl_opex_accounts_pkey`

```sql
CREATE UNIQUE INDEX tbl_opex_accounts_pkey ON landscape.tbl_opex_accounts_deprecated USING btree (account_id)
```

### `tbl_opex_timing`

- Columns: 9
- Constraints: 4
- Foreign keys: 2
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | timing_id | bigint [64,0] | NO | nextval('tbl_opex_timing_timing_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | opex_id | bigint [64,0] | NO |  |  |
| 4 | period_id | integer [32,0] | NO |  |  |
| 5 | expense_amount | numeric [12,2] | YES | 0 |  |
| 6 | recoverable_amount | numeric [12,2] | YES | 0 |  |
| 7 | recovery_collected | numeric [12,2] | YES | 0 |  |
| 8 | net_expense | numeric [12,2] | YES | 0 |  |
| 9 | calculation_date | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_opex_timing_opex_id_fkey | FOREIGN KEY | FOREIGN KEY (opex_id) REFERENCES tbl_operating_expenses(opex_id) ON DELETE CASCADE |
| tbl_opex_timing_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_opex_timing_pkey | PRIMARY KEY | PRIMARY KEY (timing_id) |
| tbl_opex_timing_opex_id_period_id_key | UNIQUE | UNIQUE (opex_id, period_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_opex_timing_opex_id_fkey | opex_id | tbl_operating_expenses.opex_id | NO ACTION | CASCADE |
| tbl_opex_timing_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_opex_timing_opex`

```sql
CREATE INDEX idx_opex_timing_opex ON landscape.tbl_opex_timing USING btree (opex_id)
```
- `idx_opex_timing_period`

```sql
CREATE INDEX idx_opex_timing_period ON landscape.tbl_opex_timing USING btree (period_id)
```
- `idx_opex_timing_project`

```sql
CREATE INDEX idx_opex_timing_project ON landscape.tbl_opex_timing USING btree (project_id)
```
- `idx_opex_timing_project_period`

```sql
CREATE INDEX idx_opex_timing_project_period ON landscape.tbl_opex_timing USING btree (project_id, period_id)
```
- `tbl_opex_timing_opex_id_period_id_key`

```sql
CREATE UNIQUE INDEX tbl_opex_timing_opex_id_period_id_key ON landscape.tbl_opex_timing USING btree (opex_id, period_id)
```
- `tbl_opex_timing_pkey`

```sql
CREATE UNIQUE INDEX tbl_opex_timing_pkey ON landscape.tbl_opex_timing USING btree (timing_id)
```

### `tbl_parcel`

- Columns: 45
- Constraints: 6
- Foreign keys: 5
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | parcel_id | integer [32,0] | NO |  |  |
| 3 | area_id | integer [32,0] | YES |  |  |
| 4 | phase_id | integer [32,0] | YES |  |  |
| 5 | landuse_code | character varying(10) | YES |  |  |
| 6 | landuse_type | character varying(50) | YES |  |  |
| 7 | acres_gross | double precision [53] | YES |  |  |
| 8 | lot_width | double precision [53] | YES |  |  |
| 9 | lot_depth | double precision [53] | YES |  |  |
| 10 | lot_product | character varying(50) | YES |  |  |
| 11 | lot_area | double precision [53] | YES |  |  |
| 12 | units_total | integer [32,0] | YES |  |  |
| 13 | lots_frontfeet | double precision [53] | YES |  |  |
| 14 | planning_loss | double precision [53] | YES |  |  |
| 15 | plan_efficiency | double precision [53] | YES |  |  |
| 16 | saledate | date | YES |  |  |
| 17 | saleprice | double precision [53] | YES |  |  |
| 18 | lot_type_id | integer [32,0] | YES |  |  |
| 19 | project_id | integer [32,0] | YES |  |  |
| 24 | family_name | text | YES |  |  |
| 25 | density_code | text | YES |  |  |
| 26 | type_code | text | YES |  |  |
| 27 | product_code | text | YES |  |  |
| 28 | site_coverage_pct | numeric | YES |  |  |
| 29 | setback_front_ft | numeric | YES |  |  |
| 30 | setback_side_ft | numeric | YES |  |  |
| 31 | setback_rear_ft | numeric | YES |  |  |
| 32 | subtype_id | bigint [64,0] | YES |  |  |
| 33 | parcel_code | character varying(20) | YES |  |  |
| 34 | parcel_name | character varying(255) | YES |  |  |
| 35 | building_name | character varying(255) | YES |  |  |
| 36 | building_class | character varying(20) | YES |  | Building class: A, B, or C |
| 37 | year_built | integer [32,0] | YES |  |  |
| 38 | year_renovated | integer [32,0] | YES |  |  |
| 39 | rentable_sf | numeric [12,2] | YES |  |  |
| 40 | common_area_sf | numeric [12,2] | YES |  |  |
| 41 | load_factor_pct | numeric [5,2] | YES |  |  |
| 42 | parking_spaces | integer [32,0] | YES |  |  |
| 43 | parking_ratio | numeric [5,2] | YES |  | Parking spaces per 1,000 SF |
| 44 | is_income_property | boolean | YES | false | Flag for income-producing properties |
| 45 | property_metadata | jsonb | YES | '{}'::jsonb |  |
| 46 | description | text | YES |  | Parcel description for planning notes and details |
| 47 | sale_phase_code | character varying(20) | YES |  | Phase grouping for parcel sales (e.g., "1.1.1", "Phase 2A") |
| 48 | custom_sale_date | date | YES |  | Custom sale date override (clears phase_code when set) |
| 49 | has_sale_overrides | boolean | YES | false | True if parcel has custom commission/cost overrides |
| 50 | sale_period | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_parcel_density_code_fkey | FOREIGN KEY | FOREIGN KEY (density_code) REFERENCES density_classification(code) |
| tbl_parcels_devphase_id_fkey | FOREIGN KEY | FOREIGN KEY (phase_id) REFERENCES tbl_phase(phase_id) ON UPDATE RESTRICT ON DELETE RESTRICT |
| tbl_parcels_landuse_code_fkey | FOREIGN KEY | FOREIGN KEY (landuse_code) REFERENCES tbl_landuse(landuse_code) ON UPDATE RESTRICT ON DELETE SET NULL |
| tbl_parcels_planarea_id_fkey | FOREIGN KEY | FOREIGN KEY (area_id) REFERENCES tbl_area(area_id) ON UPDATE RESTRICT ON DELETE RESTRICT |
| tbl_parcels_producttype_id_fkey | FOREIGN KEY | FOREIGN KEY (lot_type_id) REFERENCES tbl_lot_type(producttype_id) ON UPDATE RESTRICT ON DELETE SET NULL |
| tbl_parcels_pkey | PRIMARY KEY | PRIMARY KEY (parcel_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_parcel_density_code_fkey | density_code | density_classification.code | NO ACTION | NO ACTION |
| tbl_parcels_devphase_id_fkey | phase_id | tbl_phase.phase_id | RESTRICT | RESTRICT |
| tbl_parcels_landuse_code_fkey | landuse_code | tbl_landuse.landuse_code | RESTRICT | SET NULL |
| tbl_parcels_planarea_id_fkey | area_id | tbl_area.area_id | RESTRICT | RESTRICT |
| tbl_parcels_producttype_id_fkey | lot_type_id | tbl_lot_type.producttype_id | RESTRICT | SET NULL |

#### Indexes

- `idx_parcel_sale_phase`

```sql
CREATE INDEX idx_parcel_sale_phase ON landscape.tbl_parcel USING btree (project_id, sale_phase_code) WHERE (sale_phase_code IS NOT NULL)
```
- `idx_tbl_parcel_code`

```sql
CREATE INDEX idx_tbl_parcel_code ON landscape.tbl_parcel USING btree (project_id, parcel_code)
```
- `tbl_parcels_pkey`

```sql
CREATE UNIQUE INDEX tbl_parcels_pkey ON landscape.tbl_parcel USING btree (parcel_id)
```

### `tbl_parcel_sale_assumptions`

- Columns: 31
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | assumption_id | integer [32,0] | NO | nextval('tbl_parcel_sale_assumptions_assumption_id_seq'::regclass) |  |
| 2 | parcel_id | integer [32,0] | NO |  |  |
| 3 | sale_date | date | NO |  |  |
| 4 | base_price_per_unit | numeric [12,2] | YES |  |  |
| 5 | price_uom | character varying(10) | YES |  |  |
| 6 | inflation_rate | numeric [8,6] | YES |  |  |
| 7 | inflated_price_per_unit | numeric [12,2] | YES |  |  |
| 8 | gross_parcel_price | numeric [15,2] | YES |  |  |
| 9 | improvement_offset_per_uom | numeric [12,2] | YES |  |  |
| 10 | improvement_offset_total | numeric [15,2] | YES |  |  |
| 11 | improvement_offset_source | character varying(50) | YES |  |  |
| 12 | improvement_offset_override | boolean | YES | false |  |
| 13 | gross_sale_proceeds | numeric [15,2] | YES |  |  |
| 14 | legal_pct | numeric [5,4] | YES |  |  |
| 15 | legal_amount | numeric [12,2] | YES |  |  |
| 16 | legal_override | boolean | YES | false |  |
| 17 | commission_pct | numeric [5,4] | YES |  |  |
| 18 | commission_amount | numeric [12,2] | YES |  |  |
| 19 | commission_override | boolean | YES | false |  |
| 20 | closing_cost_pct | numeric [5,4] | YES |  |  |
| 21 | closing_cost_amount | numeric [12,2] | YES |  |  |
| 22 | closing_cost_override | boolean | YES | false |  |
| 23 | title_insurance_pct | numeric [5,4] | YES |  |  |
| 24 | title_insurance_amount | numeric [12,2] | YES |  |  |
| 25 | title_insurance_override | boolean | YES | false |  |
| 26 | custom_transaction_costs | jsonb | YES | '[]'::jsonb | JSONB array of custom transaction cost items: [{"name", "amount", "type", "description", "is_saved_as_benchmark"}] |
| 27 | total_transaction_costs | numeric [15,2] | YES |  |  |
| 28 | net_sale_proceeds | numeric [15,2] | YES |  |  |
| 29 | net_proceeds_per_uom | numeric [12,2] | YES |  |  |
| 30 | created_at | timestamp without time zone | YES | now() |  |
| 31 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_parcel_sale_assumptions_parcel_id_fkey | FOREIGN KEY | FOREIGN KEY (parcel_id) REFERENCES tbl_parcel(parcel_id) ON DELETE CASCADE |
| tbl_parcel_sale_assumptions_pkey | PRIMARY KEY | PRIMARY KEY (assumption_id) |
| tbl_parcel_sale_assumptions_parcel_id_key | UNIQUE | UNIQUE (parcel_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_parcel_sale_assumptions_parcel_id_fkey | parcel_id | tbl_parcel.parcel_id | NO ACTION | CASCADE |

#### Indexes

- `idx_parcel_sale_assumptions_parcel`

```sql
CREATE INDEX idx_parcel_sale_assumptions_parcel ON landscape.tbl_parcel_sale_assumptions USING btree (parcel_id)
```
- `tbl_parcel_sale_assumptions_parcel_id_key`

```sql
CREATE UNIQUE INDEX tbl_parcel_sale_assumptions_parcel_id_key ON landscape.tbl_parcel_sale_assumptions USING btree (parcel_id)
```
- `tbl_parcel_sale_assumptions_pkey`

```sql
CREATE UNIQUE INDEX tbl_parcel_sale_assumptions_pkey ON landscape.tbl_parcel_sale_assumptions USING btree (assumption_id)
```

### `tbl_parcel_sale_event`

- Columns: 26
- Constraints: 5
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | sale_event_id | bigint [64,0] | NO | nextval('tbl_parcel_sale_event_sale_event_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | parcel_id | bigint [64,0] | NO |  |  |
| 4 | phase_id | integer [32,0] | YES |  |  |
| 5 | sale_type | character varying(50) | NO |  | Type: single_closing, multi_closing, structured_sale, bulk_assignment |
| 6 | buyer_entity | character varying(200) | YES |  |  |
| 7 | buyer_contact_id | integer [32,0] | YES |  |  |
| 8 | contract_date | date | YES |  |  |
| 9 | total_lots_contracted | integer [32,0] | NO |  | Total units/lots in this sale contract |
| 10 | base_price_per_lot | numeric [12,2] | YES |  |  |
| 11 | price_escalation_formula | text | YES |  |  |
| 12 | deposit_amount | numeric [12,2] | YES |  |  |
| 13 | deposit_date | date | YES |  |  |
| 14 | deposit_terms | character varying(100) | YES |  |  |
| 15 | deposit_applied_to_purchase | boolean | YES | true |  |
| 16 | has_escrow_holdback | boolean | YES | false |  |
| 17 | escrow_holdback_amount | numeric [12,2] | YES |  |  |
| 18 | escrow_release_terms | text | YES |  |  |
| 19 | commission_pct | numeric [5,2] | YES |  | Custom commission % override (e.g., 3.0 = 3%) |
| 20 | closing_cost_per_unit | numeric [12,2] | YES |  | Custom closing cost per unit override (e.g., $750) |
| 21 | onsite_cost_pct | numeric [5,2] | YES |  | Custom onsite cost % override (e.g., 6.5 = 6.5%) |
| 22 | has_custom_overrides | boolean | YES | false |  |
| 23 | sale_status | character varying(50) | YES | 'pending'::character varying |  |
| 24 | notes | text | YES |  |  |
| 25 | created_at | timestamp without time zone | YES | now() |  |
| 26 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| sale_event_units_positive | CHECK | CHECK ((total_lots_contracted > 0)) |
| tbl_parcel_sale_event_sale_status_check | CHECK | CHECK (((sale_status)::text = ANY ((ARRAY['pending'::character varying, 'active'::character varying, 'closed'::character varying, 'cancelled'::character varying])::text[]))) |
| tbl_parcel_sale_event_sale_type_check | CHECK | CHECK (((sale_type)::text = ANY ((ARRAY['single_closing'::character varying, 'multi_closing'::character varying, 'structured_sale'::character varying, 'bulk_assignment'::character varying])::text[]))) |
| tbl_parcel_sale_event_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_parcel_sale_event_pkey | PRIMARY KEY | PRIMARY KEY (sale_event_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_parcel_sale_event_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_sale_event_parcel`

```sql
CREATE INDEX idx_sale_event_parcel ON landscape.tbl_parcel_sale_event USING btree (parcel_id)
```
- `idx_sale_event_project`

```sql
CREATE INDEX idx_sale_event_project ON landscape.tbl_parcel_sale_event USING btree (project_id)
```
- `idx_sale_event_status`

```sql
CREATE INDEX idx_sale_event_status ON landscape.tbl_parcel_sale_event USING btree (sale_status)
```
- `idx_sale_event_type`

```sql
CREATE INDEX idx_sale_event_type ON landscape.tbl_parcel_sale_event USING btree (sale_type)
```
- `tbl_parcel_sale_event_pkey`

```sql
CREATE UNIQUE INDEX tbl_parcel_sale_event_pkey ON landscape.tbl_parcel_sale_event USING btree (sale_event_id)
```

### `tbl_participation_payment`

- Columns: 16
- Constraints: 8
- Foreign keys: 2
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | payment_id | bigint [64,0] | NO | nextval('tbl_participation_payment_payment_id_seq'::regclass) |  |
| 2 | settlement_id | bigint [64,0] | NO |  |  |
| 3 | project_id | bigint [64,0] | NO |  |  |
| 4 | payment_date | date | NO |  |  |
| 5 | payment_period | integer [32,0] | YES |  |  |
| 6 | homes_closed_count | integer [32,0] | YES |  |  |
| 7 | gross_home_sales | numeric [15,2] | YES |  |  |
| 8 | participation_base | numeric [15,2] | YES |  |  |
| 9 | participation_amount | numeric [15,2] | NO |  | Gross participation payment calculated from home sales revenue (before subtracting base allocation). |
| 10 | less_base_allocation | numeric [15,2] | YES | 0 | Pro-rata portion of original settlement payment allocated to homes closed this period. Subtracted to avoid double-counting. |
| 11 | net_participation_payment | numeric [15,2] | NO |  | Net payment owed to seller: participation_amount - less_base_allocation. Cannot be negative. |
| 12 | cumulative_homes_closed | integer [32,0] | YES |  |  |
| 13 | cumulative_participation_paid | numeric [15,2] | YES |  |  |
| 14 | payment_status | character varying(50) | YES | 'calculated'::character varying |  |
| 15 | created_at | timestamp without time zone | YES | now() |  |
| 16 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| positive_net_payment | CHECK | CHECK ((net_participation_payment >= (0)::numeric)) |
| tbl_participation_payment_gross_home_sales_check | CHECK | CHECK ((gross_home_sales >= (0)::numeric)) |
| tbl_participation_payment_homes_closed_count_check | CHECK | CHECK ((homes_closed_count >= 0)) |
| tbl_participation_payment_participation_amount_check | CHECK | CHECK ((participation_amount >= (0)::numeric)) |
| tbl_participation_payment_payment_status_check | CHECK | CHECK (((payment_status)::text = ANY ((ARRAY['calculated'::character varying, 'paid'::character varying, 'disputed'::character varying])::text[]))) |
| tbl_participation_payment_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_participation_payment_settlement_id_fkey | FOREIGN KEY | FOREIGN KEY (settlement_id) REFERENCES tbl_sale_settlement(settlement_id) ON DELETE CASCADE |
| tbl_participation_payment_pkey | PRIMARY KEY | PRIMARY KEY (payment_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_participation_payment_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |
| tbl_participation_payment_settlement_id_fkey | settlement_id | tbl_sale_settlement.settlement_id | NO ACTION | CASCADE |

#### Indexes

- `idx_participation_date`

```sql
CREATE INDEX idx_participation_date ON landscape.tbl_participation_payment USING btree (payment_date)
```
- `idx_participation_period`

```sql
CREATE INDEX idx_participation_period ON landscape.tbl_participation_payment USING btree (payment_period)
```
- `idx_participation_project`

```sql
CREATE INDEX idx_participation_project ON landscape.tbl_participation_payment USING btree (project_id)
```
- `idx_participation_settlement`

```sql
CREATE INDEX idx_participation_settlement ON landscape.tbl_participation_payment USING btree (settlement_id)
```
- `idx_participation_status`

```sql
CREATE INDEX idx_participation_status ON landscape.tbl_participation_payment USING btree (payment_status)
```
- `tbl_participation_payment_pkey`

```sql
CREATE UNIQUE INDEX tbl_participation_payment_pkey ON landscape.tbl_participation_payment USING btree (payment_id)
```

### `tbl_percentage_rent`

- Columns: 10
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | percentage_rent_id | integer [32,0] | NO | nextval('tbl_percentage_rent_percentage_rent_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | YES |  |  |
| 3 | breakpoint_amount | numeric [15,2] | YES |  |  |
| 4 | percentage_rate | numeric [6,3] | YES |  |  |
| 5 | reporting_frequency | character varying(20) | YES |  |  |
| 6 | reporting_deadline_days | integer [32,0] | YES |  |  |
| 7 | prior_year_sales | numeric [15,2] | YES |  |  |
| 8 | current_year_sales_projection | numeric [15,2] | YES |  |  |
| 9 | created_at | timestamp without time zone | YES | now() |  |
| 10 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_percentage_rent_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_commercial_lease(lease_id) |
| tbl_cre_percentage_rent_pkey | PRIMARY KEY | PRIMARY KEY (percentage_rent_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cre_percentage_rent_lease_id_fkey | lease_id | tbl_commercial_lease.lease_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_cre_percentage_rent_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_percentage_rent_pkey ON landscape.tbl_percentage_rent USING btree (percentage_rent_id)
```

### `tbl_phase`

- Columns: 11
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | phase_id | integer [32,0] | NO |  |  |
| 2 | area_id | integer [32,0] | NO |  |  |
| 3 | phase_name | character varying(255) | NO |  |  |
| 4 | phase_no | integer [32,0] | YES |  |  |
| 5 | project_id | integer [32,0] | YES |  |  |
| 8 | label | text | YES |  |  |
| 9 | description | text | YES |  |  |
| 10 | phase_status | character varying(50) | YES | 'Planning'::character varying | Planning, Approved, Under Construction, Completed, or On Hold |
| 11 | phase_start_date | date | YES |  |  |
| 12 | phase_completion_date | date | YES |  |  |
| 13 | absorption_start_date | date | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_devphase_planarea_id_fkey | FOREIGN KEY | FOREIGN KEY (area_id) REFERENCES tbl_area(area_id) ON UPDATE RESTRICT ON DELETE RESTRICT |
| tbl_devphase_pkey | PRIMARY KEY | PRIMARY KEY (phase_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_devphase_planarea_id_fkey | area_id | tbl_area.area_id | RESTRICT | RESTRICT |

#### Indexes

- `tbl_devphase_pkey`

```sql
CREATE UNIQUE INDEX tbl_devphase_pkey ON landscape.tbl_phase USING btree (phase_id)
```

### `tbl_platform_knowledge`

- Columns: 24
- Constraints: 2
- Foreign keys: 0
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('tbl_platform_knowledge_id_seq'::regclass) |  |
| 2 | document_key | character varying(100) | NO |  |  |
| 3 | title | character varying(500) | NO |  |  |
| 4 | subtitle | character varying(500) | YES |  |  |
| 5 | edition | character varying(50) | YES |  |  |
| 6 | publisher | character varying(255) | YES |  |  |
| 7 | publication_year | integer [32,0] | YES |  |  |
| 8 | isbn | character varying(20) | YES |  |  |
| 9 | knowledge_domain | character varying(100) | NO |  |  |
| 10 | property_types | jsonb | YES | '[]'::jsonb |  |
| 11 | description | text | YES |  |  |
| 12 | total_chapters | integer [32,0] | YES |  |  |
| 13 | total_pages | integer [32,0] | YES |  |  |
| 14 | file_path | character varying(500) | YES |  |  |
| 15 | file_hash | character varying(64) | YES |  |  |
| 16 | file_size_bytes | bigint [64,0] | YES |  |  |
| 17 | ingestion_status | character varying(50) | YES | 'pending'::character varying |  |
| 18 | chunk_count | integer [32,0] | YES | 0 |  |
| 19 | last_indexed_at | timestamp without time zone | YES |  |  |
| 20 | is_active | boolean | YES | true |  |
| 21 | created_at | timestamp without time zone | YES | now() |  |
| 22 | updated_at | timestamp without time zone | YES | now() |  |
| 23 | created_by | character varying(100) | YES | 'system'::character varying |  |
| 24 | page_count | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_platform_knowledge_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| tbl_platform_knowledge_document_key_key | UNIQUE | UNIQUE (document_key) |

#### Indexes

- `idx_pk_document_active`

```sql
CREATE INDEX idx_pk_document_active ON landscape.tbl_platform_knowledge USING btree (is_active) WHERE (is_active = true)
```
- `idx_pk_document_property_types_gin`

```sql
CREATE INDEX idx_pk_document_property_types_gin ON landscape.tbl_platform_knowledge USING gin (property_types jsonb_path_ops)
```
- `tbl_platform_knowledge_document_key_key`

```sql
CREATE UNIQUE INDEX tbl_platform_knowledge_document_key_key ON landscape.tbl_platform_knowledge USING btree (document_key)
```
- `tbl_platform_knowledge_pkey`

```sql
CREATE UNIQUE INDEX tbl_platform_knowledge_pkey ON landscape.tbl_platform_knowledge USING btree (id)
```

### `tbl_platform_knowledge_chapters`

- Columns: 14
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('tbl_platform_knowledge_chapters_id_seq'::regclass) |  |
| 2 | document_id | integer [32,0] | NO |  |  |
| 3 | chapter_number | integer [32,0] | YES |  |  |
| 4 | chapter_title | character varying(500) | NO |  |  |
| 5 | page_start | integer [32,0] | YES |  |  |
| 6 | page_end | integer [32,0] | YES |  |  |
| 7 | topics | jsonb | YES | '[]'::jsonb |  |
| 8 | property_types | jsonb | YES | '[]'::jsonb |  |
| 9 | applies_to | jsonb | YES | '[]'::jsonb |  |
| 10 | summary | text | YES |  |  |
| 11 | key_concepts | jsonb | YES | '{}'::jsonb |  |
| 12 | chunk_ids | jsonb | YES | '[]'::jsonb |  |
| 13 | created_at | timestamp without time zone | YES | now() |  |
| 14 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_platform_knowledge_chapters_document_id_fkey | FOREIGN KEY | FOREIGN KEY (document_id) REFERENCES tbl_platform_knowledge(id) ON DELETE CASCADE |
| tbl_platform_knowledge_chapters_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| tbl_platform_knowledge_chapters_document_id_chapter_number_key | UNIQUE | UNIQUE (document_id, chapter_number) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_platform_knowledge_chapters_document_id_fkey | document_id | tbl_platform_knowledge.id | NO ACTION | CASCADE |

#### Indexes

- `idx_pk_chapters_property_types_gin`

```sql
CREATE INDEX idx_pk_chapters_property_types_gin ON landscape.tbl_platform_knowledge_chapters USING gin (property_types jsonb_path_ops)
```
- `idx_pk_chapters_topics_gin`

```sql
CREATE INDEX idx_pk_chapters_topics_gin ON landscape.tbl_platform_knowledge_chapters USING gin (topics jsonb_path_ops)
```
- `tbl_platform_knowledge_chapters_document_id_chapter_number_key`

```sql
CREATE UNIQUE INDEX tbl_platform_knowledge_chapters_document_id_chapter_number_key ON landscape.tbl_platform_knowledge_chapters USING btree (document_id, chapter_number)
```
- `tbl_platform_knowledge_chapters_pkey`

```sql
CREATE UNIQUE INDEX tbl_platform_knowledge_chapters_pkey ON landscape.tbl_platform_knowledge_chapters USING btree (id)
```

### `tbl_platform_knowledge_chunks`

- Columns: 14
- Constraints: 4
- Foreign keys: 2
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('tbl_platform_knowledge_chunks_id_seq'::regclass) |  |
| 2 | document_id | integer [32,0] | NO |  |  |
| 3 | chapter_id | integer [32,0] | YES |  |  |
| 4 | chunk_index | integer [32,0] | NO |  |  |
| 5 | content | text | NO |  |  |
| 6 | content_type | character varying(50) | YES | 'text'::character varying |  |
| 7 | page_number | integer [32,0] | YES |  |  |
| 8 | section_path | character varying(500) | YES |  |  |
| 9 | embedding | USER-DEFINED | YES |  |  |
| 10 | embedding_model | character varying(100) | YES | 'text-embedding-3-small'::character varying |  |
| 11 | token_count | integer [32,0] | YES |  |  |
| 12 | created_at | timestamp without time zone | YES | now() |  |
| 13 | category | character varying(100) | NO |  |  |
| 14 | metadata | jsonb | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_platform_knowledge_chunks_chapter_id_fkey | FOREIGN KEY | FOREIGN KEY (chapter_id) REFERENCES tbl_platform_knowledge_chapters(id) ON DELETE SET NULL |
| tbl_platform_knowledge_chunks_document_id_fkey | FOREIGN KEY | FOREIGN KEY (document_id) REFERENCES tbl_platform_knowledge(id) ON DELETE CASCADE |
| tbl_platform_knowledge_chunks_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| tbl_platform_knowledge_chunks_document_id_chunk_index_key | UNIQUE | UNIQUE (document_id, chunk_index) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_platform_knowledge_chunks_chapter_id_fkey | chapter_id | tbl_platform_knowledge_chapters.id | NO ACTION | SET NULL |
| tbl_platform_knowledge_chunks_document_id_fkey | document_id | tbl_platform_knowledge.id | NO ACTION | CASCADE |

#### Indexes

- `idx_pk_chunks_chapter`

```sql
CREATE INDEX idx_pk_chunks_chapter ON landscape.tbl_platform_knowledge_chunks USING btree (chapter_id)
```
- `idx_pk_chunks_document`

```sql
CREATE INDEX idx_pk_chunks_document ON landscape.tbl_platform_knowledge_chunks USING btree (document_id)
```
- `idx_pk_chunks_embedding`

```sql
CREATE INDEX idx_pk_chunks_embedding ON landscape.tbl_platform_knowledge_chunks USING ivfflat (embedding vector_cosine_ops) WITH (lists='100')
```
- `tbl_platform_knowledge_chunks_document_id_chunk_index_key`

```sql
CREATE UNIQUE INDEX tbl_platform_knowledge_chunks_document_id_chunk_index_key ON landscape.tbl_platform_knowledge_chunks USING btree (document_id, chunk_index)
```
- `tbl_platform_knowledge_chunks_pkey`

```sql
CREATE UNIQUE INDEX tbl_platform_knowledge_chunks_pkey ON landscape.tbl_platform_knowledge_chunks USING btree (id)
```

### `tbl_project`

- Columns: 131
- Constraints: 16
- Foreign keys: 5
- Indexes: 14
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | integer [32,0] | NO |  |  |
| 2 | project_name | character varying(255) | NO |  |  |
| 3 | acres_gross | double precision [53] | YES |  |  |
| 4 | location_lat | double precision [53] | YES |  |  |
| 5 | location_lon | double precision [53] | YES |  |  |
| 6 | start_date | date | YES |  |  |
| 7 | jurisdiction_city | character varying(100) | YES |  |  |
| 8 | jurisdiction_county | character varying(100) | YES |  |  |
| 9 | jurisdiction_state | character varying(10) | YES |  |  |
| 10 | uses_global_taxonomy | boolean | YES | true |  |
| 11 | taxonomy_customized | boolean | YES | false |  |
| 12 | jurisdiction_integrated | boolean | YES | false |  |
| 13 | gis_metadata | jsonb | YES | '{}'::jsonb |  |
| 14 | location_description | text | YES |  |  |
| 16 | target_units | integer [32,0] | YES |  |  |
| 17 | price_range_low | numeric [12,2] | YES |  |  |
| 18 | price_range_high | numeric [12,2] | YES |  |  |
| 19 | ai_last_reviewed | timestamp with time zone | YES |  |  |
| 20 | project_address | text | YES |  | Primary address from selected tax parcels |
| 21 | legal_owner | text | YES |  | Primary legal owner from selected tax parcels |
| 22 | county | character varying(100) | YES |  | County name (e.g., Los Angeles) |
| 23 | existing_land_use | text | YES |  | Existing land use description from assessor data |
| 24 | assessed_value | numeric [15,2] | YES |  | Total assessed value of selected tax parcels |
| 25 | project_type | character varying(50) | YES | 'Land Development'::character varying | DEPRECATED: Use analysis_type instead |
| 26 | financial_model_type | character varying(50) | YES | 'Development'::character varying | Development, Stabilized, or Value-Add |
| 27 | analysis_start_date | date | YES |  |  |
| 28 | analysis_end_date | date | YES |  |  |
| 29 | calculation_frequency | character varying(20) | YES | 'Monthly'::character varying | Monthly, Quarterly, or Annual |
| 30 | discount_rate_pct | numeric [5,2] | YES | 10.00 | Discount rate for NPV calculations |
| 31 | cost_of_capital_pct | numeric [5,2] | YES |  |  |
| 32 | schema_version | integer [32,0] | YES | 1 |  |
| 33 | last_calculated_at | timestamp with time zone | YES |  |  |
| 35 | description | text | YES |  |  |
| 36 | developer_owner | text | YES |  |  |
| 37 | is_active | boolean | YES | true |  |
| 38 | created_at | timestamp with time zone | YES | now() |  |
| 39 | updated_at | timestamp with time zone | YES | now() |  |
| 40 | template_id | bigint [64,0] | YES |  | References the template used during project creation, represents complexity level |
| 41 | street_address | character varying(200) | YES |  | Street address separate from full address field |
| 42 | city | character varying(100) | YES |  | City name |
| 43 | state | character varying(10) | YES |  | State abbreviation |
| 44 | zip_code | character varying(20) | YES |  | ZIP/Postal code |
| 45 | country | character varying(100) | YES | 'United States'::character varying |  |
| 46 | market | character varying(100) | YES |  | Primary market (e.g., Los Angeles County) |
| 47 | submarket | character varying(100) | YES |  | Submarket within market (e.g., South Bay) |
| 48 | apn_primary | character varying(50) | YES |  | Primary Assessor Parcel Number |
| 49 | apn_secondary | character varying(50) | YES |  | Secondary APN if multiple parcels |
| 50 | ownership_type | character varying(50) | YES |  | Fee Simple, Leasehold, etc. |
| 51 | property_subtype | character varying(100) | YES |  | Specific property use type, cascades from analysis_type |
| 52 | property_class | character varying(50) | YES |  | Property class: A, B, C, etc. |
| 53 | lot_size_sf | numeric | YES |  |  |
| 54 | lot_size_acres | numeric | YES |  |  |
| 55 | gross_sf | numeric | YES |  |  |
| 56 | total_units | integer [32,0] | YES |  |  |
| 57 | year_built | integer [32,0] | YES |  |  |
| 58 | stories | integer [32,0] | YES |  |  |
| 59 | asking_price | numeric | YES |  |  |
| 60 | price_per_unit | numeric | YES |  |  |
| 61 | price_per_sf | numeric | YES |  |  |
| 62 | cap_rate_current | numeric | YES |  |  |
| 63 | cap_rate_proforma | numeric | YES |  |  |
| 64 | current_gpr | numeric | YES |  |  |
| 65 | current_other_income | numeric | YES |  |  |
| 66 | current_gpi | numeric | YES |  |  |
| 67 | current_vacancy_rate | numeric | YES |  |  |
| 68 | current_egi | numeric | YES |  |  |
| 69 | current_opex | numeric | YES |  |  |
| 70 | current_noi | numeric | YES |  |  |
| 71 | proforma_gpr | numeric | YES |  |  |
| 72 | proforma_other_income | numeric | YES |  |  |
| 73 | proforma_gpi | numeric | YES |  |  |
| 74 | proforma_vacancy_rate | numeric | YES |  |  |
| 75 | proforma_egi | numeric | YES |  |  |
| 76 | proforma_opex | numeric | YES |  |  |
| 77 | proforma_noi | numeric | YES |  |  |
| 78 | listing_brokerage | character varying(200) | YES |  | Brokerage company name |
| 79 | job_number | character varying(50) | YES |  |  |
| 80 | version_reference | character varying(50) | YES |  |  |
| 81 | analysis_type | character varying(50) | YES |  | Top-level analysis category: Land Development or Income Property |
| 82 | project_type_code | character varying(50) | NO | 'LAND'::character varying | Project type abbreviation (LAND, MF, OFF, RET, IND, HTL, MXU) - determines UI template routing |
| 83 | msa_id | integer [32,0] | YES |  | References tbl_msa for project market/MSA |
| 84 | planning_efficiency | numeric [5,4] | YES |  | Project-specific planning efficiency override (NULL = use global default) |
| 85 | market_velocity_annual | integer [32,0] | YES |  | Annual absorption velocity (units/year) - defaults from benchmark, can be overridden |
| 86 | velocity_override_reason | text | YES |  | User explanation if overriding global benchmark velocity |
| 87 | analysis_mode | character varying(20) | YES | 'napkin'::character varying | Project analysis mode: napkin (simplified, Landscaper-guided) or developer (full tabs) |
| 88 | dms_template_id | bigint [64,0] | YES |  |  |
| 89 | topography | character varying(50) | YES |  |  |
| 90 | flood_zone | character varying(20) | YES |  |  |
| 91 | overlay_zones | jsonb | YES | '[]'::jsonb |  |
| 92 | has_takedown_agreement | boolean | YES | false |  |
| 93 | current_zoning | character varying(100) | YES |  |  |
| 94 | proposed_zoning | character varying(100) | YES |  |  |
| 95 | general_plan | character varying(100) | YES |  |  |
| 96 | acquisition_price | numeric [15,2] | YES |  |  |
| 97 | acquisition_date | date | YES |  |  |
| 98 | walk_score | integer [32,0] | YES |  |  |
| 99 | bike_score | integer [32,0] | YES |  |  |
| 100 | transit_score | integer [32,0] | YES |  |  |
| 101 | active_opex_discriminator | character varying(100) | YES | 'default'::character varying | Active statement_discriminator for operating expenses (defaults to legacy \"default\") |
| 102 | value_add_enabled | boolean | YES | false | Toggle for Value-Add mode in Operations tab. When true, shows Post-Reno input columns. |
| 103 | primary_count | integer [32,0] | YES |  |  |
| 104 | primary_count_type | character varying(50) | YES |  |  |
| 105 | primary_area | numeric [15,2] | YES |  |  |
| 106 | primary_area_type | character varying(50) | YES |  |  |
| 107 | cabinet_id | bigint [64,0] | YES |  | Foreign key to tbl_cabinet for tenancy isolation |
| 108 | project_focus | character varying(50) | YES |  | What the user is trying to accomplish: Valuation, Investment, Feasibility, Operations |
| 109 | site_shape | character varying(50) | YES |  | Site shape description (rectangular, irregular, triangular, etc.) |
| 110 | site_utility_rating | integer [32,0] | YES |  | Site utility rating 1-5 (1=poor, 5=excellent) |
| 111 | location_rating | integer [32,0] | YES |  | Location quality rating 1-5 |
| 112 | access_rating | integer [32,0] | YES |  | Access/ingress-egress rating 1-5 |
| 113 | visibility_rating | integer [32,0] | YES |  | Visibility/exposure rating 1-5 |
| 114 | building_count | integer [32,0] | YES |  | Number of buildings on site |
| 115 | net_rentable_area | numeric [12,2] | YES |  | Net rentable area in SF |
| 116 | land_to_building_ratio | numeric [6,3] | YES |  | Land area to building area ratio |
| 117 | construction_class | character varying(20) | YES |  | Construction class (A, B, C, D, S) |
| 118 | construction_type | character varying(50) | YES |  | Construction type (wood frame, steel, concrete, masonry) |
| 119 | condition_rating | integer [32,0] | YES |  | Physical condition rating 1-5 |
| 120 | quality_rating | integer [32,0] | YES |  | Quality/finish rating 1-5 |
| 121 | parking_spaces | integer [32,0] | YES |  | Total parking spaces |
| 122 | parking_ratio | numeric [5,2] | YES |  | Parking ratio (spaces per unit or per 1000 SF) |
| 123 | parking_type | character varying(50) | YES |  | Parking type (surface, covered, garage, subterranean) |
| 124 | effective_age | integer [32,0] | YES |  | Effective age in years (for depreciation) |
| 125 | total_economic_life | integer [32,0] | YES |  | Total economic life in years |
| 126 | remaining_economic_life | integer [32,0] | YES |  | Remaining economic life in years |
| 127 | site_attributes | jsonb | YES | '{}'::jsonb | Configurable site attributes JSONB (frontage, utilities, flood, environmental, etc.) |
| 128 | improvement_attributes | jsonb | YES | '{}'::jsonb | Configurable improvement attributes JSONB (mechanical, amenities, obsolescence, etc.) |
| 129 | created_by_id | integer [32,0] | YES |  | User who created this project (for RBAC ownership) |
| 130 | collateral_enforcement | character varying(20) | YES | 'STRICT'::character varying | STRICT = no overlapping pledges, PERMISSIVE = warn but allow |
| 131 | lotbank_management_fee_pct | numeric [5,4] | YES |  | Monthly mgmt fee as decimal (0.005 = 0.5%). Only used when analysis_type=LOTBANK. |
| 132 | lotbank_default_provision_pct | numeric [5,4] | YES |  | Builder default provision as decimal (0.02 = 2%). Only used when analysis_type=LOTBANK. |
| 133 | lotbank_underwriting_fee | numeric [12,2] | YES |  | Flat underwriting fee at close ($). Only used when analysis_type=LOTBANK. |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| check_project_type_code | CHECK | CHECK (((project_type_code)::text = ANY ((ARRAY['LAND'::character varying, 'MF'::character varying, 'OFF'::character varying, 'RET'::character varying, 'IND'::character varying, 'HTL'::character varying, 'MXU'::character varying])::text[]))) |
| tbl_project_access_rating_check | CHECK | CHECK (((access_rating >= 1) AND (access_rating <= 5))) |
| tbl_project_analysis_type_check | CHECK | CHECK (((analysis_type IS NULL) OR ((analysis_type)::text = ANY ((ARRAY['VALUATION'::character varying, 'INVESTMENT'::character varying, 'VALUE_ADD'::character varying, 'DEVELOPMENT'::character varying, 'FEASIBILITY'::character varying])::text[])))) |
| tbl_project_condition_rating_check | CHECK | CHECK (((condition_rating >= 1) AND (condition_rating <= 5))) |
| tbl_project_location_rating_check | CHECK | CHECK (((location_rating >= 1) AND (location_rating <= 5))) |
| tbl_project_project_focus_check | CHECK | CHECK (((project_focus)::text = ANY ((ARRAY['Valuation'::character varying, 'Investment'::character varying, 'Feasibility'::character varying, 'Operations'::character varying])::text[]))) |
| tbl_project_quality_rating_check | CHECK | CHECK (((quality_rating >= 1) AND (quality_rating <= 5))) |
| tbl_project_site_utility_rating_check | CHECK | CHECK (((site_utility_rating >= 1) AND (site_utility_rating <= 5))) |
| tbl_project_visibility_rating_check | CHECK | CHECK (((visibility_rating >= 1) AND (visibility_rating <= 5))) |
| fk_project_created_by | FOREIGN KEY | FOREIGN KEY (created_by_id) REFERENCES auth_user(id) ON DELETE SET NULL |
| tbl_project_cabinet_id_fkey | FOREIGN KEY | FOREIGN KEY (cabinet_id) REFERENCES tbl_cabinet(cabinet_id) |
| tbl_project_dms_template_id_fkey | FOREIGN KEY | FOREIGN KEY (dms_template_id) REFERENCES dms_templates(template_id) |
| tbl_project_msa_id_fkey | FOREIGN KEY | FOREIGN KEY (msa_id) REFERENCES tbl_msa(msa_id) |
| tbl_project_template_id_fkey | FOREIGN KEY | FOREIGN KEY (template_id) REFERENCES tbl_property_use_template(template_id) |
| tbl_project_pkey | PRIMARY KEY | PRIMARY KEY (project_id) |
| tbl_project_project_name_key | UNIQUE | UNIQUE (project_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_project_created_by | created_by_id | auth_user.id | NO ACTION | SET NULL |
| tbl_project_cabinet_id_fkey | cabinet_id | tbl_cabinet.cabinet_id | NO ACTION | NO ACTION |
| tbl_project_dms_template_id_fkey | dms_template_id | dms_templates.template_id | NO ACTION | NO ACTION |
| tbl_project_msa_id_fkey | msa_id | tbl_msa.msa_id | NO ACTION | NO ACTION |
| tbl_project_template_id_fkey | template_id | tbl_property_use_template.template_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_project_active_opex_discriminator`

```sql
CREATE INDEX idx_project_active_opex_discriminator ON landscape.tbl_project USING btree (active_opex_discriminator)
```
- `idx_project_analysis_type`

```sql
CREATE INDEX idx_project_analysis_type ON landscape.tbl_project USING btree (analysis_type)
```
- `idx_project_cabinet`

```sql
CREATE INDEX idx_project_cabinet ON landscape.tbl_project USING btree (cabinet_id)
```
- `idx_project_flood_zone`

```sql
CREATE INDEX idx_project_flood_zone ON landscape.tbl_project USING btree (flood_zone) WHERE (flood_zone IS NOT NULL)
```
- `idx_project_focus`

```sql
CREATE INDEX idx_project_focus ON landscape.tbl_project USING btree (project_focus) WHERE (project_focus IS NOT NULL)
```
- `idx_project_improvement_attributes`

```sql
CREATE INDEX idx_project_improvement_attributes ON landscape.tbl_project USING gin (improvement_attributes)
```
- `idx_project_msa_id`

```sql
CREATE INDEX idx_project_msa_id ON landscape.tbl_project USING btree (msa_id)
```
- `idx_project_property_subtype`

```sql
CREATE INDEX idx_project_property_subtype ON landscape.tbl_project USING btree (property_subtype)
```
- `idx_project_site_attributes`

```sql
CREATE INDEX idx_project_site_attributes ON landscape.tbl_project USING gin (site_attributes)
```
- `idx_project_template`

```sql
CREATE INDEX idx_project_template ON landscape.tbl_project USING btree (template_id)
```
- `idx_project_topography`

```sql
CREATE INDEX idx_project_topography ON landscape.tbl_project USING btree (topography) WHERE (topography IS NOT NULL)
```
- `idx_tbl_project_created_by_id`

```sql
CREATE INDEX idx_tbl_project_created_by_id ON landscape.tbl_project USING btree (created_by_id)
```
- `tbl_project_pkey`

```sql
CREATE UNIQUE INDEX tbl_project_pkey ON landscape.tbl_project USING btree (project_id)
```
- `tbl_project_project_name_key`

```sql
CREATE UNIQUE INDEX tbl_project_project_name_key ON landscape.tbl_project USING btree (project_name)
```

### `tbl_project_assumption`

- Columns: 13
- Constraints: 5
- Foreign keys: 2
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | assumption_id | integer [32,0] | NO | nextval('tbl_project_assumption_assumption_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | assumption_key | character varying(100) | NO |  |  |
| 4 | assumption_value | text | YES |  |  |
| 5 | assumption_type | character varying(50) | YES | 'user'::character varying |  |
| 6 | scope | character varying(50) | YES | 'project'::character varying |  |
| 7 | scope_id | bigint [64,0] | YES |  |  |
| 8 | notes | text | YES |  |  |
| 9 | source_doc_id | bigint [64,0] | YES |  |  |
| 10 | confidence_score | numeric [3,2] | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 12 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 13 | created_by | text | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_project_assumption_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_project_assumption_source_doc_id_fkey | FOREIGN KEY | FOREIGN KEY (source_doc_id) REFERENCES core_doc(doc_id) ON DELETE SET NULL |
| tbl_project_assumption_pkey | PRIMARY KEY | PRIMARY KEY (assumption_id) |
| uq_project_assumption | UNIQUE | UNIQUE (project_id, assumption_key) |
| uq_project_assumption_key | UNIQUE | UNIQUE (project_id, assumption_key) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_project_assumption_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_project_assumption_source_doc_id_fkey | source_doc_id | core_doc.doc_id | NO ACTION | SET NULL |

#### Indexes

- `idx_assumption_key`

```sql
CREATE INDEX idx_assumption_key ON landscape.tbl_project_assumption USING btree (assumption_key)
```
- `idx_assumption_project`

```sql
CREATE INDEX idx_assumption_project ON landscape.tbl_project_assumption USING btree (project_id)
```
- `tbl_project_assumption_pkey`

```sql
CREATE UNIQUE INDEX tbl_project_assumption_pkey ON landscape.tbl_project_assumption USING btree (assumption_id)
```
- `uq_project_assumption`

```sql
CREATE UNIQUE INDEX uq_project_assumption ON landscape.tbl_project_assumption USING btree (project_id, assumption_key)
```
- `uq_project_assumption_key`

```sql
CREATE UNIQUE INDEX uq_project_assumption_key ON landscape.tbl_project_assumption USING btree (project_id, assumption_key)
```

#### Triggers

- `trg_project_assumption_updated`

```sql
CREATE TRIGGER trg_project_assumption_updated BEFORE UPDATE ON landscape.tbl_project_assumption FOR EACH ROW EXECUTE FUNCTION update_project_assumption_timestamp()
```

### `tbl_project_config`

- Columns: 19
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | bigint [64,0] | NO |  |  |
| 2 | asset_type | character varying(50) | NO |  |  |
| 3 | tier_1_label | character varying(50) | NO | 'Area'::character varying | User-configurable label for tier 1 (default: Area) |
| 4 | tier_2_label | character varying(50) | NO | 'Phase'::character varying | User-configurable label for tier 2 (default: Phase) |
| 5 | tier_3_label | character varying(50) | NO | 'Parcel'::character varying | User-configurable label for tier 3 (default: Parcel) |
| 6 | created_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |
| 7 | updated_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |
| 8 | land_use_level1_label | character varying(50) | YES | 'Family'::character varying | Top-level land use classification label (e.g., Family, Category, Classification). Used in inventory/planning interfaces for land development projects. |
| 9 | land_use_level1_label_plural | character varying(50) | YES | 'Families'::character varying | Plural form of level 1 label for UI display |
| 10 | land_use_level2_label | character varying(50) | YES | 'Type'::character varying | Second-level land use classification label (e.g., Type, Use, Subtype). Represents subdivisions within a Family. |
| 11 | land_use_level2_label_plural | character varying(50) | YES | 'Types'::character varying | Plural form of level 2 label for UI display |
| 12 | land_use_level3_label | character varying(50) | YES | 'Product'::character varying | Product-level land use classification label (e.g., Product, Series, Model). Represents specific lot products. |
| 13 | land_use_level3_label_plural | character varying(50) | YES | 'Products'::character varying | Plural form of level 3 label for UI display |
| 14 | analysis_type | character varying(50) | YES |  | Inherited from tbl_project for hierarchy label configuration |
| 15 | level1_enabled | boolean | YES | true |  |
| 16 | level2_enabled | boolean | YES | true |  |
| 17 | level3_enabled | boolean | YES | true |  |
| 18 | auto_number | boolean | YES | false |  |
| 19 | tier_0_label | character varying(50) | YES | 'Project'::character varying | User-configurable label for tier 0 (default: Project) |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| fk_project_config_project | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_project_config_pkey | PRIMARY KEY | PRIMARY KEY (project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_project_config_project | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_project_config_asset_type`

```sql
CREATE INDEX idx_project_config_asset_type ON landscape.tbl_project_config USING btree (asset_type)
```
- `idx_project_config_land_use_labels`

```sql
CREATE INDEX idx_project_config_land_use_labels ON landscape.tbl_project_config USING btree (land_use_level1_label, land_use_level2_label, land_use_level3_label)
```
- `tbl_project_config_pkey`

```sql
CREATE UNIQUE INDEX tbl_project_config_pkey ON landscape.tbl_project_config USING btree (project_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_project_config FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_project_contact`

- Columns: 9
- Constraints: 5
- Foreign keys: 3
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_contact_id | bigint [64,0] | NO | nextval('tbl_project_contact_project_contact_id_seq'::regclass) | Primary key |
| 2 | project_id | bigint [64,0] | NO |  | Foreign key to tbl_project |
| 3 | contact_id | bigint [64,0] | NO |  | Foreign key to tbl_contact |
| 4 | role_id | integer [32,0] | NO |  | Foreign key to tbl_contact_role defining the role on this project |
| 5 | is_primary | boolean | YES | false | TRUE if this is the primary client/entity (used for dashboard grouping) |
| 6 | is_billing_contact | boolean | YES | false | TRUE if this contact receives invoices |
| 7 | notes | text | YES |  |  |
| 8 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 9 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_project_contact_contact_id_fkey | FOREIGN KEY | FOREIGN KEY (contact_id) REFERENCES tbl_contact(contact_id) ON DELETE CASCADE |
| tbl_project_contact_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_project_contact_role_id_fkey | FOREIGN KEY | FOREIGN KEY (role_id) REFERENCES tbl_contact_role(role_id) |
| tbl_project_contact_pkey | PRIMARY KEY | PRIMARY KEY (project_contact_id) |
| uq_project_contact_role | UNIQUE | UNIQUE (project_id, contact_id, role_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_project_contact_contact_id_fkey | contact_id | tbl_contact.contact_id | NO ACTION | CASCADE |
| tbl_project_contact_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |
| tbl_project_contact_role_id_fkey | role_id | tbl_contact_role.role_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_project_contact_billing`

```sql
CREATE INDEX idx_project_contact_billing ON landscape.tbl_project_contact USING btree (project_id, is_billing_contact) WHERE (is_billing_contact = true)
```
- `idx_project_contact_contact`

```sql
CREATE INDEX idx_project_contact_contact ON landscape.tbl_project_contact USING btree (contact_id)
```
- `idx_project_contact_primary`

```sql
CREATE INDEX idx_project_contact_primary ON landscape.tbl_project_contact USING btree (project_id, is_primary) WHERE (is_primary = true)
```
- `idx_project_contact_project`

```sql
CREATE INDEX idx_project_contact_project ON landscape.tbl_project_contact USING btree (project_id)
```
- `idx_project_contact_role`

```sql
CREATE INDEX idx_project_contact_role ON landscape.tbl_project_contact USING btree (role_id)
```
- `tbl_project_contact_pkey`

```sql
CREATE UNIQUE INDEX tbl_project_contact_pkey ON landscape.tbl_project_contact USING btree (project_contact_id)
```
- `uq_project_contact_role`

```sql
CREATE UNIQUE INDEX uq_project_contact_role ON landscape.tbl_project_contact USING btree (project_id, contact_id, role_id)
```

### `tbl_project_inventory_columns`

- Columns: 19
- Constraints: 6
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | column_config_id | bigint [64,0] | NO | nextval('tbl_project_inventory_columns_column_config_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | column_name | character varying(50) | NO |  |  |
| 4 | column_label | character varying(100) | NO |  |  |
| 5 | column_type | character varying(50) | NO |  | hierarchy columns create containers, data columns store attributes |
| 6 | container_level | integer [32,0] | YES |  | For hierarchy columns: which level (2,3,4,5) this column represents |
| 7 | data_type | character varying(50) | YES |  |  |
| 8 | enum_options | jsonb | YES |  |  |
| 9 | is_required | boolean | YES | false |  |
| 10 | is_visible | boolean | YES | true |  |
| 11 | display_order | integer [32,0] | NO |  |  |
| 12 | default_value | text | YES |  |  |
| 13 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 14 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 15 | data_source_table | character varying(100) | YES |  | Table to query for dropdown options |
| 16 | data_source_value_col | character varying(50) | YES |  |  |
| 17 | data_source_label_col | character varying(50) | YES |  |  |
| 18 | parent_column_name | character varying(50) | YES |  | Column that filters this columns options (cascading) |
| 19 | junction_table | character varying(100) | YES |  | Many-to-many junction table for filtering |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| chk_column_type | CHECK | CHECK (((column_type)::text = ANY ((ARRAY['hierarchy'::character varying, 'data'::character varying])::text[]))) |
| chk_data_type | CHECK | CHECK (((data_type)::text = ANY ((ARRAY['text'::character varying, 'integer'::character varying, 'decimal'::character varying, 'boolean'::character varying, 'date'::character varying, 'json'::character varying])::text[]))) |
| chk_data_type | CHECK | CHECK (((data_type IS NULL) OR ((data_type)::text = ANY ((ARRAY['text'::character varying, 'number'::character varying, 'currency'::character varying, 'date'::character varying, 'boolean'::character varying, 'enum'::character varying])::text[])))) |
| tbl_project_inventory_columns_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_project_inventory_columns_pkey | PRIMARY KEY | PRIMARY KEY (column_config_id) |
| uq_project_column | UNIQUE | UNIQUE (project_id, column_name) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_project_inventory_columns_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_project_columns_order`

```sql
CREATE INDEX idx_project_columns_order ON landscape.tbl_project_inventory_columns USING btree (project_id, display_order)
```
- `idx_project_columns_project`

```sql
CREATE INDEX idx_project_columns_project ON landscape.tbl_project_inventory_columns USING btree (project_id)
```
- `tbl_project_inventory_columns_pkey`

```sql
CREATE UNIQUE INDEX tbl_project_inventory_columns_pkey ON landscape.tbl_project_inventory_columns USING btree (column_config_id)
```
- `uq_project_column`

```sql
CREATE UNIQUE INDEX uq_project_column ON landscape.tbl_project_inventory_columns USING btree (project_id, column_name)
```

### `tbl_project_metrics`

- Columns: 22
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | metrics_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | total_equity_invested | numeric [15,2] | YES |  |  |
| 4 | total_debt_proceeds | numeric [15,2] | YES |  |  |
| 5 | total_project_cost | numeric [15,2] | YES |  |  |
| 6 | project_irr_pct | numeric [6,3] | YES |  |  |
| 7 | equity_irr_pct | numeric [6,3] | YES |  |  |
| 8 | levered_irr_pct | numeric [6,3] | YES |  |  |
| 9 | unlevered_irr_pct | numeric [6,3] | YES |  |  |
| 10 | equity_multiple | numeric [6,3] | YES |  |  |
| 11 | stabilized_noi | numeric [15,2] | YES |  |  |
| 12 | exit_cap_rate_pct | numeric [5,2] | YES |  |  |
| 13 | exit_value | numeric [15,2] | YES |  |  |
| 14 | residual_land_value_per_acre | numeric [15,2] | YES |  |  |
| 15 | residual_land_value_per_unit | numeric [15,2] | YES |  |  |
| 16 | peak_debt | numeric [15,2] | YES |  |  |
| 17 | avg_dscr | numeric [6,3] | YES |  |  |
| 18 | min_dscr | numeric [6,3] | YES |  |  |
| 19 | development_duration_months | integer [32,0] | YES |  |  |
| 20 | absorption_duration_months | integer [32,0] | YES |  |  |
| 21 | calculated_at | timestamp with time zone | YES | now() |  |
| 22 | calculation_version | integer [32,0] | YES | 1 |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_project_metrics_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_project_metrics_pkey | PRIMARY KEY | PRIMARY KEY (metrics_id) |
| uq_metrics_project_version | UNIQUE | UNIQUE (project_id, calculation_version) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_project_metrics_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_metrics_latest`

```sql
CREATE INDEX idx_metrics_latest ON landscape.tbl_project_metrics USING btree (project_id, calculation_version DESC)
```
- `idx_metrics_project`

```sql
CREATE INDEX idx_metrics_project ON landscape.tbl_project_metrics USING btree (project_id)
```
- `tbl_project_metrics_pkey`

```sql
CREATE UNIQUE INDEX tbl_project_metrics_pkey ON landscape.tbl_project_metrics USING btree (metrics_id)
```
- `uq_metrics_project_version`

```sql
CREATE UNIQUE INDEX uq_metrics_project_version ON landscape.tbl_project_metrics USING btree (project_id, calculation_version)
```

### `tbl_project_settings`

- Columns: 11
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | bigint [64,0] | NO |  |  |
| 2 | default_currency | character varying(3) | YES | 'USD'::character varying |  |
| 3 | default_period_type | character varying(20) | YES | 'monthly'::character varying |  |
| 4 | global_inflation_rate | numeric | YES | 0.03 |  |
| 5 | analysis_start_date | date | YES |  |  |
| 6 | analysis_end_date | date | YES |  |  |
| 7 | discount_rate | numeric | YES | 0.10 |  |
| 8 | created_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |
| 9 | updated_at | timestamp with time zone | NO | CURRENT_TIMESTAMP |  |
| 10 | cost_inflation_set_id | bigint [64,0] | YES |  |  |
| 11 | price_inflation_set_id | bigint [64,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| ck_project_settings_dates | CHECK | CHECK (((analysis_end_date IS NULL) OR (analysis_start_date IS NULL) OR (analysis_end_date >= analysis_start_date))) |
| fk_project_settings_project | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_project_settings_pkey | PRIMARY KEY | PRIMARY KEY (project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| fk_project_settings_project | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_project_settings_currency`

```sql
CREATE INDEX idx_project_settings_currency ON landscape.tbl_project_settings USING btree (default_currency)
```
- `tbl_project_settings_pkey`

```sql
CREATE UNIQUE INDEX tbl_project_settings_pkey ON landscape.tbl_project_settings USING btree (project_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_project_settings FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_property_acquisition`

- Columns: 24
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | acquisition_id | bigint [64,0] | NO | nextval('tbl_property_acquisition_acquisition_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | purchase_price | numeric [15,2] | YES |  |  |
| 4 | acquisition_date | date | YES |  |  |
| 5 | hold_period_years | numeric [5,2] | YES |  |  |
| 6 | exit_cap_rate | numeric [6,4] | YES |  |  |
| 7 | sale_date | date | YES |  |  |
| 8 | closing_costs_pct | numeric [6,3] | YES | 0.015 |  |
| 9 | due_diligence_days | integer [32,0] | YES | 30 |  |
| 10 | earnest_money | numeric [12,2] | YES |  |  |
| 11 | sale_costs_pct | numeric [6,3] | YES | 0.015 |  |
| 12 | broker_commission_pct | numeric [6,3] | YES | 0.025 |  |
| 13 | price_per_unit | numeric [10,2] | YES |  | Validation metric - purchase price per unit |
| 14 | price_per_sf | numeric [8,2] | YES |  |  |
| 15 | legal_fees | numeric [10,2] | YES |  |  |
| 16 | financing_fees | numeric [10,2] | YES |  |  |
| 17 | third_party_reports | numeric [10,2] | YES |  |  |
| 18 | depreciation_basis | numeric [15,2] | YES |  | Tax treatment - depreciable improvements (27.5yr for multifamily) |
| 19 | land_pct | numeric [5,2] | YES | 20.0 |  |
| 20 | improvement_pct | numeric [5,2] | YES | 80.0 |  |
| 21 | is_1031_exchange | boolean | YES | false |  |
| 22 | created_at | timestamp without time zone | YES | now() |  |
| 23 | updated_at | timestamp without time zone | YES | now() |  |
| 24 | grm | numeric [8,2] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_property_acquisition_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_property_acquisition_pkey | PRIMARY KEY | PRIMARY KEY (acquisition_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_property_acquisition_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_acquisition_project`

```sql
CREATE INDEX idx_acquisition_project ON landscape.tbl_property_acquisition USING btree (project_id)
```
- `tbl_property_acquisition_pkey`

```sql
CREATE UNIQUE INDEX tbl_property_acquisition_pkey ON landscape.tbl_property_acquisition USING btree (acquisition_id)
```

### `tbl_property_apn`

- Columns: 8
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | property_apn_id | bigint [64,0] | NO | nextval('tbl_property_apn_property_apn_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | apn | character varying(50) | NO |  |  |
| 4 | is_primary | boolean | YES | false | Designates the primary APN for property identification |
| 5 | county | character varying(100) | YES |  |  |
| 6 | notes | text | YES |  |  |
| 7 | created_at | timestamp without time zone | YES | now() |  |
| 8 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_property_apn_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_property_apn_pkey | PRIMARY KEY | PRIMARY KEY (property_apn_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_property_apn_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_property_apn_apn`

```sql
CREATE INDEX idx_property_apn_apn ON landscape.tbl_property_apn USING btree (apn)
```
- `idx_property_apn_project`

```sql
CREATE INDEX idx_property_apn_project ON landscape.tbl_property_apn USING btree (project_id)
```
- `tbl_property_apn_pkey`

```sql
CREATE UNIQUE INDEX tbl_property_apn_pkey ON landscape.tbl_property_apn USING btree (property_apn_id)
```

### `tbl_property_attribute_def`

- Columns: 18
- Constraints: 4
- Foreign keys: 0
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | attribute_id | bigint [64,0] | NO | nextval('tbl_property_attribute_def_attribute_id_seq'::regclass) |  |
| 2 | category | character varying(50) | NO |  | Attribute category: site or improvement |
| 3 | subcategory | character varying(50) | YES |  | Sub-grouping: utilities, construction, mechanical, amenities, etc. |
| 4 | attribute_code | character varying(50) | NO |  | Unique code within category for programmatic access |
| 5 | attribute_label | character varying(100) | NO |  |  |
| 6 | description | text | YES |  |  |
| 7 | data_type | character varying(20) | NO |  | Data type: text, number, boolean, date, select, multiselect, rating, narrative |
| 8 | options | jsonb | YES |  | For select/multiselect: array of {value, label} options |
| 9 | default_value | text | YES |  |  |
| 10 | is_required | boolean | YES | false |  |
| 11 | sort_order | integer [32,0] | YES | 0 |  |
| 12 | display_width | character varying(20) | YES | 'full'::character varying |  |
| 13 | help_text | text | YES |  |  |
| 14 | property_types | jsonb | YES |  | Property types this attribute applies to (null = all) |
| 15 | is_system | boolean | YES | false | TRUE for system-defined attributes, FALSE for user-defined |
| 16 | is_active | boolean | YES | true |  |
| 17 | created_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |
| 18 | updated_at | timestamp with time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_property_attribute_def_category_check | CHECK | CHECK (((category)::text = ANY ((ARRAY['site'::character varying, 'improvement'::character varying])::text[]))) |
| tbl_property_attribute_def_data_type_check | CHECK | CHECK (((data_type)::text = ANY ((ARRAY['text'::character varying, 'number'::character varying, 'boolean'::character varying, 'date'::character varying, 'select'::character varying, 'multiselect'::character varying, 'rating'::character varying, 'narrative'::character varying])::text[]))) |
| tbl_property_attribute_def_pkey | PRIMARY KEY | PRIMARY KEY (attribute_id) |
| tbl_property_attribute_def_category_attribute_code_key | UNIQUE | UNIQUE (category, attribute_code) |

#### Indexes

- `idx_prop_attr_def_category`

```sql
CREATE INDEX idx_prop_attr_def_category ON landscape.tbl_property_attribute_def USING btree (category, is_active)
```
- `idx_prop_attr_def_property_types`

```sql
CREATE INDEX idx_prop_attr_def_property_types ON landscape.tbl_property_attribute_def USING gin (property_types)
```
- `idx_prop_attr_def_subcategory`

```sql
CREATE INDEX idx_prop_attr_def_subcategory ON landscape.tbl_property_attribute_def USING btree (category, subcategory)
```
- `tbl_property_attribute_def_category_attribute_code_key`

```sql
CREATE UNIQUE INDEX tbl_property_attribute_def_category_attribute_code_key ON landscape.tbl_property_attribute_def USING btree (category, attribute_code)
```
- `tbl_property_attribute_def_pkey`

```sql
CREATE UNIQUE INDEX tbl_property_attribute_def_pkey ON landscape.tbl_property_attribute_def USING btree (attribute_id)
```

#### Triggers

- `trg_prop_attr_def_updated_at`

```sql
CREATE TRIGGER trg_prop_attr_def_updated_at BEFORE UPDATE ON landscape.tbl_property_attribute_def FOR EACH ROW EXECUTE FUNCTION fn_prop_attr_def_updated_at()
```

### `tbl_property_type_config`

- Columns: 8
- Constraints: 2
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | config_id | bigint [64,0] | NO | nextval('tbl_property_type_config_config_id_seq'::regclass) |  |
| 2 | property_type | character varying(50) | NO |  | multifamily, office, retail, mpc, industrial, hotel, self_storage |
| 3 | tab_label | character varying(50) | NO |  | Label shown in UI: Rent Roll, Lease Schedule, Parcel Table, etc. |
| 4 | description | text | YES |  |  |
| 5 | default_columns | jsonb | NO |  | JSON array of hierarchy and data column definitions |
| 6 | import_suggestions | jsonb | YES |  |  |
| 7 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 8 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_property_type_config_pkey | PRIMARY KEY | PRIMARY KEY (config_id) |
| tbl_property_type_config_property_type_key | UNIQUE | UNIQUE (property_type) |

#### Indexes

- `tbl_property_type_config_pkey`

```sql
CREATE UNIQUE INDEX tbl_property_type_config_pkey ON landscape.tbl_property_type_config USING btree (config_id)
```
- `tbl_property_type_config_property_type_key`

```sql
CREATE UNIQUE INDEX tbl_property_type_config_property_type_key ON landscape.tbl_property_type_config USING btree (property_type)
```

### `tbl_property_use_template`

- Columns: 8
- Constraints: 1
- Foreign keys: 0
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | template_id | bigint [64,0] | NO | nextval('tbl_property_use_template_template_id_seq'::regclass) |  |
| 2 | template_name | character varying(100) | NO |  |  |
| 3 | property_type | character varying(50) | NO |  |  |
| 4 | template_category | character varying(50) | YES |  |  |
| 5 | description | text | YES |  |  |
| 6 | is_active | boolean | YES | true |  |
| 7 | created_at | timestamp with time zone | YES | now() |  |
| 8 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_property_use_template_pkey | PRIMARY KEY | PRIMARY KEY (template_id) |

#### Indexes

- `idx_template_property_type`

```sql
CREATE INDEX idx_template_property_type ON landscape.tbl_property_use_template USING btree (property_type, is_active)
```
- `tbl_property_use_template_pkey`

```sql
CREATE UNIQUE INDEX tbl_property_use_template_pkey ON landscape.tbl_property_use_template USING btree (template_id)
```

### `tbl_recovery`

- Columns: 7
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | recovery_id | integer [32,0] | NO |  |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | recovery_structure | character varying(50) | YES | 'Triple Net'::character varying | None, Single Net, Double Net, Triple Net, Modified Gross, or Full Service |
| 4 | expense_cap_pct | numeric [5,2] | YES |  |  |
| 5 | categories | jsonb | NO | '[]'::jsonb | JSON array: [{name, included, cap, basis}, ...] |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_recovery_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_recovery_pkey | PRIMARY KEY | PRIMARY KEY (recovery_id) |
| uq_recovery_lease | UNIQUE | UNIQUE (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_recovery_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_recovery_lease`

```sql
CREATE INDEX idx_recovery_lease ON landscape.tbl_recovery USING btree (lease_id)
```
- `tbl_recovery_pkey`

```sql
CREATE UNIQUE INDEX tbl_recovery_pkey ON landscape.tbl_recovery USING btree (recovery_id)
```
- `uq_recovery_lease`

```sql
CREATE UNIQUE INDEX uq_recovery_lease ON landscape.tbl_recovery USING btree (lease_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_recovery FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_renewal_option`

- Columns: 32
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | renewal_option_id | integer [32,0] | NO | nextval('tbl_renewal_option_renewal_option_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | option_number | integer [32,0] | NO |  |  |
| 4 | option_term_months | integer [32,0] | NO |  |  |
| 5 | option_term_years | numeric [4,1] | YES |  |  |
| 6 | notice_period_months | integer [32,0] | YES |  |  |
| 7 | earliest_notice_date | date | YES |  |  |
| 8 | latest_notice_date | date | YES |  |  |
| 9 | notice_received | boolean | YES | false |  |
| 10 | notice_received_date | date | YES |  |  |
| 11 | rent_determination_method | character varying(50) | YES |  |  |
| 12 | fixed_rent_psf | numeric [8,2] | YES |  |  |
| 13 | fixed_rent_annual | numeric [12,2] | YES |  |  |
| 14 | market_rent_floor_psf | numeric [8,2] | YES |  |  |
| 15 | market_rent_ceiling_psf | numeric [8,2] | YES |  |  |
| 16 | cpi_adjustment_pct | numeric [5,2] | YES |  |  |
| 17 | formula_description | text | YES |  |  |
| 18 | option_escalation_type | character varying(50) | YES |  |  |
| 19 | option_escalation_pct | numeric [5,2] | YES |  |  |
| 20 | option_escalation_frequency | character varying(20) | YES |  |  |
| 21 | fmv_determination_period_days | integer [32,0] | YES |  |  |
| 22 | fmv_arbitration_required | boolean | YES | false |  |
| 23 | fmv_appraiser_selection | character varying(100) | YES |  |  |
| 24 | option_exercised | boolean | YES | false |  |
| 25 | exercise_date | date | YES |  |  |
| 26 | exercised_rent_psf | numeric [8,2] | YES |  |  |
| 27 | exercised_rent_annual | numeric [12,2] | YES |  |  |
| 28 | exercise_conditions | text | YES |  |  |
| 29 | no_default_required | boolean | YES | true |  |
| 30 | notes | text | YES |  |  |
| 31 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 32 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_renewal_option_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_renewal_option_pkey | PRIMARY KEY | PRIMARY KEY (renewal_option_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_renewal_option_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_renewal_lease`

```sql
CREATE INDEX idx_renewal_lease ON landscape.tbl_renewal_option USING btree (lease_id)
```
- `idx_renewal_lease_number`

```sql
CREATE UNIQUE INDEX idx_renewal_lease_number ON landscape.tbl_renewal_option USING btree (lease_id, option_number)
```
- `idx_renewal_notice`

```sql
CREATE INDEX idx_renewal_notice ON landscape.tbl_renewal_option USING btree (latest_notice_date)
```
- `tbl_renewal_option_pkey`

```sql
CREATE UNIQUE INDEX tbl_renewal_option_pkey ON landscape.tbl_renewal_option USING btree (renewal_option_id)
```

### `tbl_rent_comparable`

- Columns: 21
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | comparable_id | integer [32,0] | NO | nextval('tbl_rent_comparable_comparable_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | property_name | character varying(200) | NO |  |  |
| 4 | address | character varying(300) | YES |  |  |
| 5 | distance_miles | numeric [5,2] | YES |  |  |
| 6 | year_built | integer [32,0] | YES |  |  |
| 7 | total_units | integer [32,0] | YES |  |  |
| 8 | unit_type | character varying(50) | YES |  |  |
| 9 | bedrooms | numeric [3,1] | YES |  |  |
| 10 | bathrooms | numeric [3,1] | YES |  |  |
| 11 | avg_sqft | integer [32,0] | YES |  |  |
| 12 | asking_rent | numeric [10,2] | YES |  |  |
| 13 | effective_rent | numeric [10,2] | YES |  |  |
| 14 | concessions | character varying(500) | YES |  |  |
| 15 | amenities | text | YES |  |  |
| 16 | notes | text | YES |  |  |
| 17 | data_source | character varying(100) | YES |  |  |
| 18 | as_of_date | date | YES |  |  |
| 19 | is_active | boolean | YES | true |  |
| 20 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 21 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_rent_comparable_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_rent_comparable_pkey | PRIMARY KEY | PRIMARY KEY (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_rent_comparable_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_rent_comparable_project`

```sql
CREATE INDEX idx_rent_comparable_project ON landscape.tbl_rent_comparable USING btree (project_id)
```
- `idx_rent_comparable_unit_type`

```sql
CREATE INDEX idx_rent_comparable_unit_type ON landscape.tbl_rent_comparable USING btree (unit_type)
```
- `tbl_rent_comparable_pkey`

```sql
CREATE UNIQUE INDEX tbl_rent_comparable_pkey ON landscape.tbl_rent_comparable USING btree (comparable_id)
```

### `tbl_rent_concession`

- Columns: 22
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | concession_id | integer [32,0] | NO | nextval('tbl_rent_concession_concession_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | concession_type | character varying(50) | YES |  |  |
| 4 | concession_start_date | date | YES |  |  |
| 5 | concession_end_date | date | YES |  |  |
| 6 | concession_months | integer [32,0] | YES |  |  |
| 7 | concession_amount_monthly | numeric [10,2] | YES |  |  |
| 8 | concession_amount_total | numeric [12,2] | YES |  |  |
| 9 | concession_psf | numeric [8,2] | YES |  |  |
| 10 | concession_pct_of_rent | numeric [5,2] | YES |  |  |
| 11 | concession_timing | character varying(50) | YES |  |  |
| 12 | applies_to_base_rent | boolean | YES | true |  |
| 13 | applies_to_cam | boolean | YES | false |  |
| 14 | applies_to_taxes | boolean | YES | false |  |
| 15 | burn_off_upon_default | boolean | YES | false |  |
| 16 | burn_off_upon_assignment | boolean | YES | false |  |
| 17 | remaining_concession_value | numeric [12,2] | YES |  |  |
| 18 | amortized_over_months | integer [32,0] | YES |  |  |
| 19 | amortization_start_date | date | YES |  |  |
| 20 | notes | text | YES |  |  |
| 21 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 22 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_rent_concession_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_rent_concession_pkey | PRIMARY KEY | PRIMARY KEY (concession_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_rent_concession_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_concession_dates`

```sql
CREATE INDEX idx_concession_dates ON landscape.tbl_rent_concession USING btree (concession_start_date, concession_end_date)
```
- `idx_concession_lease`

```sql
CREATE INDEX idx_concession_lease ON landscape.tbl_rent_concession USING btree (lease_id)
```
- `tbl_rent_concession_pkey`

```sql
CREATE UNIQUE INDEX tbl_rent_concession_pkey ON landscape.tbl_rent_concession USING btree (concession_id)
```

### `tbl_rent_escalation`

- Columns: 14
- Constraints: 2
- Foreign keys: 1
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | escalation_id | integer [32,0] | NO | nextval('tbl_rent_escalation_escalation_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | YES |  |  |
| 3 | escalation_type | character varying(50) | YES |  |  |
| 4 | escalation_pct | numeric [6,3] | YES |  |  |
| 5 | escalation_frequency | character varying(20) | YES |  |  |
| 6 | compound_escalation | boolean | YES | true |  |
| 7 | cpi_index | character varying(50) | YES |  |  |
| 8 | cpi_floor_pct | numeric [6,3] | YES |  |  |
| 9 | cpi_cap_pct | numeric [6,3] | YES |  |  |
| 10 | annual_increase_amount | numeric [10,2] | YES |  |  |
| 11 | step_schedule | text | YES |  |  |
| 12 | first_escalation_date | date | YES |  |  |
| 13 | created_at | timestamp without time zone | YES | now() |  |
| 14 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_rent_escalation_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_commercial_lease(lease_id) |
| tbl_cre_rent_escalation_pkey | PRIMARY KEY | PRIMARY KEY (escalation_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cre_rent_escalation_lease_id_fkey | lease_id | tbl_commercial_lease.lease_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_cre_rent_escalation_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_rent_escalation_pkey ON landscape.tbl_rent_escalation USING btree (escalation_id)
```

### `tbl_rent_roll`

- Columns: 29
- Constraints: 7
- Foreign keys: 1
- Indexes: 5
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | rent_roll_id | bigint [64,0] | NO | nextval('tbl_rent_roll_rent_roll_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | tenant_name | character varying(255) | NO |  |  |
| 4 | space_type | character varying(50) | YES |  |  |
| 5 | lease_start_date | date | NO |  |  |
| 6 | lease_end_date | date | NO |  |  |
| 7 | lease_term_months | integer [32,0] | NO |  |  |
| 8 | leased_sf | numeric [12,2] | NO |  |  |
| 9 | base_rent_psf_annual | numeric [10,2] | NO |  |  |
| 10 | escalation_type | character varying(50) | YES | 'NONE'::character varying |  |
| 11 | escalation_value | numeric [10,4] | YES |  |  |
| 12 | escalation_frequency_months | integer [32,0] | YES | 12 |  |
| 13 | recovery_structure | character varying(50) | YES | 'GROSS'::character varying |  |
| 14 | cam_recovery_rate | numeric [6,5] | YES | 1.0 |  |
| 15 | tax_recovery_rate | numeric [6,5] | YES | 1.0 |  |
| 16 | insurance_recovery_rate | numeric [6,5] | YES | 1.0 |  |
| 17 | free_rent_months | integer [32,0] | YES | 0 |  |
| 18 | free_rent_start_month | integer [32,0] | YES | 1 |  |
| 19 | rent_abatement_amount | numeric [12,2] | YES | 0 |  |
| 20 | has_percentage_rent | boolean | YES | false |  |
| 21 | percentage_rent_rate | numeric [6,5] | YES |  |  |
| 22 | percentage_rent_breakpoint | numeric [12,2] | YES |  |  |
| 23 | ti_allowance_psf | numeric [10,2] | YES | 0 |  |
| 24 | lc_allowance_psf | numeric [10,2] | YES | 0 |  |
| 25 | lease_status | character varying(50) | YES | 'ACTIVE'::character varying |  |
| 26 | is_vacancy | boolean | YES | false |  |
| 27 | notes | text | YES |  |  |
| 28 | created_at | timestamp with time zone | YES | now() |  |
| 29 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_rent_roll_escalation_type_check | CHECK | CHECK (((escalation_type)::text = ANY ((ARRAY['NONE'::character varying, 'FIXED_DOLLAR'::character varying, 'FIXED_PERCENT'::character varying, 'CPI'::character varying, 'STEPPED'::character varying])::text[]))) |
| tbl_rent_roll_lease_status_check | CHECK | CHECK (((lease_status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'EXPIRED'::character varying, 'TERMINATED'::character varying, 'PENDING'::character varying])::text[]))) |
| tbl_rent_roll_leased_sf_check | CHECK | CHECK ((leased_sf > (0)::numeric)) |
| tbl_rent_roll_recovery_structure_check | CHECK | CHECK (((recovery_structure)::text = ANY ((ARRAY['GROSS'::character varying, 'NNN'::character varying, 'MODIFIED_GROSS'::character varying, 'INDUSTRIAL_GROSS'::character varying])::text[]))) |
| tbl_rent_roll_space_type_check | CHECK | CHECK (((space_type)::text = ANY ((ARRAY['OFFICE'::character varying, 'RETAIL'::character varying, 'INDUSTRIAL'::character varying, 'MEDICAL'::character varying, 'FLEX'::character varying, 'OTHER'::character varying])::text[]))) |
| tbl_rent_roll_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_rent_roll_pkey | PRIMARY KEY | PRIMARY KEY (rent_roll_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_rent_roll_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_rent_roll_end_date`

```sql
CREATE INDEX idx_rent_roll_end_date ON landscape.tbl_rent_roll USING btree (lease_end_date)
```
- `idx_rent_roll_project`

```sql
CREATE INDEX idx_rent_roll_project ON landscape.tbl_rent_roll USING btree (project_id)
```
- `idx_rent_roll_space_type`

```sql
CREATE INDEX idx_rent_roll_space_type ON landscape.tbl_rent_roll USING btree (space_type)
```
- `idx_rent_roll_status`

```sql
CREATE INDEX idx_rent_roll_status ON landscape.tbl_rent_roll USING btree (lease_status)
```
- `tbl_rent_roll_pkey`

```sql
CREATE UNIQUE INDEX tbl_rent_roll_pkey ON landscape.tbl_rent_roll USING btree (rent_roll_id)
```

### `tbl_rent_roll_unit`

- Columns: 13
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | rent_roll_id | bigint [64,0] | NO | nextval('tbl_rent_roll_unit_rent_roll_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | unit_id | bigint [64,0] | YES |  |  |
| 4 | unit_number | character varying(20) | NO |  |  |
| 5 | unit_type | character varying(50) | YES |  |  |
| 6 | square_feet | integer [32,0] | YES |  |  |
| 7 | current_rent | numeric [10,2] | YES |  |  |
| 8 | market_rent | numeric [10,2] | YES |  |  |
| 9 | lease_start_date | date | YES |  |  |
| 10 | lease_end_date | date | YES |  |  |
| 11 | tenant_name | character varying(200) | YES |  |  |
| 12 | created_at | timestamp without time zone | YES | now() |  |
| 13 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_rent_roll_unit_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_rent_roll_unit_pkey | PRIMARY KEY | PRIMARY KEY (rent_roll_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_rent_roll_unit_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_rent_roll_unit`

```sql
CREATE INDEX idx_rent_roll_unit ON landscape.tbl_rent_roll_unit USING btree (unit_id)
```
- `tbl_rent_roll_unit_pkey`

```sql
CREATE UNIQUE INDEX tbl_rent_roll_unit_pkey ON landscape.tbl_rent_roll_unit USING btree (rent_roll_id)
```

### `tbl_rent_schedule`

- Columns: 11
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | base_rent_id | integer [32,0] | NO | nextval('tbl_rent_schedule_rent_schedule_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | YES |  |  |
| 3 | period_start_date | date | NO |  |  |
| 4 | period_end_date | date | NO |  |  |
| 5 | period_number | integer [32,0] | YES |  |  |
| 6 | base_rent_annual | numeric [12,2] | YES |  |  |
| 7 | base_rent_monthly | numeric [12,2] | YES |  |  |
| 8 | base_rent_psf_annual | numeric [8,2] | YES |  |  |
| 9 | rent_type | character varying(50) | YES |  |  |
| 10 | created_at | timestamp without time zone | YES | now() |  |
| 11 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_base_rent_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_commercial_lease(lease_id) |
| tbl_cre_base_rent_pkey | PRIMARY KEY | PRIMARY KEY (base_rent_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cre_base_rent_lease_id_fkey | lease_id | tbl_commercial_lease.lease_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_cre_base_rent_lease_id`

```sql
CREATE INDEX idx_cre_base_rent_lease_id ON landscape.tbl_rent_schedule USING btree (lease_id)
```
- `tbl_cre_base_rent_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_base_rent_pkey ON landscape.tbl_rent_schedule USING btree (base_rent_id)
```

### `tbl_rent_step`

- Columns: 22
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | rent_step_id | integer [32,0] | NO | nextval('tbl_rent_step_rent_step_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | step_number | integer [32,0] | NO |  |  |
| 4 | step_effective_date | date | NO |  |  |
| 5 | step_end_date | date | YES |  |  |
| 6 | base_rent_psf | numeric [8,2] | YES |  |  |
| 7 | base_rent_monthly | numeric [12,2] | YES |  |  |
| 8 | base_rent_annual | numeric [14,2] | YES |  |  |
| 9 | step_type | character varying(50) | YES |  |  |
| 10 | step_increase_pct | numeric [5,2] | YES |  |  |
| 11 | step_increase_amount | numeric [10,2] | YES |  |  |
| 12 | cumulative_increase_pct | numeric [5,2] | YES |  |  |
| 13 | cpi_index | character varying(100) | YES |  |  |
| 14 | cpi_base_value | numeric [10,2] | YES |  |  |
| 15 | cpi_current_value | numeric [10,2] | YES |  |  |
| 16 | cpi_floor_pct | numeric [5,2] | YES |  |  |
| 17 | cpi_cap_pct | numeric [5,2] | YES |  |  |
| 18 | rent_psf_change | numeric [8,2] | YES |  |  |
| 19 | rent_annual_change | numeric [14,2] | YES |  |  |
| 20 | notes | text | YES |  |  |
| 21 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 22 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_rent_step_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_rent_step_pkey | PRIMARY KEY | PRIMARY KEY (rent_step_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_rent_step_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_rent_step_date`

```sql
CREATE INDEX idx_rent_step_date ON landscape.tbl_rent_step USING btree (step_effective_date)
```
- `idx_rent_step_lease`

```sql
CREATE INDEX idx_rent_step_lease ON landscape.tbl_rent_step USING btree (lease_id)
```
- `idx_rent_step_lease_number`

```sql
CREATE UNIQUE INDEX idx_rent_step_lease_number ON landscape.tbl_rent_step USING btree (lease_id, step_number)
```
- `tbl_rent_step_pkey`

```sql
CREATE UNIQUE INDEX tbl_rent_step_pkey ON landscape.tbl_rent_step USING btree (rent_step_id)
```

### `tbl_rental_comparable`

- Columns: 23
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | comparable_id | integer [32,0] | NO | nextval('tbl_rental_comparable_comparable_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | property_name | character varying(200) | NO |  |  |
| 4 | address | character varying(300) | YES |  |  |
| 5 | latitude | numeric [10,6] | YES |  |  |
| 6 | longitude | numeric [11,6] | YES |  |  |
| 7 | distance_miles | numeric [5,2] | YES |  |  |
| 8 | year_built | integer [32,0] | YES |  |  |
| 9 | total_units | integer [32,0] | YES |  |  |
| 10 | unit_type | character varying(50) | NO |  |  |
| 11 | bedrooms | numeric [3,1] | NO |  |  |
| 12 | bathrooms | numeric [3,1] | NO |  |  |
| 13 | avg_sqft | integer [32,0] | NO |  |  |
| 14 | asking_rent | numeric [10,2] | NO |  |  |
| 15 | effective_rent | numeric [10,2] | YES |  |  |
| 16 | concessions | character varying(500) | YES |  |  |
| 17 | amenities | text | YES |  |  |
| 18 | notes | text | YES |  |  |
| 19 | data_source | character varying(100) | YES |  |  |
| 20 | as_of_date | date | NO |  |  |
| 21 | is_active | boolean | YES | true |  |
| 22 | created_at | timestamp with time zone | YES | now() |  |
| 23 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_rental_comparable_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_rental_comparable_pkey | PRIMARY KEY | PRIMARY KEY (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_rental_comparable_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_rental_comp_location`

```sql
CREATE INDEX idx_rental_comp_location ON landscape.tbl_rental_comparable USING btree (latitude, longitude)
```
- `idx_rental_comp_project`

```sql
CREATE INDEX idx_rental_comp_project ON landscape.tbl_rental_comparable USING btree (project_id)
```
- `tbl_rental_comparable_pkey`

```sql
CREATE UNIQUE INDEX tbl_rental_comparable_pkey ON landscape.tbl_rental_comparable USING btree (comparable_id)
```

### `tbl_revenue_other`

- Columns: 23
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | other_income_id | bigint [64,0] | NO | nextval('tbl_revenue_other_other_income_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | other_income_per_unit_monthly | numeric [8,2] | YES | 0 |  |
| 4 | parking_income_per_space | numeric [8,2] | YES | 50 |  |
| 5 | parking_spaces | integer [32,0] | YES |  |  |
| 6 | pet_fee_per_pet | numeric [8,2] | YES | 35 |  |
| 7 | pet_penetration_pct | numeric [5,2] | YES | 0.30 |  |
| 8 | laundry_income_per_unit | numeric [8,2] | YES | 15 |  |
| 9 | storage_income_per_unit | numeric [8,2] | YES | 10 |  |
| 10 | application_fees_annual | numeric [10,2] | YES | 0 |  |
| 11 | late_fees_annual | numeric [10,2] | YES |  |  |
| 12 | utility_reimbursements_annual | numeric [10,2] | YES |  |  |
| 13 | furnished_unit_premium_pct | numeric [5,2] | YES |  |  |
| 14 | short_term_rental_income | numeric [10,2] | YES |  |  |
| 15 | ancillary_services_income | numeric [10,2] | YES |  |  |
| 16 | vending_income | numeric [8,2] | YES |  |  |
| 17 | package_locker_fees | numeric [8,2] | YES |  |  |
| 18 | reserved_parking_premium | numeric [8,2] | YES |  |  |
| 19 | ev_charging_fees | numeric [8,2] | YES |  |  |
| 20 | other_miscellaneous | numeric [10,2] | YES |  |  |
| 21 | created_at | timestamp without time zone | YES | now() |  |
| 22 | updated_at | timestamp without time zone | YES | now() |  |
| 23 | income_category | character varying(50) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_revenue_other_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_revenue_other_pkey | PRIMARY KEY | PRIMARY KEY (other_income_id) |
| uq_revenue_other_project | UNIQUE | UNIQUE (project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_revenue_other_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_other_income_project`

```sql
CREATE INDEX idx_other_income_project ON landscape.tbl_revenue_other USING btree (project_id)
```
- `tbl_revenue_other_pkey`

```sql
CREATE UNIQUE INDEX tbl_revenue_other_pkey ON landscape.tbl_revenue_other USING btree (other_income_id)
```
- `uq_revenue_other_project`

```sql
CREATE UNIQUE INDEX uq_revenue_other_project ON landscape.tbl_revenue_other USING btree (project_id)
```

### `tbl_revenue_rent`

- Columns: 17
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | rent_id | bigint [64,0] | NO | nextval('tbl_revenue_rent_rent_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | current_rent_psf | numeric [8,2] | NO |  |  |
| 4 | occupancy_pct | numeric [5,2] | NO | 0.95 |  |
| 5 | annual_rent_growth_pct | numeric [5,3] | NO | 0.03 |  |
| 6 | in_place_rent_psf | numeric [8,2] | YES |  |  |
| 7 | market_rent_psf | numeric [8,2] | YES |  |  |
| 8 | rent_loss_to_lease_pct | numeric [5,2] | YES |  |  |
| 9 | lease_up_months | integer [32,0] | YES | 12 |  |
| 10 | stabilized_occupancy_pct | numeric [5,2] | YES | 0.96 |  |
| 11 | rent_growth_years_1_3_pct | numeric [5,3] | YES | 0.04 |  |
| 12 | rent_growth_stabilized_pct | numeric [5,3] | YES | 0.025 |  |
| 13 | free_rent_months | numeric [4,1] | YES | 0 |  |
| 14 | ti_allowance_per_unit | numeric [10,2] | YES | 0 |  |
| 15 | renewal_probability_pct | numeric [5,2] | YES | 0.60 |  |
| 16 | created_at | timestamp without time zone | YES | now() |  |
| 17 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_revenue_rent_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_revenue_rent_pkey | PRIMARY KEY | PRIMARY KEY (rent_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_revenue_rent_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_rent_project`

```sql
CREATE INDEX idx_rent_project ON landscape.tbl_revenue_rent USING btree (project_id)
```
- `tbl_revenue_rent_pkey`

```sql
CREATE UNIQUE INDEX tbl_revenue_rent_pkey ON landscape.tbl_revenue_rent USING btree (rent_id)
```

### `tbl_revenue_timing`

- Columns: 13
- Constraints: 4
- Foreign keys: 2
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | revenue_timing_id | bigint [64,0] | NO | nextval('tbl_revenue_timing_revenue_timing_id_seq'::regclass) |  |
| 2 | absorption_id | bigint [64,0] | NO |  |  |
| 3 | period_id | bigint [64,0] | NO |  |  |
| 4 | units_sold_this_period | numeric [8,2] | YES | 0 |  |
| 5 | cumulative_units_sold | numeric [12,2] | YES | 0 |  |
| 6 | units_remaining | numeric [12,2] | YES |  |  |
| 7 | average_price_this_period | numeric [12,2] | YES |  |  |
| 8 | gross_revenue | numeric [15,2] | YES |  |  |
| 9 | sales_commission | numeric [15,2] | YES | 0 |  |
| 10 | closing_costs | numeric [15,2] | YES | 0 |  |
| 11 | net_revenue | numeric [15,2] | YES |  |  |
| 12 | created_at | timestamp without time zone | YES | now() |  |
| 13 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_revenue_timing_absorption_id_fkey | FOREIGN KEY | FOREIGN KEY (absorption_id) REFERENCES tbl_absorption_schedule(absorption_id) ON DELETE CASCADE |
| tbl_revenue_timing_period_id_fkey | FOREIGN KEY | FOREIGN KEY (period_id) REFERENCES tbl_calculation_period(period_id) ON DELETE CASCADE |
| tbl_revenue_timing_pkey | PRIMARY KEY | PRIMARY KEY (revenue_timing_id) |
| uq_revenue_timing_period | UNIQUE | UNIQUE (absorption_id, period_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_revenue_timing_absorption_id_fkey | absorption_id | tbl_absorption_schedule.absorption_id | NO ACTION | CASCADE |
| tbl_revenue_timing_period_id_fkey | period_id | tbl_calculation_period.period_id | NO ACTION | CASCADE |

#### Indexes

- `idx_revenue_timing_absorption`

```sql
CREATE INDEX idx_revenue_timing_absorption ON landscape.tbl_revenue_timing USING btree (absorption_id, period_id)
```
- `idx_revenue_timing_period`

```sql
CREATE INDEX idx_revenue_timing_period ON landscape.tbl_revenue_timing USING btree (period_id)
```
- `tbl_revenue_timing_pkey`

```sql
CREATE UNIQUE INDEX tbl_revenue_timing_pkey ON landscape.tbl_revenue_timing USING btree (revenue_timing_id)
```
- `uq_revenue_timing_period`

```sql
CREATE UNIQUE INDEX uq_revenue_timing_period ON landscape.tbl_revenue_timing USING btree (absorption_id, period_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_revenue_timing FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_sale_benchmarks`

- Columns: 18
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | benchmark_id | integer [32,0] | NO | nextval('tbl_sale_benchmarks_benchmark_id_seq'::regclass) |  |
| 2 | scope_level | character varying(20) | NO |  |  |
| 3 | project_id | integer [32,0] | YES |  |  |
| 4 | lu_type_code | character varying(20) | YES |  |  |
| 5 | product_code | character varying(50) | YES |  |  |
| 6 | benchmark_type | character varying(50) | NO |  |  |
| 7 | benchmark_name | character varying(100) | YES |  |  |
| 8 | rate_pct | numeric [5,4] | YES |  |  |
| 9 | amount_per_uom | numeric [12,2] | YES |  |  |
| 10 | fixed_amount | numeric [12,2] | YES |  |  |
| 11 | uom_code | character varying(10) | YES |  |  |
| 12 | description | text | YES |  |  |
| 13 | is_active | boolean | YES | true |  |
| 14 | created_at | timestamp without time zone | YES | now() |  |
| 15 | updated_at | timestamp without time zone | YES | now() |  |
| 16 | created_by | character varying(255) | YES |  |  |
| 17 | updated_by | character varying(255) | YES |  |  |
| 18 | basis | character varying(50) | YES |  | What the percentage is applied to (e.g., gross_price, net_proceeds, purchase_price, sale_price, loan_amount) |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sale_benchmarks_scope_level_check | CHECK | CHECK (((scope_level)::text = ANY ((ARRAY['global'::character varying, 'project'::character varying, 'product'::character varying])::text[]))) |
| tbl_sale_benchmarks_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_sale_benchmarks_pkey | PRIMARY KEY | PRIMARY KEY (benchmark_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sale_benchmarks_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_sale_benchmarks_product`

```sql
CREATE INDEX idx_sale_benchmarks_product ON landscape.tbl_sale_benchmarks USING btree (project_id, lu_type_code, product_code)
```
- `idx_sale_benchmarks_scope`

```sql
CREATE INDEX idx_sale_benchmarks_scope ON landscape.tbl_sale_benchmarks USING btree (scope_level, project_id)
```
- `idx_sale_benchmarks_type`

```sql
CREATE INDEX idx_sale_benchmarks_type ON landscape.tbl_sale_benchmarks USING btree (benchmark_type)
```
- `tbl_sale_benchmarks_pkey`

```sql
CREATE UNIQUE INDEX tbl_sale_benchmarks_pkey ON landscape.tbl_sale_benchmarks USING btree (benchmark_id)
```

### `tbl_sale_phases`

- Columns: 9
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | phase_code | character varying(20) | NO |  | Phase identifier within project (e.g., "1.1", "Phase 2A") |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | phase_name | character varying(100) | YES |  |  |
| 4 | default_sale_date | date | NO |  | Default sale date for all parcels in this phase |
| 5 | default_commission_pct | numeric [5,2] | YES | 3.0 | Default commission percentage (e.g., 3.0 = 3%) |
| 6 | default_closing_cost_per_unit | numeric [12,2] | YES | 750.00 | Default closing cost per unit (e.g., $750) |
| 7 | default_onsite_cost_pct | numeric [5,2] | YES | 6.5 | Default onsite improvement cost percentage (e.g., 6.5 = 6.5%) |
| 8 | created_at | timestamp without time zone | YES | now() |  |
| 9 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sale_phases_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_sale_phases_pkey | PRIMARY KEY | PRIMARY KEY (phase_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sale_phases_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_sale_phases_project`

```sql
CREATE INDEX idx_sale_phases_project ON landscape.tbl_sale_phases USING btree (project_id)
```
- `tbl_sale_phases_pkey`

```sql
CREATE UNIQUE INDEX tbl_sale_phases_pkey ON landscape.tbl_sale_phases USING btree (phase_code)
```

### `tbl_sale_settlement`

- Columns: 29
- Constraints: 6
- Foreign keys: 2
- Indexes: 8
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | settlement_id | bigint [64,0] | NO | nextval('tbl_sale_settlement_settlement_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | container_id | bigint [64,0] | YES |  |  |
| 4 | sale_date | date | NO |  |  |
| 5 | buyer_name | character varying(200) | YES |  |  |
| 6 | buyer_entity | character varying(200) | YES |  |  |
| 7 | list_price | numeric [15,2] | YES |  |  |
| 8 | allocated_cost_to_complete | numeric [15,2] | YES | 0 | Sum of all remaining budget allocated to this container from all finance structures. Buyer receives credit for this amount. |
| 9 | other_adjustments | numeric [15,2] | YES | 0 |  |
| 10 | net_proceeds | numeric [15,2] | YES |  |  |
| 11 | settlement_type | character varying(50) | YES |  |  |
| 12 | settlement_notes | text | YES |  |  |
| 13 | cost_allocation_detail | jsonb | YES |  | JSONB snapshot of cost allocation breakdown at time of sale. Provides audit trail and detailed settlement documentation. |
| 14 | has_participation | boolean | YES | false | If true, seller retains participation in future home sales revenue. Triggers ongoing participation payment tracking. |
| 15 | participation_rate | numeric [6,3] | YES |  |  |
| 16 | participation_basis | character varying(50) | YES |  |  |
| 17 | participation_minimum | numeric [15,2] | YES |  |  |
| 18 | participation_target_price | numeric [12,2] | YES |  |  |
| 19 | settlement_status | character varying(50) | YES | 'pending'::character varying |  |
| 20 | created_at | timestamp without time zone | YES | now() |  |
| 21 | updated_at | timestamp without time zone | YES | now() |  |
| 22 | created_by | character varying(100) | YES |  |  |
| 23 | updated_by | character varying(100) | YES |  |  |
| 24 | parcel_id | integer [32,0] | YES |  | Reference to tbl_parcel for parcel-based workflows |
| 25 | sale_phase_code | character varying(20) | YES |  | Links settlement to sale phase for grouped reporting |
| 26 | commission_pct | numeric [5,2] | YES |  | Commission percentage override (e.g., 3.0 = 3%) |
| 27 | closing_cost_per_unit | numeric [12,2] | YES |  |  |
| 28 | onsite_cost_pct | numeric [5,2] | YES |  | Onsite improvement cost percentage (e.g., 6.5 = 6.5% of gross) |
| 29 | gross_value | numeric [15,2] | YES |  | Gross sale value before deductions |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sale_settlement_participation_basis_check | CHECK | CHECK (((participation_basis IS NULL) OR ((participation_basis)::text = ANY ((ARRAY['gross_home_sales'::character varying, 'net_home_sales'::character varying])::text[])))) |
| tbl_sale_settlement_settlement_status_check | CHECK | CHECK (((settlement_status)::text = ANY ((ARRAY['pending'::character varying, 'closed'::character varying, 'cancelled'::character varying])::text[]))) |
| tbl_sale_settlement_settlement_type_check | CHECK | CHECK (((settlement_type IS NULL) OR ((settlement_type)::text = ANY ((ARRAY['cash_sale'::character varying, 'seller_note'::character varying, 'earnout'::character varying, 'participation'::character varying])::text[])))) |
| tbl_sale_settlement_container_id_fkey | FOREIGN KEY | FOREIGN KEY (container_id) REFERENCES tbl_division(division_id) |
| tbl_sale_settlement_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_sale_settlement_pkey | PRIMARY KEY | PRIMARY KEY (settlement_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sale_settlement_container_id_fkey | container_id | tbl_division.division_id | NO ACTION | NO ACTION |
| tbl_sale_settlement_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_sale_settlement_container`

```sql
CREATE INDEX idx_sale_settlement_container ON landscape.tbl_sale_settlement USING btree (container_id)
```
- `idx_sale_settlement_parcel`

```sql
CREATE INDEX idx_sale_settlement_parcel ON landscape.tbl_sale_settlement USING btree (parcel_id)
```
- `idx_sale_settlement_phase`

```sql
CREATE INDEX idx_sale_settlement_phase ON landscape.tbl_sale_settlement USING btree (sale_phase_code)
```
- `idx_settlement_container`

```sql
CREATE INDEX idx_settlement_container ON landscape.tbl_sale_settlement USING btree (container_id)
```
- `idx_settlement_date`

```sql
CREATE INDEX idx_settlement_date ON landscape.tbl_sale_settlement USING btree (sale_date)
```
- `idx_settlement_project`

```sql
CREATE INDEX idx_settlement_project ON landscape.tbl_sale_settlement USING btree (project_id)
```
- `idx_settlement_status`

```sql
CREATE INDEX idx_settlement_status ON landscape.tbl_sale_settlement USING btree (settlement_status)
```
- `tbl_sale_settlement_pkey`

```sql
CREATE UNIQUE INDEX tbl_sale_settlement_pkey ON landscape.tbl_sale_settlement USING btree (settlement_id)
```

### `tbl_sales_comp_adjustments`

- Columns: 20
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | adjustment_id | integer [32,0] | NO | nextval('tbl_sales_comp_adjustments_adjustment_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | adjustment_type | character varying(50) | NO |  | Type of adjustment: location, physical_age, physical_condition, physical_unit_mix, market_conditions, financing, other |
| 4 | adjustment_pct | numeric [6,3] | YES |  | Percentage adjustment (e.g., -0.20 for -20%) |
| 5 | adjustment_amount | numeric [12,2] | YES |  |  |
| 6 | justification | text | YES |  |  |
| 7 | created_at | timestamp without time zone | YES | now() |  |
| 8 | user_adjustment_pct | numeric [7,4] | YES |  | User's final adjustment percentage (may differ from AI suggestion) |
| 9 | ai_accepted | boolean | YES | false | TRUE if user accepted AI suggestion without modification, FALSE if user entered own value |
| 10 | user_notes | text | YES |  |  |
| 11 | last_modified_by | character varying(100) | YES |  |  |
| 12 | landscaper_analysis | text | YES |  |  |
| 13 | user_override_analysis | text | YES |  |  |
| 14 | analysis_inputs | jsonb | YES |  |  |
| 15 | confidence_score | numeric [3,2] | YES |  |  |
| 16 | created_by | character varying(50) | YES |  |  |
| 17 | approved_by | integer [32,0] | YES |  |  |
| 18 | approved_at | timestamp with time zone | YES |  |  |
| 19 | subject_value | character varying(255) | YES |  |  |
| 20 | comp_value | character varying(255) | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| check_adjustment_type | CHECK | CHECK (((adjustment_type)::text = ANY ((ARRAY['location'::character varying, 'physical_age'::character varying, 'physical_condition'::character varying, 'physical_unit_mix'::character varying, 'market_conditions'::character varying, 'financing'::character varying, 'other'::character varying])::text[]))) |
| tbl_sales_comp_adjustments_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_adjustments_pkey | PRIMARY KEY | PRIMARY KEY (adjustment_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_adjustments_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_sales_comp_adjustments_comparable`

```sql
CREATE INDEX idx_sales_comp_adjustments_comparable ON landscape.tbl_sales_comp_adjustments USING btree (comparable_id)
```
- `tbl_sales_comp_adjustments_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_adjustments_pkey ON landscape.tbl_sales_comp_adjustments USING btree (adjustment_id)
```

### `tbl_sales_comp_history`

- Columns: 13
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | history_id | bigint [64,0] | NO | nextval('tbl_sales_comp_history_history_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | sale_date | date | NO |  |  |
| 4 | sale_price | numeric [15,2] | YES |  |  |
| 5 | price_per_sf | numeric [10,2] | YES |  |  |
| 6 | price_per_unit | numeric [10,2] | YES |  |  |
| 7 | buyer_name | character varying(255) | YES |  |  |
| 8 | seller_name | character varying(255) | YES |  |  |
| 9 | sale_type | character varying(50) | YES |  |  |
| 10 | document_number | character varying(50) | YES |  |  |
| 11 | is_arms_length | boolean | YES | true |  |
| 12 | notes | text | YES |  |  |
| 13 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_history_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_history_pkey | PRIMARY KEY | PRIMARY KEY (history_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_history_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_history_comparable`

```sql
CREATE INDEX idx_comp_history_comparable ON landscape.tbl_sales_comp_history USING btree (comparable_id)
```
- `idx_comp_history_date`

```sql
CREATE INDEX idx_comp_history_date ON landscape.tbl_sales_comp_history USING btree (sale_date DESC)
```
- `tbl_sales_comp_history_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_history_pkey ON landscape.tbl_sales_comp_history USING btree (history_id)
```

### `tbl_sales_comp_hospitality`

- Columns: 27
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | hospitality_id | bigint [64,0] | NO | nextval('tbl_sales_comp_hospitality_hospitality_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | total_rooms | integer [32,0] | YES |  |  |
| 4 | available_rooms | integer [32,0] | YES |  |  |
| 5 | suites_count | integer [32,0] | YES |  |  |
| 6 | occupancy_rate | numeric [5,2] | YES |  |  |
| 7 | adr | numeric [10,2] | YES |  |  |
| 8 | revpar | numeric [10,2] | YES |  |  |
| 9 | total_revenue | numeric [15,2] | YES |  |  |
| 10 | rooms_revenue | numeric [15,2] | YES |  |  |
| 11 | fb_revenue | numeric [15,2] | YES |  |  |
| 12 | other_revenue | numeric [15,2] | YES |  |  |
| 13 | flag_brand | character varying(100) | YES |  |  |
| 14 | franchise_company | character varying(255) | YES |  |  |
| 15 | management_company | character varying(255) | YES |  |  |
| 16 | chain_scale | character varying(50) | YES |  |  |
| 17 | meeting_space_sf | numeric [12,2] | YES |  |  |
| 18 | restaurant_count | integer [32,0] | YES |  |  |
| 19 | pool | boolean | YES |  |  |
| 20 | fitness_center | boolean | YES |  |  |
| 21 | spa | boolean | YES |  |  |
| 22 | last_renovation_year | integer [32,0] | YES |  |  |
| 23 | last_pia_year | integer [32,0] | YES |  |  |
| 24 | franchise_expiration | date | YES |  |  |
| 25 | management_expiration | date | YES |  |  |
| 26 | created_at | timestamp with time zone | YES | now() |  |
| 27 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_hospitality_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_hospitality_pkey | PRIMARY KEY | PRIMARY KEY (hospitality_id) |
| uq_comp_hospitality | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_hospitality_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_hospitality_brand`

```sql
CREATE INDEX idx_comp_hospitality_brand ON landscape.tbl_sales_comp_hospitality USING btree (flag_brand)
```
- `idx_comp_hospitality_comparable`

```sql
CREATE INDEX idx_comp_hospitality_comparable ON landscape.tbl_sales_comp_hospitality USING btree (comparable_id)
```
- `tbl_sales_comp_hospitality_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_hospitality_pkey ON landscape.tbl_sales_comp_hospitality USING btree (hospitality_id)
```
- `uq_comp_hospitality`

```sql
CREATE UNIQUE INDEX uq_comp_hospitality ON landscape.tbl_sales_comp_hospitality USING btree (comparable_id)
```

### `tbl_sales_comp_industrial`

- Columns: 27
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | industrial_id | bigint [64,0] | NO | nextval('tbl_sales_comp_industrial_industrial_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | clear_height_min | numeric [6,2] | YES |  |  |
| 4 | clear_height_max | numeric [6,2] | YES |  |  |
| 5 | column_spacing | character varying(50) | YES |  |  |
| 6 | dock_doors_exterior | integer [32,0] | YES |  |  |
| 7 | dock_doors_interior | integer [32,0] | YES |  |  |
| 8 | drive_in_doors | integer [32,0] | YES |  |  |
| 9 | rail_doors | integer [32,0] | YES |  |  |
| 10 | trailer_parking_spaces | integer [32,0] | YES |  |  |
| 11 | auto_parking_spaces | integer [32,0] | YES |  |  |
| 12 | yard_area_sf | numeric [12,2] | YES |  |  |
| 13 | fenced_yard | boolean | YES |  |  |
| 14 | rail_access | boolean | YES | false |  |
| 15 | rail_served | boolean | YES | false |  |
| 16 | crane_capacity_tons | numeric [8,2] | YES |  |  |
| 17 | crane_count | integer [32,0] | YES |  |  |
| 18 | power_voltage | integer [32,0] | YES |  |  |
| 19 | power_amps | integer [32,0] | YES |  |  |
| 20 | power_phase | integer [32,0] | YES |  |  |
| 21 | office_sf | numeric [12,2] | YES |  |  |
| 22 | office_pct | numeric [5,2] | YES |  |  |
| 23 | environmental_phase1 | boolean | YES |  |  |
| 24 | environmental_phase2 | boolean | YES |  |  |
| 25 | environmental_issues | text | YES |  |  |
| 26 | created_at | timestamp with time zone | YES | now() |  |
| 27 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_industrial_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_industrial_pkey | PRIMARY KEY | PRIMARY KEY (industrial_id) |
| uq_comp_industrial | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_industrial_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_industrial_comparable`

```sql
CREATE INDEX idx_comp_industrial_comparable ON landscape.tbl_sales_comp_industrial USING btree (comparable_id)
```
- `tbl_sales_comp_industrial_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_industrial_pkey ON landscape.tbl_sales_comp_industrial USING btree (industrial_id)
```
- `uq_comp_industrial`

```sql
CREATE UNIQUE INDEX uq_comp_industrial ON landscape.tbl_sales_comp_industrial USING btree (comparable_id)
```

### `tbl_sales_comp_land`

- Columns: 36
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | land_id | bigint [64,0] | NO | nextval('tbl_sales_comp_land_land_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | current_zoning | character varying(100) | YES |  |  |
| 4 | proposed_zoning | character varying(100) | YES |  |  |
| 5 | zoning_description | text | YES |  |  |
| 6 | entitled | boolean | YES | false |  |
| 7 | entitlement_status | character varying(100) | YES |  |  |
| 8 | approved_uses | text | YES |  |  |
| 9 | approved_density | numeric [10,2] | YES |  |  |
| 10 | approved_units | integer [32,0] | YES |  |  |
| 11 | approved_sf | numeric [15,2] | YES |  |  |
| 12 | max_far | numeric [6,2] | YES |  |  |
| 13 | max_height_ft | numeric [8,2] | YES |  |  |
| 14 | topography | character varying(100) | YES |  |  |
| 15 | shape | character varying(50) | YES |  |  |
| 16 | frontage_ft | numeric [10,2] | YES |  |  |
| 17 | depth_ft | numeric [10,2] | YES |  |  |
| 18 | corner_lot | boolean | YES | false |  |
| 19 | flood_zone | character varying(50) | YES |  |  |
| 20 | wetlands_pct | numeric [5,2] | YES |  |  |
| 21 | water_available | boolean | YES |  |  |
| 22 | sewer_available | boolean | YES |  |  |
| 23 | gas_available | boolean | YES |  |  |
| 24 | electric_available | boolean | YES |  |  |
| 25 | utility_notes | text | YES |  |  |
| 26 | existing_improvements | text | YES |  |  |
| 27 | demolition_required | boolean | YES | false |  |
| 28 | demolition_cost_estimate | numeric [12,2] | YES |  |  |
| 29 | phase1_complete | boolean | YES |  |  |
| 30 | phase2_complete | boolean | YES |  |  |
| 31 | remediation_required | boolean | YES | false |  |
| 32 | remediation_cost_estimate | numeric [12,2] | YES |  |  |
| 33 | impact_fees_estimate | numeric [12,2] | YES |  |  |
| 34 | offsite_costs_estimate | numeric [12,2] | YES |  |  |
| 35 | created_at | timestamp with time zone | YES | now() |  |
| 36 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_land_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_land_pkey | PRIMARY KEY | PRIMARY KEY (land_id) |
| uq_comp_land | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_land_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_land_comparable`

```sql
CREATE INDEX idx_comp_land_comparable ON landscape.tbl_sales_comp_land USING btree (comparable_id)
```
- `idx_comp_land_entitled`

```sql
CREATE INDEX idx_comp_land_entitled ON landscape.tbl_sales_comp_land USING btree (entitled)
```
- `tbl_sales_comp_land_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_land_pkey ON landscape.tbl_sales_comp_land USING btree (land_id)
```
- `uq_comp_land`

```sql
CREATE UNIQUE INDEX uq_comp_land ON landscape.tbl_sales_comp_land USING btree (comparable_id)
```

### `tbl_sales_comp_manufactured`

- Columns: 27
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | manufactured_id | bigint [64,0] | NO | nextval('tbl_sales_comp_manufactured_manufactured_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | total_pads | integer [32,0] | YES |  |  |
| 4 | occupied_pads | integer [32,0] | YES |  |  |
| 5 | vacant_pads | integer [32,0] | YES |  |  |
| 6 | occupancy_rate | numeric [5,2] | YES |  |  |
| 7 | park_owned_homes | integer [32,0] | YES |  |  |
| 8 | resident_owned_homes | integer [32,0] | YES |  |  |
| 9 | avg_pad_rent | numeric [10,2] | YES |  |  |
| 10 | total_pad_income | numeric [15,2] | YES |  |  |
| 11 | home_rental_income | numeric [15,2] | YES |  |  |
| 12 | utility_income | numeric [15,2] | YES |  |  |
| 13 | other_income | numeric [15,2] | YES |  |  |
| 14 | water_sewer_type | character varying(50) | YES |  |  |
| 15 | utilities_included | character varying(255) | YES |  |  |
| 16 | submetered | boolean | YES |  |  |
| 17 | clubhouse | boolean | YES |  |  |
| 18 | pool | boolean | YES |  |  |
| 19 | laundry_facility | boolean | YES |  |  |
| 20 | playground | boolean | YES |  |  |
| 21 | all_ages | boolean | YES | true |  |
| 22 | senior_community | boolean | YES | false |  |
| 23 | min_age | integer [32,0] | YES |  |  |
| 24 | rv_spaces | integer [32,0] | YES |  |  |
| 25 | rv_avg_rent | numeric [10,2] | YES |  |  |
| 26 | created_at | timestamp with time zone | YES | now() |  |
| 27 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_manufactured_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_manufactured_pkey | PRIMARY KEY | PRIMARY KEY (manufactured_id) |
| uq_comp_manufactured | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_manufactured_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_manufactured_comparable`

```sql
CREATE INDEX idx_comp_manufactured_comparable ON landscape.tbl_sales_comp_manufactured USING btree (comparable_id)
```
- `tbl_sales_comp_manufactured_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_manufactured_pkey ON landscape.tbl_sales_comp_manufactured USING btree (manufactured_id)
```
- `uq_comp_manufactured`

```sql
CREATE UNIQUE INDEX uq_comp_manufactured ON landscape.tbl_sales_comp_manufactured USING btree (comparable_id)
```

### `tbl_sales_comp_market_conditions`

- Columns: 20
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | market_id | bigint [64,0] | NO | nextval('tbl_sales_comp_market_conditions_market_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | as_of_date | date | YES |  |  |
| 4 | submarket_vacancy_rate | numeric [5,2] | YES |  |  |
| 5 | submarket_asking_rent | numeric [10,2] | YES |  |  |
| 6 | submarket_effective_rent | numeric [10,2] | YES |  |  |
| 7 | submarket_absorption_sf | numeric [15,2] | YES |  |  |
| 8 | submarket_inventory_sf | numeric [15,2] | YES |  |  |
| 9 | metro_vacancy_rate | numeric [5,2] | YES |  |  |
| 10 | metro_asking_rent | numeric [10,2] | YES |  |  |
| 11 | metro_cap_rate_avg | numeric [6,4] | YES |  |  |
| 12 | yoy_rent_growth | numeric [6,2] | YES |  |  |
| 13 | yoy_vacancy_change | numeric [6,2] | YES |  |  |
| 14 | under_construction_sf | numeric [15,2] | YES |  |  |
| 15 | planned_sf | numeric [15,2] | YES |  |  |
| 16 | unemployment_rate | numeric [5,2] | YES |  |  |
| 17 | job_growth_pct | numeric [6,2] | YES |  |  |
| 18 | population_growth_pct | numeric [6,2] | YES |  |  |
| 19 | source | character varying(100) | YES |  |  |
| 20 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_market_conditions_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_market_conditions_pkey | PRIMARY KEY | PRIMARY KEY (market_id) |
| uq_comp_market_conditions | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_market_conditions_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_market_comparable`

```sql
CREATE INDEX idx_comp_market_comparable ON landscape.tbl_sales_comp_market_conditions USING btree (comparable_id)
```
- `tbl_sales_comp_market_conditions_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_market_conditions_pkey ON landscape.tbl_sales_comp_market_conditions USING btree (market_id)
```
- `uq_comp_market_conditions`

```sql
CREATE UNIQUE INDEX uq_comp_market_conditions ON landscape.tbl_sales_comp_market_conditions USING btree (comparable_id)
```

### `tbl_sales_comp_office`

- Columns: 29
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | office_id | bigint [64,0] | NO | nextval('tbl_sales_comp_office_office_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | rentable_sf | numeric [12,2] | YES |  |  |
| 4 | usable_sf | numeric [12,2] | YES |  |  |
| 5 | loss_factor | numeric [5,2] | YES |  |  |
| 6 | floor_plate_sf | numeric [10,2] | YES |  |  |
| 7 | avg_base_rent_psf | numeric [10,2] | YES |  |  |
| 8 | expense_stop | numeric [10,2] | YES |  |  |
| 9 | expense_structure | character varying(50) | YES |  |  |
| 10 | avg_ti_psf | numeric [10,2] | YES |  |  |
| 11 | avg_free_rent_months | numeric [4,1] | YES |  |  |
| 12 | direct_vacancy_pct | numeric [5,2] | YES |  |  |
| 13 | sublease_vacancy_pct | numeric [5,2] | YES |  |  |
| 14 | total_vacancy_pct | numeric [5,2] | YES |  |  |
| 15 | walt_years | numeric [5,2] | YES |  |  |
| 16 | hvac_type | character varying(100) | YES |  |  |
| 17 | life_safety_system | character varying(100) | YES |  |  |
| 18 | backup_power | boolean | YES |  |  |
| 19 | fiber_providers | character varying(255) | YES |  |  |
| 20 | parking_ratio_per_1000 | numeric [6,2] | YES |  |  |
| 21 | reserved_spaces | integer [32,0] | YES |  |  |
| 22 | unreserved_spaces | integer [32,0] | YES |  |  |
| 23 | monthly_parking_rate | numeric [10,2] | YES |  |  |
| 24 | leed_certified | boolean | YES |  |  |
| 25 | leed_level | character varying(50) | YES |  |  |
| 26 | energy_star_score | integer [32,0] | YES |  |  |
| 27 | wired_score | character varying(50) | YES |  |  |
| 28 | created_at | timestamp with time zone | YES | now() |  |
| 29 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_office_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_office_pkey | PRIMARY KEY | PRIMARY KEY (office_id) |
| uq_comp_office | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_office_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_office_comparable`

```sql
CREATE INDEX idx_comp_office_comparable ON landscape.tbl_sales_comp_office USING btree (comparable_id)
```
- `tbl_sales_comp_office_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_office_pkey ON landscape.tbl_sales_comp_office USING btree (office_id)
```
- `uq_comp_office`

```sql
CREATE UNIQUE INDEX uq_comp_office ON landscape.tbl_sales_comp_office USING btree (comparable_id)
```

### `tbl_sales_comp_retail`

- Columns: 25
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | retail_id | bigint [64,0] | NO | nextval('tbl_sales_comp_retail_retail_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | center_type | character varying(100) | YES |  |  |
| 4 | anchor_tenant | character varying(255) | YES |  |  |
| 5 | shadow_anchor | character varying(255) | YES |  |  |
| 6 | anchor_sf | numeric [12,2] | YES |  |  |
| 7 | junior_anchor_sf | numeric [12,2] | YES |  |  |
| 8 | inline_sf | numeric [12,2] | YES |  |  |
| 9 | outparcel_count | integer [32,0] | YES |  |  |
| 10 | outparcel_sf | numeric [12,2] | YES |  |  |
| 11 | anchor_sales_psf | numeric [10,2] | YES |  |  |
| 12 | inline_sales_psf | numeric [10,2] | YES |  |  |
| 13 | total_sales_psf | numeric [10,2] | YES |  |  |
| 14 | avg_base_rent_psf | numeric [10,2] | YES |  |  |
| 15 | avg_cam_psf | numeric [10,2] | YES |  |  |
| 16 | avg_all_in_rent_psf | numeric [10,2] | YES |  |  |
| 17 | expense_structure | character varying(50) | YES |  |  |
| 18 | traffic_count | integer [32,0] | YES |  |  |
| 19 | traffic_count_source | character varying(100) | YES |  |  |
| 20 | signage_type | character varying(100) | YES |  |  |
| 21 | pylon_sign | boolean | YES |  |  |
| 22 | monument_sign | boolean | YES |  |  |
| 23 | freeway_visible | boolean | YES |  |  |
| 24 | created_at | timestamp with time zone | YES | now() |  |
| 25 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_retail_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_retail_pkey | PRIMARY KEY | PRIMARY KEY (retail_id) |
| uq_comp_retail | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_retail_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_retail_center_type`

```sql
CREATE INDEX idx_comp_retail_center_type ON landscape.tbl_sales_comp_retail USING btree (center_type)
```
- `idx_comp_retail_comparable`

```sql
CREATE INDEX idx_comp_retail_comparable ON landscape.tbl_sales_comp_retail USING btree (comparable_id)
```
- `tbl_sales_comp_retail_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_retail_pkey ON landscape.tbl_sales_comp_retail USING btree (retail_id)
```
- `uq_comp_retail`

```sql
CREATE UNIQUE INDEX uq_comp_retail ON landscape.tbl_sales_comp_retail USING btree (comparable_id)
```

### `tbl_sales_comp_self_storage`

- Columns: 25
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | storage_id | bigint [64,0] | NO | nextval('tbl_sales_comp_self_storage_storage_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | total_units | integer [32,0] | YES |  |  |
| 4 | climate_controlled_units | integer [32,0] | YES |  |  |
| 5 | non_climate_units | integer [32,0] | YES |  |  |
| 6 | climate_controlled_pct | numeric [5,2] | YES |  |  |
| 7 | total_net_rentable_sf | numeric [12,2] | YES |  |  |
| 8 | climate_controlled_sf | numeric [12,2] | YES |  |  |
| 9 | avg_unit_size_sf | numeric [8,2] | YES |  |  |
| 10 | physical_occupancy | numeric [5,2] | YES |  |  |
| 11 | economic_occupancy | numeric [5,2] | YES |  |  |
| 12 | avg_rent_psf | numeric [8,2] | YES |  |  |
| 13 | gross_potential_rent | numeric [15,2] | YES |  |  |
| 14 | drive_up_access_pct | numeric [5,2] | YES |  |  |
| 15 | elevator_served_pct | numeric [5,2] | YES |  |  |
| 16 | rv_boat_parking_spaces | integer [32,0] | YES |  |  |
| 17 | vehicle_storage_spaces | integer [32,0] | YES |  |  |
| 18 | management_type | character varying(50) | YES |  |  |
| 19 | brand_flag | character varying(100) | YES |  |  |
| 20 | third_party_managed | boolean | YES |  |  |
| 21 | expansion_potential | boolean | YES |  |  |
| 22 | expansion_units | integer [32,0] | YES |  |  |
| 23 | expansion_sf | numeric [12,2] | YES |  |  |
| 24 | created_at | timestamp with time zone | YES | now() |  |
| 25 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_self_storage_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_self_storage_pkey | PRIMARY KEY | PRIMARY KEY (storage_id) |
| uq_comp_self_storage | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_self_storage_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_self_storage_comparable`

```sql
CREATE INDEX idx_comp_self_storage_comparable ON landscape.tbl_sales_comp_self_storage USING btree (comparable_id)
```
- `tbl_sales_comp_self_storage_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_self_storage_pkey ON landscape.tbl_sales_comp_self_storage USING btree (storage_id)
```
- `uq_comp_self_storage`

```sql
CREATE UNIQUE INDEX uq_comp_self_storage ON landscape.tbl_sales_comp_self_storage USING btree (comparable_id)
```

### `tbl_sales_comp_specialty_housing`

- Columns: 25
- Constraints: 3
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | specialty_id | bigint [64,0] | NO | nextval('tbl_sales_comp_specialty_housing_specialty_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | housing_type | character varying(50) | NO |  |  |
| 4 | total_beds | integer [32,0] | YES |  |  |
| 5 | total_units | integer [32,0] | YES |  |  |
| 6 | avg_beds_per_unit | numeric [4,2] | YES |  |  |
| 7 | independent_living_units | integer [32,0] | YES |  |  |
| 8 | assisted_living_units | integer [32,0] | YES |  |  |
| 9 | memory_care_units | integer [32,0] | YES |  |  |
| 10 | skilled_nursing_beds | integer [32,0] | YES |  |  |
| 11 | license_type | character varying(100) | YES |  |  |
| 12 | affiliated_university | character varying(255) | YES |  |  |
| 13 | distance_to_campus_miles | numeric [6,2] | YES |  |  |
| 14 | by_the_bed_leasing | boolean | YES |  |  |
| 15 | furnished | boolean | YES |  |  |
| 16 | occupancy_rate | numeric [5,2] | YES |  |  |
| 17 | avg_monthly_rent | numeric [10,2] | YES |  |  |
| 18 | avg_daily_rate | numeric [10,2] | YES |  |  |
| 19 | revenue_per_bed | numeric [10,2] | YES |  |  |
| 20 | operator_name | character varying(255) | YES |  |  |
| 21 | third_party_managed | boolean | YES |  |  |
| 22 | medicaid_certified | boolean | YES |  |  |
| 23 | medicare_certified | boolean | YES |  |  |
| 24 | created_at | timestamp with time zone | YES | now() |  |
| 25 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_specialty_housing_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_specialty_housing_pkey | PRIMARY KEY | PRIMARY KEY (specialty_id) |
| uq_comp_specialty_housing | UNIQUE | UNIQUE (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_specialty_housing_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_specialty_comparable`

```sql
CREATE INDEX idx_comp_specialty_comparable ON landscape.tbl_sales_comp_specialty_housing USING btree (comparable_id)
```
- `idx_comp_specialty_type`

```sql
CREATE INDEX idx_comp_specialty_type ON landscape.tbl_sales_comp_specialty_housing USING btree (housing_type)
```
- `tbl_sales_comp_specialty_housing_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_specialty_housing_pkey ON landscape.tbl_sales_comp_specialty_housing USING btree (specialty_id)
```
- `uq_comp_specialty_housing`

```sql
CREATE UNIQUE INDEX uq_comp_specialty_housing ON landscape.tbl_sales_comp_specialty_housing USING btree (comparable_id)
```

### `tbl_sales_comp_storage_unit_mix`

- Columns: 13
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | unit_mix_id | bigint [64,0] | NO | nextval('tbl_sales_comp_storage_unit_mix_unit_mix_id_seq'::regclass) |  |
| 2 | storage_comp_id | bigint [64,0] | NO |  |  |
| 3 | unit_size_category | character varying(50) | YES |  |  |
| 4 | unit_width_ft | numeric [6,2] | YES |  |  |
| 5 | unit_depth_ft | numeric [6,2] | YES |  |  |
| 6 | unit_sf | numeric [8,2] | YES |  |  |
| 7 | unit_count | integer [32,0] | YES |  |  |
| 8 | climate_controlled | boolean | YES | false |  |
| 9 | drive_up_access | boolean | YES | false |  |
| 10 | asking_rent | numeric [10,2] | YES |  |  |
| 11 | effective_rent | numeric [10,2] | YES |  |  |
| 12 | occupancy_pct | numeric [5,2] | YES |  |  |
| 13 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_storage_unit_mix_storage_comp_id_fkey | FOREIGN KEY | FOREIGN KEY (storage_comp_id) REFERENCES tbl_sales_comp_self_storage(storage_id) ON DELETE CASCADE |
| tbl_sales_comp_storage_unit_mix_pkey | PRIMARY KEY | PRIMARY KEY (unit_mix_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_storage_unit_mix_storage_comp_id_fkey | storage_comp_id | tbl_sales_comp_self_storage.storage_id | NO ACTION | CASCADE |

#### Indexes

- `idx_storage_unit_mix_parent`

```sql
CREATE INDEX idx_storage_unit_mix_parent ON landscape.tbl_sales_comp_storage_unit_mix USING btree (storage_comp_id)
```
- `tbl_sales_comp_storage_unit_mix_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_storage_unit_mix_pkey ON landscape.tbl_sales_comp_storage_unit_mix USING btree (unit_mix_id)
```

### `tbl_sales_comp_tenants`

- Columns: 27
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tenant_id | bigint [64,0] | NO | nextval('tbl_sales_comp_tenants_tenant_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | tenant_name | character varying(255) | NO |  |  |
| 4 | tenant_type | character varying(50) | YES |  |  |
| 5 | is_anchor | boolean | YES | false |  |
| 6 | credit_rating | character varying(20) | YES |  |  |
| 7 | leased_sf | numeric [12,2] | YES |  |  |
| 8 | floor_number | character varying(50) | YES |  |  |
| 9 | suite_number | character varying(50) | YES |  |  |
| 10 | pct_of_building | numeric [5,2] | YES |  |  |
| 11 | lease_start_date | date | YES |  |  |
| 12 | lease_expiration_date | date | YES |  |  |
| 13 | lease_term_months | integer [32,0] | YES |  |  |
| 14 | lease_type | character varying(50) | YES |  |  |
| 15 | base_rent_psf | numeric [10,2] | YES |  |  |
| 16 | base_rent_annual | numeric [15,2] | YES |  |  |
| 17 | expense_stop | numeric [10,2] | YES |  |  |
| 18 | ti_allowance_psf | numeric [10,2] | YES |  |  |
| 19 | free_rent_months | integer [32,0] | YES |  |  |
| 20 | renewal_options | text | YES |  |  |
| 21 | expansion_options | text | YES |  |  |
| 22 | termination_options | text | YES |  |  |
| 23 | sales_psf | numeric [10,2] | YES |  |  |
| 24 | pct_rent_breakpoint | numeric [15,2] | YES |  |  |
| 25 | pct_rent_rate | numeric [5,2] | YES |  |  |
| 26 | created_at | timestamp with time zone | YES | now() |  |
| 27 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_tenants_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_tenants_pkey | PRIMARY KEY | PRIMARY KEY (tenant_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_tenants_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_tenants_anchor`

```sql
CREATE INDEX idx_comp_tenants_anchor ON landscape.tbl_sales_comp_tenants USING btree (is_anchor) WHERE (is_anchor = true)
```
- `idx_comp_tenants_comparable`

```sql
CREATE INDEX idx_comp_tenants_comparable ON landscape.tbl_sales_comp_tenants USING btree (comparable_id)
```
- `idx_comp_tenants_expiration`

```sql
CREATE INDEX idx_comp_tenants_expiration ON landscape.tbl_sales_comp_tenants USING btree (lease_expiration_date)
```
- `tbl_sales_comp_tenants_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_tenants_pkey ON landscape.tbl_sales_comp_tenants USING btree (tenant_id)
```

### `tbl_sales_comp_unit_mix`

- Columns: 25
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | unit_mix_id | bigint [64,0] | NO | nextval('tbl_sales_comp_unit_mix_unit_mix_id_seq'::regclass) |  |
| 2 | comparable_id | integer [32,0] | NO |  |  |
| 3 | bed_count | integer [32,0] | YES |  |  |
| 4 | bath_count | numeric [3,1] | YES |  |  |
| 5 | unit_type | character varying(50) | YES |  |  |
| 6 | unit_count | integer [32,0] | NO |  |  |
| 7 | unit_pct | numeric [5,2] | YES |  |  |
| 8 | avg_unit_sf | numeric [8,2] | YES |  |  |
| 9 | total_sf | numeric [12,2] | YES |  |  |
| 10 | asking_rent_min | numeric [10,2] | YES |  |  |
| 11 | asking_rent_max | numeric [10,2] | YES |  |  |
| 12 | asking_rent_per_sf_min | numeric [8,2] | YES |  |  |
| 13 | asking_rent_per_sf_max | numeric [8,2] | YES |  |  |
| 14 | effective_rent_min | numeric [10,2] | YES |  |  |
| 15 | effective_rent_max | numeric [10,2] | YES |  |  |
| 16 | effective_rent_per_sf_min | numeric [8,2] | YES |  |  |
| 17 | effective_rent_per_sf_max | numeric [8,2] | YES |  |  |
| 18 | vacant_units | integer [32,0] | YES | 0 |  |
| 19 | concession_pct | numeric [5,2] | YES |  |  |
| 20 | monthly_discount | numeric [10,2] | YES |  |  |
| 21 | one_time_concession | numeric [10,2] | YES |  |  |
| 22 | is_rent_regulated | boolean | YES | false |  |
| 23 | rent_type | character varying(50) | YES |  |  |
| 24 | created_at | timestamp with time zone | YES | now() |  |
| 25 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_sales_comp_unit_mix_comparable_id_fkey | FOREIGN KEY | FOREIGN KEY (comparable_id) REFERENCES tbl_sales_comparables(comparable_id) ON DELETE CASCADE |
| tbl_sales_comp_unit_mix_pkey | PRIMARY KEY | PRIMARY KEY (unit_mix_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comp_unit_mix_comparable_id_fkey | comparable_id | tbl_sales_comparables.comparable_id | NO ACTION | CASCADE |

#### Indexes

- `idx_comp_unit_mix_beds`

```sql
CREATE INDEX idx_comp_unit_mix_beds ON landscape.tbl_sales_comp_unit_mix USING btree (bed_count)
```
- `idx_comp_unit_mix_comparable`

```sql
CREATE INDEX idx_comp_unit_mix_comparable ON landscape.tbl_sales_comp_unit_mix USING btree (comparable_id)
```
- `tbl_sales_comp_unit_mix_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comp_unit_mix_pkey ON landscape.tbl_sales_comp_unit_mix USING btree (unit_mix_id)
```

### `tbl_sales_comparables`

- Columns: 124
- Constraints: 3
- Foreign keys: 1
- Indexes: 9
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | comparable_id | integer [32,0] | NO | nextval('tbl_sales_comparables_comparable_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | comp_number | integer [32,0] | YES |  | Comparable number (1, 2, 3, etc.) for sorting |
| 4 | property_name | character varying(255) | YES |  |  |
| 5 | address | character varying(255) | YES |  |  |
| 6 | city | character varying(100) | YES |  |  |
| 7 | state | character varying(2) | YES |  |  |
| 8 | zip | character varying(10) | YES |  |  |
| 9 | sale_date | date | YES |  |  |
| 10 | sale_price | numeric [15,2] | YES |  |  |
| 11 | price_per_unit | numeric [10,2] | YES |  |  |
| 12 | price_per_sf | numeric [10,2] | YES |  |  |
| 13 | year_built | integer [32,0] | YES |  |  |
| 14 | units | numeric [10,2] | YES |  |  |
| 15 | building_sf | character varying(255) | YES |  |  |
| 16 | cap_rate | character varying(255) | YES |  | Capitalization rate (0.01-0.15 representing 1%-15%) |
| 17 | grm | numeric [6,2] | YES |  |  |
| 18 | distance_from_subject | character varying(50) | YES |  |  |
| 19 | unit_mix | jsonb | YES |  | JSON object with unit type distribution (e.g., {"studio": {"count": 10, "percentage": 0.10}}) |
| 20 | notes | text | YES |  |  |
| 21 | created_at | timestamp without time zone | YES | now() |  |
| 22 | updated_at | timestamp without time zone | YES | now() |  |
| 23 | latitude | numeric [10,7] | YES |  |  |
| 24 | longitude | numeric [10,7] | YES |  |  |
| 25 | unit_count | integer [32,0] | YES |  |  |
| 26 | costar_comp_id | character varying(50) | YES |  |  |
| 27 | price_status | character varying(50) | YES |  |  |
| 28 | comp_status | character varying(50) | YES |  |  |
| 29 | sale_type | character varying(50) | YES |  |  |
| 30 | sale_conditions | character varying(100) | YES |  |  |
| 31 | hold_period_months | integer [32,0] | YES |  |  |
| 32 | days_on_market | integer [32,0] | YES |  |  |
| 33 | asking_price | numeric [15,2] | YES |  |  |
| 34 | transfer_tax | numeric [12,2] | YES |  |  |
| 35 | document_number | character varying(50) | YES |  |  |
| 36 | escrow_length_days | integer [32,0] | YES |  |  |
| 37 | percent_leased_at_sale | numeric [5,2] | YES |  |  |
| 38 | actual_cap_rate | numeric [6,4] | YES |  |  |
| 39 | pro_forma_cap_rate | numeric [6,4] | YES |  |  |
| 40 | gim | numeric [8,2] | YES |  |  |
| 41 | noi_at_sale | numeric [15,2] | YES |  |  |
| 42 | gross_income_at_sale | numeric [15,2] | YES |  |  |
| 43 | financing_type | character varying(50) | YES |  |  |
| 44 | financing_lender | character varying(255) | YES |  |  |
| 45 | financing_amount | numeric [15,2] | YES |  |  |
| 46 | financing_rate | numeric [6,4] | YES |  |  |
| 47 | financing_term_months | integer [32,0] | YES |  |  |
| 48 | loan_to_value | numeric [5,2] | YES |  |  |
| 49 | assumed_financing | boolean | YES | false |  |
| 50 | recorded_buyer | character varying(255) | YES |  |  |
| 51 | true_buyer | character varying(255) | YES |  |  |
| 52 | buyer_contact | character varying(500) | YES |  |  |
| 53 | buyer_type | character varying(50) | YES |  |  |
| 54 | recorded_seller | character varying(255) | YES |  |  |
| 55 | true_seller | character varying(255) | YES |  |  |
| 56 | seller_contact | character varying(500) | YES |  |  |
| 57 | seller_type | character varying(50) | YES |  |  |
| 58 | buyer_broker_company | character varying(255) | YES |  |  |
| 59 | buyer_broker_name | character varying(255) | YES |  |  |
| 60 | buyer_broker_phone | character varying(50) | YES |  |  |
| 61 | listing_broker_company | character varying(255) | YES |  |  |
| 62 | listing_broker_name | character varying(255) | YES |  |  |
| 63 | listing_broker_phone | character varying(50) | YES |  |  |
| 64 | no_broker_deal | boolean | YES | false |  |
| 65 | property_type | character varying(50) | YES |  |  |
| 66 | property_subtype | character varying(100) | YES |  |  |
| 67 | building_class | character varying(10) | YES |  |  |
| 68 | costar_star_rating | numeric [2,1] | YES |  |  |
| 69 | location_type | character varying(50) | YES |  |  |
| 70 | num_buildings | integer [32,0] | YES |  |  |
| 71 | num_floors | integer [32,0] | YES |  |  |
| 72 | typical_floor_sf | numeric [12,2] | YES |  |  |
| 73 | tenancy_type | character varying(50) | YES |  |  |
| 74 | owner_occupied | boolean | YES |  |  |
| 75 | avg_unit_size_sf | numeric [10,2] | YES |  |  |
| 76 | units_per_acre | numeric [8,2] | YES |  |  |
| 77 | parking_spaces | integer [32,0] | YES |  |  |
| 78 | parking_ratio | numeric [6,2] | YES |  |  |
| 79 | parking_type | character varying(100) | YES |  |  |
| 80 | elevators | integer [32,0] | YES |  |  |
| 81 | zoning | character varying(100) | YES |  |  |
| 82 | construction_type | character varying(100) | YES |  |  |
| 83 | roof_type | character varying(100) | YES |  |  |
| 84 | hvac_type | character varying(100) | YES |  |  |
| 85 | sprinklered | boolean | YES |  |  |
| 86 | land_area_sf | numeric [15,2] | YES |  |  |
| 87 | land_area_acres | numeric [12,4] | YES |  |  |
| 88 | far_allowed | numeric [6,2] | YES |  |  |
| 89 | far_actual | numeric [6,2] | YES |  |  |
| 90 | num_parcels | integer [32,0] | YES |  |  |
| 91 | topography | character varying(100) | YES |  |  |
| 92 | utilities_available | character varying(255) | YES |  |  |
| 93 | entitlements | character varying(500) | YES |  |  |
| 94 | environmental_issues | text | YES |  |  |
| 95 | total_assessed_value | numeric [15,2] | YES |  |  |
| 96 | land_assessed_value | numeric [15,2] | YES |  |  |
| 97 | improved_assessed_value | numeric [15,2] | YES |  |  |
| 98 | assessment_year | integer [32,0] | YES |  |  |
| 99 | tax_amount | numeric [12,2] | YES |  |  |
| 100 | tax_per_unit | numeric [10,2] | YES |  |  |
| 101 | percent_improved | numeric [5,2] | YES |  |  |
| 102 | metro_market | character varying(100) | YES |  |  |
| 103 | submarket | character varying(100) | YES |  |  |
| 104 | county | character varying(100) | YES |  |  |
| 105 | cbsa | character varying(150) | YES |  |  |
| 106 | csa | character varying(150) | YES |  |  |
| 107 | dma | character varying(150) | YES |  |  |
| 108 | walk_score | integer [32,0] | YES |  |  |
| 109 | transit_score | integer [32,0] | YES |  |  |
| 110 | bike_score | integer [32,0] | YES |  |  |
| 111 | data_source | character varying(50) | YES |  |  |
| 112 | verification_status | character varying(50) | YES |  |  |
| 113 | verification_source | character varying(255) | YES |  |  |
| 114 | verification_date | date | YES |  |  |
| 115 | transaction_notes | text | YES |  |  |
| 116 | internal_notes | text | YES |  |  |
| 117 | is_portfolio_sale | boolean | YES | false |  |
| 118 | portfolio_name | character varying(255) | YES |  |  |
| 119 | portfolio_property_count | integer [32,0] | YES |  |  |
| 120 | price_allocation_method | character varying(50) | YES |  |  |
| 121 | allocated_price | numeric [15,2] | YES |  |  |
| 122 | site_amenities | jsonb | YES |  |  |
| 123 | extra_data | jsonb | YES |  |  |
| 124 | raw_import_data | jsonb | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| check_price_per_unit | CHECK | CHECK (((price_per_unit IS NULL) OR (price_per_unit > (100000)::numeric))) |
| tbl_sales_comparables_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_sales_comparables_pkey | PRIMARY KEY | PRIMARY KEY (comparable_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_sales_comparables_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_sales_comp_building_class`

```sql
CREATE INDEX idx_sales_comp_building_class ON landscape.tbl_sales_comparables USING btree (building_class)
```
- `idx_sales_comp_costar_id`

```sql
CREATE INDEX idx_sales_comp_costar_id ON landscape.tbl_sales_comparables USING btree (costar_comp_id)
```
- `idx_sales_comp_location`

```sql
CREATE INDEX idx_sales_comp_location ON landscape.tbl_sales_comparables USING btree (latitude, longitude)
```
- `idx_sales_comp_property_type`

```sql
CREATE INDEX idx_sales_comp_property_type ON landscape.tbl_sales_comparables USING btree (property_type)
```
- `idx_sales_comp_sale_date`

```sql
CREATE INDEX idx_sales_comp_sale_date ON landscape.tbl_sales_comparables USING btree (sale_date)
```
- `idx_sales_comp_submarket`

```sql
CREATE INDEX idx_sales_comp_submarket ON landscape.tbl_sales_comparables USING btree (submarket)
```
- `idx_sales_comparables_project`

```sql
CREATE INDEX idx_sales_comparables_project ON landscape.tbl_sales_comparables USING btree (project_id)
```
- `idx_sales_comparables_sale_date`

```sql
CREATE INDEX idx_sales_comparables_sale_date ON landscape.tbl_sales_comparables USING btree (sale_date DESC)
```
- `tbl_sales_comparables_pkey`

```sql
CREATE UNIQUE INDEX tbl_sales_comparables_pkey ON landscape.tbl_sales_comparables USING btree (comparable_id)
```

#### Triggers

- `update_sales_comparables_updated_at`

```sql
CREATE TRIGGER update_sales_comparables_updated_at BEFORE UPDATE ON landscape.tbl_sales_comparables FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_scenario`

- Columns: 19
- Constraints: 6
- Foreign keys: 3
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | scenario_id | integer [32,0] | NO | nextval('tbl_scenario_scenario_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | scenario_name | character varying(100) | NO |  |  |
| 4 | scenario_type | character varying(20) | NO | 'custom'::character varying |  |
| 5 | scenario_code | character varying(50) | YES |  |  |
| 6 | is_active | boolean | YES | false | Only one scenario can be active per project at a time - drives current UI display |
| 7 | is_locked | boolean | YES | false | Locked scenarios preserve historical analysis - cannot be edited or deleted |
| 8 | display_order | integer [32,0] | YES | 0 |  |
| 9 | description | text | YES |  |  |
| 10 | color_hex | character varying(7) | YES | '#6B7280'::character varying |  |
| 11 | variance_method | character varying(20) | YES |  |  |
| 12 | revenue_variance_pct | numeric [5,2] | YES |  |  |
| 13 | cost_variance_pct | numeric [5,2] | YES |  |  |
| 14 | absorption_variance_pct | numeric [5,2] | YES |  |  |
| 15 | start_date_offset_months | integer [32,0] | YES | 0 |  |
| 16 | created_by | integer [32,0] | YES |  |  |
| 17 | created_at | timestamp with time zone | YES | now() |  |
| 18 | updated_at | timestamp with time zone | YES | now() |  |
| 19 | cloned_from_scenario_id | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| valid_scenario_type | CHECK | CHECK (((scenario_type)::text = ANY ((ARRAY['base'::character varying, 'optimistic'::character varying, 'conservative'::character varying, 'stress'::character varying, 'custom'::character varying])::text[]))) |
| tbl_scenario_cloned_from_scenario_id_fkey | FOREIGN KEY | FOREIGN KEY (cloned_from_scenario_id) REFERENCES tbl_scenario(scenario_id) |
| tbl_scenario_created_by_fkey | FOREIGN KEY | FOREIGN KEY (created_by) REFERENCES auth_user(id) |
| tbl_scenario_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_scenario_pkey | PRIMARY KEY | PRIMARY KEY (scenario_id) |
| tbl_scenario_scenario_code_key | UNIQUE | UNIQUE (scenario_code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_scenario_cloned_from_scenario_id_fkey | cloned_from_scenario_id | tbl_scenario.scenario_id | NO ACTION | NO ACTION |
| tbl_scenario_created_by_fkey | created_by | auth_user.id | NO ACTION | NO ACTION |
| tbl_scenario_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_scenario_active`

```sql
CREATE INDEX idx_scenario_active ON landscape.tbl_scenario USING btree (project_id, is_active) WHERE (is_active = true)
```
- `idx_scenario_display_order`

```sql
CREATE INDEX idx_scenario_display_order ON landscape.tbl_scenario USING btree (project_id, display_order)
```
- `idx_scenario_project`

```sql
CREATE INDEX idx_scenario_project ON landscape.tbl_scenario USING btree (project_id)
```
- `tbl_scenario_pkey`

```sql
CREATE UNIQUE INDEX tbl_scenario_pkey ON landscape.tbl_scenario USING btree (scenario_id)
```
- `tbl_scenario_scenario_code_key`

```sql
CREATE UNIQUE INDEX tbl_scenario_scenario_code_key ON landscape.tbl_scenario USING btree (scenario_code)
```

#### Triggers

- `trg_scenario_activate`

```sql
CREATE TRIGGER trg_scenario_activate BEFORE UPDATE OF is_active ON landscape.tbl_scenario FOR EACH ROW WHEN ((new.is_active = true)) EXECUTE FUNCTION set_active_scenario()
```

### `tbl_scenario_comparison`

- Columns: 9
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | comparison_id | integer [32,0] | NO | nextval('tbl_scenario_comparison_comparison_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | comparison_name | character varying(100) | NO |  |  |
| 4 | scenario_ids | ARRAY | NO |  |  |
| 5 | comparison_type | character varying(20) | YES | 'side_by_side'::character varying |  |
| 6 | scenario_probabilities | ARRAY | YES |  |  |
| 7 | comparison_results | jsonb | YES |  |  |
| 8 | created_at | timestamp with time zone | YES | now() |  |
| 9 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| valid_comparison_type | CHECK | CHECK (((comparison_type)::text = ANY ((ARRAY['side_by_side'::character varying, 'variance_from_base'::character varying, 'probability_weighted'::character varying])::text[]))) |
| tbl_scenario_comparison_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_scenario_comparison_pkey | PRIMARY KEY | PRIMARY KEY (comparison_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_scenario_comparison_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_scenario_comparison_project`

```sql
CREATE INDEX idx_scenario_comparison_project ON landscape.tbl_scenario_comparison USING btree (project_id)
```
- `tbl_scenario_comparison_pkey`

```sql
CREATE UNIQUE INDEX tbl_scenario_comparison_pkey ON landscape.tbl_scenario_comparison USING btree (comparison_id)
```

### `tbl_security_deposit`

- Columns: 29
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | deposit_id | integer [32,0] | NO | nextval('tbl_security_deposit_deposit_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | deposit_type | character varying(50) | YES |  |  |
| 4 | deposit_amount | numeric [12,2] | YES |  |  |
| 5 | deposit_months | numeric [4,1] | YES |  |  |
| 6 | loc_issuing_bank | character varying(255) | YES |  |  |
| 7 | loc_expiration_date | date | YES |  |  |
| 8 | loc_auto_renew | boolean | YES | false |  |
| 9 | loc_renewal_notice_days | integer [32,0] | YES |  |  |
| 10 | loc_beneficiary | character varying(255) | YES |  |  |
| 11 | guarantor_name | character varying(255) | YES |  |  |
| 12 | guarantor_relationship | character varying(100) | YES |  |  |
| 13 | guarantee_type | character varying(50) | YES |  |  |
| 14 | guarantee_cap | numeric [12,2] | YES |  |  |
| 15 | guarantee_burn_down | boolean | YES | false |  |
| 16 | burn_down_schedule | text | YES |  |  |
| 17 | deposit_reduction_allowed | boolean | YES | false |  |
| 18 | reduction_trigger | character varying(100) | YES |  |  |
| 19 | reduction_schedule | text | YES |  |  |
| 20 | interest_bearing | boolean | YES | false |  |
| 21 | interest_rate_pct | numeric [5,3] | YES |  |  |
| 22 | interest_payment_frequency | character varying(20) | YES |  |  |
| 23 | deposit_received | boolean | YES | false |  |
| 24 | deposit_received_date | date | YES |  |  |
| 25 | deposit_account_number | character varying(100) | YES |  |  |
| 26 | current_deposit_balance | numeric [12,2] | YES |  |  |
| 27 | notes | text | YES |  |  |
| 28 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 29 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_security_deposit_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_security_deposit_pkey | PRIMARY KEY | PRIMARY KEY (deposit_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_security_deposit_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_deposit_lease`

```sql
CREATE INDEX idx_deposit_lease ON landscape.tbl_security_deposit USING btree (lease_id)
```
- `idx_deposit_loc_expiry`

```sql
CREATE INDEX idx_deposit_loc_expiry ON landscape.tbl_security_deposit USING btree (loc_expiration_date) WHERE ((deposit_type)::text = 'letter-of-credit'::text)
```
- `tbl_security_deposit_pkey`

```sql
CREATE UNIQUE INDEX tbl_security_deposit_pkey ON landscape.tbl_security_deposit USING btree (deposit_id)
```

### `tbl_space`

- Columns: 18
- Constraints: 2
- Foreign keys: 1
- Indexes: 4
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | space_id | integer [32,0] | NO | nextval('tbl_space_space_id_seq'::regclass) |  |
| 2 | income_property_id | integer [32,0] | YES |  |  |
| 3 | space_number | character varying(50) | YES |  |  |
| 4 | floor_number | integer [32,0] | YES |  |  |
| 5 | usable_sf | numeric [10,2] | YES |  |  |
| 6 | rentable_sf | numeric [10,2] | YES |  |  |
| 7 | space_type | character varying(50) | YES |  |  |
| 8 | frontage_ft | numeric [8,2] | YES |  |  |
| 9 | ceiling_height_ft | numeric [6,2] | YES |  |  |
| 10 | number_of_offices | integer [32,0] | YES |  |  |
| 11 | number_of_conference_rooms | integer [32,0] | YES |  |  |
| 12 | has_kitchenette | boolean | YES | false |  |
| 13 | has_private_restroom | boolean | YES | false |  |
| 14 | space_status | character varying(50) | YES |  |  |
| 15 | available_date | date | YES |  |  |
| 16 | created_at | timestamp without time zone | YES | now() |  |
| 17 | updated_at | timestamp without time zone | YES | now() |  |
| 18 | space_type_code | character varying(10) | YES | 'CRE'::character varying |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_space_cre_property_id_fkey | FOREIGN KEY | FOREIGN KEY (income_property_id) REFERENCES tbl_income_property(income_property_id) |
| tbl_cre_space_pkey | PRIMARY KEY | PRIMARY KEY (space_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_cre_space_cre_property_id_fkey | income_property_id | tbl_income_property.income_property_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_cre_space_property_id`

```sql
CREATE INDEX idx_cre_space_property_id ON landscape.tbl_space USING btree (income_property_id)
```
- `idx_cre_space_status`

```sql
CREATE INDEX idx_cre_space_status ON landscape.tbl_space USING btree (space_status)
```
- `idx_space_income_property`

```sql
CREATE INDEX idx_space_income_property ON landscape.tbl_space USING btree (income_property_id)
```
- `tbl_cre_space_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_space_pkey ON landscape.tbl_space USING btree (space_id)
```

### `tbl_space_ind_ext`

- Columns: 17
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | space_id | integer [32,0] | NO |  |  |
| 2 | warehouse_sf | numeric [12,2] | YES |  |  |
| 3 | office_sf | numeric [10,2] | YES |  |  |
| 4 | mezzanine_sf | numeric [10,2] | YES |  |  |
| 5 | outdoor_storage_sf | numeric [10,2] | YES |  |  |
| 6 | office_finish_level | character varying(50) | YES |  |  |
| 7 | office_ratio_pct | numeric [5,2] | YES |  |  |
| 8 | dedicated_docks | integer [32,0] | YES | 0 |  |
| 9 | shared_dock_access | boolean | YES | false |  |
| 10 | dedicated_electrical | boolean | YES | false |  |
| 11 | electrical_amps | integer [32,0] | YES |  |  |
| 12 | rack_system | boolean | YES | false |  |
| 13 | rack_value | numeric [12,2] | YES |  |  |
| 14 | crane_system | boolean | YES | false |  |
| 15 | crane_capacity_tons | numeric [8,2] | YES |  |  |
| 16 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 17 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_space_ind_ext_space_id_fkey | FOREIGN KEY | FOREIGN KEY (space_id) REFERENCES tbl_space(space_id) ON DELETE CASCADE |
| tbl_space_ind_ext_pkey | PRIMARY KEY | PRIMARY KEY (space_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_space_ind_ext_space_id_fkey | space_id | tbl_space.space_id | NO ACTION | CASCADE |

#### Indexes

- `idx_space_ind_warehouse_sf`

```sql
CREATE INDEX idx_space_ind_warehouse_sf ON landscape.tbl_space_ind_ext USING btree (warehouse_sf)
```
- `tbl_space_ind_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_space_ind_ext_pkey ON landscape.tbl_space_ind_ext USING btree (space_id)
```

### `tbl_space_mf_ext`

- Columns: 28
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | space_id | integer [32,0] | NO |  |  |
| 2 | unit_type | character varying(50) | YES |  |  |
| 3 | bedrooms | integer [32,0] | YES |  |  |
| 4 | bathrooms | numeric [3,1] | YES |  |  |
| 5 | half_baths | integer [32,0] | YES | 0 |  |
| 6 | has_washer_dryer | boolean | YES | false |  |
| 7 | washer_dryer_type | character varying(20) | YES |  |  |
| 8 | has_dishwasher | boolean | YES | false |  |
| 9 | has_fireplace | boolean | YES | false |  |
| 10 | has_balcony | boolean | YES | false |  |
| 11 | has_patio | boolean | YES | false |  |
| 12 | balcony_sf | numeric [8,2] | YES |  |  |
| 13 | floor_type | character varying(50) | YES |  |  |
| 14 | countertop_type | character varying(50) | YES |  |  |
| 15 | cabinet_type | character varying(50) | YES |  |  |
| 16 | appliance_package | character varying(50) | YES |  |  |
| 17 | view_type | character varying(50) | YES |  |  |
| 18 | floor_premium_pct | numeric [5,2] | YES |  |  |
| 19 | corner_unit | boolean | YES | false |  |
| 20 | market_rent | numeric [10,2] | YES |  |  |
| 21 | effective_rent | numeric [10,2] | YES |  |  |
| 22 | loss_to_lease | numeric [10,2] | YES |  |  |
| 23 | concession_value | numeric [10,2] | YES |  |  |
| 24 | renovation_status | character varying(50) | YES |  |  |
| 25 | last_renovation_date | date | YES |  |  |
| 26 | renovation_cost | numeric [12,2] | YES |  |  |
| 27 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 28 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_space_mf_ext_space_id_fkey | FOREIGN KEY | FOREIGN KEY (space_id) REFERENCES tbl_space(space_id) ON DELETE CASCADE |
| tbl_space_mf_ext_pkey | PRIMARY KEY | PRIMARY KEY (space_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_space_mf_ext_space_id_fkey | space_id | tbl_space.space_id | NO ACTION | CASCADE |

#### Indexes

- `idx_space_mf_market_rent`

```sql
CREATE INDEX idx_space_mf_market_rent ON landscape.tbl_space_mf_ext USING btree (market_rent)
```
- `idx_space_mf_unit_type`

```sql
CREATE INDEX idx_space_mf_unit_type ON landscape.tbl_space_mf_ext USING btree (unit_type)
```
- `tbl_space_mf_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_space_mf_ext_pkey ON landscape.tbl_space_mf_ext USING btree (space_id)
```

### `tbl_space_ret_ext`

- Columns: 22
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | space_id | integer [32,0] | NO |  |  |
| 2 | retail_space_type | character varying(50) | YES |  |  |
| 3 | tenant_category | character varying(50) | YES |  |  |
| 4 | frontage_ft | numeric [8,2] | YES |  |  |
| 5 | depth_ft | numeric [8,2] | YES |  |  |
| 6 | storefront_ft | numeric [8,2] | YES |  |  |
| 7 | corner_location | boolean | YES | false |  |
| 8 | end_cap | boolean | YES | false |  |
| 9 | grease_trap | boolean | YES | false |  |
| 10 | hood_system | boolean | YES | false |  |
| 11 | walk_in_cooler | boolean | YES | false |  |
| 12 | drive_thru | boolean | YES | false |  |
| 13 | patio_sf | numeric [8,2] | YES |  |  |
| 14 | visibility_score | integer [32,0] | YES |  |  |
| 15 | highway_frontage | boolean | YES | false |  |
| 16 | main_entrance_proximity | boolean | YES | false |  |
| 17 | reported_sales | numeric [14,2] | YES |  |  |
| 18 | sales_reporting_date | date | YES |  |  |
| 19 | sales_psf | numeric [10,2] | YES |  |  |
| 20 | breakpoint_achieved | boolean | YES | false |  |
| 21 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 22 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_space_ret_ext_space_id_fkey | FOREIGN KEY | FOREIGN KEY (space_id) REFERENCES tbl_space(space_id) ON DELETE CASCADE |
| tbl_space_ret_ext_pkey | PRIMARY KEY | PRIMARY KEY (space_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_space_ret_ext_space_id_fkey | space_id | tbl_space.space_id | NO ACTION | CASCADE |

#### Indexes

- `idx_space_ret_type`

```sql
CREATE INDEX idx_space_ret_type ON landscape.tbl_space_ret_ext USING btree (retail_space_type)
```
- `tbl_space_ret_ext_pkey`

```sql
CREATE UNIQUE INDEX tbl_space_ret_ext_pkey ON landscape.tbl_space_ret_ext USING btree (space_id)
```

### `tbl_system_picklist`

- Columns: 10
- Constraints: 3
- Foreign keys: 1
- Indexes: 5
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | picklist_id | bigint [64,0] | NO | nextval('tbl_system_picklist_picklist_id_seq'::regclass) |  |
| 2 | picklist_type | character varying(50) | NO |  | Category: PHASE_STATUS, PROPERTY_TYPE, PROPERTY_SUBTYPE, etc. |
| 3 | code | character varying(50) | NO |  |  |
| 4 | name | character varying(100) | NO |  |  |
| 5 | description | text | YES |  |  |
| 6 | parent_id | bigint [64,0] | YES |  | For cascading dropdowns (e.g., subtype references parent type) |
| 7 | sort_order | integer [32,0] | YES | 0 |  |
| 8 | is_active | boolean | YES | true |  |
| 9 | created_at | timestamp with time zone | YES | now() |  |
| 10 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_system_picklist_parent_id_fkey | FOREIGN KEY | FOREIGN KEY (parent_id) REFERENCES tbl_system_picklist(picklist_id) |
| tbl_system_picklist_pkey | PRIMARY KEY | PRIMARY KEY (picklist_id) |
| tbl_system_picklist_picklist_type_code_key | UNIQUE | UNIQUE (picklist_type, code) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_system_picklist_parent_id_fkey | parent_id | tbl_system_picklist.picklist_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_picklist_active`

```sql
CREATE INDEX idx_picklist_active ON landscape.tbl_system_picklist USING btree (is_active)
```
- `idx_picklist_parent`

```sql
CREATE INDEX idx_picklist_parent ON landscape.tbl_system_picklist USING btree (parent_id)
```
- `idx_picklist_type`

```sql
CREATE INDEX idx_picklist_type ON landscape.tbl_system_picklist USING btree (picklist_type)
```
- `tbl_system_picklist_picklist_type_code_key`

```sql
CREATE UNIQUE INDEX tbl_system_picklist_picklist_type_code_key ON landscape.tbl_system_picklist USING btree (picklist_type, code)
```
- `tbl_system_picklist_pkey`

```sql
CREATE UNIQUE INDEX tbl_system_picklist_pkey ON landscape.tbl_system_picklist USING btree (picklist_id)
```

#### Triggers

- `update_system_picklist_timestamp`

```sql
CREATE TRIGGER update_system_picklist_timestamp BEFORE UPDATE ON landscape.tbl_system_picklist FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_template_column_config`

- Columns: 15
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | template_column_id | bigint [64,0] | NO | nextval('tbl_template_column_config_template_column_id_seq'::regclass) |  |
| 2 | template_id | bigint [64,0] | NO |  |  |
| 3 | column_name | character varying(100) | NO |  |  |
| 4 | column_label | character varying(100) | NO |  |  |
| 5 | column_type | character varying(20) | NO |  |  |
| 6 | data_type | character varying(50) | YES |  |  |
| 7 | container_level | integer [32,0] | YES |  |  |
| 8 | display_order | integer [32,0] | NO | 0 |  |
| 9 | is_required | boolean | YES | false |  |
| 10 | data_source_table | character varying(100) | YES |  |  |
| 11 | data_source_value_col | character varying(50) | YES |  |  |
| 12 | data_source_label_col | character varying(50) | YES |  |  |
| 13 | parent_column_name | character varying(50) | YES |  | Used for cascading dropdowns - references another column that filters this one |
| 14 | junction_table | character varying(100) | YES |  | For many-to-many relationships like type_lot_product |
| 15 | created_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_template_column_config_column_type_check | CHECK | CHECK (((column_type)::text = ANY ((ARRAY['hierarchy'::character varying, 'data'::character varying])::text[]))) |
| tbl_template_column_config_template_id_fkey | FOREIGN KEY | FOREIGN KEY (template_id) REFERENCES tbl_property_use_template(template_id) ON DELETE CASCADE |
| tbl_template_column_config_pkey | PRIMARY KEY | PRIMARY KEY (template_column_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_template_column_config_template_id_fkey | template_id | tbl_property_use_template.template_id | NO ACTION | CASCADE |

#### Indexes

- `idx_template_column_template`

```sql
CREATE INDEX idx_template_column_template ON landscape.tbl_template_column_config USING btree (template_id, display_order)
```
- `tbl_template_column_config_pkey`

```sql
CREATE UNIQUE INDEX tbl_template_column_config_pkey ON landscape.tbl_template_column_config USING btree (template_column_id)
```

### `tbl_tenant`

- Columns: 20
- Constraints: 1
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tenant_id | integer [32,0] | NO | nextval('tbl_tenant_tenant_id_seq'::regclass) |  |
| 2 | tenant_name | character varying(200) | NO |  |  |
| 3 | tenant_legal_name | character varying(200) | YES |  |  |
| 4 | dba_name | character varying(200) | YES |  |  |
| 5 | industry | character varying(100) | YES |  |  |
| 6 | naics_code | character varying(10) | YES |  |  |
| 7 | business_type | character varying(50) | YES |  |  |
| 8 | credit_rating | character varying(20) | YES |  |  |
| 9 | creditworthiness | character varying(50) | YES |  |  |
| 10 | dun_bradstreet_number | character varying(20) | YES |  |  |
| 11 | annual_revenue | numeric [15,2] | YES |  |  |
| 12 | years_in_business | integer [32,0] | YES |  |  |
| 13 | contact_name | character varying(100) | YES |  |  |
| 14 | contact_title | character varying(100) | YES |  |  |
| 15 | email | character varying(100) | YES |  |  |
| 16 | phone | character varying(20) | YES |  |  |
| 17 | guarantor_name | character varying(200) | YES |  |  |
| 18 | guarantor_type | character varying(50) | YES |  |  |
| 19 | created_at | timestamp without time zone | YES | now() |  |
| 20 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_cre_tenant_pkey | PRIMARY KEY | PRIMARY KEY (tenant_id) |

#### Indexes

- `idx_cre_tenant_credit`

```sql
CREATE INDEX idx_cre_tenant_credit ON landscape.tbl_tenant USING btree (creditworthiness)
```
- `idx_cre_tenant_name`

```sql
CREATE INDEX idx_cre_tenant_name ON landscape.tbl_tenant USING btree (tenant_name)
```
- `tbl_cre_tenant_pkey`

```sql
CREATE UNIQUE INDEX tbl_cre_tenant_pkey ON landscape.tbl_tenant USING btree (tenant_id)
```

### `tbl_tenant_improvement`

- Columns: 10
- Constraints: 3
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tenant_improvement_id | integer [32,0] | NO |  |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | allowance_psf | numeric [10,2] | YES |  |  |
| 4 | allowance_total | numeric [15,2] | YES |  |  |
| 5 | actual_cost | numeric [15,2] | YES |  |  |
| 6 | landlord_contribution | numeric [15,2] | YES |  |  |
| 7 | reimbursement_structure | character varying(50) | YES | 'Upfront'::character varying | Upfront, Amortized, or Blend |
| 8 | amortization_months | integer [32,0] | YES |  |  |
| 9 | created_at | timestamp with time zone | YES | now() |  |
| 10 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_tenant_improvement_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_tenant_improvement_pkey | PRIMARY KEY | PRIMARY KEY (tenant_improvement_id) |
| uq_ti_lease | UNIQUE | UNIQUE (lease_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_tenant_improvement_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_ti_lease`

```sql
CREATE INDEX idx_ti_lease ON landscape.tbl_tenant_improvement USING btree (lease_id)
```
- `tbl_tenant_improvement_pkey`

```sql
CREATE UNIQUE INDEX tbl_tenant_improvement_pkey ON landscape.tbl_tenant_improvement USING btree (tenant_improvement_id)
```
- `uq_ti_lease`

```sql
CREATE UNIQUE INDEX uq_ti_lease ON landscape.tbl_tenant_improvement USING btree (lease_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_tenant_improvement FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_termination_option`

- Columns: 25
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | termination_option_id | integer [32,0] | NO | nextval('tbl_termination_option_termination_option_id_seq'::regclass) |  |
| 2 | lease_id | integer [32,0] | NO |  |  |
| 3 | termination_type | character varying(50) | YES |  |  |
| 4 | earliest_termination_date | date | YES |  |  |
| 5 | termination_window_start | date | YES |  |  |
| 6 | termination_window_end | date | YES |  |  |
| 7 | notice_period_months | integer [32,0] | YES |  |  |
| 8 | notice_deadline | date | YES |  |  |
| 9 | termination_fee_type | character varying(50) | YES |  |  |
| 10 | termination_fee_flat | numeric [12,2] | YES |  |  |
| 11 | termination_fee_months_rent | integer [32,0] | YES |  |  |
| 12 | unamortized_ti_included | boolean | YES | false |  |
| 13 | unamortized_lc_included | boolean | YES | false |  |
| 14 | termination_fee_formula | text | YES |  |  |
| 15 | estimated_termination_fee | numeric [12,2] | YES |  |  |
| 16 | termination_conditions | text | YES |  |  |
| 17 | financial_covenant_trigger | boolean | YES | false |  |
| 18 | sales_threshold_trigger | numeric [14,2] | YES |  |  |
| 19 | termination_exercised | boolean | YES | false |  |
| 20 | termination_notice_date | date | YES |  |  |
| 21 | actual_termination_date | date | YES |  |  |
| 22 | termination_fee_paid | numeric [12,2] | YES |  |  |
| 23 | notes | text | YES |  |  |
| 24 | created_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |
| 25 | updated_at | timestamp without time zone | YES | CURRENT_TIMESTAMP |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_termination_option_lease_id_fkey | FOREIGN KEY | FOREIGN KEY (lease_id) REFERENCES tbl_lease(lease_id) ON DELETE CASCADE |
| tbl_termination_option_pkey | PRIMARY KEY | PRIMARY KEY (termination_option_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_termination_option_lease_id_fkey | lease_id | tbl_lease.lease_id | NO ACTION | CASCADE |

#### Indexes

- `idx_termination_deadline`

```sql
CREATE INDEX idx_termination_deadline ON landscape.tbl_termination_option USING btree (notice_deadline)
```
- `idx_termination_lease`

```sql
CREATE INDEX idx_termination_lease ON landscape.tbl_termination_option USING btree (lease_id)
```
- `tbl_termination_option_pkey`

```sql
CREATE UNIQUE INDEX tbl_termination_option_pkey ON landscape.tbl_termination_option USING btree (termination_option_id)
```

### `tbl_uom_calculation_formulas`

- Columns: 8
- Constraints: 2
- Foreign keys: 0
- Indexes: 3
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | formula_id | integer [32,0] | NO | nextval('tbl_uom_calculation_formulas_formula_id_seq'::regclass) |  |
| 2 | uom_code | character varying(10) | NO |  |  |
| 3 | formula_name | character varying(50) | NO |  |  |
| 4 | formula_expression | text | NO |  | Python expression evaluated with variables: lot_width, units, acres, inflated_price |
| 5 | required_fields | ARRAY | NO |  | Array of parcel fields that must be non-null for this formula to work |
| 6 | description | text | YES |  |  |
| 7 | created_at | timestamp without time zone | YES | now() |  |
| 8 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_uom_calculation_formulas_pkey | PRIMARY KEY | PRIMARY KEY (formula_id) |
| tbl_uom_calculation_formulas_uom_code_key | UNIQUE | UNIQUE (uom_code) |

#### Indexes

- `idx_uom_formulas_code`

```sql
CREATE INDEX idx_uom_formulas_code ON landscape.tbl_uom_calculation_formulas USING btree (uom_code)
```
- `tbl_uom_calculation_formulas_pkey`

```sql
CREATE UNIQUE INDEX tbl_uom_calculation_formulas_pkey ON landscape.tbl_uom_calculation_formulas USING btree (formula_id)
```
- `tbl_uom_calculation_formulas_uom_code_key`

```sql
CREATE UNIQUE INDEX tbl_uom_calculation_formulas_uom_code_key ON landscape.tbl_uom_calculation_formulas USING btree (uom_code)
```

### `tbl_user_landscaper_profile`

- Columns: 16
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | profile_id | integer [32,0] | NO |  |  |
| 2 | survey_completed_at | timestamp with time zone | YES |  |  |
| 3 | role_primary | character varying(50) | YES |  |  |
| 4 | role_property_type | character varying(50) | YES |  |  |
| 5 | ai_proficiency | character varying(50) | YES |  |  |
| 6 | communication_tone | character varying(50) | YES |  |  |
| 7 | primary_tool | character varying(50) | YES |  |  |
| 8 | markets_text | text | YES |  |  |
| 9 | compiled_instructions | text | YES |  |  |
| 10 | onboarding_chat_history | jsonb | NO |  |  |
| 11 | interaction_insights | jsonb | NO |  |  |
| 12 | document_insights | jsonb | NO |  |  |
| 13 | tos_accepted_at | timestamp with time zone | YES |  |  |
| 14 | created_at | timestamp with time zone | NO |  |  |
| 15 | updated_at | timestamp with time zone | NO |  |  |
| 16 | user_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_user_landscaper_profile_user_id_fe467574_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| tbl_user_landscaper_profile_pkey | PRIMARY KEY | PRIMARY KEY (profile_id) |
| tbl_user_landscaper_profile_user_id_key | UNIQUE | UNIQUE (user_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_user_landscaper_profile_user_id_fe467574_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_user_landscaper_profile_pkey`

```sql
CREATE UNIQUE INDEX tbl_user_landscaper_profile_pkey ON landscape.tbl_user_landscaper_profile USING btree (profile_id)
```
- `tbl_user_landscaper_profile_user_id_key`

```sql
CREATE UNIQUE INDEX tbl_user_landscaper_profile_user_id_key ON landscape.tbl_user_landscaper_profile USING btree (user_id)
```

### `tbl_user_preference`

- Columns: 9
- Constraints: 3
- Foreign keys: 1
- Indexes: 11
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | preference_key | character varying(255) | NO |  |  |
| 3 | preference_value | jsonb | NO |  |  |
| 4 | scope_type | character varying(50) | NO |  |  |
| 5 | scope_id | integer [32,0] | YES |  |  |
| 6 | created_at | timestamp with time zone | NO |  |  |
| 7 | updated_at | timestamp with time zone | NO |  |  |
| 8 | last_accessed_at | timestamp with time zone | NO |  |  |
| 9 | user_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_user_preference_user_id_f8847056_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| tbl_user_preference_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| tbl_user_preference_user_id_preference_key_s_0f07b87a_uniq | UNIQUE | UNIQUE (user_id, preference_key, scope_type, scope_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_user_preference_user_id_f8847056_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_user_pr_prefere_c180c6_idx`

```sql
CREATE INDEX tbl_user_pr_prefere_c180c6_idx ON landscape.tbl_user_preference USING btree (preference_key)
```
- `tbl_user_pr_updated_4533b0_idx`

```sql
CREATE INDEX tbl_user_pr_updated_4533b0_idx ON landscape.tbl_user_preference USING btree (updated_at DESC)
```
- `tbl_user_pr_user_id_c4e8f5_idx`

```sql
CREATE INDEX tbl_user_pr_user_id_c4e8f5_idx ON landscape.tbl_user_preference USING btree (user_id, scope_type, scope_id)
```
- `tbl_user_preference_pkey`

```sql
CREATE UNIQUE INDEX tbl_user_preference_pkey ON landscape.tbl_user_preference USING btree (id)
```
- `tbl_user_preference_preference_key_328aa664`

```sql
CREATE INDEX tbl_user_preference_preference_key_328aa664 ON landscape.tbl_user_preference USING btree (preference_key)
```
- `tbl_user_preference_preference_key_328aa664_like`

```sql
CREATE INDEX tbl_user_preference_preference_key_328aa664_like ON landscape.tbl_user_preference USING btree (preference_key varchar_pattern_ops)
```
- `tbl_user_preference_scope_id_f3ff4922`

```sql
CREATE INDEX tbl_user_preference_scope_id_f3ff4922 ON landscape.tbl_user_preference USING btree (scope_id)
```
- `tbl_user_preference_scope_type_8cde7862`

```sql
CREATE INDEX tbl_user_preference_scope_type_8cde7862 ON landscape.tbl_user_preference USING btree (scope_type)
```
- `tbl_user_preference_scope_type_8cde7862_like`

```sql
CREATE INDEX tbl_user_preference_scope_type_8cde7862_like ON landscape.tbl_user_preference USING btree (scope_type varchar_pattern_ops)
```
- `tbl_user_preference_user_id_f8847056`

```sql
CREATE INDEX tbl_user_preference_user_id_f8847056 ON landscape.tbl_user_preference USING btree (user_id)
```
- `tbl_user_preference_user_id_preference_key_s_0f07b87a_uniq`

```sql
CREATE UNIQUE INDEX tbl_user_preference_user_id_preference_key_s_0f07b87a_uniq ON landscape.tbl_user_preference USING btree (user_id, preference_key, scope_type, scope_id)
```

### `tbl_vacancy_assumption`

- Columns: 16
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | vacancy_id | bigint [64,0] | NO | nextval('tbl_vacancy_assumption_vacancy_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | vacancy_loss_pct | numeric [5,2] | NO | 0.05 |  |
| 4 | collection_loss_pct | numeric [5,2] | NO | 0.02 |  |
| 5 | physical_vacancy_pct | numeric [5,2] | YES | 0.03 |  |
| 6 | economic_vacancy_pct | numeric [5,2] | YES | 0.02 |  |
| 7 | bad_debt_pct | numeric [5,2] | YES | 0.01 |  |
| 8 | concession_cost_pct | numeric [5,2] | YES | 0.01 |  |
| 9 | turnover_vacancy_days | integer [32,0] | YES | 14 |  |
| 10 | seasonal_vacancy_adjustment | jsonb | YES |  |  |
| 11 | lease_up_absorption_curve | jsonb | YES |  |  |
| 12 | market_vacancy_rate_pct | numeric [5,2] | YES |  |  |
| 13 | submarket_vacancy_rate_pct | numeric [5,2] | YES |  |  |
| 14 | competitive_set_vacancy_pct | numeric [5,2] | YES |  |  |
| 15 | created_at | timestamp without time zone | YES | now() |  |
| 16 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_vacancy_assumption_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_vacancy_assumption_pkey | PRIMARY KEY | PRIMARY KEY (vacancy_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_vacancy_assumption_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_vacancy_project`

```sql
CREATE INDEX idx_vacancy_project ON landscape.tbl_vacancy_assumption USING btree (project_id)
```
- `tbl_vacancy_assumption_pkey`

```sql
CREATE UNIQUE INDEX tbl_vacancy_assumption_pkey ON landscape.tbl_vacancy_assumption USING btree (vacancy_id)
```

### `tbl_valuation_reconciliation`

- Columns: 13
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | reconciliation_id | integer [32,0] | NO | nextval('tbl_valuation_reconciliation_reconciliation_id_seq'::regclass) |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | sales_comparison_value | numeric [15,2] | YES |  |  |
| 4 | sales_comparison_weight | numeric [4,2] | YES |  | Weight given to sales comparison approach (0.00-1.00) |
| 5 | cost_approach_value | numeric [15,2] | YES |  |  |
| 6 | cost_approach_weight | numeric [4,2] | YES |  |  |
| 7 | income_approach_value | numeric [15,2] | YES |  |  |
| 8 | income_approach_weight | numeric [4,2] | YES |  |  |
| 9 | final_reconciled_value | numeric [15,2] | YES |  |  |
| 10 | reconciliation_narrative | text | YES |  |  |
| 11 | valuation_date | date | YES |  |  |
| 12 | created_at | timestamp without time zone | YES | now() |  |
| 13 | updated_at | timestamp without time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| check_weights_sum | CHECK | CHECK ((((COALESCE(sales_comparison_weight, (0)::numeric) + COALESCE(cost_approach_weight, (0)::numeric)) + COALESCE(income_approach_weight, (0)::numeric)) <= 1.01)) |
| tbl_valuation_reconciliation_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_valuation_reconciliation_pkey | PRIMARY KEY | PRIMARY KEY (reconciliation_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_valuation_reconciliation_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_valuation_reconciliation_project`

```sql
CREATE UNIQUE INDEX idx_valuation_reconciliation_project ON landscape.tbl_valuation_reconciliation USING btree (project_id)
```
- `tbl_valuation_reconciliation_pkey`

```sql
CREATE UNIQUE INDEX tbl_valuation_reconciliation_pkey ON landscape.tbl_valuation_reconciliation USING btree (reconciliation_id)
```

#### Triggers

- `update_valuation_reconciliation_updated_at`

```sql
CREATE TRIGGER update_valuation_reconciliation_updated_at BEFORE UPDATE ON landscape.tbl_valuation_reconciliation FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_value_add_assumptions`

- Columns: 15
- Constraints: 9
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | value_add_id | bigint [64,0] | NO | nextval('tbl_value_add_assumptions_value_add_id_seq'::regclass) |  |
| 2 | project_id | bigint [64,0] | NO |  |  |
| 3 | is_enabled | boolean | YES | false |  |
| 4 | reno_cost_per_sf | numeric [8,2] | YES | 8.00 | Interior renovation cost per square foot |
| 5 | relocation_incentive | numeric [10,2] | YES | 1500.00 | Lease buyout / move-out incentive per unit |
| 6 | renovate_all | boolean | YES | true |  |
| 7 | units_to_renovate | integer [32,0] | YES |  |  |
| 8 | reno_starts_per_month | integer [32,0] | YES | 4 | Number of units entering renovation each month |
| 9 | reno_start_month | integer [32,0] | YES | 3 |  |
| 10 | rent_premium_pct | numeric [5,4] | YES | 0.15 | Percentage rent increase post-renovation (0.15 = 15%) |
| 11 | relet_lag_months | integer [32,0] | YES | 2 | Months from vacancy to new lease at premium rent |
| 12 | created_at | timestamp without time zone | YES | now() |  |
| 13 | updated_at | timestamp without time zone | YES | now() |  |
| 14 | reno_cost_basis | character varying(10) | YES | 'sf'::character varying | Cost input type: sf ($/SF) or unit ($/Unit) |
| 15 | months_to_complete | integer [32,0] | YES | 3 | Duration of renovation work per unit in months |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| valid_cost_basis | CHECK | CHECK (((reno_cost_basis)::text = ANY ((ARRAY['sf'::character varying, 'unit'::character varying])::text[]))) |
| valid_months_to_complete | CHECK | CHECK ((months_to_complete > 0)) |
| valid_pace | CHECK | CHECK ((reno_starts_per_month > 0)) |
| valid_premium | CHECK | CHECK (((rent_premium_pct >= (0)::numeric) AND (rent_premium_pct <= (1)::numeric))) |
| valid_start | CHECK | CHECK ((reno_start_month >= 1)) |
| valid_units | CHECK | CHECK (((units_to_renovate IS NULL) OR (units_to_renovate > 0))) |
| tbl_value_add_assumptions_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) |
| tbl_value_add_assumptions_pkey | PRIMARY KEY | PRIMARY KEY (value_add_id) |
| tbl_value_add_assumptions_project_id_key | UNIQUE | UNIQUE (project_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_value_add_assumptions_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | NO ACTION |

#### Indexes

- `tbl_value_add_assumptions_pkey`

```sql
CREATE UNIQUE INDEX tbl_value_add_assumptions_pkey ON landscape.tbl_value_add_assumptions USING btree (value_add_id)
```
- `tbl_value_add_assumptions_project_id_key`

```sql
CREATE UNIQUE INDEX tbl_value_add_assumptions_project_id_key ON landscape.tbl_value_add_assumptions USING btree (project_id)
```

### `tbl_waterfall`

- Columns: 7
- Constraints: 2
- Foreign keys: 1
- Indexes: 3
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | waterfall_id | integer [32,0] | NO |  |  |
| 2 | project_id | integer [32,0] | NO |  |  |
| 3 | waterfall_name | character varying(255) | NO |  |  |
| 4 | tiers | jsonb | NO |  | JSON array defining waterfall tiers with equity class distributions |
| 5 | is_active | boolean | YES | true |  |
| 6 | created_at | timestamp with time zone | YES | now() |  |
| 7 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_waterfall_project_id_fkey | FOREIGN KEY | FOREIGN KEY (project_id) REFERENCES tbl_project(project_id) ON DELETE CASCADE |
| tbl_waterfall_pkey | PRIMARY KEY | PRIMARY KEY (waterfall_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_waterfall_project_id_fkey | project_id | tbl_project.project_id | NO ACTION | CASCADE |

#### Indexes

- `idx_waterfall_active`

```sql
CREATE INDEX idx_waterfall_active ON landscape.tbl_waterfall USING btree (project_id, is_active)
```
- `idx_waterfall_project`

```sql
CREATE INDEX idx_waterfall_project ON landscape.tbl_waterfall USING btree (project_id)
```
- `tbl_waterfall_pkey`

```sql
CREATE UNIQUE INDEX tbl_waterfall_pkey ON landscape.tbl_waterfall USING btree (waterfall_id)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_waterfall FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tbl_waterfall_tier`

- Columns: 21
- Constraints: 2
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tier_id | bigint [64,0] | NO | nextval('tbl_waterfall_tier_tier_id_seq'::regclass) |  |
| 2 | equity_structure_id | bigint [64,0] | NO |  |  |
| 3 | tier_number | integer [32,0] | NO |  |  |
| 4 | tier_description | character varying(200) | YES |  |  |
| 5 | hurdle_type | character varying(20) | YES |  |  |
| 6 | hurdle_rate | numeric [6,3] | YES |  |  |
| 7 | lp_split_pct | numeric [5,2] | YES |  |  |
| 8 | gp_split_pct | numeric [5,2] | YES |  |  |
| 9 | has_catch_up | boolean | YES | false |  |
| 10 | catch_up_pct | numeric [5,2] | YES |  |  |
| 11 | created_at | timestamp without time zone | YES | now() |  |
| 12 | updated_at | timestamp without time zone | YES | now() |  |
| 13 | project_id | bigint [64,0] | YES |  |  |
| 14 | tier_name | character varying(200) | YES |  |  |
| 15 | irr_threshold_pct | numeric [6,3] | YES |  |  |
| 16 | equity_multiple_threshold | numeric [5,2] | YES |  |  |
| 17 | is_pari_passu | boolean | YES | false |  |
| 18 | is_lookback_tier | boolean | YES | false |  |
| 19 | catch_up_to_pct | numeric [5,2] | YES |  |  |
| 20 | is_active | boolean | YES | true |  |
| 21 | display_order | integer [32,0] | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_waterfall_tier_equity_structure_id_fkey | FOREIGN KEY | FOREIGN KEY (equity_structure_id) REFERENCES tbl_equity_structure(equity_structure_id) |
| tbl_waterfall_tier_pkey | PRIMARY KEY | PRIMARY KEY (tier_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tbl_waterfall_tier_equity_structure_id_fkey | equity_structure_id | tbl_equity_structure.equity_structure_id | NO ACTION | NO ACTION |

#### Indexes

- `idx_waterfall_structure`

```sql
CREATE INDEX idx_waterfall_structure ON landscape.tbl_waterfall_tier USING btree (equity_structure_id)
```
- `tbl_waterfall_tier_pkey`

```sql
CREATE UNIQUE INDEX tbl_waterfall_tier_pkey ON landscape.tbl_waterfall_tier USING btree (tier_id)
```

### `tbl_zoning_control`

- Columns: 19
- Constraints: 2
- Foreign keys: 0
- Indexes: 4
- Triggers: 1

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | zoning_control_id | bigint [64,0] | NO | nextval('tbl_zoning_control_zoning_control_id_seq'::regclass) |  |
| 2 | jurisdiction_id | bigint [64,0] | YES |  |  |
| 3 | zoning_code | character varying(64) | NO |  |  |
| 4 | landuse_code | character varying(64) | NO |  |  |
| 5 | site_coverage_pct | numeric [5,2] | YES |  |  |
| 6 | site_far | numeric [6,3] | YES |  |  |
| 7 | max_stories | integer [32,0] | YES |  |  |
| 8 | max_height_ft | numeric [6,2] | YES |  |  |
| 9 | parking_ratio_per1000sf | numeric [6,3] | YES |  |  |
| 10 | parking_stall_sf | numeric [8,2] | YES |  |  |
| 11 | site_common_area_pct | numeric [5,2] | YES |  |  |
| 12 | parking_sharing_flag | boolean | YES |  |  |
| 13 | parking_structured_flag | boolean | YES |  |  |
| 14 | setback_notes | text | YES |  |  |
| 15 | scenario_id | character varying(64) | YES |  |  |
| 16 | valid_from | date | YES | CURRENT_DATE |  |
| 17 | valid_to | date | YES |  |  |
| 18 | created_at | timestamp with time zone | YES | now() |  |
| 19 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tbl_zoning_control_pkey | PRIMARY KEY | PRIMARY KEY (zoning_control_id) |
| uq_zoning_nk | UNIQUE | UNIQUE (jurisdiction_id, zoning_code, landuse_code, scenario_id, valid_from) |

#### Indexes

- `idx_zc_lookup`

```sql
CREATE INDEX idx_zc_lookup ON landscape.tbl_zoning_control USING btree (jurisdiction_id, zoning_code, landuse_code, scenario_id)
```
- `idx_zc_validity`

```sql
CREATE INDEX idx_zc_validity ON landscape.tbl_zoning_control USING btree (valid_from, COALESCE(valid_to, '9999-12-31'::date))
```
- `tbl_zoning_control_pkey`

```sql
CREATE UNIQUE INDEX tbl_zoning_control_pkey ON landscape.tbl_zoning_control USING btree (zoning_control_id)
```
- `uq_zoning_nk`

```sql
CREATE UNIQUE INDEX uq_zoning_nk ON landscape.tbl_zoning_control USING btree (jurisdiction_id, zoning_code, landuse_code, scenario_id, valid_from)
```

#### Triggers

- `trg_update_updated_at`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_zoning_control FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

### `tester_feedback`

- Columns: 22
- Constraints: 4
- Foreign keys: 2
- Indexes: 6
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | bigint [64,0] | NO |  |  |
| 2 | page_url | character varying(500) | NO |  |  |
| 3 | page_path | character varying(255) | NO |  |  |
| 4 | project_id | integer [32,0] | YES |  |  |
| 5 | project_name | character varying(255) | YES |  |  |
| 6 | feedback_type | character varying(20) | NO |  |  |
| 7 | message | text | NO |  |  |
| 9 | admin_notes | text | NO |  |  |
| 11 | created_at | timestamp with time zone | NO |  |  |
| 12 | updated_at | timestamp with time zone | NO |  |  |
| 14 | user_id | bigint [64,0] | NO |  |  |
| 15 | status | character varying(20) | NO |  |  |
| 16 | internal_id | uuid | NO |  |  |
| 17 | category | character varying(50) | YES |  |  |
| 18 | affected_module | character varying(100) | YES |  |  |
| 19 | landscaper_summary | text | YES |  |  |
| 20 | landscaper_raw_chat | jsonb | NO |  |  |
| 21 | browser_context | jsonb | NO |  |  |
| 22 | duplicate_of_id | bigint [64,0] | YES |  |  |
| 23 | report_count | integer [32,0] | NO |  |  |
| 24 | admin_response | text | YES |  |  |
| 25 | admin_responded_at | timestamp with time zone | YES |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| tester_feedback_report_count_check | CHECK | CHECK ((report_count >= 0)) |
| tester_feedback_duplicate_of_id_d09357c7_fk_tester_feedback_id | FOREIGN KEY | FOREIGN KEY (duplicate_of_id) REFERENCES tester_feedback(id) DEFERRABLE INITIALLY DEFERRED |
| tester_feedback_user_id_70f5a728_fk_auth_user_id | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) DEFERRABLE INITIALLY DEFERRED |
| tester_feedback_pkey | PRIMARY KEY | PRIMARY KEY (id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| tester_feedback_duplicate_of_id_d09357c7_fk_tester_feedback_id | duplicate_of_id | tester_feedback.id | NO ACTION | NO ACTION |
| tester_feedback_user_id_70f5a728_fk_auth_user_id | user_id | auth_user.id | NO ACTION | NO ACTION |

#### Indexes

- `idx_feedback_category`

```sql
CREATE INDEX idx_feedback_category ON landscape.tester_feedback USING btree (category)
```
- `idx_feedback_internal_id`

```sql
CREATE INDEX idx_feedback_internal_id ON landscape.tester_feedback USING btree (internal_id)
```
- `idx_feedback_status`

```sql
CREATE INDEX idx_feedback_status ON landscape.tester_feedback USING btree (status)
```
- `tester_feedback_duplicate_of_id_d09357c7`

```sql
CREATE INDEX tester_feedback_duplicate_of_id_d09357c7 ON landscape.tester_feedback USING btree (duplicate_of_id)
```
- `tester_feedback_pkey`

```sql
CREATE UNIQUE INDEX tester_feedback_pkey ON landscape.tester_feedback USING btree (id)
```
- `tester_feedback_user_id_70f5a728`

```sql
CREATE INDEX tester_feedback_user_id_70f5a728 ON landscape.tester_feedback USING btree (user_id)
```

### `type_lot_product`

- Columns: 2
- Constraints: 3
- Foreign keys: 2
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | type_id | bigint [64,0] | NO |  |  |
| 2 | product_id | bigint [64,0] | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| subtype_lot_product_product_id_fkey | FOREIGN KEY | FOREIGN KEY (product_id) REFERENCES res_lot_product(product_id) ON UPDATE CASCADE ON DELETE CASCADE |
| subtype_lot_product_subtype_id_fkey | FOREIGN KEY | FOREIGN KEY (type_id) REFERENCES lu_type(type_id) ON UPDATE CASCADE ON DELETE CASCADE |
| subtype_lot_product_pkey | PRIMARY KEY | PRIMARY KEY (type_id, product_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| subtype_lot_product_product_id_fkey | product_id | res_lot_product.product_id | CASCADE | CASCADE |
| subtype_lot_product_subtype_id_fkey | type_id | lu_type.type_id | CASCADE | CASCADE |

#### Indexes

- `subtype_lot_product_pkey`

```sql
CREATE UNIQUE INDEX subtype_lot_product_pkey ON landscape.type_lot_product USING btree (type_id, product_id)
```

### `user_profile`

- Columns: 6
- Constraints: 3
- Foreign keys: 1
- Indexes: 2
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('user_profile_id_seq'::regclass) |  |
| 2 | user_id | integer [32,0] | NO |  |  |
| 3 | bio | text | YES |  |  |
| 4 | avatar_url | character varying(200) | YES |  |  |
| 5 | timezone | character varying(50) | YES | 'UTC'::character varying |  |
| 6 | preferences | jsonb | YES | '{}'::jsonb |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| user_profile_user_id_fkey | FOREIGN KEY | FOREIGN KEY (user_id) REFERENCES auth_user(id) ON DELETE CASCADE |
| user_profile_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| user_profile_user_id_key | UNIQUE | UNIQUE (user_id) |

#### Foreign Keys

| Constraint | Column | References | On Update | On Delete |
|---|---|---|---|---|
| user_profile_user_id_fkey | user_id | auth_user.id | NO ACTION | CASCADE |

#### Indexes

- `user_profile_pkey`

```sql
CREATE UNIQUE INDEX user_profile_pkey ON landscape.user_profile USING btree (id)
```
- `user_profile_user_id_key`

```sql
CREATE UNIQUE INDEX user_profile_user_id_key ON landscape.user_profile USING btree (user_id)
```

### `user_settings`

- Columns: 4
- Constraints: 1
- Foreign keys: 0
- Indexes: 1
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | user_id | integer [32,0] | NO |  |  |
| 2 | tier_level | character varying(20) | NO |  |  |
| 3 | created_at | timestamp with time zone | NO |  |  |
| 4 | updated_at | timestamp with time zone | NO |  |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| user_settings_pkey | PRIMARY KEY | PRIMARY KEY (user_id) |

#### Indexes

- `user_settings_pkey`

```sql
CREATE UNIQUE INDEX user_settings_pkey ON landscape.user_settings USING btree (user_id)
```

### `v_ai_review_summary`

- Columns: 6
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | integer [32,0] | YES |  |  |
| 2 | project_name | character varying(255) | YES |  |  |
| 3 | total_reviews | bigint [64,0] | YES |  |  |
| 4 | last_review_date | timestamp with time zone | YES |  |  |
| 5 | field_updates_count | bigint [64,0] | YES |  |  |
| 6 | ai_last_reviewed | timestamp with time zone | YES |  |  |

### `v_contact_projects`

- Columns: 12
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | contact_id | bigint [64,0] | YES |  |  |
| 2 | contact_name | character varying(200) | YES |  |  |
| 3 | contact_type | character varying(50) | YES |  |  |
| 4 | company_name | character varying(200) | YES |  |  |
| 5 | project_id | bigint [64,0] | YES |  |  |
| 6 | project_name | character varying(255) | YES |  |  |
| 7 | project_type_code | character varying(50) | YES |  |  |
| 8 | project_is_active | boolean | YES |  |  |
| 9 | role_label | character varying(100) | YES |  |  |
| 10 | role_category | character varying(50) | YES |  |  |
| 11 | is_primary | boolean | YES |  |  |
| 12 | assigned_at | timestamp with time zone | YES |  |  |

### `v_contact_relationships`

- Columns: 13
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | relationship_id | bigint [64,0] | YES |  |  |
| 2 | cabinet_id | bigint [64,0] | YES |  |  |
| 3 | contact_id | bigint [64,0] | YES |  |  |
| 4 | related_to_id | bigint [64,0] | YES |  |  |
| 5 | relationship_type | character varying(50) | YES |  |  |
| 6 | role_title | character varying(200) | YES |  |  |
| 7 | start_date | date | YES |  |  |
| 8 | end_date | date | YES |  |  |
| 9 | is_current | boolean | YES |  |  |
| 10 | contact_name | character varying(200) | YES |  |  |
| 11 | contact_type | character varying(50) | YES |  |  |
| 12 | related_to_name | character varying(200) | YES |  |  |
| 13 | related_to_type | character varying(50) | YES |  |  |

### `v_lease_summary`

- Columns: 8
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | integer [32,0] | YES |  |  |
| 2 | project_name | character varying(255) | YES |  |  |
| 3 | total_leases | bigint [64,0] | YES |  |  |
| 4 | contract_leases | bigint [64,0] | YES |  |  |
| 5 | speculative_leases | bigint [64,0] | YES |  |  |
| 6 | total_leased_sf | numeric | YES |  |  |
| 7 | occupied_sf | numeric | YES |  |  |
| 8 | occupancy_pct | numeric | YES |  |  |

### `v_project_contacts`

- Columns: 15
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | contact_id | integer [32,0] | YES |  |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | contact_role | character varying(50) | YES |  |  |
| 4 | role_display_name | text | YES |  |  |
| 5 | role_display_order | integer [32,0] | YES |  |  |
| 6 | contact_name | character varying(255) | YES |  |  |
| 7 | title | character varying(100) | YES |  |  |
| 8 | company | character varying(200) | YES |  |  |
| 9 | email | character varying(255) | YES |  |  |
| 10 | phone_direct | character varying(50) | YES |  |  |
| 11 | phone_mobile | character varying(50) | YES |  |  |
| 12 | notes | text | YES |  |  |
| 13 | sort_order | integer [32,0] | YES |  |  |
| 14 | created_at | timestamp without time zone | YES |  |  |
| 15 | updated_at | timestamp without time zone | YES |  |  |

### `v_project_contacts_detail`

- Columns: 23
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_contact_id | bigint [64,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | contact_id | bigint [64,0] | YES |  |  |
| 4 | role_id | integer [32,0] | YES |  |  |
| 5 | is_primary | boolean | YES |  |  |
| 6 | is_billing_contact | boolean | YES |  |  |
| 7 | assignment_notes | text | YES |  |  |
| 8 | assigned_at | timestamp with time zone | YES |  |  |
| 9 | contact_name | character varying(200) | YES |  |  |
| 10 | display_name | character varying(200) | YES |  |  |
| 11 | contact_type | character varying(50) | YES |  |  |
| 12 | first_name | character varying(100) | YES |  |  |
| 13 | last_name | character varying(100) | YES |  |  |
| 14 | title | character varying(100) | YES |  |  |
| 15 | company_name | character varying(200) | YES |  |  |
| 16 | email | character varying(255) | YES |  |  |
| 17 | phone | character varying(50) | YES |  |  |
| 18 | phone_mobile | character varying(50) | YES |  |  |
| 19 | role_code | character varying(50) | YES |  |  |
| 20 | role_label | character varying(100) | YES |  |  |
| 21 | role_category | character varying(50) | YES |  |  |
| 22 | role_display_order | integer [32,0] | YES |  |  |
| 23 | project_name | character varying(255) | YES |  |  |

### `v_rent_roll`

- Columns: 15
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | YES |  |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | tenant_name | character varying(255) | YES |  |  |
| 4 | suite_number | character varying(50) | YES |  |  |
| 5 | lease_status | character varying(50) | YES |  |  |
| 6 | lease_type | character varying(50) | YES |  |  |
| 7 | leased_sf | numeric [12,2] | YES |  |  |
| 8 | lease_commencement_date | date | YES |  |  |
| 9 | lease_expiration_date | date | YES |  |  |
| 10 | lease_term_months | integer [32,0] | YES |  |  |
| 11 | base_rent_psf_annual | numeric [10,2] | YES |  |  |
| 12 | base_rent_annual | numeric [15,2] | YES |  |  |
| 13 | base_rent_monthly | numeric [15,2] | YES |  |  |
| 14 | renewal_probability_pct | numeric [5,2] | YES |  |  |
| 15 | months_to_expiration | integer [32,0] | YES |  |  |

### `v_sales_comparables_full`

- Columns: 137
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | comparable_id | integer [32,0] | YES |  |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | comp_number | integer [32,0] | YES |  |  |
| 4 | property_name | character varying(255) | YES |  |  |
| 5 | address | character varying(255) | YES |  |  |
| 6 | city | character varying(100) | YES |  |  |
| 7 | state | character varying(2) | YES |  |  |
| 8 | zip | character varying(10) | YES |  |  |
| 9 | sale_date | date | YES |  |  |
| 10 | sale_price | numeric [15,2] | YES |  |  |
| 11 | price_per_unit | numeric [10,2] | YES |  |  |
| 12 | price_per_sf | numeric [10,2] | YES |  |  |
| 13 | year_built | integer [32,0] | YES |  |  |
| 14 | units | numeric [10,2] | YES |  |  |
| 15 | building_sf | character varying(255) | YES |  |  |
| 16 | cap_rate | character varying(255) | YES |  |  |
| 17 | grm | numeric [6,2] | YES |  |  |
| 18 | distance_from_subject | character varying(50) | YES |  |  |
| 19 | unit_mix | jsonb | YES |  |  |
| 20 | notes | text | YES |  |  |
| 21 | created_at | timestamp without time zone | YES |  |  |
| 22 | updated_at | timestamp without time zone | YES |  |  |
| 23 | latitude | numeric [10,7] | YES |  |  |
| 24 | longitude | numeric [10,7] | YES |  |  |
| 25 | unit_count | integer [32,0] | YES |  |  |
| 26 | costar_comp_id | character varying(50) | YES |  |  |
| 27 | price_status | character varying(50) | YES |  |  |
| 28 | comp_status | character varying(50) | YES |  |  |
| 29 | sale_type | character varying(50) | YES |  |  |
| 30 | sale_conditions | character varying(100) | YES |  |  |
| 31 | hold_period_months | integer [32,0] | YES |  |  |
| 32 | days_on_market | integer [32,0] | YES |  |  |
| 33 | asking_price | numeric [15,2] | YES |  |  |
| 34 | transfer_tax | numeric [12,2] | YES |  |  |
| 35 | document_number | character varying(50) | YES |  |  |
| 36 | escrow_length_days | integer [32,0] | YES |  |  |
| 37 | percent_leased_at_sale | numeric [5,2] | YES |  |  |
| 38 | actual_cap_rate | numeric [6,4] | YES |  |  |
| 39 | pro_forma_cap_rate | numeric [6,4] | YES |  |  |
| 40 | gim | numeric [8,2] | YES |  |  |
| 41 | noi_at_sale | numeric [15,2] | YES |  |  |
| 42 | gross_income_at_sale | numeric [15,2] | YES |  |  |
| 43 | financing_type | character varying(50) | YES |  |  |
| 44 | financing_lender | character varying(255) | YES |  |  |
| 45 | financing_amount | numeric [15,2] | YES |  |  |
| 46 | financing_rate | numeric [6,4] | YES |  |  |
| 47 | financing_term_months | integer [32,0] | YES |  |  |
| 48 | loan_to_value | numeric [5,2] | YES |  |  |
| 49 | assumed_financing | boolean | YES |  |  |
| 50 | recorded_buyer | character varying(255) | YES |  |  |
| 51 | true_buyer | character varying(255) | YES |  |  |
| 52 | buyer_contact | character varying(500) | YES |  |  |
| 53 | buyer_type | character varying(50) | YES |  |  |
| 54 | recorded_seller | character varying(255) | YES |  |  |
| 55 | true_seller | character varying(255) | YES |  |  |
| 56 | seller_contact | character varying(500) | YES |  |  |
| 57 | seller_type | character varying(50) | YES |  |  |
| 58 | buyer_broker_company | character varying(255) | YES |  |  |
| 59 | buyer_broker_name | character varying(255) | YES |  |  |
| 60 | buyer_broker_phone | character varying(50) | YES |  |  |
| 61 | listing_broker_company | character varying(255) | YES |  |  |
| 62 | listing_broker_name | character varying(255) | YES |  |  |
| 63 | listing_broker_phone | character varying(50) | YES |  |  |
| 64 | no_broker_deal | boolean | YES |  |  |
| 65 | property_type | character varying(50) | YES |  |  |
| 66 | property_subtype | character varying(100) | YES |  |  |
| 67 | building_class | character varying(10) | YES |  |  |
| 68 | costar_star_rating | numeric [2,1] | YES |  |  |
| 69 | location_type | character varying(50) | YES |  |  |
| 70 | num_buildings | integer [32,0] | YES |  |  |
| 71 | num_floors | integer [32,0] | YES |  |  |
| 72 | typical_floor_sf | numeric [12,2] | YES |  |  |
| 73 | tenancy_type | character varying(50) | YES |  |  |
| 74 | owner_occupied | boolean | YES |  |  |
| 75 | avg_unit_size_sf | numeric [10,2] | YES |  |  |
| 76 | units_per_acre | numeric [8,2] | YES |  |  |
| 77 | parking_spaces | integer [32,0] | YES |  |  |
| 78 | parking_ratio | numeric [6,2] | YES |  |  |
| 79 | parking_type | character varying(100) | YES |  |  |
| 80 | elevators | integer [32,0] | YES |  |  |
| 81 | zoning | character varying(100) | YES |  |  |
| 82 | construction_type | character varying(100) | YES |  |  |
| 83 | roof_type | character varying(100) | YES |  |  |
| 84 | hvac_type | character varying(100) | YES |  |  |
| 85 | sprinklered | boolean | YES |  |  |
| 86 | land_area_sf | numeric [15,2] | YES |  |  |
| 87 | land_area_acres | numeric [12,4] | YES |  |  |
| 88 | far_allowed | numeric [6,2] | YES |  |  |
| 89 | far_actual | numeric [6,2] | YES |  |  |
| 90 | num_parcels | integer [32,0] | YES |  |  |
| 91 | topography | character varying(100) | YES |  |  |
| 92 | utilities_available | character varying(255) | YES |  |  |
| 93 | entitlements | character varying(500) | YES |  |  |
| 94 | environmental_issues | text | YES |  |  |
| 95 | total_assessed_value | numeric [15,2] | YES |  |  |
| 96 | land_assessed_value | numeric [15,2] | YES |  |  |
| 97 | improved_assessed_value | numeric [15,2] | YES |  |  |
| 98 | assessment_year | integer [32,0] | YES |  |  |
| 99 | tax_amount | numeric [12,2] | YES |  |  |
| 100 | tax_per_unit | numeric [10,2] | YES |  |  |
| 101 | percent_improved | numeric [5,2] | YES |  |  |
| 102 | metro_market | character varying(100) | YES |  |  |
| 103 | submarket | character varying(100) | YES |  |  |
| 104 | county | character varying(100) | YES |  |  |
| 105 | cbsa | character varying(150) | YES |  |  |
| 106 | csa | character varying(150) | YES |  |  |
| 107 | dma | character varying(150) | YES |  |  |
| 108 | walk_score | integer [32,0] | YES |  |  |
| 109 | transit_score | integer [32,0] | YES |  |  |
| 110 | bike_score | integer [32,0] | YES |  |  |
| 111 | data_source | character varying(50) | YES |  |  |
| 112 | verification_status | character varying(50) | YES |  |  |
| 113 | verification_source | character varying(255) | YES |  |  |
| 114 | verification_date | date | YES |  |  |
| 115 | transaction_notes | text | YES |  |  |
| 116 | internal_notes | text | YES |  |  |
| 117 | is_portfolio_sale | boolean | YES |  |  |
| 118 | portfolio_name | character varying(255) | YES |  |  |
| 119 | portfolio_property_count | integer [32,0] | YES |  |  |
| 120 | price_allocation_method | character varying(50) | YES |  |  |
| 121 | allocated_price | numeric [15,2] | YES |  |  |
| 122 | site_amenities | jsonb | YES |  |  |
| 123 | extra_data | jsonb | YES |  |  |
| 124 | raw_import_data | jsonb | YES |  |  |
| 125 | unit_mix_count | bigint [64,0] | YES |  |  |
| 126 | total_units_from_mix | bigint [64,0] | YES |  |  |
| 127 | tenant_count | bigint [64,0] | YES |  |  |
| 128 | total_leased_sf | numeric | YES |  |  |
| 129 | prior_sales_count | bigint [64,0] | YES |  |  |
| 130 | has_industrial_data | boolean | YES |  |  |
| 131 | has_hospitality_data | boolean | YES |  |  |
| 132 | has_land_data | boolean | YES |  |  |
| 133 | has_self_storage_data | boolean | YES |  |  |
| 134 | has_retail_data | boolean | YES |  |  |
| 135 | has_office_data | boolean | YES |  |  |
| 136 | has_specialty_data | boolean | YES |  |  |
| 137 | has_manufactured_data | boolean | YES |  |  |

### `vw_absorption_with_dependencies`

- Columns: 21
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | absorption_id | bigint [64,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | area_id | bigint [64,0] | YES |  |  |
| 4 | phase_id | bigint [64,0] | YES |  |  |
| 5 | parcel_id | bigint [64,0] | YES |  |  |
| 6 | revenue_stream_name | character varying(200) | YES |  |  |
| 7 | revenue_category | character varying(100) | YES |  |  |
| 8 | start_period | integer [32,0] | YES |  |  |
| 9 | periods_to_complete | integer [32,0] | YES |  |  |
| 10 | timing_method | character varying(50) | YES |  |  |
| 11 | units_per_period | numeric [8,2] | YES |  |  |
| 12 | total_units | integer [32,0] | YES |  |  |
| 13 | base_price_per_unit | numeric [12,2] | YES |  |  |
| 14 | price_escalation_pct | numeric [6,5] | YES |  |  |
| 15 | dependency_id | bigint [64,0] | YES |  |  |
| 16 | trigger_event | character varying(50) | YES |  |  |
| 17 | trigger_value | numeric [15,2] | YES |  |  |
| 18 | offset_periods | integer [32,0] | YES |  |  |
| 19 | is_hard_dependency | boolean | YES |  |  |
| 20 | has_dependency | boolean | YES |  |  |
| 21 | dependency_summary | text | YES |  |  |

### `vw_acreage_allocation`

- Columns: 17
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | allocation_id | integer [32,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | project_name | character varying(255) | YES |  |  |
| 4 | phase_id | bigint [64,0] | YES |  |  |
| 5 | parcel_id | bigint [64,0] | YES |  |  |
| 6 | allocation_type_id | integer [32,0] | YES |  |  |
| 7 | allocation_type_code | character varying(50) | YES |  |  |
| 8 | allocation_type_name | character varying | YES |  |  |
| 9 | is_developable | boolean | YES |  |  |
| 10 | acres | numeric [12,4] | YES |  |  |
| 11 | source_doc_id | bigint [64,0] | YES |  |  |
| 12 | source_document | character varying(500) | YES |  |  |
| 13 | source_page | integer [32,0] | YES |  |  |
| 14 | confidence_score | numeric [3,2] | YES |  |  |
| 15 | notes | text | YES |  |  |
| 16 | created_at | timestamp without time zone | YES |  |  |
| 17 | updated_at | timestamp without time zone | YES |  |  |

### `vw_budget_grid_items`

- Columns: 42
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | fact_id | bigint [64,0] | YES |  |  |
| 2 | budget_id | bigint [64,0] | YES |  |  |
| 3 | budget_version | text | YES |  |  |
| 4 | project_id | bigint [64,0] | YES |  |  |
| 5 | division_id | bigint [64,0] | YES |  |  |
| 6 | tier | integer [32,0] | YES |  |  |
| 7 | division_code | character varying(50) | YES |  |  |
| 8 | division_name | character varying(200) | YES |  |  |
| 9 | parent_division_id | bigint [64,0] | YES |  |  |
| 10 | category_id | bigint [64,0] | YES |  |  |
| 11 | cost_code | text | YES |  |  |
| 12 | scope | text | YES |  |  |
| 13 | category_path | text | YES |  |  |
| 14 | category_depth | integer [32,0] | YES |  |  |
| 15 | category_source | text | YES |  |  |
| 16 | category_l1_name | text | YES |  |  |
| 17 | category_l2_name | text | YES |  |  |
| 18 | category_l3_name | text | YES |  |  |
| 19 | category_l4_name | text | YES |  |  |
| 20 | activity | character varying(50) | YES |  |  |
| 21 | uom_code | text | YES |  |  |
| 22 | uom_display | text | YES |  |  |
| 23 | qty | numeric [18,6] | YES |  |  |
| 24 | rate | numeric [18,6] | YES |  |  |
| 25 | amount | numeric [18,2] | YES |  |  |
| 26 | calculated_amount | numeric | YES |  |  |
| 27 | start_date | date | YES |  |  |
| 28 | end_date | date | YES |  |  |
| 29 | start_period | integer [32,0] | YES |  |  |
| 30 | periods_to_complete | integer [32,0] | YES |  |  |
| 31 | end_period | integer [32,0] | YES |  |  |
| 32 | escalation_rate | numeric | YES |  |  |
| 33 | contingency_pct | numeric | YES |  |  |
| 34 | timing_method | character varying(20) | YES |  |  |
| 35 | contract_number | character varying(50) | YES |  |  |
| 36 | purchase_order | character varying(50) | YES |  |  |
| 37 | is_committed | boolean | YES |  |  |
| 38 | confidence_level | character varying(20) | YES |  |  |
| 39 | vendor_contact_id | integer [32,0] | YES |  |  |
| 40 | vendor_name | character varying(255) | YES |  |  |
| 41 | notes | text | YES |  |  |
| 42 | created_at | timestamp with time zone | YES |  |  |

### `vw_budget_variance`

- Columns: 9
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | fact_id | bigint [64,0] | YES |  |  |
| 2 | category_id | bigint [64,0] | YES |  |  |
| 3 | project_id | bigint [64,0] | YES |  |  |
| 4 | container_id | bigint [64,0] | YES |  |  |
| 5 | original_amount | numeric | YES |  |  |
| 6 | current_amount | numeric [18,2] | YES |  |  |
| 7 | variance_amount | numeric | YES |  |  |
| 8 | variance_percent | numeric | YES |  |  |
| 9 | variance_status | text | YES |  |  |

### `vw_budget_with_dependencies`

- Columns: 25
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | budget_item_id | integer [32,0] | YES |  |  |
| 2 | project_id | integer [32,0] | YES |  |  |
| 3 | structure_id | integer [32,0] | YES |  |  |
| 4 | scope | character varying(100) | YES |  |  |
| 5 | category | character varying(100) | YES |  |  |
| 6 | description | character varying(200) | YES |  |  |
| 7 | amount | numeric [15,2] | YES |  |  |
| 8 | quantity | numeric [10,2] | YES |  |  |
| 9 | cost_per_unit | numeric [15,2] | YES |  |  |
| 10 | notes | text | YES |  |  |
| 11 | timing_method | character varying(50) | YES |  |  |
| 12 | timing_locked | boolean | YES |  |  |
| 13 | start_period | integer [32,0] | YES |  |  |
| 14 | periods_to_complete | integer [32,0] | YES |  |  |
| 15 | s_curve_profile | character varying(50) | YES |  |  |
| 16 | actual_amount | numeric [15,2] | YES |  |  |
| 17 | variance_amount | numeric [15,2] | YES |  |  |
| 18 | variance_pct | numeric [6,4] | YES |  |  |
| 19 | dependency_id | bigint [64,0] | YES |  |  |
| 20 | trigger_event | character varying(50) | YES |  |  |
| 21 | trigger_value | numeric [15,2] | YES |  |  |
| 22 | offset_periods | integer [32,0] | YES |  |  |
| 23 | is_hard_dependency | boolean | YES |  |  |
| 24 | has_dependency | boolean | YES |  |  |
| 25 | dependency_summary | text | YES |  |  |

### `vw_category_hierarchy`

- Columns: 11
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | category_id | integer [32,0] | YES |  |  |
| 2 | parent_id | integer [32,0] | YES |  |  |
| 3 | category_name | character varying(100) | YES |  |  |
| 4 | lifecycle_stages | ARRAY | YES |  |  |
| 5 | tags | jsonb | YES |  |  |
| 6 | sort_order | integer [32,0] | YES |  |  |
| 7 | is_active | boolean | YES |  |  |
| 8 | depth | integer [32,0] | YES |  |  |
| 9 | path | ARRAY | YES |  |  |
| 10 | display_label | text | YES |  |  |
| 11 | full_path | text | YES |  |  |

### `vw_debt_balance_summary`

- Columns: 20
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | loan_id | bigint [64,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | loan_name | character varying(255) | YES |  |  |
| 4 | loan_type | character varying(50) | YES |  |  |
| 5 | structure_type | character varying(20) | YES |  |  |
| 6 | commitment_amount | numeric [15,2] | YES |  |  |
| 7 | interest_rate_pct | numeric [6,3] | YES |  |  |
| 8 | seniority | integer [32,0] | YES |  |  |
| 9 | period_id | bigint [64,0] | YES |  |  |
| 10 | period_start_date | date | YES |  |  |
| 11 | period_end_date | date | YES |  |  |
| 12 | draw_amount | numeric [15,2] | YES |  |  |
| 13 | cumulative_drawn | numeric [15,2] | YES |  |  |
| 14 | available_remaining | numeric [15,2] | YES |  |  |
| 15 | beginning_balance | numeric [15,2] | YES |  |  |
| 16 | interest_amount | numeric [12,2] | YES |  |  |
| 17 | cumulative_interest | numeric [12,2] | YES |  |  |
| 18 | principal_payment | numeric [12,2] | YES |  |  |
| 19 | ending_balance | numeric [15,2] | YES |  |  |
| 20 | utilization_pct | numeric | YES |  |  |

### `vw_doc_media_summary`

- Columns: 10
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | doc_id | bigint [64,0] | YES |  |  |
| 2 | doc_name | character varying(500) | YES |  |  |
| 3 | doc_type | character varying(100) | YES |  |  |
| 4 | project_id | bigint [64,0] | YES |  |  |
| 5 | media_scan_status | character varying(20) | YES |  |  |
| 6 | media_scan_json | jsonb | YES |  |  |
| 7 | total_media | bigint [64,0] | YES |  |  |
| 8 | pending_count | bigint [64,0] | YES |  |  |
| 9 | extracted_count | bigint [64,0] | YES |  |  |
| 10 | badge_counts | jsonb | YES |  |  |

### `vw_extraction_mapping_stats`

- Columns: 14
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | mapping_id | integer [32,0] | YES |  |  |
| 2 | document_type | character varying(50) | YES |  |  |
| 3 | source_pattern | character varying(200) | YES |  |  |
| 4 | target_table | character varying(100) | YES |  |  |
| 5 | target_field | character varying(100) | YES |  |  |
| 6 | confidence | character varying(10) | YES |  |  |
| 7 | is_active | boolean | YES |  |  |
| 8 | times_extracted | bigint [64,0] | YES |  |  |
| 9 | projects_used | bigint [64,0] | YES |  |  |
| 10 | documents_processed | bigint [64,0] | YES |  |  |
| 11 | avg_confidence_score | numeric | YES |  |  |
| 12 | write_rate | numeric | YES |  |  |
| 13 | acceptance_rate | numeric | YES |  |  |
| 14 | last_used_at | timestamp with time zone | YES |  |  |

### `vw_item_dependency_status`

- Columns: 12
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | dependency_id | bigint [64,0] | YES |  |  |
| 2 | dependent_item_type | character varying(50) | YES |  |  |
| 3 | dependent_item_table | character varying(100) | YES |  |  |
| 4 | dependent_item_id | bigint [64,0] | YES |  |  |
| 5 | trigger_event | character varying(50) | YES |  |  |
| 6 | trigger_value | numeric [15,2] | YES |  |  |
| 7 | offset_periods | integer [32,0] | YES |  |  |
| 8 | is_hard_dependency | boolean | YES |  |  |
| 9 | trigger_start_period | integer [32,0] | YES |  |  |
| 10 | trigger_completion_period | integer [32,0] | YES |  |  |
| 11 | calculated_start_period | numeric | YES |  |  |
| 12 | calculated_at | timestamp with time zone | YES |  |  |

### `vw_lease_expiration_schedule`

- Columns: 17
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | rent_roll_id | bigint [64,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | tenant_name | character varying(255) | YES |  |  |
| 4 | space_type | character varying(50) | YES |  |  |
| 5 | lease_end_date | date | YES |  |  |
| 6 | leased_sf | numeric [12,2] | YES |  |  |
| 7 | base_rent_psf_annual | numeric [10,2] | YES |  |  |
| 8 | annual_rent | numeric | YES |  |  |
| 9 | market_rent_psf_annual | numeric [10,2] | YES |  |  |
| 10 | mark_to_market_psf | numeric | YES |  |  |
| 11 | mark_to_market_annual | numeric | YES |  |  |
| 12 | renewal_probability | numeric | YES |  |  |
| 13 | downtime_months | integer [32,0] | YES |  |  |
| 14 | expected_rollover_cost | numeric | YES |  |  |
| 15 | expected_free_rent_months | numeric | YES |  |  |
| 16 | expected_vacancy_loss | numeric | YES |  |  |
| 17 | lease_status | character varying(50) | YES |  |  |

### `vw_map_plan_parcels`

- Columns: 14
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | integer [32,0] | YES |  |  |
| 2 | parcel_id | integer [32,0] | YES |  |  |
| 3 | parcel_code | character varying(20) | YES |  |  |
| 4 | landuse_code | character varying(10) | YES |  |  |
| 5 | landuse_type | character varying(50) | YES |  |  |
| 6 | acres_gross | double precision [53] | YES |  |  |
| 7 | units_total | integer [32,0] | YES |  |  |
| 8 | area_no | integer [32,0] | YES |  |  |
| 9 | phase_no | integer [32,0] | YES |  |  |
| 10 | parcel_no | integer [32,0] | YES |  |  |
| 11 | geom | USER-DEFINED | YES |  |  |
| 12 | source_doc | text | YES |  |  |
| 13 | confidence | numeric [3,2] | YES |  |  |
| 14 | version | integer [32,0] | YES |  |  |

### `vw_map_tax_parcels`

- Columns: 5
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | tax_parcel_id | text | YES |  |  |
| 2 | owner_name | text | YES |  |  |
| 3 | situs_address | text | YES |  |  |
| 4 | acres | double precision [53] | YES |  |  |
| 5 | geom | USER-DEFINED | YES |  |  |

### `vw_mkt_absorption_by_lot_width`

- Columns: 10
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lot_width_ft | integer [32,0] | YES |  |  |
| 2 | effective_date | date | YES |  |  |
| 3 | project_count | bigint [64,0] | YES |  |  |
| 4 | avg_monthly_rate | numeric | YES |  |  |
| 5 | avg_3m_rate | numeric | YES |  |  |
| 6 | rate_p25 | numeric | YES |  |  |
| 7 | rate_median | numeric | YES |  |  |
| 8 | rate_p75 | numeric | YES |  |  |
| 9 | avg_price | numeric | YES |  |  |
| 10 | avg_mos_vdl | numeric | YES |  |  |

### `vw_mkt_absorption_by_lu_product`

- Columns: 7
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lu_product_id | bigint [64,0] | YES |  |  |
| 2 | product_code | text | YES |  |  |
| 3 | effective_date | date | YES |  |  |
| 4 | project_count | bigint [64,0] | YES |  |  |
| 5 | avg_monthly_rate | numeric | YES |  |  |
| 6 | avg_3m_rate | numeric | YES |  |  |
| 7 | avg_price | numeric | YES |  |  |

### `vw_mkt_current_projects`

- Columns: 101
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | record_id | bigint [64,0] | YES |  |  |
| 2 | source_project_id | character varying(100) | YES |  |  |
| 3 | source_subdivision_id | character varying(100) | YES |  |  |
| 4 | effective_date | date | YES |  |  |
| 5 | source_file | character varying(200) | YES |  |  |
| 6 | survey_period | character varying(20) | YES |  |  |
| 7 | project_name | character varying(200) | YES |  |  |
| 8 | master_plan_name | character varying(200) | YES |  |  |
| 9 | master_plan_id | character varying(50) | YES |  |  |
| 10 | master_plan_developer | character varying(200) | YES |  |  |
| 11 | builder_name | character varying(200) | YES |  |  |
| 12 | parent_builder | character varying(200) | YES |  |  |
| 13 | status | character varying(30) | YES |  |  |
| 14 | product_type | character varying(50) | YES |  |  |
| 15 | product_style | character varying(50) | YES |  |  |
| 16 | is_active_adult | boolean | YES |  |  |
| 17 | characteristics | text | YES |  |  |
| 18 | lot_size_sf | integer [32,0] | YES |  |  |
| 19 | lot_width_ft | integer [32,0] | YES |  |  |
| 20 | lot_depth_ft | integer [32,0] | YES |  |  |
| 21 | lot_dimensions | character varying(20) | YES |  |  |
| 22 | unit_size_min_sf | integer [32,0] | YES |  |  |
| 23 | unit_size_max_sf | integer [32,0] | YES |  |  |
| 24 | unit_size_avg_sf | integer [32,0] | YES |  |  |
| 25 | price_min | numeric [12,2] | YES |  |  |
| 26 | price_max | numeric [12,2] | YES |  |  |
| 27 | price_avg | numeric [12,2] | YES |  |  |
| 28 | price_per_sf_avg | numeric [8,2] | YES |  |  |
| 29 | price_change_date | date | YES |  |  |
| 30 | units_planned | integer [32,0] | YES |  |  |
| 31 | units_sold | integer [32,0] | YES |  |  |
| 32 | units_remaining | integer [32,0] | YES |  |  |
| 33 | qmi_count | integer [32,0] | YES |  |  |
| 34 | open_date | date | YES |  |  |
| 35 | sold_out_date | date | YES |  |  |
| 36 | sales_rate_monthly | numeric [6,2] | YES |  |  |
| 37 | sales_rate_3m_avg | numeric [6,2] | YES |  |  |
| 38 | sales_rate_6m_avg | numeric [6,2] | YES |  |  |
| 39 | sales_rate_12m_avg | numeric [6,2] | YES |  |  |
| 40 | sales_change_date | date | YES |  |  |
| 41 | annual_starts | integer [32,0] | YES |  |  |
| 42 | annual_closings | integer [32,0] | YES |  |  |
| 43 | quarterly_starts | integer [32,0] | YES |  |  |
| 44 | quarterly_closings | integer [32,0] | YES |  |  |
| 45 | pipeline_excavation | integer [32,0] | YES |  |  |
| 46 | pipeline_survey_stakes | integer [32,0] | YES |  |  |
| 47 | pipeline_street_paving | integer [32,0] | YES |  |  |
| 48 | pipeline_streets_in | integer [32,0] | YES |  |  |
| 49 | pipeline_vdl | integer [32,0] | YES |  |  |
| 50 | pipeline_vacant_land | integer [32,0] | YES |  |  |
| 51 | pipeline_under_construction | integer [32,0] | YES |  |  |
| 52 | pipeline_finished_vacant | integer [32,0] | YES |  |  |
| 53 | models_count | integer [32,0] | YES |  |  |
| 54 | occupied_count | integer [32,0] | YES |  |  |
| 55 | future_inventory_count | integer [32,0] | YES |  |  |
| 56 | mos_vdl | numeric [6,2] | YES |  |  |
| 57 | mos_inventory | numeric [6,2] | YES |  |  |
| 58 | mos_finished_vacant | numeric [6,2] | YES |  |  |
| 59 | incentive_qmi_pct | numeric [5,2] | YES |  |  |
| 60 | incentive_qmi_amt | numeric [12,2] | YES |  |  |
| 61 | incentive_qmi_type | character varying(100) | YES |  |  |
| 62 | incentive_tbb_pct | numeric [5,2] | YES |  |  |
| 63 | incentive_tbb_amt | numeric [12,2] | YES |  |  |
| 64 | incentive_tbb_type | character varying(100) | YES |  |  |
| 65 | incentive_broker_pct | numeric [5,2] | YES |  |  |
| 66 | incentive_broker_amt | numeric [12,2] | YES |  |  |
| 67 | incentive_broker_type | character varying(100) | YES |  |  |
| 68 | hoa_fee_monthly | numeric [8,2] | YES |  |  |
| 69 | hoa_fee_2_monthly | numeric [8,2] | YES |  |  |
| 70 | hoa_fee_per_sqft | numeric [6,4] | YES |  |  |
| 71 | assessment_rate | numeric [5,3] | YES |  |  |
| 72 | assessment_description | text | YES |  |  |
| 73 | latitude | numeric [10,6] | YES |  |  |
| 74 | longitude | numeric [11,6] | YES |  |  |
| 75 | address | character varying(300) | YES |  |  |
| 76 | city | character varying(100) | YES |  |  |
| 77 | zip_code | character varying(10) | YES |  |  |
| 78 | county | character varying(100) | YES |  |  |
| 79 | county_fips | integer [32,0] | YES |  |  |
| 80 | cbsa_name | character varying(100) | YES |  |  |
| 81 | cbsa_code | integer [32,0] | YES |  |  |
| 82 | state | character varying(2) | YES |  |  |
| 83 | boundary_names | text | YES |  |  |
| 84 | school_district | character varying(200) | YES |  |  |
| 85 | school_elementary | text | YES |  |  |
| 86 | school_rating_elementary | character varying(50) | YES |  |  |
| 87 | school_middle | text | YES |  |  |
| 88 | school_rating_middle | character varying(50) | YES |  |  |
| 89 | school_high | text | YES |  |  |
| 90 | school_rating_high | character varying(50) | YES |  |  |
| 91 | website_url | text | YES |  |  |
| 92 | office_phone | character varying(20) | YES |  |  |
| 93 | lu_family_id | bigint [64,0] | YES |  |  |
| 94 | lu_density_id | bigint [64,0] | YES |  |  |
| 95 | lu_type_id | bigint [64,0] | YES |  |  |
| 96 | lu_product_id | bigint [64,0] | YES |  |  |
| 97 | lu_linkage_method | character varying(20) | YES |  |  |
| 98 | lu_linkage_confidence | numeric [3,2] | YES |  |  |
| 99 | ingestion_timestamp | timestamp with time zone | YES |  |  |
| 100 | updated_at | timestamp with time zone | YES |  |  |
| 101 | source_id | integer [32,0] | YES |  |  |

### `vw_mkt_landscaper_summary`

- Columns: 8
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | city | character varying(100) | YES |  |  |
| 2 | lot_width_ft | integer [32,0] | YES |  |  |
| 3 | active_communities | bigint [64,0] | YES |  |  |
| 4 | total_units_available | bigint [64,0] | YES |  |  |
| 5 | avg_absorption_rate | numeric | YES |  |  |
| 6 | avg_price | numeric | YES |  |  |
| 7 | market_entry_price | numeric | YES |  |  |
| 8 | market_ceiling_price | numeric | YES |  |  |

### `vw_mkt_pricing_by_city_lotwidth`

- Columns: 8
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | city | character varying(100) | YES |  |  |
| 2 | lot_width_ft | integer [32,0] | YES |  |  |
| 3 | effective_date | date | YES |  |  |
| 4 | project_count | bigint [64,0] | YES |  |  |
| 5 | avg_price | numeric | YES |  |  |
| 6 | min_price | numeric | YES |  |  |
| 7 | max_price | numeric | YES |  |  |
| 8 | avg_price_psf | numeric | YES |  |  |

### `vw_multifamily_lease_expirations`

- Columns: 22
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | lease_id | integer [32,0] | YES |  |  |
| 2 | unit_id | bigint [64,0] | YES |  |  |
| 3 | unit_number | character varying(50) | YES |  |  |
| 4 | building_name | character varying(100) | YES |  |  |
| 5 | unit_type | character varying(50) | YES |  |  |
| 6 | project_id | bigint [64,0] | YES |  |  |
| 7 | project_name | character varying(255) | YES |  |  |
| 8 | resident_name | character varying(200) | YES |  |  |
| 9 | lease_start_date | date | YES |  |  |
| 10 | lease_end_date | date | YES |  |  |
| 11 | lease_term_months | integer [32,0] | YES |  |  |
| 12 | base_rent_monthly | numeric [10,2] | YES |  |  |
| 13 | effective_rent_monthly | numeric [10,2] | YES |  |  |
| 14 | lease_status | character varying(50) | YES |  |  |
| 15 | notice_date | date | YES |  |  |
| 16 | notice_to_vacate_days | integer [32,0] | YES |  |  |
| 17 | is_renewal | boolean | YES |  |  |
| 18 | days_until_expiration | integer [32,0] | YES |  |  |
| 19 | expiration_priority | text | YES |  |  |
| 20 | market_rent | numeric [10,2] | YES |  |  |
| 21 | potential_rent_increase | numeric | YES |  |  |
| 22 | renewal_status | text | YES |  |  |

### `vw_multifamily_occupancy_summary`

- Columns: 16
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | bigint [64,0] | YES |  |  |
| 2 | project_name | character varying(255) | YES |  |  |
| 3 | unit_type | character varying(50) | YES |  |  |
| 4 | total_units | bigint [64,0] | YES |  |  |
| 5 | occupied_units | bigint [64,0] | YES |  |  |
| 6 | vacant_units | bigint [64,0] | YES |  |  |
| 7 | physical_occupancy_pct | numeric | YES |  |  |
| 8 | total_market_rent | numeric | YES |  |  |
| 9 | total_actual_rent | numeric | YES |  |  |
| 10 | economic_occupancy_pct | numeric | YES |  |  |
| 11 | total_loss_to_lease | numeric | YES |  |  |
| 12 | avg_market_rent | numeric | YES |  |  |
| 13 | avg_actual_rent | numeric | YES |  |  |
| 14 | renovated_units | bigint [64,0] | YES |  |  |
| 15 | renewal_leases | bigint [64,0] | YES |  |  |
| 16 | renewal_rate_pct | numeric | YES |  |  |

### `vw_multifamily_project_summary`

- Columns: 13
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | bigint [64,0] | YES |  |  |
| 2 | project_name | character varying(255) | YES |  |  |
| 3 | total_units | bigint [64,0] | YES |  |  |
| 4 | occupied_units | bigint [64,0] | YES |  |  |
| 5 | physical_occupancy_pct | numeric | YES |  |  |
| 6 | total_market_rent_potential | numeric | YES |  |  |
| 7 | total_actual_rent | numeric | YES |  |  |
| 8 | total_loss_to_lease | numeric | YES |  |  |
| 9 | unit_type_count | bigint [64,0] | YES |  |  |
| 10 | renovated_units | bigint [64,0] | YES |  |  |
| 11 | total_turns_ytd | bigint [64,0] | YES |  |  |
| 12 | avg_turn_cost | numeric | YES |  |  |
| 13 | avg_turn_days | numeric | YES |  |  |

### `vw_multifamily_turn_metrics`

- Columns: 15
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | bigint [64,0] | YES |  |  |
| 2 | project_name | character varying(255) | YES |  |  |
| 3 | unit_type | character varying(50) | YES |  |  |
| 4 | total_turns | bigint [64,0] | YES |  |  |
| 5 | completed_turns | bigint [64,0] | YES |  |  |
| 6 | avg_vacant_days | numeric | YES |  |  |
| 7 | avg_make_ready_cost | numeric | YES |  |  |
| 8 | avg_cleaning_cost | numeric | YES |  |  |
| 9 | avg_painting_cost | numeric | YES |  |  |
| 10 | avg_flooring_cost | numeric | YES |  |  |
| 11 | avg_appliance_cost | numeric | YES |  |  |
| 12 | first_turn_date | date | YES |  |  |
| 13 | last_turn_date | date | YES |  |  |
| 14 | avg_make_ready_days | numeric | YES |  |  |
| 15 | avg_total_turn_days | numeric | YES |  |  |

### `vw_multifamily_unit_status`

- Columns: 22
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | unit_id | integer [32,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | unit_number | character varying(50) | YES |  |  |
| 4 | building_name | character varying(100) | YES |  |  |
| 5 | unit_type | character varying(50) | YES |  |  |
| 6 | bedrooms | numeric [3,1] | YES |  |  |
| 7 | bathrooms | numeric [3,1] | YES |  |  |
| 8 | square_feet | integer [32,0] | YES |  |  |
| 9 | market_rent | numeric [10,2] | YES |  |  |
| 10 | renovation_status | character varying(50) | YES |  |  |
| 11 | lease_id | integer [32,0] | YES |  |  |
| 12 | resident_name | character varying(200) | YES |  |  |
| 13 | lease_start_date | date | YES |  |  |
| 14 | lease_end_date | date | YES |  |  |
| 15 | base_rent_monthly | numeric [10,2] | YES |  |  |
| 16 | effective_rent_monthly | numeric [10,2] | YES |  |  |
| 17 | lease_status | character varying(50) | YES |  |  |
| 18 | is_renewal | boolean | YES |  |  |
| 19 | occupancy_status | text | YES |  |  |
| 20 | loss_to_lease | numeric | YES |  |  |
| 21 | loss_to_lease_pct | numeric | YES |  |  |
| 22 | days_until_expiration | integer [32,0] | YES |  |  |

### `vw_parcels_with_sales`

- Columns: 28
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | parcel_id | integer [32,0] | YES |  |  |
| 2 | parcel_code | character varying(20) | YES |  |  |
| 3 | project_id | integer [32,0] | YES |  |  |
| 4 | area_id | integer [32,0] | YES |  |  |
| 5 | dev_phase_id | integer [32,0] | YES |  |  |
| 6 | units | integer [32,0] | YES |  |  |
| 7 | acres | double precision [53] | YES |  |  |
| 8 | sale_phase_code | character varying(20) | YES |  |  |
| 9 | custom_sale_date | date | YES |  |  |
| 10 | has_sale_overrides | boolean | YES |  |  |
| 11 | use_type_code | text | YES |  |  |
| 12 | use_type_name | character varying(50) | YES |  |  |
| 13 | product_code | text | YES |  |  |
| 14 | product_name | character varying(50) | YES |  |  |
| 15 | base_price_per_unit | numeric [15,2] | YES |  |  |
| 16 | growth_rate | numeric [5,4] | YES |  |  |
| 17 | uom_code | character varying(20) | YES |  |  |
| 18 | pricing_base_date | timestamp with time zone | YES |  |  |
| 19 | sale_id | bigint [64,0] | YES |  |  |
| 20 | sale_date | date | YES |  |  |
| 21 | buyer_name | character varying(200) | YES |  |  |
| 22 | buyer_entity | character varying(200) | YES |  |  |
| 23 | sale_status | character varying(50) | YES |  |  |
| 24 | gross_value | numeric [15,2] | YES |  |  |
| 25 | net_proceeds | numeric [15,2] | YES |  |  |
| 26 | commission_pct | numeric | YES |  |  |
| 27 | closing_cost_per_unit | numeric | YES |  |  |
| 28 | onsite_cost_pct | numeric | YES |  |  |

### `vw_permit_annual_by_jurisdiction`

- Columns: 5
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | jurisdiction_name | character varying(100) | YES |  |  |
| 2 | permit_year | integer [32,0] | YES |  |  |
| 3 | annual_permits_sf | bigint [64,0] | YES |  |  |
| 4 | annual_permits_total | bigint [64,0] | YES |  |  |
| 5 | source_id | integer [32,0] | YES |  |  |

### `vw_permit_msa_monthly`

- Columns: 6
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | permit_month | date | YES |  |  |
| 2 | permit_year | integer [32,0] | YES |  |  |
| 3 | msa_permits_sf | bigint [64,0] | YES |  |  |
| 4 | msa_permits_total | bigint [64,0] | YES |  |  |
| 5 | jurisdiction_count | bigint [64,0] | YES |  |  |
| 6 | source_id | integer [32,0] | YES |  |  |

### `vw_project_acquisition_summary`

- Columns: 12
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | project_id | integer [32,0] | YES |  |  |
| 2 | project_name | character varying(255) | YES |  |  |
| 3 | asking_price | numeric | YES |  |  |
| 4 | has_closing_date | boolean | YES |  |  |
| 5 | closing_date | date | YES |  |  |
| 6 | total_acquisition_cost | numeric | YES |  |  |
| 7 | land_cost | numeric | YES |  |  |
| 8 | total_fees | numeric | YES |  |  |
| 9 | total_deposits | numeric | YES |  |  |
| 10 | total_credits | numeric | YES |  |  |
| 11 | effective_acquisition_price | numeric | YES |  |  |
| 12 | price_source | text | YES |  |  |

### `vw_rent_roll`

- Columns: 12
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | property_name | character varying(200) | YES |  |  |
| 2 | space_number | character varying(50) | YES |  |  |
| 3 | rentable_sf | numeric [10,2] | YES |  |  |
| 4 | tenant_name | character varying(200) | YES |  |  |
| 5 | creditworthiness | character varying(50) | YES |  |  |
| 6 | lease_number | character varying(50) | YES |  |  |
| 7 | lease_commencement_date | date | YES |  |  |
| 8 | lease_expiration_date | date | YES |  |  |
| 9 | lease_term_months | integer [32,0] | YES |  |  |
| 10 | base_rent_annual | numeric [12,2] | YES |  |  |
| 11 | base_rent_psf_annual | numeric [8,2] | YES |  |  |
| 12 | lease_status | character varying(50) | YES |  |  |

### `vw_revenue_timeline`

- Columns: 19
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | absorption_id | bigint [64,0] | YES |  |  |
| 2 | project_id | bigint [64,0] | YES |  |  |
| 3 | revenue_stream_name | character varying(200) | YES |  |  |
| 4 | revenue_category | character varying(100) | YES |  |  |
| 5 | total_units | integer [32,0] | YES |  |  |
| 6 | base_price_per_unit | numeric [12,2] | YES |  |  |
| 7 | price_escalation_pct | numeric [6,5] | YES |  |  |
| 8 | period_id | bigint [64,0] | YES |  |  |
| 9 | period_start_date | date | YES |  |  |
| 10 | period_end_date | date | YES |  |  |
| 11 | units_sold_this_period | numeric [8,2] | YES |  |  |
| 12 | cumulative_units_sold | numeric [12,2] | YES |  |  |
| 13 | units_remaining | numeric [12,2] | YES |  |  |
| 14 | average_price_this_period | numeric [12,2] | YES |  |  |
| 15 | gross_revenue | numeric [15,2] | YES |  |  |
| 16 | sales_commission | numeric [15,2] | YES |  |  |
| 17 | closing_costs | numeric [15,2] | YES |  |  |
| 18 | net_revenue | numeric [15,2] | YES |  |  |
| 19 | pct_complete | numeric | YES |  |  |

### `vw_zoning_glossary_export`

- Columns: 27
- Constraints: 0
- Foreign keys: 0
- Indexes: 0
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | glossary_id | uuid | YES |  |  |
| 2 | jurisdiction_display | text | YES |  |  |
| 3 | jurisdiction_city | text | YES |  |  |
| 4 | jurisdiction_county | text | YES |  |  |
| 5 | jurisdiction_state | character(2) | YES |  |  |
| 6 | family_name | text | YES |  |  |
| 7 | district_code | text | YES |  |  |
| 8 | district_name | text | YES |  |  |
| 9 | local_code_raw | text | YES |  |  |
| 10 | local_code_canonical | text | YES |  |  |
| 11 | code_token_kind | USER-DEFINED | YES |  |  |
| 12 | code_token_confidence | numeric [3,2] | YES |  |  |
| 13 | mapped_use | text | YES |  |  |
| 14 | allowance | character(1) | YES |  |  |
| 15 | purpose_text | text | YES |  |  |
| 16 | intent_text | text | YES |  |  |
| 17 | conditions_text | text | YES |  |  |
| 18 | development_standards | jsonb | YES |  |  |
| 19 | use_standard_refs | jsonb | YES |  |  |
| 20 | definitions_refs | jsonb | YES |  |  |
| 21 | narrative_section_ref | text | YES |  |  |
| 22 | narrative_src_url | text | YES |  |  |
| 23 | source_doc_url | text | YES |  |  |
| 24 | effective_date | date | YES |  |  |
| 25 | is_active | boolean | YES |  |  |
| 26 | created_at | timestamp with time zone | YES |  |  |
| 27 | updated_at | timestamp with time zone | YES |  |  |

### `zonda_subdivisions`

- Columns: 26
- Constraints: 2
- Foreign keys: 0
- Indexes: 7
- Triggers: 0

| # | Column | Type | Nullable | Default | Comment |
|---:|---|---|---|---|---|
| 1 | id | integer [32,0] | NO | nextval('zonda_subdivisions_id_seq'::regclass) |  |
| 2 | msa_code | character varying(10) | NO | '38060'::character varying | Metropolitan Statistical Area code. Default 38060 for Phoenix-Mesa-Chandler. |
| 3 | project_name | character varying(200) | NO |  | Subdivision or community name from Zonda. |
| 4 | builder | character varying(200) | YES |  |  |
| 5 | mpc | character varying(200) | YES |  | Master Planned Community name. Nullable for standalone subdivisions. |
| 6 | property_type | character varying(50) | YES |  |  |
| 7 | style | character varying(50) | YES |  |  |
| 8 | lot_size_sf | integer [32,0] | YES |  |  |
| 9 | lot_width | integer [32,0] | YES |  | Lot width in feet. Common values: 40, 45, 50, 55, 60, 65, 70, 75, 80. |
| 10 | lot_depth | integer [32,0] | YES |  |  |
| 11 | product_code | character varying(20) | YES |  | Product dimension code in WxD format. E.g., 45x115 = 45ft wide x 115ft deep. |
| 12 | units_sold | integer [32,0] | YES |  |  |
| 13 | units_remaining | integer [32,0] | YES |  | Unsold inventory count as of source_date. |
| 14 | size_min_sf | integer [32,0] | YES |  |  |
| 15 | size_max_sf | integer [32,0] | YES |  |  |
| 16 | size_avg_sf | integer [32,0] | YES |  |  |
| 17 | price_min | numeric [12,2] | YES |  |  |
| 18 | price_max | numeric [12,2] | YES |  |  |
| 19 | price_avg | numeric [12,2] | YES |  | Average base price. Not closing price - does not include options/upgrades. |
| 20 | latitude | numeric [10,6] | YES |  |  |
| 21 | longitude | numeric [10,6] | YES |  |  |
| 22 | special_features | text | YES |  | Special features like Active Adult, Gated, Golf, etc. |
| 23 | source_file | character varying(200) | YES |  |  |
| 24 | source_date | date | YES |  |  |
| 25 | created_at | timestamp with time zone | YES | now() |  |
| 26 | updated_at | timestamp with time zone | YES | now() |  |

#### Constraints

| Name | Type | Definition |
|---|---|---|
| zonda_subdivisions_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| zonda_subdivisions_msa_code_project_name_product_code_key | UNIQUE | UNIQUE (msa_code, project_name, product_code) |

#### Indexes

- `idx_zonda_builder`

```sql
CREATE INDEX idx_zonda_builder ON landscape.zonda_subdivisions USING btree (builder)
```
- `idx_zonda_location`

```sql
CREATE INDEX idx_zonda_location ON landscape.zonda_subdivisions USING btree (latitude, longitude)
```
- `idx_zonda_mpc`

```sql
CREATE INDEX idx_zonda_mpc ON landscape.zonda_subdivisions USING btree (mpc)
```
- `idx_zonda_msa_lotwidth`

```sql
CREATE INDEX idx_zonda_msa_lotwidth ON landscape.zonda_subdivisions USING btree (msa_code, lot_width)
```
- `idx_zonda_price`

```sql
CREATE INDEX idx_zonda_price ON landscape.zonda_subdivisions USING btree (msa_code, price_avg)
```
- `zonda_subdivisions_msa_code_project_name_product_code_key`

```sql
CREATE UNIQUE INDEX zonda_subdivisions_msa_code_project_name_product_code_key ON landscape.zonda_subdivisions USING btree (msa_code, project_name, product_code)
```
- `zonda_subdivisions_pkey`

```sql
CREATE UNIQUE INDEX zonda_subdivisions_pkey ON landscape.zonda_subdivisions USING btree (id)
```


## Views

### `core_lookup_vw`

```sql
 SELECT l.list_key,
    l.name AS list_name,
    i.item_id,
    i.sort_order,
    i.code,
    i.label,
    i.is_active
   FROM core_lookup_list l
     JOIN core_lookup_item i USING (list_key)
  WHERE l.is_active AND i.is_active
  ORDER BY l.list_key, i.sort_order, i.item_id;
```
### `geography_columns`

```sql
 SELECT current_database() AS f_table_catalog,
    n.nspname AS f_table_schema,
    c.relname AS f_table_name,
    a.attname AS f_geography_column,
    postgis_typmod_dims(a.atttypmod) AS coord_dimension,
    postgis_typmod_srid(a.atttypmod) AS srid,
    postgis_typmod_type(a.atttypmod) AS type
   FROM pg_class c,
    pg_attribute a,
    pg_type t,
    pg_namespace n
  WHERE t.typname = 'geography'::name AND a.attisdropped = false AND a.atttypid = t.oid AND a.attrelid = c.oid AND c.relnamespace = n.oid AND (c.relkind = ANY (ARRAY['r'::"char", 'v'::"char", 'm'::"char", 'f'::"char", 'p'::"char"])) AND NOT pg_is_other_temp_schema(c.relnamespace) AND has_table_privilege(c.oid, 'SELECT'::text);
```
### `geometry_columns`

```sql
 SELECT current_database()::character varying(256) AS f_table_catalog,
    n.nspname AS f_table_schema,
    c.relname AS f_table_name,
    a.attname AS f_geometry_column,
    COALESCE(postgis_typmod_dims(a.atttypmod), sn.ndims, 2) AS coord_dimension,
    COALESCE(NULLIF(postgis_typmod_srid(a.atttypmod), 0), sr.srid, 0) AS srid,
    replace(replace(COALESCE(NULLIF(upper(postgis_typmod_type(a.atttypmod)), 'GEOMETRY'::text), st.type, 'GEOMETRY'::text), 'ZM'::text, ''::text), 'Z'::text, ''::text)::character varying(30) AS type
   FROM pg_class c
     JOIN pg_attribute a ON a.attrelid = c.oid AND NOT a.attisdropped
     JOIN pg_namespace n ON c.relnamespace = n.oid
     JOIN pg_type t ON a.atttypid = t.oid
     LEFT JOIN ( SELECT s.connamespace,
            s.conrelid,
            s.conkey,
            replace(split_part(s.consrc, ''''::text, 2), ')'::text, ''::text) AS type
           FROM ( SELECT pg_constraint.connamespace,
                    pg_constraint.conrelid,
                    pg_constraint.conkey,
                    pg_get_constraintdef(pg_constraint.oid) AS consrc
                   FROM pg_constraint) s
          WHERE s.consrc ~~* '%geometrytype(% = %'::text) st ON st.connamespace = n.oid AND st.conrelid = c.oid AND (a.attnum = ANY (st.conkey))
     LEFT JOIN ( SELECT s.connamespace,
            s.conrelid,
            s.conkey,
            replace(split_part(s.consrc, ' = '::text, 2), ')'::text, ''::text)::integer AS ndims
           FROM ( SELECT pg_constraint.connamespace,
                    pg_constraint.conrelid,
                    pg_constraint.conkey,
                    pg_get_constraintdef(pg_constraint.oid) AS consrc
                   FROM pg_constraint) s
          WHERE s.consrc ~~* '%ndims(% = %'::text) sn ON sn.connamespace = n.oid AND sn.conrelid = c.oid AND (a.attnum = ANY (sn.conkey))
     LEFT JOIN ( SELECT s.connamespace,
            s.conrelid,
            s.conkey,
            replace(replace(split_part(s.consrc, ' = '::text, 2), ')'::text, ''::text), '('::text, ''::text)::integer AS srid
           FROM ( SELECT pg_constraint.connamespace,
                    pg_constraint.conrelid,
                    pg_constraint.conkey,
                    pg_get_constraintdef(pg_constraint.oid) AS consrc
                   FROM pg_constraint) s
          WHERE s.consrc ~~* '%srid(% = %'::text) sr ON sr.connamespace = n.oid AND sr.conrelid = c.oid AND (a.attnum = ANY (sr.conkey))
  WHERE (c.relkind = ANY (ARRAY['r'::"char", 'v'::"char", 'm'::"char", 'f'::"char", 'p'::"char"])) AND NOT c.relname = 'raster_columns'::name AND t.typname = 'geometry'::name AND NOT pg_is_other_temp_schema(c.relnamespace) AND has_table_privilege(c.oid, 'SELECT'::text);
```
### `mv_doc_search`

```sql
 SELECT d.doc_id,
    d.project_id,
    d.workspace_id,
    d.doc_name,
    d.doc_type,
    d.discipline,
    d.status,
    d.version_no,
    d.storage_uri,
    d.mime_type,
    d.file_size_bytes,
    d.doc_date,
    d.contract_value,
    d.priority,
    d.profile_json,
    d.created_at,
    d.updated_at,
    p.project_name,
    ph.phase_no::text AS phase_name,
    NULL::text AS parcel_name,
    fl.folder_id,
    f.path AS folder_path,
    f.name AS folder_name,
    dt.extracted_text,
    dt.word_count,
    d.media_scan_status,
    d.media_scan_json,
    (((((((((COALESCE(d.doc_name, ''::character varying)::text || ' '::text) || COALESCE(d.doc_type, ''::character varying)::text) || ' '::text) || COALESCE(d.discipline, ''::character varying)::text) || ' '::text) || COALESCE(p.project_name, ''::character varying)::text) || ' '::text) || COALESCE(f.name, ''::character varying)::text) || ' '::text) || COALESCE(dt.extracted_text, ''::text) AS searchable_text
   FROM core_doc d
     LEFT JOIN tbl_project p ON d.project_id = p.project_id
     LEFT JOIN tbl_phase ph ON d.phase_id = ph.phase_id
     LEFT JOIN core_doc_folder_link fl ON d.doc_id = fl.doc_id
     LEFT JOIN core_doc_folder f ON fl.folder_id = f.folder_id
     LEFT JOIN core_doc_text dt ON d.doc_id = dt.doc_id
  WHERE d.status::text <> 'archived'::text AND d.deleted_at IS NULL;
```
### `v_ai_review_summary`

```sql
 SELECT p.project_id,
    p.project_name,
    count(arh.review_id) AS total_reviews,
    max(arh.created_at) AS last_review_date,
    count(
        CASE
            WHEN arh.action_type::text = 'field_update'::text THEN 1
            ELSE NULL::integer
        END) AS field_updates_count,
    p.ai_last_reviewed
   FROM tbl_project p
     LEFT JOIN ai_review_history arh ON p.project_id = arh.project_id
  GROUP BY p.project_id, p.project_name, p.ai_last_reviewed
  ORDER BY p.project_id;
```
### `v_contact_projects`

```sql
 SELECT c.contact_id,
    c.name AS contact_name,
    c.contact_type,
    c.company_name,
    pc.project_id,
    p.project_name,
    p.project_type_code,
    p.is_active AS project_is_active,
    r.role_label,
    r.role_category,
    pc.is_primary,
    pc.created_at AS assigned_at
   FROM tbl_contact c
     JOIN tbl_project_contact pc ON c.contact_id = pc.contact_id
     JOIN tbl_project p ON pc.project_id = p.project_id
     JOIN tbl_contact_role r ON pc.role_id = r.role_id
  WHERE c.is_active = true
  ORDER BY c.name, p.project_name;
```
### `v_contact_relationships`

```sql
 SELECT r.relationship_id,
    r.cabinet_id,
    r.contact_id,
    r.related_to_id,
    r.relationship_type,
    r.role_title,
    r.start_date,
    r.end_date,
    r.end_date IS NULL AS is_current,
    c1.name AS contact_name,
    c1.contact_type,
    c2.name AS related_to_name,
    c2.contact_type AS related_to_type
   FROM tbl_contact_relationship r
     JOIN tbl_contact c1 ON r.contact_id = c1.contact_id
     JOIN tbl_contact c2 ON r.related_to_id = c2.contact_id;
```
### `v_lease_summary`

```sql
 SELECT l.project_id,
    p.project_name,
    count(DISTINCT l.lease_id) AS total_leases,
    count(DISTINCT
        CASE
            WHEN l.lease_status::text = 'CONTRACT'::text THEN l.lease_id
            ELSE NULL::integer
        END) AS contract_leases,
    count(DISTINCT
        CASE
            WHEN l.lease_status::text = 'SPECULATIVE'::text THEN l.lease_id
            ELSE NULL::integer
        END) AS speculative_leases,
    sum(l.leased_sf) AS total_leased_sf,
    sum(
        CASE
            WHEN l.affects_occupancy AND l.lease_status::text = 'CONTRACT'::text THEN l.leased_sf
            ELSE 0::numeric
        END) AS occupied_sf,
    round(sum(
        CASE
            WHEN l.affects_occupancy AND l.lease_status::text = 'CONTRACT'::text THEN l.leased_sf
            ELSE 0::numeric
        END) / NULLIF(sum(l.leased_sf), 0::numeric) * 100::numeric, 2) AS occupancy_pct
   FROM tbl_lease l
     JOIN tbl_project p ON l.project_id = p.project_id
  GROUP BY l.project_id, p.project_name;
```
### `v_project_contacts`

```sql
 SELECT contact_id,
    project_id,
    contact_role,
        CASE
            WHEN contact_role::text = 'property_contact'::text THEN 'Property Contact'::text
            WHEN contact_role::text = 'listing_broker'::text THEN 'Listing Broker'::text
            WHEN contact_role::text = 'buyer_broker'::text THEN 'Buyer Broker'::text
            WHEN contact_role::text = 'mortgage_broker'::text THEN 'Mortgage Broker'::text
            WHEN contact_role::text = 'owner_representative'::text THEN 'Owner Representative'::text
            WHEN contact_role::text = 'seller'::text THEN 'Seller'::text
            WHEN contact_role::text = 'buyer'::text THEN 'Buyer'::text
            WHEN contact_role::text = 'lender'::text THEN 'Lender'::text
            WHEN contact_role::text = 'title'::text THEN 'Title Company'::text
            WHEN contact_role::text = 'escrow'::text THEN 'Escrow'::text
            WHEN contact_role::text = 'attorney'::text THEN 'Attorney'::text
            WHEN contact_role::text = 'property_manager'::text THEN 'Property Manager'::text
            ELSE initcap(replace(contact_role::text, '_'::text, ' '::text))
        END AS role_display_name,
        CASE
            WHEN contact_role::text = 'property_contact'::text THEN 1
            WHEN contact_role::text = 'listing_broker'::text THEN 2
            WHEN contact_role::text = 'buyer_broker'::text THEN 3
            WHEN contact_role::text = 'mortgage_broker'::text THEN 4
            WHEN contact_role::text = 'owner_representative'::text THEN 5
            WHEN contact_role::text = 'seller'::text THEN 6
            WHEN contact_role::text = 'buyer'::text THEN 7
            WHEN contact_role::text = 'lender'::text THEN 8
            WHEN contact_role::text = 'title'::text THEN 9
            WHEN contact_role::text = 'escrow'::text THEN 10
            WHEN contact_role::text = 'attorney'::text THEN 11
            WHEN contact_role::text = 'property_manager'::text THEN 12
            ELSE 99
        END AS role_display_order,
    contact_name,
    title,
    company,
    email,
    phone_direct,
    phone_mobile,
    notes,
    sort_order,
    created_at,
    updated_at
   FROM tbl_contacts_legacy
  WHERE contact_role IS NOT NULL
  ORDER BY (
        CASE
            WHEN contact_role::text = 'property_contact'::text THEN 1
            WHEN contact_role::text = 'listing_broker'::text THEN 2
            WHEN contact_role::text = 'buyer_broker'::text THEN 3
            WHEN contact_role::text = 'mortgage_broker'::text THEN 4
            WHEN contact_role::text = 'owner_representative'::text THEN 5
            WHEN contact_role::text = 'seller'::text THEN 6
            WHEN contact_role::text = 'buyer'::text THEN 7
            WHEN contact_role::text = 'lender'::text THEN 8
            WHEN contact_role::text = 'title'::text THEN 9
            WHEN contact_role::text = 'escrow'::text THEN 10
            WHEN contact_role::text = 'attorney'::text THEN 11
            WHEN contact_role::text = 'property_manager'::text THEN 12
            ELSE 99
        END), sort_order, contact_id;
```
### `v_project_contacts_detail`

```sql
 SELECT pc.project_contact_id,
    pc.project_id,
    pc.contact_id,
    pc.role_id,
    pc.is_primary,
    pc.is_billing_contact,
    pc.notes AS assignment_notes,
    pc.created_at AS assigned_at,
    c.name AS contact_name,
    c.display_name,
    c.contact_type,
    c.first_name,
    c.last_name,
    c.title,
    c.company_name,
    c.email,
    c.phone,
    c.phone_mobile,
    r.role_code,
    r.role_label,
    r.role_category,
    r.display_order AS role_display_order,
    p.project_name
   FROM tbl_project_contact pc
     JOIN tbl_contact c ON pc.contact_id = c.contact_id
     JOIN tbl_contact_role r ON pc.role_id = r.role_id
     JOIN tbl_project p ON pc.project_id = p.project_id
  WHERE c.is_active = true
  ORDER BY r.display_order, c.name;
```
### `v_rent_roll`

```sql
 SELECT l.lease_id,
    l.project_id,
    l.tenant_name,
    l.suite_number,
    l.lease_status,
    l.lease_type,
    l.leased_sf,
    l.lease_commencement_date,
    l.lease_expiration_date,
    l.lease_term_months,
    br.base_rent_psf_annual,
    br.base_rent_annual,
    br.base_rent_monthly,
    l.renewal_probability_pct,
    EXTRACT(year FROM age(l.lease_expiration_date::timestamp with time zone, CURRENT_DATE::timestamp with time zone))::integer * 12 + EXTRACT(month FROM age(l.lease_expiration_date::timestamp with time zone, CURRENT_DATE::timestamp with time zone))::integer AS months_to_expiration
   FROM tbl_lease l
     LEFT JOIN tbl_base_rent br ON l.lease_id = br.lease_id AND br.period_number = 1
  WHERE l.affects_occupancy = true
  ORDER BY l.lease_expiration_date;
```
### `v_sales_comparables_full`

```sql
 SELECT comparable_id,
    project_id,
    comp_number,
    property_name,
    address,
    city,
    state,
    zip,
    sale_date,
    sale_price,
    price_per_unit,
    price_per_sf,
    year_built,
    units,
    building_sf,
    cap_rate,
    grm,
    distance_from_subject,
    unit_mix,
    notes,
    created_at,
    updated_at,
    latitude,
    longitude,
    unit_count,
    costar_comp_id,
    price_status,
    comp_status,
    sale_type,
    sale_conditions,
    hold_period_months,
    days_on_market,
    asking_price,
    transfer_tax,
    document_number,
    escrow_length_days,
    percent_leased_at_sale,
    actual_cap_rate,
    pro_forma_cap_rate,
    gim,
    noi_at_sale,
    gross_income_at_sale,
    financing_type,
    financing_lender,
    financing_amount,
    financing_rate,
    financing_term_months,
    loan_to_value,
    assumed_financing,
    recorded_buyer,
    true_buyer,
    buyer_contact,
    buyer_type,
    recorded_seller,
    true_seller,
    seller_contact,
    seller_type,
    buyer_broker_company,
    buyer_broker_name,
    buyer_broker_phone,
    listing_broker_company,
    listing_broker_name,
    listing_broker_phone,
    no_broker_deal,
    property_type,
    property_subtype,
    building_class,
    costar_star_rating,
    location_type,
    num_buildings,
    num_floors,
    typical_floor_sf,
    tenancy_type,
    owner_occupied,
    avg_unit_size_sf,
    units_per_acre,
    parking_spaces,
    parking_ratio,
    parking_type,
    elevators,
    zoning,
    construction_type,
    roof_type,
    hvac_type,
    sprinklered,
    land_area_sf,
    land_area_acres,
    far_allowed,
    far_actual,
    num_parcels,
    topography,
    utilities_available,
    entitlements,
    environmental_issues,
    total_assessed_value,
    land_assessed_value,
    improved_assessed_value,
    assessment_year,
    tax_amount,
    tax_per_unit,
    percent_improved,
    metro_market,
    submarket,
    county,
    cbsa,
    csa,
    dma,
    walk_score,
    transit_score,
    bike_score,
    data_source,
    verification_status,
    verification_source,
    verification_date,
    transaction_notes,
    internal_notes,
    is_portfolio_sale,
    portfolio_name,
    portfolio_property_count,
    price_allocation_method,
    allocated_price,
    site_amenities,
    extra_data,
    raw_import_data,
    ( SELECT count(*) AS count
           FROM tbl_sales_comp_unit_mix um
          WHERE um.comparable_id = sc.comparable_id) AS unit_mix_count,
    ( SELECT sum(um.unit_count) AS sum
           FROM tbl_sales_comp_unit_mix um
          WHERE um.comparable_id = sc.comparable_id) AS total_units_from_mix,
    ( SELECT count(*) AS count
           FROM tbl_sales_comp_tenants t
          WHERE t.comparable_id = sc.comparable_id) AS tenant_count,
    ( SELECT sum(t.leased_sf) AS sum
           FROM tbl_sales_comp_tenants t
          WHERE t.comparable_id = sc.comparable_id) AS total_leased_sf,
    ( SELECT count(*) AS count
           FROM tbl_sales_comp_history h
          WHERE h.comparable_id = sc.comparable_id) AS prior_sales_count,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_industrial i
          WHERE i.comparable_id = sc.comparable_id)) AS has_industrial_data,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_hospitality hs
          WHERE hs.comparable_id = sc.comparable_id)) AS has_hospitality_data,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_land l
          WHERE l.comparable_id = sc.comparable_id)) AS has_land_data,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_self_storage ss
          WHERE ss.comparable_id = sc.comparable_id)) AS has_self_storage_data,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_retail r
          WHERE r.comparable_id = sc.comparable_id)) AS has_retail_data,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_office o
          WHERE o.comparable_id = sc.comparable_id)) AS has_office_data,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_specialty_housing sh
          WHERE sh.comparable_id = sc.comparable_id)) AS has_specialty_data,
    (EXISTS ( SELECT 1
           FROM tbl_sales_comp_manufactured m
          WHERE m.comparable_id = sc.comparable_id)) AS has_manufactured_data
   FROM tbl_sales_comparables sc;
```
### `vw_absorption_with_dependencies`

```sql
 SELECT ab.absorption_id,
    ab.project_id,
    ab.area_id,
    ab.phase_id,
    ab.parcel_id,
    ab.revenue_stream_name,
    ab.revenue_category,
    ab.start_period,
    ab.periods_to_complete,
    ab.timing_method,
    ab.units_per_period,
    ab.total_units,
    ab.base_price_per_unit,
    ab.price_escalation_pct,
    d.dependency_id,
    d.trigger_event,
    d.trigger_value,
    d.offset_periods,
    d.is_hard_dependency,
    d.dependency_id IS NOT NULL AS has_dependency,
        CASE
            WHEN d.dependency_id IS NULL THEN 'No dependency'::text
            WHEN d.trigger_event::text = 'START'::text THEN (((('After '::text || d.trigger_item_table::text) || ' #'::text) || d.trigger_item_id) || ' starts'::text) ||
            CASE
                WHEN d.offset_periods <> 0 THEN (' +'::text || d.offset_periods) || 'p'::text
                ELSE ''::text
            END
            WHEN d.trigger_event::text = 'COMPLETE'::text THEN (((('After '::text || d.trigger_item_table::text) || ' #'::text) || d.trigger_item_id) || ' completes'::text) ||
            CASE
                WHEN d.offset_periods <> 0 THEN (' +'::text || d.offset_periods) || 'p'::text
                ELSE ''::text
            END
            WHEN d.trigger_event::text = 'PCT_COMPLETE'::text THEN (((('At '::text || d.trigger_value) || '% of '::text) || d.trigger_item_table::text) || ' #'::text) || d.trigger_item_id
            WHEN d.trigger_event::text = 'ABSOLUTE'::text THEN 'Absolute period '::text || ab.start_period
            ELSE 'Unknown dependency'::text
        END AS dependency_summary
   FROM tbl_absorption_schedule ab
     LEFT JOIN tbl_item_dependency d ON d.dependent_item_type::text = 'REVENUE'::text AND d.dependent_item_table::text = 'tbl_absorption_schedule'::text AND d.dependent_item_id = ab.absorption_id;
```
### `vw_acreage_allocation`

```sql
 SELECT a.allocation_id,
    a.project_id,
    p.project_name,
    a.phase_id,
    a.parcel_id,
    a.allocation_type_id,
    COALESCE(t.allocation_type_code, a.allocation_type_code) AS allocation_type_code,
    COALESCE(t.allocation_type_name, a.allocation_type_code) AS allocation_type_name,
    t.is_developable,
    a.acres,
    a.source_doc_id,
    d.doc_name AS source_document,
    a.source_page,
    a.confidence_score,
    a.notes,
    a.created_at,
    a.updated_at
   FROM tbl_acreage_allocation a
     LEFT JOIN tbl_project p ON a.project_id = p.project_id
     LEFT JOIN lu_acreage_allocation_type t ON a.allocation_type_id = t.allocation_type_id
     LEFT JOIN core_doc d ON a.source_doc_id = d.doc_id;
```
### `vw_budget_grid_items`

```sql
 WITH RECURSIVE unit_cost_category_path AS (
         SELECT c.category_id,
            c.parent_id,
            NULL::text AS code,
            NULL::text AS scope,
            c.category_name::text AS detail,
            ARRAY[c.category_name::text] AS path_array,
            c.category_name::text AS full_path,
            1 AS depth,
            'unit_cost_category'::text AS category_source
           FROM core_unit_cost_category c
          WHERE c.parent_id IS NULL AND c.is_active = true
        UNION ALL
         SELECT c.category_id,
            c.parent_id,
            NULL::text AS code,
            NULL::text AS scope,
            c.category_name::text AS detail,
            cp.path_array || c.category_name::text,
            (cp.full_path || ' → '::text) || c.category_name::text,
            cp.depth + 1,
            'unit_cost_category'::text AS category_source
           FROM core_unit_cost_category c
             JOIN unit_cost_category_path cp ON c.parent_id = cp.category_id
          WHERE c.is_active = true
        )
 SELECT b.fact_id,
    b.budget_id,
    bv.name AS budget_version,
    b.project_id,
    b.division_id,
    d.tier,
    d.division_code,
    d.display_name AS division_name,
    d.parent_division_id,
    b.category_id,
    uc.code AS cost_code,
    uc.scope,
    uc.full_path AS category_path,
    uc.depth AS category_depth,
    uc.category_source,
    uc.path_array[1] AS category_l1_name,
    uc.path_array[2] AS category_l2_name,
    uc.path_array[3] AS category_l3_name,
    uc.path_array[4] AS category_l4_name,
    b.activity,
    b.uom_code,
    u.name AS uom_display,
    b.qty,
    b.rate,
    b.amount,
        CASE
            WHEN b.amount IS NOT NULL THEN b.amount
            WHEN b.qty IS NOT NULL AND b.rate IS NOT NULL THEN b.qty * b.rate
            ELSE 0::numeric
        END AS calculated_amount,
    b.start_date,
    b.end_date,
    b.start_period,
    b.periods_to_complete,
    b.end_period,
    b.escalation_rate,
    b.contingency_pct,
    b.timing_method,
    b.contract_number,
    b.purchase_order,
    b.is_committed,
    b.confidence_level,
    b.vendor_contact_id,
    contacts.company_name AS vendor_name,
    b.notes,
    b.created_at
   FROM core_fin_fact_budget b
     JOIN core_fin_budget_version bv ON bv.budget_id = b.budget_id
     LEFT JOIN tbl_division d ON d.division_id = b.division_id
     LEFT JOIN unit_cost_category_path uc ON uc.category_id = b.category_id
     LEFT JOIN core_fin_uom u ON u.uom_code = b.uom_code
     LEFT JOIN tbl_contacts_legacy contacts ON contacts.contact_id = b.vendor_contact_id;
```
### `vw_budget_variance`

```sql
 WITH original_budget AS (
         SELECT fb.category_id,
            fb.project_id,
            fb.division_id AS container_id,
            sum(fb.amount) AS original_amount
           FROM core_fin_fact_budget fb
             JOIN core_fin_budget_version bv ON fb.budget_id = bv.budget_id
          WHERE bv.name = 'Original'::text AND bv.status = 'active'::text
          GROUP BY fb.category_id, fb.project_id, fb.division_id
        ), current_budget AS (
         SELECT fb.fact_id,
            fb.category_id,
            fb.project_id,
            fb.division_id AS container_id,
            fb.amount AS current_amount
           FROM core_fin_fact_budget fb
             JOIN core_fin_budget_version bv ON fb.budget_id = bv.budget_id
          WHERE bv.name = 'Forecast'::text AND bv.status = 'active'::text
        )
 SELECT cb.fact_id,
    cb.category_id,
    cb.project_id,
    cb.container_id,
    COALESCE(ob.original_amount, 0::numeric) AS original_amount,
    cb.current_amount,
    cb.current_amount - COALESCE(ob.original_amount, 0::numeric) AS variance_amount,
        CASE
            WHEN ob.original_amount > 0::numeric THEN round((cb.current_amount - ob.original_amount) / ob.original_amount * 100::numeric, 2)
            ELSE NULL::numeric
        END AS variance_percent,
        CASE
            WHEN cb.current_amount < COALESCE(ob.original_amount, 0::numeric) THEN 'under'::text
            WHEN cb.current_amount > COALESCE(ob.original_amount, 0::numeric) THEN 'over'::text
            ELSE 'on_budget'::text
        END AS variance_status
   FROM current_budget cb
     LEFT JOIN original_budget ob ON cb.category_id = ob.category_id AND cb.project_id = ob.project_id AND COALESCE(cb.container_id, '-1'::integer::bigint) = COALESCE(ob.container_id, '-1'::integer::bigint);
```
### `vw_budget_with_dependencies`

```sql
 SELECT bi.budget_item_id,
    bi.project_id,
    bi.structure_id,
    bs.scope,
    bs.category,
    bs.detail AS description,
    bi.amount,
    bi.quantity,
    bi.cost_per_unit,
    bi.notes,
    bi.timing_method,
    bi.timing_locked,
    bi.start_period,
    bi.periods_to_complete,
    bi.s_curve_profile,
    bi.actual_amount,
    bi.variance_amount,
    bi.variance_pct,
    d.dependency_id,
    d.trigger_event,
    d.trigger_value,
    d.offset_periods,
    d.is_hard_dependency,
        CASE
            WHEN d.dependency_id IS NOT NULL THEN true
            ELSE false
        END AS has_dependency,
        CASE
            WHEN d.dependency_id IS NULL THEN 'No dependency'::text
            WHEN d.trigger_event::text = 'ABSOLUTE'::text THEN 'Starts at period '::text || d.offset_periods::text
            WHEN d.trigger_event::text = 'START'::text THEN (((('After '::text || d.trigger_item_table::text) || ' #'::text) || d.trigger_item_id) || ' starts'::text) ||
            CASE
                WHEN d.offset_periods > 0 THEN (' +'::text || d.offset_periods) || 'p'::text
                ELSE ''::text
            END
            WHEN d.trigger_event::text = 'COMPLETE'::text THEN (((('After '::text || d.trigger_item_table::text) || ' #'::text) || d.trigger_item_id) || ' completes'::text) ||
            CASE
                WHEN d.offset_periods > 0 THEN (' +'::text || d.offset_periods) || 'p'::text
                ELSE ''::text
            END
            WHEN d.trigger_event::text = 'PCT_COMPLETE'::text THEN (((((('After '::text || d.trigger_item_table::text) || ' #'::text) || d.trigger_item_id) || ' reaches '::text) || COALESCE(d.trigger_value, 50::numeric)::text) || '%'::text) ||
            CASE
                WHEN d.offset_periods > 0 THEN (' +'::text || d.offset_periods) || 'p'::text
                ELSE ''::text
            END
            ELSE 'Unknown dependency'::text
        END AS dependency_summary
   FROM tbl_budget_items bi
     JOIN tbl_budget_structure bs ON bi.structure_id = bs.structure_id
     LEFT JOIN tbl_item_dependency d ON d.dependent_item_type::text = 'COST'::text AND d.dependent_item_table::text = 'tbl_budget_items'::text AND d.dependent_item_id = bi.budget_item_id;
```
### `vw_category_hierarchy`

```sql
 WITH RECURSIVE category_tree AS (
         SELECT c.category_id,
            c.parent_id,
            c.category_name,
            get_category_stages(c.category_id) AS lifecycle_stages,
            c.tags,
            c.sort_order,
            c.is_active,
            0 AS depth,
            ARRAY[c.category_name::text] AS path,
            c.category_name::text AS display_label
           FROM core_unit_cost_category c
          WHERE c.parent_id IS NULL
        UNION ALL
         SELECT c.category_id,
            c.parent_id,
            c.category_name,
            get_category_stages(c.category_id) AS lifecycle_stages,
            c.tags,
            c.sort_order,
            c.is_active,
            ct.depth + 1,
            ct.path || c.category_name::text,
            repeat('  '::text, ct.depth + 1) || c.category_name::text AS display_label
           FROM core_unit_cost_category c
             JOIN category_tree ct ON c.parent_id = ct.category_id
        )
 SELECT category_id,
    parent_id,
    category_name,
    lifecycle_stages,
    tags,
    sort_order,
    is_active,
    depth,
    path,
    display_label,
    array_to_string(path, ' > '::text) AS full_path
   FROM category_tree
  ORDER BY sort_order, path;
```
### `vw_debt_balance_summary`

```sql
 SELECT l.loan_id,
    l.project_id,
    l.loan_name,
    l.loan_type,
    l.structure_type,
    l.commitment_amount,
    l.interest_rate_pct,
    l.seniority,
    dds.period_id,
    cp.period_start_date,
    cp.period_end_date,
    dds.draw_amount,
    dds.cumulative_drawn,
    dds.available_remaining,
    dds.beginning_balance,
    dds.interest_amount,
    dds.cumulative_interest,
    dds.principal_payment,
    dds.ending_balance,
    round(dds.cumulative_drawn / NULLIF(l.commitment_amount, 0::numeric) * 100::numeric, 2) AS utilization_pct
   FROM tbl_loan l
     JOIN tbl_debt_draw_schedule dds ON l.loan_id = dds.loan_id
     JOIN tbl_calculation_period cp ON dds.period_id = cp.period_id
  ORDER BY l.loan_id, cp.period_start_date;
```
### `vw_doc_media_summary`

```sql
 WITH doc_counts AS (
         SELECT d.doc_id,
            d.doc_name,
            d.doc_type,
            d.project_id,
            d.media_scan_status,
            d.media_scan_json,
            count(m.media_id) FILTER (WHERE m.deleted_at IS NULL) AS total_media,
            count(m.media_id) FILTER (WHERE m.status::text = 'pending'::text AND m.deleted_at IS NULL) AS pending_count,
            count(m.media_id) FILTER (WHERE (m.status::text = ANY (ARRAY['extracted'::character varying, 'classified'::character varying, 'verified'::character varying]::text[])) AND m.deleted_at IS NULL) AS extracted_count
           FROM core_doc d
             LEFT JOIN core_doc_media m ON d.doc_id = m.doc_id
          WHERE d.deleted_at IS NULL
          GROUP BY d.doc_id, d.doc_name, d.doc_type, d.project_id, d.media_scan_status, d.media_scan_json
        ), badge_rollup AS (
         SELECT color_counts.doc_id,
            jsonb_object_agg(color_counts.badge_color, color_counts.media_count ORDER BY color_counts.badge_color) AS badge_counts
           FROM ( SELECT m.doc_id,
                    COALESCE(lc.badge_color, 'secondary'::character varying) AS badge_color,
                    count(m.media_id) AS media_count
                   FROM core_doc_media m
                     LEFT JOIN lu_media_classification lc ON m.classification_id = lc.classification_id
                  WHERE m.deleted_at IS NULL
                  GROUP BY m.doc_id, (COALESCE(lc.badge_color, 'secondary'::character varying))) color_counts
          GROUP BY color_counts.doc_id
        )
 SELECT dc.doc_id,
    dc.doc_name,
    dc.doc_type,
    dc.project_id,
    dc.media_scan_status,
    dc.media_scan_json,
    dc.total_media,
    dc.pending_count,
    dc.extracted_count,
    br.badge_counts
   FROM doc_counts dc
     LEFT JOIN badge_rollup br ON br.doc_id = dc.doc_id;
```
### `vw_extraction_mapping_stats`

```sql
 SELECT m.mapping_id,
    m.document_type,
    m.source_pattern,
    m.target_table,
    m.target_field,
    m.confidence,
    m.is_active,
    count(l.log_id) AS times_extracted,
    count(DISTINCT l.project_id) AS projects_used,
    count(DISTINCT l.doc_id) AS documents_processed,
    round(avg(l.confidence_score), 4) AS avg_confidence_score,
    round(avg(
        CASE
            WHEN l.was_written THEN 1
            ELSE 0
        END), 4) AS write_rate,
    round(avg(
        CASE
            WHEN l.was_accepted THEN 1
            WHEN l.was_accepted = false THEN 0
            ELSE NULL::integer
        END), 4) AS acceptance_rate,
    max(l.extracted_at) AS last_used_at
   FROM tbl_extraction_mapping m
     LEFT JOIN tbl_extraction_log l ON m.mapping_id = l.mapping_id
  GROUP BY m.mapping_id;
```
### `vw_item_dependency_status`

```sql
 SELECT d.dependency_id,
    d.dependent_item_type,
    d.dependent_item_table,
    d.dependent_item_id,
    d.trigger_event,
    d.trigger_value,
    d.offset_periods,
    d.is_hard_dependency,
    ab.start_period AS trigger_start_period,
    ab.start_period + ab.periods_to_complete AS trigger_completion_period,
        CASE
            WHEN d.trigger_event::text = 'ABSOLUTE'::text THEN d.offset_periods::numeric
            WHEN d.trigger_event::text = 'COMPLETE'::text AND d.trigger_item_table::text = 'tbl_absorption_schedule'::text THEN (ab.start_period + ab.periods_to_complete + d.offset_periods)::numeric
            WHEN d.trigger_event::text = 'START'::text AND d.trigger_item_table::text = 'tbl_absorption_schedule'::text THEN (ab.start_period + d.offset_periods)::numeric
            WHEN d.trigger_event::text = 'PCT_COMPLETE'::text AND d.trigger_item_table::text = 'tbl_absorption_schedule'::text THEN ab.start_period::numeric + floor(ab.periods_to_complete::numeric * (d.trigger_value / 100.0)) + d.offset_periods::numeric
            ELSE d.offset_periods::numeric
        END AS calculated_start_period,
    now() AS calculated_at
   FROM tbl_item_dependency d
     LEFT JOIN tbl_absorption_schedule ab ON d.trigger_item_table::text = 'tbl_absorption_schedule'::text AND d.trigger_item_id = ab.absorption_id;
```
### `vw_lease_expiration_schedule`

```sql
 SELECT rr.rent_roll_id,
    rr.project_id,
    rr.tenant_name,
    rr.space_type,
    rr.lease_end_date,
    rr.leased_sf,
    rr.base_rent_psf_annual,
    rr.leased_sf * rr.base_rent_psf_annual AS annual_rent,
    COALESCE(la.market_rent_psf_annual, rr.base_rent_psf_annual) AS market_rent_psf_annual,
    COALESCE(la.market_rent_psf_annual, rr.base_rent_psf_annual) - rr.base_rent_psf_annual AS mark_to_market_psf,
    (COALESCE(la.market_rent_psf_annual, rr.base_rent_psf_annual) - rr.base_rent_psf_annual) * rr.leased_sf AS mark_to_market_annual,
    COALESCE(la.renewal_probability, 0.7) AS renewal_probability,
    COALESCE(la.downtime_months, 6) AS downtime_months,
    (COALESCE(la.renewal_probability, 0.7) * (COALESCE(la.ti_psf_renewal, 0::numeric) + COALESCE(la.lc_psf_renewal, 0::numeric)) + (1::numeric - COALESCE(la.renewal_probability, 0.7)) * (COALESCE(la.ti_psf_new_tenant, 0::numeric) + COALESCE(la.lc_psf_new_tenant, 0::numeric))) * rr.leased_sf AS expected_rollover_cost,
    COALESCE(la.renewal_probability, 0.7) * COALESCE(la.free_rent_months_renewal, 0)::numeric + (1::numeric - COALESCE(la.renewal_probability, 0.7)) * COALESCE(la.free_rent_months_new_tenant, 3)::numeric AS expected_free_rent_months,
    (1::numeric - COALESCE(la.renewal_probability, 0.7)) * COALESCE(la.downtime_months, 6)::numeric / 12.0 * COALESCE(la.market_rent_psf_annual, rr.base_rent_psf_annual) * rr.leased_sf AS expected_vacancy_loss,
    rr.lease_status
   FROM tbl_rent_roll rr
     LEFT JOIN tbl_lease_assumptions la ON rr.project_id = la.project_id AND rr.space_type::text = la.space_type::text AND la.effective_date <= rr.lease_end_date
  WHERE rr.lease_status::text = 'ACTIVE'::text
  ORDER BY rr.lease_end_date, rr.tenant_name;
```
### `vw_map_plan_parcels`

```sql
 SELECT gpp.project_id,
    p.parcel_id,
    p.parcel_code,
    p.landuse_code,
    p.landuse_type,
    p.acres_gross,
    p.units_total,
        CASE
            WHEN p.parcel_code::text ~ '^\d+\.\d{3}$'::text THEN "substring"(p.parcel_code::text, '^(\d+)\.'::text)::integer
            ELSE NULL::integer
        END AS area_no,
        CASE
            WHEN p.parcel_code::text ~ '^\d+\.\d{3}$'::text THEN "substring"(p.parcel_code::text, '\.(\d)\d{2}$'::text)::integer
            ELSE NULL::integer
        END AS phase_no,
        CASE
            WHEN p.parcel_code::text ~ '^\d+\.\d{3}$'::text THEN "substring"(p.parcel_code::text, '\.\d(\d{2})$'::text)::integer
            ELSE NULL::integer
        END AS parcel_no,
    gpp.geom,
    gpp.source_doc,
    gpp.confidence,
    gpp.version
   FROM gis_plan_parcel gpp
     JOIN tbl_parcel p ON p.parcel_id = gpp.parcel_id
  WHERE gpp.is_active;
```
### `vw_map_tax_parcels`

```sql
 SELECT tax_parcel_id,
    assessor_attrs ->> 'OWNER_NAME'::text AS owner_name,
    assessor_attrs ->> 'SITUS_ADDRESS'::text AS situs_address,
    st_area(geom) / 4046.8564224::double precision AS acres,
    geom
   FROM gis_tax_parcel_ref t;
```
### `vw_mkt_absorption_by_lot_width`

```sql
 SELECT lot_width_ft,
    effective_date,
    count(*) AS project_count,
    round(avg(sales_rate_monthly), 2) AS avg_monthly_rate,
    round(avg(sales_rate_3m_avg), 2) AS avg_3m_rate,
    round(percentile_cont(0.25::double precision) WITHIN GROUP (ORDER BY (sales_rate_monthly::double precision))::numeric, 2) AS rate_p25,
    round(percentile_cont(0.50::double precision) WITHIN GROUP (ORDER BY (sales_rate_monthly::double precision))::numeric, 2) AS rate_median,
    round(percentile_cont(0.75::double precision) WITHIN GROUP (ORDER BY (sales_rate_monthly::double precision))::numeric, 2) AS rate_p75,
    round(avg(price_avg), 0) AS avg_price,
    round(avg(mos_vdl), 1) AS avg_mos_vdl
   FROM mkt_new_home_project
  WHERE lot_width_ft IS NOT NULL AND sales_rate_monthly IS NOT NULL AND status::text = 'Active'::text
  GROUP BY lot_width_ft, effective_date
  ORDER BY lot_width_ft, effective_date;
```
### `vw_mkt_absorption_by_lu_product`

```sql
 SELECT p.lu_product_id,
    lp.code AS product_code,
    p.effective_date,
    count(*) AS project_count,
    round(avg(p.sales_rate_monthly), 2) AS avg_monthly_rate,
    round(avg(p.sales_rate_3m_avg), 2) AS avg_3m_rate,
    round(avg(p.price_avg), 0) AS avg_price
   FROM mkt_new_home_project p
     LEFT JOIN res_lot_product lp ON p.lu_product_id = lp.product_id
  WHERE p.lu_product_id IS NOT NULL AND p.sales_rate_monthly IS NOT NULL AND p.status::text = 'Active'::text
  GROUP BY p.lu_product_id, lp.code, p.effective_date
  ORDER BY lp.code, p.effective_date;
```
### `vw_mkt_current_projects`

```sql
 WITH latest AS (
         SELECT mkt_new_home_project.source_project_id,
            mkt_new_home_project.source_id,
            max(mkt_new_home_project.effective_date) AS latest_date
           FROM mkt_new_home_project
          WHERE mkt_new_home_project.source_project_id IS NOT NULL
          GROUP BY mkt_new_home_project.source_project_id, mkt_new_home_project.source_id
        )
 SELECT p.record_id,
    p.source_project_id,
    p.source_subdivision_id,
    p.effective_date,
    p.source_file,
    p.survey_period,
    p.project_name,
    p.master_plan_name,
    p.master_plan_id,
    p.master_plan_developer,
    p.builder_name,
    p.parent_builder,
    p.status,
    p.product_type,
    p.product_style,
    p.is_active_adult,
    p.characteristics,
    p.lot_size_sf,
    p.lot_width_ft,
    p.lot_depth_ft,
    p.lot_dimensions,
    p.unit_size_min_sf,
    p.unit_size_max_sf,
    p.unit_size_avg_sf,
    p.price_min,
    p.price_max,
    p.price_avg,
    p.price_per_sf_avg,
    p.price_change_date,
    p.units_planned,
    p.units_sold,
    p.units_remaining,
    p.qmi_count,
    p.open_date,
    p.sold_out_date,
    p.sales_rate_monthly,
    p.sales_rate_3m_avg,
    p.sales_rate_6m_avg,
    p.sales_rate_12m_avg,
    p.sales_change_date,
    p.annual_starts,
    p.annual_closings,
    p.quarterly_starts,
    p.quarterly_closings,
    p.pipeline_excavation,
    p.pipeline_survey_stakes,
    p.pipeline_street_paving,
    p.pipeline_streets_in,
    p.pipeline_vdl,
    p.pipeline_vacant_land,
    p.pipeline_under_construction,
    p.pipeline_finished_vacant,
    p.models_count,
    p.occupied_count,
    p.future_inventory_count,
    p.mos_vdl,
    p.mos_inventory,
    p.mos_finished_vacant,
    p.incentive_qmi_pct,
    p.incentive_qmi_amt,
    p.incentive_qmi_type,
    p.incentive_tbb_pct,
    p.incentive_tbb_amt,
    p.incentive_tbb_type,
    p.incentive_broker_pct,
    p.incentive_broker_amt,
    p.incentive_broker_type,
    p.hoa_fee_monthly,
    p.hoa_fee_2_monthly,
    p.hoa_fee_per_sqft,
    p.assessment_rate,
    p.assessment_description,
    p.latitude,
    p.longitude,
    p.address,
    p.city,
    p.zip_code,
    p.county,
    p.county_fips,
    p.cbsa_name,
    p.cbsa_code,
    p.state,
    p.boundary_names,
    p.school_district,
    p.school_elementary,
    p.school_rating_elementary,
    p.school_middle,
    p.school_rating_middle,
    p.school_high,
    p.school_rating_high,
    p.website_url,
    p.office_phone,
    p.lu_family_id,
    p.lu_density_id,
    p.lu_type_id,
    p.lu_product_id,
    p.lu_linkage_method,
    p.lu_linkage_confidence,
    p.ingestion_timestamp,
    p.updated_at,
    p.source_id
   FROM mkt_new_home_project p
     JOIN latest l ON p.source_project_id::text = l.source_project_id::text AND p.source_id = l.source_id AND p.effective_date = l.latest_date
  WHERE p.status::text = 'Active'::text;
```
### `vw_mkt_landscaper_summary`

```sql
 WITH current_projects AS (
         SELECT vw_mkt_current_projects.record_id,
            vw_mkt_current_projects.source_project_id,
            vw_mkt_current_projects.source_subdivision_id,
            vw_mkt_current_projects.effective_date,
            vw_mkt_current_projects.source_file,
            vw_mkt_current_projects.survey_period,
            vw_mkt_current_projects.project_name,
            vw_mkt_current_projects.master_plan_name,
            vw_mkt_current_projects.master_plan_id,
            vw_mkt_current_projects.master_plan_developer,
            vw_mkt_current_projects.builder_name,
            vw_mkt_current_projects.parent_builder,
            vw_mkt_current_projects.status,
            vw_mkt_current_projects.product_type,
            vw_mkt_current_projects.product_style,
            vw_mkt_current_projects.is_active_adult,
            vw_mkt_current_projects.characteristics,
            vw_mkt_current_projects.lot_size_sf,
            vw_mkt_current_projects.lot_width_ft,
            vw_mkt_current_projects.lot_depth_ft,
            vw_mkt_current_projects.lot_dimensions,
            vw_mkt_current_projects.unit_size_min_sf,
            vw_mkt_current_projects.unit_size_max_sf,
            vw_mkt_current_projects.unit_size_avg_sf,
            vw_mkt_current_projects.price_min,
            vw_mkt_current_projects.price_max,
            vw_mkt_current_projects.price_avg,
            vw_mkt_current_projects.price_per_sf_avg,
            vw_mkt_current_projects.price_change_date,
            vw_mkt_current_projects.units_planned,
            vw_mkt_current_projects.units_sold,
            vw_mkt_current_projects.units_remaining,
            vw_mkt_current_projects.qmi_count,
            vw_mkt_current_projects.open_date,
            vw_mkt_current_projects.sold_out_date,
            vw_mkt_current_projects.sales_rate_monthly,
            vw_mkt_current_projects.sales_rate_3m_avg,
            vw_mkt_current_projects.sales_rate_6m_avg,
            vw_mkt_current_projects.sales_rate_12m_avg,
            vw_mkt_current_projects.sales_change_date,
            vw_mkt_current_projects.annual_starts,
            vw_mkt_current_projects.annual_closings,
            vw_mkt_current_projects.quarterly_starts,
            vw_mkt_current_projects.quarterly_closings,
            vw_mkt_current_projects.pipeline_excavation,
            vw_mkt_current_projects.pipeline_survey_stakes,
            vw_mkt_current_projects.pipeline_street_paving,
            vw_mkt_current_projects.pipeline_streets_in,
            vw_mkt_current_projects.pipeline_vdl,
            vw_mkt_current_projects.pipeline_vacant_land,
            vw_mkt_current_projects.pipeline_under_construction,
            vw_mkt_current_projects.pipeline_finished_vacant,
            vw_mkt_current_projects.models_count,
            vw_mkt_current_projects.occupied_count,
            vw_mkt_current_projects.future_inventory_count,
            vw_mkt_current_projects.mos_vdl,
            vw_mkt_current_projects.mos_inventory,
            vw_mkt_current_projects.mos_finished_vacant,
            vw_mkt_current_projects.incentive_qmi_pct,
            vw_mkt_current_projects.incentive_qmi_amt,
            vw_mkt_current_projects.incentive_qmi_type,
            vw_mkt_current_projects.incentive_tbb_pct,
            vw_mkt_current_projects.incentive_tbb_amt,
            vw_mkt_current_projects.incentive_tbb_type,
            vw_mkt_current_projects.incentive_broker_pct,
            vw_mkt_current_projects.incentive_broker_amt,
            vw_mkt_current_projects.incentive_broker_type,
            vw_mkt_current_projects.hoa_fee_monthly,
            vw_mkt_current_projects.hoa_fee_2_monthly,
            vw_mkt_current_projects.hoa_fee_per_sqft,
            vw_mkt_current_projects.assessment_rate,
            vw_mkt_current_projects.assessment_description,
            vw_mkt_current_projects.latitude,
            vw_mkt_current_projects.longitude,
            vw_mkt_current_projects.address,
            vw_mkt_current_projects.city,
            vw_mkt_current_projects.zip_code,
            vw_mkt_current_projects.county,
            vw_mkt_current_projects.county_fips,
            vw_mkt_current_projects.cbsa_name,
            vw_mkt_current_projects.cbsa_code,
            vw_mkt_current_projects.state,
            vw_mkt_current_projects.boundary_names,
            vw_mkt_current_projects.school_district,
            vw_mkt_current_projects.school_elementary,
            vw_mkt_current_projects.school_rating_elementary,
            vw_mkt_current_projects.school_middle,
            vw_mkt_current_projects.school_rating_middle,
            vw_mkt_current_projects.school_high,
            vw_mkt_current_projects.school_rating_high,
            vw_mkt_current_projects.website_url,
            vw_mkt_current_projects.office_phone,
            vw_mkt_current_projects.lu_family_id,
            vw_mkt_current_projects.lu_density_id,
            vw_mkt_current_projects.lu_type_id,
            vw_mkt_current_projects.lu_product_id,
            vw_mkt_current_projects.lu_linkage_method,
            vw_mkt_current_projects.lu_linkage_confidence,
            vw_mkt_current_projects.ingestion_timestamp,
            vw_mkt_current_projects.updated_at,
            vw_mkt_current_projects.source_id
           FROM vw_mkt_current_projects
        )
 SELECT city,
    lot_width_ft,
    count(*) AS active_communities,
    sum(units_remaining) AS total_units_available,
    round(avg(sales_rate_monthly), 2) AS avg_absorption_rate,
    round(avg(price_avg), 0) AS avg_price,
    round(min(price_min), 0) AS market_entry_price,
    round(max(price_max), 0) AS market_ceiling_price
   FROM current_projects
  WHERE city IS NOT NULL AND lot_width_ft IS NOT NULL
  GROUP BY city, lot_width_ft
  ORDER BY city, lot_width_ft;
```
### `vw_mkt_pricing_by_city_lotwidth`

```sql
 SELECT city,
    lot_width_ft,
    effective_date,
    count(*) AS project_count,
    round(avg(price_avg), 0) AS avg_price,
    round(min(price_min), 0) AS min_price,
    round(max(price_max), 0) AS max_price,
    round(avg(price_per_sf_avg), 2) AS avg_price_psf
   FROM mkt_new_home_project
  WHERE city IS NOT NULL AND lot_width_ft IS NOT NULL AND price_avg IS NOT NULL AND status::text = 'Active'::text
  GROUP BY city, lot_width_ft, effective_date
  ORDER BY city, lot_width_ft, effective_date;
```
### `vw_multifamily_lease_expirations`

```sql
 SELECT l.lease_id,
    l.unit_id,
    u.unit_number,
    u.building_name,
    u.unit_type,
    u.project_id,
    p.project_name,
    l.resident_name,
    l.lease_start_date,
    l.lease_end_date,
    l.lease_term_months,
    l.base_rent_monthly,
    l.effective_rent_monthly,
    l.lease_status,
    l.notice_date,
    l.notice_to_vacate_days,
    l.is_renewal,
    l.lease_end_date - CURRENT_DATE AS days_until_expiration,
        CASE
            WHEN (l.lease_end_date - CURRENT_DATE) <= 30 THEN 'IMMEDIATE'::text
            WHEN (l.lease_end_date - CURRENT_DATE) <= 60 THEN 'URGENT'::text
            WHEN (l.lease_end_date - CURRENT_DATE) <= 90 THEN 'SOON'::text
            ELSE 'FUTURE'::text
        END AS expiration_priority,
    u.market_rent,
    u.market_rent - COALESCE(l.effective_rent_monthly, l.base_rent_monthly) AS potential_rent_increase,
        CASE
            WHEN l.notice_date IS NOT NULL THEN 'NOTICE_RECEIVED'::text
            WHEN (l.lease_end_date - CURRENT_DATE) <= 60 THEN 'RENEWAL_WINDOW'::text
            ELSE 'MONITORING'::text
        END AS renewal_status
   FROM tbl_multifamily_lease l
     JOIN tbl_multifamily_unit u ON l.unit_id = u.unit_id
     JOIN tbl_project p ON u.project_id = p.project_id
  WHERE (l.lease_status::text = ANY (ARRAY['ACTIVE'::character varying, 'NOTICE_GIVEN'::character varying, 'MONTH_TO_MONTH'::character varying]::text[])) AND l.lease_end_date >= CURRENT_DATE AND l.lease_end_date <= (CURRENT_DATE + '1 year'::interval)
  ORDER BY l.lease_end_date;
```
### `vw_multifamily_occupancy_summary`

```sql
 SELECT u.project_id,
    p.project_name,
    u.unit_type,
    count(u.unit_id) AS total_units,
    count(l.lease_id) AS occupied_units,
    count(u.unit_id) - count(l.lease_id) AS vacant_units,
    round(count(l.lease_id)::numeric / NULLIF(count(u.unit_id), 0)::numeric * 100::numeric, 2) AS physical_occupancy_pct,
    sum(u.market_rent) AS total_market_rent,
    sum(COALESCE(l.effective_rent_monthly, l.base_rent_monthly, 0::numeric)) AS total_actual_rent,
    round(sum(COALESCE(l.effective_rent_monthly, l.base_rent_monthly, 0::numeric)) / NULLIF(sum(u.market_rent), 0::numeric) * 100::numeric, 2) AS economic_occupancy_pct,
    sum(u.market_rent) - sum(COALESCE(l.effective_rent_monthly, l.base_rent_monthly, 0::numeric)) AS total_loss_to_lease,
    round(avg(u.market_rent), 2) AS avg_market_rent,
    round(avg(COALESCE(l.effective_rent_monthly, l.base_rent_monthly)), 2) AS avg_actual_rent,
    count(
        CASE
            WHEN u.renovation_status::text = 'RENOVATED'::text THEN 1
            ELSE NULL::integer
        END) AS renovated_units,
    count(
        CASE
            WHEN l.is_renewal = true THEN 1
            ELSE NULL::integer
        END) AS renewal_leases,
    round(count(
        CASE
            WHEN l.is_renewal = true THEN 1
            ELSE NULL::integer
        END)::numeric / NULLIF(count(l.lease_id), 0)::numeric * 100::numeric, 2) AS renewal_rate_pct
   FROM tbl_multifamily_unit u
     JOIN tbl_project p ON u.project_id = p.project_id
     LEFT JOIN LATERAL ( SELECT tbl_multifamily_lease.lease_id,
            tbl_multifamily_lease.unit_id,
            tbl_multifamily_lease.resident_name,
            tbl_multifamily_lease.lease_start_date,
            tbl_multifamily_lease.lease_end_date,
            tbl_multifamily_lease.lease_term_months,
            tbl_multifamily_lease.base_rent_monthly,
            tbl_multifamily_lease.effective_rent_monthly,
            tbl_multifamily_lease.months_free_rent,
            tbl_multifamily_lease.concession_amount,
            tbl_multifamily_lease.security_deposit,
            tbl_multifamily_lease.pet_rent_monthly,
            tbl_multifamily_lease.parking_rent_monthly,
            tbl_multifamily_lease.lease_status,
            tbl_multifamily_lease.notice_date,
            tbl_multifamily_lease.notice_to_vacate_days,
            tbl_multifamily_lease.is_renewal,
            tbl_multifamily_lease.created_at,
            tbl_multifamily_lease.updated_at
           FROM tbl_multifamily_lease
          WHERE tbl_multifamily_lease.unit_id = u.unit_id AND (tbl_multifamily_lease.lease_status::text = ANY (ARRAY['ACTIVE'::character varying, 'NOTICE_GIVEN'::character varying, 'MONTH_TO_MONTH'::character varying]::text[]))
          ORDER BY tbl_multifamily_lease.lease_start_date DESC
         LIMIT 1) l ON true
  GROUP BY u.project_id, p.project_name, u.unit_type
  ORDER BY u.project_id, u.unit_type;
```
### `vw_multifamily_project_summary`

```sql
 SELECT u.project_id,
    p.project_name,
    count(DISTINCT u.unit_id) AS total_units,
    count(DISTINCT
        CASE
            WHEN l.lease_id IS NOT NULL THEN u.unit_id
            ELSE NULL::integer
        END) AS occupied_units,
    round(count(DISTINCT
        CASE
            WHEN l.lease_id IS NOT NULL THEN u.unit_id
            ELSE NULL::integer
        END)::numeric / NULLIF(count(DISTINCT u.unit_id), 0)::numeric * 100::numeric, 2) AS physical_occupancy_pct,
    sum(u.market_rent) AS total_market_rent_potential,
    sum(COALESCE(l.effective_rent_monthly, l.base_rent_monthly, 0::numeric)) AS total_actual_rent,
    sum(u.market_rent) - sum(COALESCE(l.effective_rent_monthly, l.base_rent_monthly, 0::numeric)) AS total_loss_to_lease,
    count(DISTINCT u.unit_type) AS unit_type_count,
    count(DISTINCT
        CASE
            WHEN u.renovation_status::text = 'RENOVATED'::text THEN u.unit_id
            ELSE NULL::integer
        END) AS renovated_units,
    count(DISTINCT t.turn_id) AS total_turns_ytd,
    round(avg(t.total_make_ready_cost), 2) AS avg_turn_cost,
    round(avg(t.total_vacant_days), 1) AS avg_turn_days
   FROM tbl_multifamily_unit u
     JOIN tbl_project p ON u.project_id = p.project_id
     LEFT JOIN LATERAL ( SELECT tbl_multifamily_lease.lease_id,
            tbl_multifamily_lease.unit_id,
            tbl_multifamily_lease.resident_name,
            tbl_multifamily_lease.lease_start_date,
            tbl_multifamily_lease.lease_end_date,
            tbl_multifamily_lease.lease_term_months,
            tbl_multifamily_lease.base_rent_monthly,
            tbl_multifamily_lease.effective_rent_monthly,
            tbl_multifamily_lease.months_free_rent,
            tbl_multifamily_lease.concession_amount,
            tbl_multifamily_lease.security_deposit,
            tbl_multifamily_lease.pet_rent_monthly,
            tbl_multifamily_lease.parking_rent_monthly,
            tbl_multifamily_lease.lease_status,
            tbl_multifamily_lease.notice_date,
            tbl_multifamily_lease.notice_to_vacate_days,
            tbl_multifamily_lease.is_renewal,
            tbl_multifamily_lease.created_at,
            tbl_multifamily_lease.updated_at
           FROM tbl_multifamily_lease
          WHERE tbl_multifamily_lease.unit_id = u.unit_id AND (tbl_multifamily_lease.lease_status::text = ANY (ARRAY['ACTIVE'::character varying, 'NOTICE_GIVEN'::character varying, 'MONTH_TO_MONTH'::character varying]::text[]))
          ORDER BY tbl_multifamily_lease.lease_start_date DESC
         LIMIT 1) l ON true
     LEFT JOIN tbl_multifamily_turn t ON u.unit_id = t.unit_id AND t.move_out_date >= date_trunc('year'::text, CURRENT_DATE::timestamp with time zone)
  GROUP BY u.project_id, p.project_name
  ORDER BY u.project_id;
```
### `vw_multifamily_turn_metrics`

```sql
 SELECT u.project_id,
    p.project_name,
    u.unit_type,
    count(t.turn_id) AS total_turns,
    count(
        CASE
            WHEN t.turn_status::text = 'LEASED'::text THEN 1
            ELSE NULL::integer
        END) AS completed_turns,
    round(avg(t.total_vacant_days), 1) AS avg_vacant_days,
    round(avg(t.total_make_ready_cost), 2) AS avg_make_ready_cost,
    round(avg(t.cleaning_cost), 2) AS avg_cleaning_cost,
    round(avg(t.painting_cost), 2) AS avg_painting_cost,
    round(avg(t.carpet_flooring_cost), 2) AS avg_flooring_cost,
    round(avg(t.appliance_cost), 2) AS avg_appliance_cost,
    min(t.move_out_date) AS first_turn_date,
    max(t.move_out_date) AS last_turn_date,
    round(avg(
        CASE
            WHEN t.make_ready_complete_date IS NOT NULL THEN t.make_ready_complete_date - t.move_out_date
            ELSE NULL::integer
        END), 1) AS avg_make_ready_days,
    round(avg(
        CASE
            WHEN t.next_move_in_date IS NOT NULL THEN t.next_move_in_date - t.move_out_date
            ELSE NULL::integer
        END), 1) AS avg_total_turn_days
   FROM tbl_multifamily_turn t
     JOIN tbl_multifamily_unit u ON t.unit_id = u.unit_id
     JOIN tbl_project p ON u.project_id = p.project_id
  GROUP BY u.project_id, p.project_name, u.unit_type
  ORDER BY u.project_id, u.unit_type;
```
### `vw_multifamily_unit_status`

```sql
 SELECT u.unit_id,
    u.project_id,
    u.unit_number,
    u.building_name,
    u.unit_type,
    u.bedrooms,
    u.bathrooms,
    u.square_feet,
    u.market_rent,
    u.renovation_status,
    l.lease_id,
    l.resident_name,
    l.lease_start_date,
    l.lease_end_date,
    l.base_rent_monthly,
    l.effective_rent_monthly,
    l.lease_status,
    l.is_renewal,
        CASE
            WHEN l.lease_id IS NULL THEN 'VACANT'::text
            WHEN l.lease_status::text = 'ACTIVE'::text AND l.lease_end_date >= CURRENT_DATE THEN 'OCCUPIED'::text
            WHEN l.lease_status::text = 'NOTICE_GIVEN'::text THEN 'NOTICE'::text
            WHEN l.lease_status::text = 'EXPIRED'::text OR l.lease_end_date < CURRENT_DATE THEN 'EXPIRED'::text
            ELSE 'VACANT'::text
        END AS occupancy_status,
        CASE
            WHEN l.lease_id IS NOT NULL AND u.market_rent IS NOT NULL THEN u.market_rent - COALESCE(l.effective_rent_monthly, l.base_rent_monthly)
            ELSE 0::numeric
        END AS loss_to_lease,
        CASE
            WHEN l.lease_id IS NOT NULL AND u.market_rent IS NOT NULL AND u.market_rent > 0::numeric THEN round((u.market_rent - COALESCE(l.effective_rent_monthly, l.base_rent_monthly)) / u.market_rent * 100::numeric, 2)
            ELSE 0::numeric
        END AS loss_to_lease_pct,
        CASE
            WHEN l.lease_end_date IS NOT NULL THEN l.lease_end_date - CURRENT_DATE
            ELSE NULL::integer
        END AS days_until_expiration
   FROM tbl_multifamily_unit u
     LEFT JOIN LATERAL ( SELECT tbl_multifamily_lease.lease_id,
            tbl_multifamily_lease.unit_id,
            tbl_multifamily_lease.resident_name,
            tbl_multifamily_lease.lease_start_date,
            tbl_multifamily_lease.lease_end_date,
            tbl_multifamily_lease.lease_term_months,
            tbl_multifamily_lease.base_rent_monthly,
            tbl_multifamily_lease.effective_rent_monthly,
            tbl_multifamily_lease.months_free_rent,
            tbl_multifamily_lease.concession_amount,
            tbl_multifamily_lease.security_deposit,
            tbl_multifamily_lease.pet_rent_monthly,
            tbl_multifamily_lease.parking_rent_monthly,
            tbl_multifamily_lease.lease_status,
            tbl_multifamily_lease.notice_date,
            tbl_multifamily_lease.notice_to_vacate_days,
            tbl_multifamily_lease.is_renewal,
            tbl_multifamily_lease.created_at,
            tbl_multifamily_lease.updated_at
           FROM tbl_multifamily_lease
          WHERE tbl_multifamily_lease.unit_id = u.unit_id AND (tbl_multifamily_lease.lease_status::text = ANY (ARRAY['ACTIVE'::character varying, 'NOTICE_GIVEN'::character varying, 'MONTH_TO_MONTH'::character varying]::text[]))
          ORDER BY tbl_multifamily_lease.lease_start_date DESC
         LIMIT 1) l ON true;
```
### `vw_parcels_with_sales`

```sql
 SELECT p.parcel_id,
    p.parcel_code,
    p.project_id,
    p.area_id,
    p.phase_id AS dev_phase_id,
    p.units_total AS units,
    p.acres_gross AS acres,
    p.sale_phase_code,
    p.custom_sale_date,
    p.has_sale_overrides,
    p.type_code AS use_type_code,
    p.landuse_type AS use_type_name,
    p.product_code,
    p.lot_product AS product_name,
    lup.price_per_unit AS base_price_per_unit,
    lup.growth_rate,
    lup.unit_of_measure AS uom_code,
    lup.created_at AS pricing_base_date,
    ss.settlement_id AS sale_id,
    ss.sale_date,
    ss.buyer_name,
    ss.buyer_entity,
    ss.settlement_status AS sale_status,
    ss.gross_value,
    ss.net_proceeds,
    COALESCE(ss.commission_pct, sp.default_commission_pct, 3.0) AS commission_pct,
    COALESCE(ss.closing_cost_per_unit, sp.default_closing_cost_per_unit, 750.0) AS closing_cost_per_unit,
    COALESCE(ss.onsite_cost_pct, sp.default_onsite_cost_pct, 6.5) AS onsite_cost_pct
   FROM tbl_parcel p
     LEFT JOIN land_use_pricing lup ON lup.project_id = p.project_id AND lup.lu_type_code::text = p.type_code AND lup.product_code::text = p.product_code
     LEFT JOIN tbl_sale_settlement ss ON ss.parcel_id = p.parcel_id
     LEFT JOIN tbl_sale_phases sp ON sp.phase_code::text = p.sale_phase_code::text AND sp.project_id = p.project_id
  WHERE p.project_id IS NOT NULL
  ORDER BY p.project_id, p.parcel_code;
```
### `vw_permit_annual_by_jurisdiction`

```sql
 SELECT jurisdiction_name,
    EXTRACT(year FROM permit_month)::integer AS permit_year,
    sum(permits_sf) AS annual_permits_sf,
    sum(COALESCE(permits_total, permits_sf)) AS annual_permits_total,
    source_id
   FROM mkt_permit_history
  GROUP BY jurisdiction_name, (EXTRACT(year FROM permit_month)), source_id
  ORDER BY jurisdiction_name, (EXTRACT(year FROM permit_month)::integer);
```
### `vw_permit_msa_monthly`

```sql
 SELECT permit_month,
    EXTRACT(year FROM permit_month)::integer AS permit_year,
    sum(permits_sf) AS msa_permits_sf,
    sum(COALESCE(permits_total, permits_sf)) AS msa_permits_total,
    count(DISTINCT jurisdiction_name) AS jurisdiction_count,
    source_id
   FROM mkt_permit_history
  GROUP BY permit_month, (EXTRACT(year FROM permit_month)), source_id
  ORDER BY permit_month;
```
### `vw_project_acquisition_summary`

```sql
 SELECT project_id,
    project_name,
    asking_price,
    (EXISTS ( SELECT 1
           FROM tbl_acquisition a
          WHERE a.project_id = p.project_id AND a.event_type::text = 'Closing Date'::text)) AS has_closing_date,
    ( SELECT a.event_date
           FROM tbl_acquisition a
          WHERE a.project_id = p.project_id AND a.event_type::text = 'Closing Date'::text
          ORDER BY a.event_date DESC
         LIMIT 1) AS closing_date,
        CASE
            WHEN (EXISTS ( SELECT 1
               FROM tbl_acquisition a
              WHERE a.project_id = p.project_id AND a.event_type::text = 'Closing Date'::text)) THEN ( SELECT COALESCE(sum(
                    CASE
                        WHEN a.event_type::text = ANY (ARRAY['Deposit'::character varying, 'Fee'::character varying, 'Closing Costs'::character varying, 'Adjustment'::character varying]::text[]) THEN COALESCE(a.amount, 0::numeric)
                        WHEN a.event_type::text = ANY (ARRAY['Credit'::character varying, 'Refund'::character varying]::text[]) THEN - COALESCE(a.amount, 0::numeric)
                        ELSE 0::numeric
                    END), 0::numeric) AS "coalesce"
               FROM tbl_acquisition a
              WHERE a.project_id = p.project_id AND a.is_applied_to_purchase = true AND (a.event_type::text = ANY (ARRAY['Deposit'::character varying, 'Fee'::character varying, 'Credit'::character varying, 'Refund'::character varying, 'Adjustment'::character varying, 'Closing Costs'::character varying]::text[])))
            ELSE NULL::numeric
        END AS total_acquisition_cost,
    ( SELECT COALESCE(sum(a.amount), 0::numeric) AS "coalesce"
           FROM tbl_acquisition a
          WHERE a.project_id = p.project_id AND a.is_applied_to_purchase = true AND a.event_type::text = 'Closing Costs'::text) AS land_cost,
    ( SELECT COALESCE(sum(a.amount), 0::numeric) AS "coalesce"
           FROM tbl_acquisition a
          WHERE a.project_id = p.project_id AND a.is_applied_to_purchase = true AND a.event_type::text = 'Fee'::text) AS total_fees,
    ( SELECT COALESCE(sum(a.amount), 0::numeric) AS "coalesce"
           FROM tbl_acquisition a
          WHERE a.project_id = p.project_id AND a.is_applied_to_purchase = true AND a.event_type::text = 'Deposit'::text) AS total_deposits,
    ( SELECT COALESCE(sum(a.amount), 0::numeric) AS "coalesce"
           FROM tbl_acquisition a
          WHERE a.project_id = p.project_id AND a.is_applied_to_purchase = true AND (a.event_type::text = ANY (ARRAY['Credit'::character varying, 'Refund'::character varying]::text[]))) AS total_credits,
    COALESCE(
        CASE
            WHEN (EXISTS ( SELECT 1
               FROM tbl_acquisition a
              WHERE a.project_id = p.project_id AND a.event_type::text = 'Closing Date'::text)) THEN ( SELECT COALESCE(sum(
                    CASE
                        WHEN a.event_type::text = ANY (ARRAY['Deposit'::character varying, 'Fee'::character varying, 'Closing Costs'::character varying, 'Adjustment'::character varying]::text[]) THEN COALESCE(a.amount, 0::numeric)
                        WHEN a.event_type::text = ANY (ARRAY['Credit'::character varying, 'Refund'::character varying]::text[]) THEN - COALESCE(a.amount, 0::numeric)
                        ELSE 0::numeric
                    END), 0::numeric) AS "coalesce"
               FROM tbl_acquisition a
              WHERE a.project_id = p.project_id AND a.is_applied_to_purchase = true AND (a.event_type::text = ANY (ARRAY['Deposit'::character varying, 'Fee'::character varying, 'Credit'::character varying, 'Refund'::character varying, 'Adjustment'::character varying, 'Closing Costs'::character varying]::text[])))
            ELSE NULL::numeric
        END, asking_price) AS effective_acquisition_price,
        CASE
            WHEN (EXISTS ( SELECT 1
               FROM tbl_acquisition a
              WHERE a.project_id = p.project_id AND a.event_type::text = 'Closing Date'::text)) AND (( SELECT count(*) AS count
               FROM tbl_acquisition a
              WHERE a.project_id = p.project_id AND a.is_applied_to_purchase = true AND (a.event_type::text = ANY (ARRAY['Deposit'::character varying, 'Fee'::character varying, 'Credit'::character varying, 'Refund'::character varying, 'Adjustment'::character varying, 'Closing Costs'::character varying]::text[])))) > 0 THEN 'calculated'::text
            WHEN asking_price IS NOT NULL THEN 'asking'::text
            ELSE NULL::text
        END AS price_source
   FROM tbl_project p
  WHERE is_active = true;
```
### `vw_rent_roll`

```sql
 SELECT p.property_name,
    s.space_number,
    s.rentable_sf,
    t.tenant_name,
    t.creditworthiness,
    l.lease_number,
    l.lease_commencement_date,
    l.lease_expiration_date,
    l.lease_term_months,
    br.base_rent_annual,
    br.base_rent_psf_annual,
    l.lease_status
   FROM tbl_commercial_lease l
     JOIN tbl_space s ON l.space_id = s.space_id
     JOIN tbl_income_property p ON s.income_property_id = p.income_property_id
     JOIN tbl_tenant t ON l.tenant_id = t.tenant_id
     LEFT JOIN tbl_rent_schedule br ON l.lease_id = br.lease_id
  WHERE l.lease_status::text = 'Active'::text
  ORDER BY p.property_name, s.space_number;
```
### `vw_revenue_timeline`

```sql
 SELECT ab.absorption_id,
    ab.project_id,
    ab.revenue_stream_name,
    ab.revenue_category,
    ab.total_units,
    ab.base_price_per_unit,
    ab.price_escalation_pct,
    rt.period_id,
    cp.period_start_date,
    cp.period_end_date,
    rt.units_sold_this_period,
    rt.cumulative_units_sold,
    rt.units_remaining,
    rt.average_price_this_period,
    rt.gross_revenue,
    rt.sales_commission,
    rt.closing_costs,
    rt.net_revenue,
    round(rt.cumulative_units_sold::numeric / NULLIF(ab.total_units, 0)::numeric * 100::numeric, 2) AS pct_complete
   FROM tbl_absorption_schedule ab
     JOIN tbl_revenue_timing rt ON ab.absorption_id = rt.absorption_id
     JOIN tbl_calculation_period cp ON rt.period_id = cp.period_id
  ORDER BY ab.absorption_id, cp.period_start_date;
```
### `vw_zoning_glossary_export`

```sql
 SELECT glossary_id,
    jurisdiction_display,
    jurisdiction_city,
    jurisdiction_county,
    jurisdiction_state,
    family_name,
    district_code,
    district_name,
    local_code_raw,
    local_code_canonical,
    code_token_kind,
    code_token_confidence,
    mapped_use,
    allowance,
    purpose_text,
    intent_text,
    conditions_text,
    development_standards,
    use_standard_refs,
    definitions_refs,
    narrative_section_ref,
    narrative_src_url,
    source_doc_url,
    effective_date,
    is_active,
    created_at,
    updated_at
   FROM glossary_zoning g
  WHERE jurisdiction_state = 'AZ'::bpchar AND (jurisdiction_city = ANY (ARRAY['Phoenix'::text, 'Maricopa'::text, 'Peoria'::text]));
```

## Standalone Index Inventory

| Table | Index |
|---|---|
| _migrations | _migrations_migration_file_key |
| _migrations | _migrations_pkey |
| ai_correction_log | ai_correction_log_pkey |
| ai_correction_log | idx_correction_log_correction_type |
| ai_correction_log | idx_correction_log_created_at |
| ai_correction_log | idx_correction_log_field_path |
| ai_correction_log | idx_correction_log_queue_id |
| ai_debug_log | ai_debug_log_pkey |
| ai_extraction_staging | ai_extraction_staging_pkey |
| ai_extraction_staging | idx_extraction_staging_doc |
| ai_extraction_staging | idx_extraction_staging_project |
| ai_extraction_staging | idx_staging_field_key |
| ai_extraction_staging | idx_staging_property_type |
| ai_extraction_staging | idx_staging_scope |
| ai_extraction_staging | idx_staging_unique_pending |
| ai_extraction_warnings | ai_extraction_warnings_pkey |
| ai_extraction_warnings | idx_extraction_warnings_created_at |
| ai_extraction_warnings | idx_extraction_warnings_queue_id |
| ai_extraction_warnings | idx_extraction_warnings_severity |
| ai_ingestion_history | ai_ingestion_history_pkey |
| ai_review_history | ai_review_history_pkey |
| ai_review_history | idx_ai_review_history_action_type |
| ai_review_history | idx_ai_review_history_created_at |
| ai_review_history | idx_ai_review_history_project_id |
| auth_group | auth_group_name_a6ea08ec_like |
| auth_group | auth_group_name_key |
| auth_group | auth_group_pkey |
| auth_group_permissions | auth_group_permissions_group_id_b120cbf9 |
| auth_group_permissions | auth_group_permissions_group_id_permission_id_0cd325b0_uniq |
| auth_group_permissions | auth_group_permissions_permission_id_84c5c92e |
| auth_group_permissions | auth_group_permissions_pkey |
| auth_permission | auth_permission_content_type_id_2f476e4b |
| auth_permission | auth_permission_content_type_id_codename_01ab375a_uniq |
| auth_permission | auth_permission_pkey |
| auth_user | auth_user_pkey |
| auth_user | auth_user_username_6821ab7c_like |
| auth_user | auth_user_username_key |
| auth_user_groups | auth_user_groups_group_id_97559544 |
| auth_user_groups | auth_user_groups_pkey |
| auth_user_groups | auth_user_groups_user_id_6a12ed8b |
| auth_user_groups | auth_user_groups_user_id_group_id_94350c0c_uniq |
| auth_user_user_permissions | auth_user_user_permissions_permission_id_1fbb5f2c |
| auth_user_user_permissions | auth_user_user_permissions_pkey |
| auth_user_user_permissions | auth_user_user_permissions_user_id_a95ead1b |
| auth_user_user_permissions | auth_user_user_permissions_user_id_permission_id_14a6b632_uniq |
| bmk_absorption_velocity | bmk_absorption_velocity_pkey |
| bmk_absorption_velocity | idx_bmk_absorption_benchmark |
| bmk_absorption_velocity | idx_bmk_absorption_geography |
| bmk_builder_communities | bmk_builder_communities_pkey |
| bmk_builder_communities | bmk_builder_communities_source_source_id_key |
| bmk_builder_communities | idx_bmk_communities_builder |
| bmk_builder_communities | idx_bmk_communities_city_state |
| bmk_builder_communities | idx_bmk_communities_geo |
| bmk_builder_communities | idx_bmk_communities_last_seen |
| bmk_builder_communities | idx_bmk_communities_market |
| bmk_builder_communities | idx_bmk_communities_price_range |
| bmk_builder_inventory | bmk_builder_inventory_pkey |
| bmk_builder_inventory | bmk_builder_inventory_source_source_id_key |
| bmk_builder_inventory | idx_bmk_inventory_city_state |
| bmk_builder_inventory | idx_bmk_inventory_community |
| bmk_builder_inventory | idx_bmk_inventory_geo |
| bmk_builder_inventory | idx_bmk_inventory_last_seen |
| bmk_builder_inventory | idx_bmk_inventory_move_in |
| bmk_builder_inventory | idx_bmk_inventory_price |
| bmk_builder_inventory | idx_bmk_inventory_status |
| bmk_builder_plans | bmk_builder_plans_pkey |
| bmk_builder_plans | bmk_builder_plans_source_source_id_key |
| bmk_builder_plans | idx_bmk_plans_base_price |
| bmk_builder_plans | idx_bmk_plans_community |
| bmk_builder_plans | idx_bmk_plans_last_seen |
| bmk_builder_plans | idx_bmk_plans_product_type |
| bmk_builder_plans | idx_bmk_plans_sqft |
| bmk_resale_closings | bmk_resale_closings_pkey |
| bmk_resale_closings | bmk_resale_closings_source_source_id_key |
| bmk_resale_closings | idx_bmk_resale_closings_geo |
| bmk_resale_closings | idx_bmk_resale_closings_location |
| bmk_resale_closings | idx_bmk_resale_closings_sale_date |
| bmk_resale_closings | idx_bmk_resale_closings_source |
| bmk_resale_closings | idx_bmk_resale_closings_year_built |
| core_category_lifecycle_stages | core_category_lifecycle_stages_pkey |
| core_category_lifecycle_stages | idx_category_lifecycle_category |
| core_category_lifecycle_stages | idx_category_lifecycle_sort |
| core_category_tag_library | core_category_tag_library_pkey |
| core_category_tag_library | core_category_tag_library_tag_name_key |
| core_category_tag_library | idx_tag_library_active |
| core_category_tag_library | idx_tag_library_context |
| core_doc | core_doc_pkey |
| core_doc | idx_core_doc_deleted_at |
| core_doc | idx_core_doc_doc_type |
| core_doc | idx_core_doc_processing_status |
| core_doc | idx_core_doc_profile_json |
| core_doc | idx_core_doc_project_id |
| core_doc | idx_core_doc_status |
| core_doc | idx_core_doc_workspace_id |
| core_doc | idx_doc_cabinet |
| core_doc | idx_doc_media_scan |
| core_doc_attr_enum | core_doc_attr_enum_pkey |
| core_doc_attr_lookup | core_doc_attr_lookup_pkey |
| core_doc_folder | core_doc_folder_pkey |
| core_doc_folder | idx_folder_parent |
| core_doc_folder | idx_folder_path |
| core_doc_folder | unique_folder_path |
| core_doc_folder_link | core_doc_folder_link_pkey |
| core_doc_folder_link | idx_folder_link_folder |
| core_doc_media | core_doc_media_pkey |
| core_doc_media | idx_doc_media_hash |
| core_doc_media | idx_media_class_id |
| core_doc_media | idx_media_deleted |
| core_doc_media | idx_media_doc_id |
| core_doc_media | idx_media_method |
| core_doc_media | idx_media_project_id |
| core_doc_media | idx_media_status |
| core_doc_media | idx_media_tags |
| core_doc_media_link | core_doc_media_link_pkey |
| core_doc_media_link | idx_media_link_entity |
| core_doc_media_link | idx_media_link_media |
| core_doc_media_link | idx_media_link_purpose |
| core_doc_media_link | uq_media_entity_link |
| core_doc_smartfilter | core_doc_smartfilter_pkey |
| core_doc_smartfilter | idx_smartfilter_active |
| core_doc_text | core_doc_text_pkey |
| core_doc_text | idx_doc_text_fts |
| core_fin_budget_version | core_fin_budget_version_pkey |
| core_fin_category_uom | core_fin_category_uom_pkey |
| core_fin_confidence_policy | core_fin_confidence_policy_pkey |
| core_fin_crosswalk_ad | core_fin_crosswalk_ad_pkey |
| core_fin_crosswalk_ae | core_fin_crosswalk_ae_pkey |
| core_fin_curve | core_fin_curve_name_key |
| core_fin_curve | core_fin_curve_pkey |
| core_fin_division_applicability | core_fin_container_applicability_pkey |
| core_fin_fact_actual | core_fin_fact_actual_pkey |
| core_fin_fact_actual | idx_core_fin_fact_actual_container |
| core_fin_fact_actual | idx_fact_actual_category |
| core_fin_fact_actual | idx_fact_actual_container |
| core_fin_fact_actual | idx_fact_actual_scenario |
| core_fin_fact_budget | core_fin_fact_budget_pkey |
| core_fin_fact_budget | idx_budget_approval_status |
| core_fin_fact_budget | idx_budget_fact_category_l1 |
| core_fin_fact_budget | idx_budget_fact_category_l2 |
| core_fin_fact_budget | idx_budget_fact_category_l3 |
| core_fin_fact_budget | idx_budget_fact_category_l4 |
| core_fin_fact_budget | idx_budget_finance_structure |
| core_fin_fact_budget | idx_budget_funding_id |
| core_fin_fact_budget | idx_budget_is_critical |
| core_fin_fact_budget | idx_budget_lifecycle_stage |
| core_fin_fact_budget | idx_budget_milestone_id |
| core_fin_fact_budget | idx_budget_status |
| core_fin_fact_budget | idx_core_fin_fact_budget_confidence |
| core_fin_fact_budget | idx_core_fin_fact_budget_container |
| core_fin_fact_budget | idx_core_fin_fact_budget_periods |
| core_fin_fact_budget | idx_core_fin_fact_budget_vendor |
| core_fin_fact_budget | idx_fact_budget_budget_container |
| core_fin_fact_budget | idx_fact_budget_category |
| core_fin_fact_budget | idx_fact_budget_dates |
| core_fin_fact_budget | idx_fact_budget_division |
| core_fin_fact_budget | idx_fact_budget_project_level |
| core_fin_fact_budget | idx_fact_budget_project_scenario |
| core_fin_fact_budget | idx_fact_budget_scenario |
| core_fin_fact_tags | core_fin_fact_tags_fact_id_fact_type_tag_name_key |
| core_fin_fact_tags | core_fin_fact_tags_pkey |
| core_fin_fact_tags | idx_fact_tags_category |
| core_fin_fact_tags | idx_fact_tags_fact |
| core_fin_fact_tags | idx_fact_tags_name |
| core_fin_funding_source | core_fin_funding_source_pkey |
| core_fin_growth_rate_sets | core_fin_growth_rate_sets_pkey |
| core_fin_growth_rate_sets | core_fin_growth_rate_sets_project_id_card_type_set_name_key |
| core_fin_growth_rate_sets | idx_growth_rate_benchmark |
| core_fin_growth_rate_sets | idx_growth_rate_geography |
| core_fin_growth_rate_sets | idx_growth_rate_sets_project_card |
| core_fin_growth_rate_steps | core_fin_growth_rate_steps_pkey |
| core_fin_growth_rate_steps | core_fin_growth_rate_steps_set_id_step_number_key |
| core_fin_growth_rate_steps | idx_growth_rate_steps_set |
| core_fin_uom | core_fin_uom_pkey |
| core_item_benchmark_link | core_item_benchmark_link_pkey |
| core_item_benchmark_link | idx_template_benchmark_benchmark |
| core_item_benchmark_link | idx_template_benchmark_template |
| core_lookup_item | core_lookup_item_pkey |
| core_lookup_item | uq_core_lookup_item |
| core_lookup_list | core_lookup_list_pkey |
| core_planning_standards | core_planning_standards_pkey |
| core_planning_standards | core_planning_standards_unique |
| core_unit_cost_category | core_unit_cost_category_account_number_key |
| core_unit_cost_category | core_unit_cost_category_pkey |
| core_unit_cost_category | idx_category_account_number |
| core_unit_cost_category | idx_category_is_calculated |
| core_unit_cost_category | idx_category_property_types |
| core_unit_cost_category | idx_category_tags |
| core_unit_cost_category | idx_unit_cost_category_parent |
| core_unit_cost_item | core_unit_cost_item_pkey |
| core_unit_cost_item | core_unit_cost_template_unique |
| core_unit_cost_item | idx_unit_cost_item_active |
| core_unit_cost_item | idx_unit_cost_item_category |
| core_unit_cost_item | idx_unit_cost_item_project_type |
| core_unit_cost_item | idx_unit_cost_template_category_active |
| core_unit_cost_item | idx_unit_cost_template_geography |
| core_unit_cost_item | idx_unit_cost_template_name |
| core_unit_cost_item | idx_unit_cost_template_search |
| core_workspace_member | core_workspace_member_pkey |
| core_workspace_member | idx_workspace_member_user |
| density_classification | density_classification_code_key |
| density_classification | density_classification_pkey |
| developer_fees | developer_fees_pkey |
| developer_fees | idx_developer_fees_project |
| django_admin_log | django_admin_log_content_type_id_c4bce8eb |
| django_admin_log | django_admin_log_pkey |
| django_admin_log | django_admin_log_user_id_c564eba6 |
| django_content_type | django_content_type_app_label_model_76bd3d3b_uniq |
| django_content_type | django_content_type_pkey |
| django_migrations | django_migrations_pkey |
| django_session | django_session_expire_date_a5c62663 |
| django_session | django_session_pkey |
| django_session | django_session_session_key_c0390e0f_like |
| dms_assertion | dms_assertion_pkey |
| dms_assertion | idx_assertion_as_of_date |
| dms_assertion | idx_assertion_doc_id |
| dms_assertion | idx_assertion_metric_key |
| dms_assertion | idx_assertion_project_id |
| dms_assertion | idx_assertion_subject_type |
| dms_attributes | dms_attributes_attr_key_key |
| dms_attributes | dms_attributes_pkey |
| dms_extract_queue | dms_extract_queue_pkey |
| dms_extract_queue | idx_extract_queue_created_at |
| dms_extract_queue | idx_extract_queue_doc_id |
| dms_extract_queue | idx_extract_queue_status |
| dms_profile_audit | dms_profile_audit_pkey |
| dms_template_attributes | dms_template_attributes_pkey |
| dms_templates | dms_templates_pkey |
| dms_unmapped | dms_unmapped_pkey |
| dms_unmapped | idx_unmapped_doc_id |
| dms_unmapped | idx_unmapped_project_id |
| dms_unmapped | idx_unmapped_source_key |
| dms_unmapped | idx_unmapped_status |
| dms_workspaces | dms_workspaces_pkey |
| dms_workspaces | dms_workspaces_workspace_code_key |
| doc_extracted_facts | doc_extracted_facts_pkey |
| doc_extracted_facts | idx_doc_facts_active |
| doc_extracted_facts | idx_doc_facts_doc_id |
| doc_extracted_facts | unique_fact_per_version |
| doc_processing_queue | doc_processing_queue_doc_id_key |
| doc_processing_queue | doc_processing_queue_pkey |
| doc_processing_queue | doc_processing_queue_priority_idx |
| doc_processing_queue | doc_processing_queue_status_idx |
| doc_processing_queue | idx_doc_queue_status |
| extraction_commit_snapshot | extraction_commit_snapshot_committed_by_id_aba4412e |
| extraction_commit_snapshot | extraction_commit_snapshot_doc_id_7bc0c667 |
| extraction_commit_snapshot | extraction_commit_snapshot_pkey |
| extraction_commit_snapshot | extraction_commit_snapshot_project_id_4c8d51cf |
| extraction_commit_snapshot | snapshot_project_scope_idx |
| gis_boundary_history | gis_boundary_history_pkey |
| gis_boundary_history | idx_boundary_history_created_at |
| gis_boundary_history | idx_boundary_history_project_id |
| gis_document_ingestion | gis_document_ingestion_pkey |
| gis_document_ingestion | idx_gdi_project_package |
| gis_mapping_history | gis_mapping_history_pkey |
| gis_mapping_history | idx_mapping_history_created_at |
| gis_mapping_history | idx_mapping_history_project_id |
| gis_plan_parcel | gis_plan_parcel_pkey |
| gis_plan_parcel | idx_gpp_confidence |
| gis_plan_parcel | idx_gpp_geom |
| gis_plan_parcel | ux_gpp_active |
| gis_project_boundary | gis_project_boundary_pkey |
| gis_project_boundary | gis_project_boundary_project_id_key |
| gis_project_boundary | idx_gpb_geom |
| gis_tax_parcel_ref | gis_tax_parcel_ref_pkey |
| gis_tax_parcel_ref | idx_gtpr_geom |
| glossary_zoning | glossary_zoning_pkey |
| glossary_zoning | idx_gz_allowance |
| glossary_zoning | idx_gz_district |
| glossary_zoning | idx_gz_fulltext_conditions |
| glossary_zoning | idx_gz_fulltext_purpose |
| glossary_zoning | idx_gz_juris |
| glossary_zoning | idx_gz_mapped_use |
| glossary_zoning | idx_gz_token_kind |
| knowledge_embeddings | idx_embedding_vector |
| knowledge_embeddings | idx_embeddings_active |
| knowledge_embeddings | knowledge_e_source__f8627b_idx |
| knowledge_embeddings | knowledge_embeddings_created_at_b0e6da24 |
| knowledge_embeddings | knowledge_embeddings_pkey |
| knowledge_embeddings | knowledge_embeddings_source_id_0d388137 |
| knowledge_embeddings | knowledge_embeddings_source_type_acd3fae1 |
| knowledge_embeddings | knowledge_embeddings_source_type_acd3fae1_like |
| knowledge_entities | knowledge_e_canonic_a1a8d9_idx |
| knowledge_entities | knowledge_e_entity__ca2a63_idx |
| knowledge_entities | knowledge_entities_canonical_name_b5e564cc_like |
| knowledge_entities | knowledge_entities_canonical_name_key |
| knowledge_entities | knowledge_entities_created_at_4594632c |
| knowledge_entities | knowledge_entities_created_by_id_49f837e1 |
| knowledge_entities | knowledge_entities_entity_type_59f385fa |
| knowledge_entities | knowledge_entities_entity_type_59f385fa_like |
| knowledge_entities | knowledge_entities_pkey |
| knowledge_facts | knowledge_f_is_curr_84f472_idx |
| knowledge_facts | knowledge_f_object__4cb694_idx |
| knowledge_facts | knowledge_f_source__dd8340_idx |
| knowledge_facts | knowledge_f_subject_0aa246_idx |
| knowledge_facts | knowledge_f_valid_f_f71d25_idx |
| knowledge_facts | knowledge_facts_created_at_9f31ebb7 |
| knowledge_facts | knowledge_facts_created_by_id_a1fa9f24 |
| knowledge_facts | knowledge_facts_is_current_3cf05c45 |
| knowledge_facts | knowledge_facts_object_entity_id_ca9e8ef5 |
| knowledge_facts | knowledge_facts_pkey |
| knowledge_facts | knowledge_facts_predicate_b00107dd |
| knowledge_facts | knowledge_facts_predicate_b00107dd_like |
| knowledge_facts | knowledge_facts_source_type_7df43544 |
| knowledge_facts | knowledge_facts_source_type_7df43544_like |
| knowledge_facts | knowledge_facts_subject_entity_id_0c130194 |
| knowledge_facts | knowledge_facts_superseded_by_id_eee8e8cb |
| knowledge_insights | knowledge_i_acknowl_7d6024_idx |
| knowledge_insights | knowledge_i_insight_965cc4_idx |
| knowledge_insights | knowledge_i_subject_c1bcf7_idx |
| knowledge_insights | knowledge_insights_acknowledged_7eb9491e |
| knowledge_insights | knowledge_insights_acknowledged_by_id_68ba1117 |
| knowledge_insights | knowledge_insights_created_at_9aeca26f |
| knowledge_insights | knowledge_insights_insight_type_4d527f2b |
| knowledge_insights | knowledge_insights_insight_type_4d527f2b_like |
| knowledge_insights | knowledge_insights_pkey |
| knowledge_insights | knowledge_insights_subject_entity_id_c3b729c9 |
| knowledge_interactions | knowledge_i_query_i_cc952f_idx |
| knowledge_interactions | knowledge_i_session_7869de_idx |
| knowledge_interactions | knowledge_i_user_fe_5c8b7f_idx |
| knowledge_interactions | knowledge_interactions_created_at_7a47ab34 |
| knowledge_interactions | knowledge_interactions_pkey |
| knowledge_interactions | knowledge_interactions_session_id_7f4000a5 |
| knowledge_sessions | idx_active_sessions |
| knowledge_sessions | knowledge_s_session_5b8f09_idx |
| knowledge_sessions | knowledge_s_user_id_c64165_idx |
| knowledge_sessions | knowledge_sessions_pkey |
| knowledge_sessions | knowledge_sessions_project_id_5f44cc1b |
| knowledge_sessions | knowledge_sessions_session_start_740f4f0a |
| knowledge_sessions | knowledge_sessions_user_id_fa891383 |
| land_use_pricing | idx_land_use_pricing_benchmark |
| land_use_pricing | idx_land_use_pricing_geography |
| land_use_pricing | idx_land_use_pricing_growth_set |
| land_use_pricing | idx_land_use_pricing_project |
| land_use_pricing | idx_land_use_pricing_project_product |
| land_use_pricing | land_use_pricing_pkey |
| land_use_pricing | land_use_pricing_project_lu_product_key |
| land_use_pricing | land_use_pricing_project_type_product_key |
| landscaper_absorption_detail | idx_landscaper_absorption_benchmark |
| landscaper_absorption_detail | idx_landscaper_absorption_geography |
| landscaper_absorption_detail | idx_landscaper_absorption_lot_size |
| landscaper_absorption_detail | idx_landscaper_absorption_period |
| landscaper_absorption_detail | idx_landscaper_absorption_source |
| landscaper_absorption_detail | landscaper_absorption_detail_pkey |
| landscaper_activity | idx_landscaper_activity_created |
| landscaper_activity | idx_landscaper_activity_project |
| landscaper_activity | idx_landscaper_activity_project_created |
| landscaper_activity | idx_landscaper_activity_project_read |
| landscaper_activity | idx_landscaper_activity_read |
| landscaper_activity | idx_landscaper_activity_source |
| landscaper_activity | landscaper_activity_pkey |
| landscaper_advice | landscaper__created_57ae5a_idx |
| landscaper_advice | landscaper__project_948878_idx |
| landscaper_advice | landscaper__project_e8f509_idx |
| landscaper_advice | landscaper_advice_message_id_5653931d |
| landscaper_advice | landscaper_advice_message_id_5653931d_like |
| landscaper_advice | landscaper_advice_pkey |
| landscaper_advice | landscaper_advice_project_id_6fb9f5af |
| landscaper_chat_embedding | idx_chat_embedding_project |
| landscaper_chat_embedding | idx_chat_embedding_thread |
| landscaper_chat_embedding | idx_chat_embedding_vector |
| landscaper_chat_embedding | landscaper_chat_embedding_pkey |
| landscaper_chat_message | idx_chat_message_project_tab |
| landscaper_chat_message | landscaper__project_0fbb3d_idx |
| landscaper_chat_message | landscaper__timesta_8945c8_idx |
| landscaper_chat_message | landscaper_chat_message_message_id_27da4cf7_like |
| landscaper_chat_message | landscaper_chat_message_pkey |
| landscaper_chat_message | landscaper_chat_message_project_id_fc77d355 |
| landscaper_chat_message | landscaper_chat_message_user_id_263e4adb |
| landscaper_chat_thread | idx_thread_active |
| landscaper_chat_thread | idx_thread_page |
| landscaper_chat_thread | idx_thread_project |
| landscaper_chat_thread | idx_thread_updated |
| landscaper_chat_thread | landscaper_chat_thread_pkey |
| landscaper_thread_message | idx_message_created |
| landscaper_thread_message | idx_message_thread |
| landscaper_thread_message | landscaper_thread_message_pkey |
| lkp_building_class | lkp_building_class_pkey |
| lkp_buyer_seller_type | lkp_buyer_seller_type_pkey |
| lkp_price_status | lkp_price_status_pkey |
| lkp_sale_type | lkp_sale_type_pkey |
| lu_acreage_allocation_type | lu_acreage_allocation_type_allocation_type_code_key |
| lu_acreage_allocation_type | lu_acreage_allocation_type_pkey |
| lu_com_spec | lu_com_spec_pkey |
| lu_family | idx_lu_family_active |
| lu_family | lu_family_code_key |
| lu_family | lu_family_pkey |
| lu_lease_status | lu_lease_status_pkey |
| lu_lease_type | lu_lease_type_pkey |
| lu_market | lu_market_market_code_key |
| lu_market | lu_market_pkey |
| lu_media_classification | lu_media_classification_classification_code_key |
| lu_media_classification | lu_media_classification_pkey |
| lu_picklist_display_config | lu_picklist_display_config_list_code_context_key |
| lu_picklist_display_config | lu_picklist_display_config_pkey |
| lu_property_subtype | lu_property_subtype_pkey |
| lu_property_subtype | lu_property_subtype_property_type_code_subtype_code_key |
| lu_recovery_structure | lu_recovery_structure_pkey |
| lu_res_spec | lu_res_spec_pkey |
| lu_subtype | lu_subtype_family_id_code_key |
| lu_subtype | lu_subtype_pkey1 |
| lu_type | idx_lu_subtype_active |
| lu_type | idx_lu_subtype_family |
| lu_type | lu_subtype_code_key |
| lu_type | lu_subtype_pkey |
| management_overhead | idx_management_overhead_project |
| management_overhead | management_overhead_pkey |
| market_activity | idx_market_activity_geo_type |
| market_activity | idx_market_activity_lookup |
| market_activity | idx_market_activity_period |
| market_activity | idx_market_activity_source |
| market_activity | market_activity_msa_code_source_metric_type_geography_type__key |
| market_activity | market_activity_pkey |
| market_assumptions | idx_market_assumptions_dvl_timeseries |
| market_assumptions | idx_market_assumptions_project_lutype |
| market_assumptions | market_assumptions_pkey |
| market_competitive_project_exclusions | idx_comp_exclusions_project |
| market_competitive_project_exclusions | market_competitive_project_exc_project_id_source_project_id_key |
| market_competitive_project_exclusions | market_competitive_project_exclusions_pkey |
| market_competitive_project_products | idx_comp_products_competitive_project |
| market_competitive_project_products | idx_comp_products_lot_width |
| market_competitive_project_products | idx_comp_products_project_product |
| market_competitive_project_products | idx_comp_products_project_width |
| market_competitive_project_products | market_competitive_project_products_pkey |
| market_competitive_projects | idx_market_comps_project |
| market_competitive_projects | idx_market_comps_project_source_unique |
| market_competitive_projects | idx_market_comps_source_project |
| market_competitive_projects | market_competitive_projects_pkey |
| mkt_data_source_registry | mkt_data_source_registry_pkey |
| mkt_data_source_registry | mkt_data_source_registry_source_code_609b59ab_like |
| mkt_data_source_registry | mkt_data_source_registry_source_code_key |
| mkt_new_home_project | idx_mkt_nhp_builder |
| mkt_new_home_project | idx_mkt_nhp_cbsa |
| mkt_new_home_project | idx_mkt_nhp_city |
| mkt_new_home_project | idx_mkt_nhp_effective_date |
| mkt_new_home_project | idx_mkt_nhp_location |
| mkt_new_home_project | idx_mkt_nhp_lot_width |
| mkt_new_home_project | idx_mkt_nhp_lu_product |
| mkt_new_home_project | idx_mkt_nhp_lu_type |
| mkt_new_home_project | idx_mkt_nhp_master_plan |
| mkt_new_home_project | idx_mkt_nhp_project_name |
| mkt_new_home_project | idx_mkt_nhp_source |
| mkt_new_home_project | idx_mkt_nhp_status |
| mkt_new_home_project | mkt_new_home_project_pkey |
| mkt_new_home_project | mkt_new_home_project_source_id_cbf21c81 |
| mkt_new_home_project | uq_mkt_project_source_date |
| mkt_permit_history | idx_mkt_permit_jurisdiction |
| mkt_permit_history | idx_mkt_permit_month |
| mkt_permit_history | idx_mkt_permit_source |
| mkt_permit_history | mkt_permit_history_pkey |
| mkt_permit_history | mkt_permit_history_source_id_4d1eb402 |
| mkt_permit_history | uq_mkt_permit_month_jurisdiction |
| mutation_audit_log | idx_mutation_audit_mutation_id |
| mutation_audit_log | idx_mutation_audit_project_time |
| mutation_audit_log | idx_mutation_audit_table_record |
| mutation_audit_log | mutation_audit_log_pkey |
| opex_account_migration_map | opex_account_migration_map_pkey |
| opex_benchmark | idx_opex_benchmark_category |
| opex_benchmark | idx_opex_benchmark_geography |
| opex_benchmark | idx_opex_benchmark_property |
| opex_benchmark | idx_opex_benchmark_source_year |
| opex_benchmark | opex_benchmark_pkey |
| opex_benchmark | opex_benchmark_source_source_year_property_type_geographic__key |
| opex_label_mapping | opex_label_mapping_pkey |
| opex_label_mapping | opex_label_mapping_source_label_key |
| pending_mutations | idx_pending_mutations_batch |
| pending_mutations | idx_pending_mutations_expires |
| pending_mutations | idx_pending_mutations_message |
| pending_mutations | idx_pending_mutations_project_status |
| pending_mutations | pending_mutations_pkey |
| planning_doc | planning_doc_pkey |
| project_boundaries | idx_project_boundaries_geometry |
| project_boundaries | idx_project_boundaries_project_id |
| project_boundaries | project_boundaries_pkey |
| project_jurisdiction_mapping | project_jurisdiction_mapping_pkey |
| project_parcel_boundaries | idx_project_parcel_boundaries_boundary_id |
| project_parcel_boundaries | idx_project_parcel_boundaries_geometry |
| project_parcel_boundaries | idx_project_parcel_boundaries_parcel_id |
| project_parcel_boundaries | idx_project_parcel_boundaries_project_id |
| project_parcel_boundaries | project_parcel_boundaries_pkey |
| report_templates | idx_report_active |
| report_templates | report_templates_pkey |
| res_lot_product | idx_res_lot_product_active |
| res_lot_product | idx_res_lot_product_type |
| res_lot_product | res_lot_product_code_key |
| res_lot_product | res_lot_product_pkey |
| sale_names | idx_sale_names_project |
| sale_names | sale_names_pkey |
| sale_names | sale_names_project_id_sale_date_key |
| spatial_ref_sys | spatial_ref_sys_pkey |
| tbl_absorption_schedule | idx_absorption_parcel |
| tbl_absorption_schedule | idx_absorption_phase |
| tbl_absorption_schedule | idx_absorption_product |
| tbl_absorption_schedule | idx_absorption_project_period |
| tbl_absorption_schedule | idx_absorption_scenario |
| tbl_absorption_schedule | tbl_absorption_schedule_pkey |
| tbl_acquisition | idx_acquisition_category_id |
| tbl_acquisition | idx_acquisition_contact_id |
| tbl_acquisition | idx_acquisition_project_id |
| tbl_acquisition | idx_acquisition_subcategory_id |
| tbl_acquisition | idx_tbl_acquisition_category_id |
| tbl_acquisition | idx_tbl_acquisition_subcategory_id |
| tbl_acquisition | tbl_acquisition_pkey |
| tbl_acreage_allocation | idx_acreage_project |
| tbl_acreage_allocation | idx_acreage_project_phase |
| tbl_acreage_allocation | idx_acreage_project_type |
| tbl_acreage_allocation | idx_acreage_type |
| tbl_acreage_allocation | tbl_acreage_allocation_pkey |
| tbl_additional_income | idx_additional_income_lease |
| tbl_additional_income | tbl_additional_income_pkey |
| tbl_additional_income | uq_additional_income_lease |
| tbl_ai_adjustment_suggestions | idx_ai_suggestions_comparable |
| tbl_ai_adjustment_suggestions | idx_ai_suggestions_type |
| tbl_ai_adjustment_suggestions | tbl_ai_adjustment_suggestions_comparable_id_adjustment_type_key |
| tbl_ai_adjustment_suggestions | tbl_ai_adjustment_suggestions_pkey |
| tbl_alpha_feedback | idx_alpha_feedback_page |
| tbl_alpha_feedback | idx_alpha_feedback_status |
| tbl_alpha_feedback | idx_alpha_feedback_submitted |
| tbl_alpha_feedback | tbl_alpha_feedback_pkey |
| tbl_analysis_type_config | idx_analysis_type_config_type |
| tbl_analysis_type_config | tbl_analysis_type_config_analysis_type_key |
| tbl_analysis_type_config | tbl_analysis_type_config_pkey |
| tbl_approval | tbl_approval_pkey |
| tbl_area | tbl_planarea_pkey |
| tbl_area | ux_planarea_project_area |
| tbl_assumptionrule | tbl_assumptionrule_pkey |
| tbl_base_rent | idx_base_rent_dates |
| tbl_base_rent | idx_base_rent_lease |
| tbl_base_rent | tbl_base_rent_pkey |
| tbl_base_rent | uq_base_rent_lease_period |
| tbl_benchmark_ai_suggestions | idx_ai_suggestion_category |
| tbl_benchmark_ai_suggestions | idx_ai_suggestion_document |
| tbl_benchmark_ai_suggestions | idx_ai_suggestion_extraction_date |
| tbl_benchmark_ai_suggestions | idx_ai_suggestion_status |
| tbl_benchmark_ai_suggestions | idx_ai_suggestion_user |
| tbl_benchmark_ai_suggestions | tbl_benchmark_ai_suggestions_pkey |
| tbl_benchmark_contingency | idx_benchmark_contingency_benchmark_id |
| tbl_benchmark_contingency | tbl_benchmark_contingency_pkey |
| tbl_benchmark_transaction_cost | idx_transaction_cost_benchmark |
| tbl_benchmark_transaction_cost | idx_transaction_cost_type |
| tbl_benchmark_transaction_cost | tbl_benchmark_transaction_cost_pkey |
| tbl_benchmark_unit_cost | idx_unit_cost_benchmark |
| tbl_benchmark_unit_cost | idx_unit_cost_phase |
| tbl_benchmark_unit_cost | idx_unit_cost_work_type |
| tbl_benchmark_unit_cost | tbl_benchmark_unit_cost_pkey |
| tbl_budget | tbl_budget_pkey |
| tbl_budget_fact | idx_budget_fact_category |
| tbl_budget_fact | idx_budget_fact_project |
| tbl_budget_fact | idx_budget_fact_project_category |
| tbl_budget_fact | tbl_budget_fact_pkey |
| tbl_budget_fact | uq_budget_project_category |
| tbl_budget_items | idx_budget_items_project |
| tbl_budget_items | idx_budget_items_structure |
| tbl_budget_items | idx_budget_items_timing |
| tbl_budget_items | tbl_budget_items_pkey |
| tbl_budget_structure | idx_budget_structure_scope |
| tbl_budget_structure | tbl_budget_structure_pkey |
| tbl_budget_structure | tbl_budget_structure_scope_category_detail_key |
| tbl_budget_timing | idx_budget_timing_fact |
| tbl_budget_timing | idx_budget_timing_period |
| tbl_budget_timing | tbl_budget_timing_pkey |
| tbl_budget_timing | uq_budget_timing |
| tbl_cabinet | idx_cabinet_active |
| tbl_cabinet | idx_cabinet_owner |
| tbl_cabinet | tbl_cabinet_pkey |
| tbl_calculation_period | idx_calculation_period_project |
| tbl_calculation_period | tbl_calculation_period_pkey |
| tbl_calculation_period | uq_calculation_period_sequence |
| tbl_cap_rate_comps | idx_cap_rate_comps_income_approach |
| tbl_cap_rate_comps | tbl_cap_rate_comps_pkey |
| tbl_capex_reserve | idx_capex_project |
| tbl_capex_reserve | tbl_capex_reserve_pkey |
| tbl_capital_call | idx_capital_call_project |
| tbl_capital_call | tbl_capital_call_pkey |
| tbl_capital_reserves | idx_capital_reserves_lease |
| tbl_capital_reserves | idx_capital_reserves_project |
| tbl_capital_reserves | idx_capital_reserves_trigger |
| tbl_capital_reserves | idx_capital_reserves_type |
| tbl_capital_reserves | tbl_capital_reserves_pkey |
| tbl_capitalization | tbl_capitalization_pkey |
| tbl_cashflow | idx_cashflow_category |
| tbl_cashflow | idx_cashflow_lease |
| tbl_cashflow | idx_cashflow_parcel |
| tbl_cashflow | idx_cashflow_phase |
| tbl_cashflow | idx_cashflow_project_period |
| tbl_cashflow | tbl_cashflow_pkey |
| tbl_cashflow_summary | idx_summary_project_period |
| tbl_cashflow_summary | tbl_cashflow_summary_pkey |
| tbl_cashflow_summary | uq_summary_project_period |
| tbl_changelog | idx_changelog_deployed |
| tbl_changelog | idx_changelog_version |
| tbl_changelog | tbl_changelog_pkey |
| tbl_closing_event | idx_closing_date |
| tbl_closing_event | idx_closing_sale_event |
| tbl_closing_event | idx_closing_sequence |
| tbl_closing_event | tbl_closing_event_pkey |
| tbl_closing_event | tbl_closing_event_sale_event_id_closing_sequence_key |
| tbl_commercial_lease | idx_cre_lease_expiration |
| tbl_commercial_lease | idx_cre_lease_space_id |
| tbl_commercial_lease | idx_cre_lease_status |
| tbl_commercial_lease | idx_cre_lease_tenant |
| tbl_commercial_lease | idx_cre_lease_tenant_id |
| tbl_commercial_lease | idx_lease_income_property |
| tbl_commercial_lease | tbl_cre_lease_pkey |
| tbl_contact | idx_contact_active |
| tbl_contact | idx_contact_cabinet |
| tbl_contact | idx_contact_company |
| tbl_contact | idx_contact_email |
| tbl_contact | idx_contact_name |
| tbl_contact | idx_contact_search |
| tbl_contact | idx_contact_type |
| tbl_contact | tbl_contact_pkey |
| tbl_contact_relationship | idx_contact_rel_cabinet |
| tbl_contact_relationship | idx_contact_rel_contact |
| tbl_contact_relationship | idx_contact_rel_current |
| tbl_contact_relationship | idx_contact_rel_related |
| tbl_contact_relationship | idx_contact_rel_type |
| tbl_contact_relationship | tbl_contact_relationship_pkey |
| tbl_contact_relationship | uq_contact_relationship |
| tbl_contact_role | idx_contact_role_cabinet |
| tbl_contact_role | idx_contact_role_category |
| tbl_contact_role | idx_contact_role_unique |
| tbl_contact_role | tbl_contact_role_pkey |
| tbl_contacts_legacy | idx_contacts_company_name |
| tbl_contacts_legacy | idx_contacts_project_role |
| tbl_contacts_legacy | tbl_contacts_pkey |
| tbl_cost_allocation | idx_cost_alloc_container |
| tbl_cost_allocation | idx_cost_alloc_structure |
| tbl_cost_allocation | idx_cost_allocation_scenario |
| tbl_cost_allocation | tbl_cost_allocation_pkey |
| tbl_cost_allocation | unique_allocation |
| tbl_cost_approach | idx_cost_approach_project |
| tbl_cost_approach | tbl_cost_approach_pkey |
| tbl_cost_approach_depreciation | tbl_cost_approach_depreciation_pkey |
| tbl_cost_approach_depreciation | tbl_cost_approach_depreciation_project_id_key |
| tbl_dcf_analysis | idx_dcf_analysis_project |
| tbl_dcf_analysis | idx_dcf_analysis_property_type |
| tbl_dcf_analysis | tbl_dcf_analysis_pkey |
| tbl_dcf_analysis | uq_dcf_analysis_project_type |
| tbl_debt_draw_schedule | idx_debt_draw_loan |
| tbl_debt_draw_schedule | idx_debt_draw_period |
| tbl_debt_draw_schedule | tbl_debt_draw_schedule_loan_id_period_id_key |
| tbl_debt_draw_schedule | tbl_debt_draw_schedule_pkey |
| tbl_division | idx_container_project_level |
| tbl_division | idx_container_sale_phase |
| tbl_division | idx_division_parent |
| tbl_division | tbl_container_pkey |
| tbl_division | uq_container_code |
| tbl_document_project | idx_doc_project_doc |
| tbl_document_project | idx_doc_project_project |
| tbl_document_project | idx_doc_project_type |
| tbl_document_project | tbl_document_project_pkey |
| tbl_document_project | uq_document_project |
| tbl_dynamic_column_definition | tbl_dynamic_column_defin_project_id_table_name_co_83f0e5e0_uniq |
| tbl_dynamic_column_definition | tbl_dynamic_column_definit_proposed_from_document_id_2d43666b |
| tbl_dynamic_column_definition | tbl_dynamic_column_definition_created_by_id_9b1688b7 |
| tbl_dynamic_column_definition | tbl_dynamic_column_definition_pkey |
| tbl_dynamic_column_definition | tbl_dynamic_column_definition_project_id_1c6c3338 |
| tbl_dynamic_column_value | tbl_dynamic_column__134554_idx |
| tbl_dynamic_column_value | tbl_dynamic_column_value_column_definition_id_2b1ec228 |
| tbl_dynamic_column_value | tbl_dynamic_column_value_column_definition_id_row_e387982d_uniq |
| tbl_dynamic_column_value | tbl_dynamic_column_value_extracted_from_id_9be121bb |
| tbl_dynamic_column_value | tbl_dynamic_column_value_pkey |
| tbl_dynamic_column_value | tbl_dynamic_row_id_9def5e_idx |
| tbl_equity | idx_equity_project |
| tbl_equity | idx_equity_tier |
| tbl_equity | tbl_equity_pkey |
| tbl_equity_distribution | idx_equity_distribution_partner |
| tbl_equity_distribution | idx_equity_distribution_period |
| tbl_equity_distribution | idx_equity_distribution_type |
| tbl_equity_distribution | tbl_equity_distribution_pkey |
| tbl_equity_partner | idx_equity_partner_class |
| tbl_equity_partner | idx_equity_partner_project |
| tbl_equity_partner | tbl_equity_partner_pkey |
| tbl_equity_structure | tbl_equity_structure_pkey |
| tbl_escalation | idx_escalation_lease |
| tbl_escalation | idx_escalation_type |
| tbl_escalation | tbl_escalation_pkey |
| tbl_expansion_option | idx_expansion_lease |
| tbl_expansion_option | idx_expansion_target |
| tbl_expansion_option | tbl_expansion_option_pkey |
| tbl_expense_detail | idx_expense_detail_category |
| tbl_expense_detail | idx_expense_detail_project |
| tbl_expense_detail | tbl_expense_detail_pkey |
| tbl_expense_recovery | tbl_cre_expense_recovery_pkey |
| tbl_extraction_job | tbl_extract_project_e44a1d_idx |
| tbl_extraction_job | tbl_extract_project_f3cb1f_idx |
| tbl_extraction_job | tbl_extraction_job_created_at_a693d081 |
| tbl_extraction_job | tbl_extraction_job_created_by_id_01e1ec43 |
| tbl_extraction_job | tbl_extraction_job_document_id_fe10aa7e |
| tbl_extraction_job | tbl_extraction_job_pkey |
| tbl_extraction_job | tbl_extraction_job_project_id_443a23a8 |
| tbl_extraction_job | tbl_extraction_job_scope_5f01c2d9 |
| tbl_extraction_job | tbl_extraction_job_scope_5f01c2d9_like |
| tbl_extraction_job | tbl_extraction_job_status_31566a48 |
| tbl_extraction_job | tbl_extraction_job_status_31566a48_like |
| tbl_extraction_log | idx_extraction_log_doc |
| tbl_extraction_log | idx_extraction_log_mapping |
| tbl_extraction_log | idx_extraction_log_project |
| tbl_extraction_log | tbl_extraction_log_pkey |
| tbl_extraction_mapping | idx_extraction_mapping_active |
| tbl_extraction_mapping | idx_extraction_mapping_doctype |
| tbl_extraction_mapping | idx_extraction_mapping_target |
| tbl_extraction_mapping | tbl_extraction_mapping_pkey |
| tbl_extraction_mapping | uq_mapping_pattern_field |
| tbl_field_catalog | idx_field_catalog_editable |
| tbl_field_catalog | idx_field_catalog_group |
| tbl_field_catalog | idx_field_catalog_table |
| tbl_field_catalog | tbl_field_catalog_pkey |
| tbl_field_catalog | tbl_field_catalog_table_name_field_name_key |
| tbl_finance_structure | idx_finance_structure_active |
| tbl_finance_structure | idx_finance_structure_project |
| tbl_finance_structure | idx_finance_structure_scenario |
| tbl_finance_structure | idx_finance_structure_type |
| tbl_finance_structure | tbl_finance_structure_pkey |
| tbl_finance_structure | unique_structure_code |
| tbl_global_benchmark_registry | idx_benchmark_registry_active |
| tbl_global_benchmark_registry | idx_benchmark_registry_as_of_date |
| tbl_global_benchmark_registry | idx_benchmark_registry_category |
| tbl_global_benchmark_registry | idx_benchmark_registry_geography |
| tbl_global_benchmark_registry | idx_benchmark_registry_property_type |
| tbl_global_benchmark_registry | idx_benchmark_registry_user |
| tbl_global_benchmark_registry | tbl_global_benchmark_registry_pkey |
| tbl_hbu_analysis | idx_hbu_maximally_productive |
| tbl_hbu_analysis | idx_hbu_project |
| tbl_hbu_analysis | idx_hbu_scenario_type |
| tbl_hbu_analysis | idx_hbu_status |
| tbl_hbu_analysis | tbl_hbu_analysis_pkey |
| tbl_hbu_comparable_use | idx_hbu_comparable_use_hbu |
| tbl_hbu_comparable_use | idx_hbu_comparable_use_rank |
| tbl_hbu_comparable_use | tbl_hbu_comparable_use_pkey |
| tbl_hbu_zoning_document | idx_hbu_zoning_doc_document |
| tbl_hbu_zoning_document | idx_hbu_zoning_doc_hbu |
| tbl_hbu_zoning_document | tbl_hbu_zoning_document_pkey |
| tbl_income_approach | idx_income_approach_project |
| tbl_income_approach | tbl_income_approach_pkey |
| tbl_income_property | idx_cre_property_status |
| tbl_income_property | idx_cre_property_type |
| tbl_income_property | idx_income_property_project |
| tbl_income_property | tbl_cre_property_pkey |
| tbl_income_property_ind_ext | idx_income_property_ind_clear_height |
| tbl_income_property_ind_ext | idx_income_property_ind_type |
| tbl_income_property_ind_ext | tbl_income_property_ind_ext_pkey |
| tbl_income_property_mf_ext | idx_income_property_mf_class |
| tbl_income_property_mf_ext | tbl_income_property_mf_ext_pkey |
| tbl_income_property_ret_ext | idx_income_property_ret_type |
| tbl_income_property_ret_ext | tbl_income_property_ret_ext_pkey |
| tbl_inventory_item | idx_inventory_active |
| tbl_inventory_item | idx_inventory_code |
| tbl_inventory_item | idx_inventory_container |
| tbl_inventory_item | idx_inventory_data_gin |
| tbl_inventory_item | idx_inventory_family |
| tbl_inventory_item | idx_inventory_hierarchy_gin |
| tbl_inventory_item | idx_inventory_product |
| tbl_inventory_item | idx_inventory_project |
| tbl_inventory_item | idx_inventory_status |
| tbl_inventory_item | idx_inventory_type |
| tbl_inventory_item | tbl_inventory_item_pkey |
| tbl_inventory_item | uq_inventory_item_code |
| tbl_item_dependency | idx_item_dependency_dependent |
| tbl_item_dependency | idx_item_dependency_trigger |
| tbl_item_dependency | tbl_item_dependency_pkey |
| tbl_land_comp_adjustments | tbl_land_comp_adjustments_land_comparable_id_366c2e08 |
| tbl_land_comp_adjustments | tbl_land_comp_adjustments_pkey |
| tbl_land_comparables | tbl_land_comparables_pkey |
| tbl_land_comparables | tbl_land_comparables_project_id_ed54f396 |
| tbl_landuse | idx_tbl_landuse_active |
| tbl_landuse | idx_tbl_landuse_code |
| tbl_landuse | idx_tbl_landuse_subtype |
| tbl_landuse | tbl_landuse_landuse_code_key |
| tbl_landuse | tbl_landuse_pkey |
| tbl_landuse_program | tbl_landuse_program_pkey |
| tbl_lease | idx_lease_expiration |
| tbl_lease | idx_lease_lot |
| tbl_lease | idx_lease_parcel |
| tbl_lease | idx_lease_project |
| tbl_lease | idx_lease_status |
| tbl_lease | idx_lease_tenant |
| tbl_lease | tbl_lease_pkey |
| tbl_lease_assumptions | idx_lease_assumptions_project |
| tbl_lease_assumptions | idx_lease_assumptions_space_type |
| tbl_lease_assumptions | tbl_lease_assumptions_pkey |
| tbl_lease_assumptions | tbl_lease_assumptions_project_id_space_type_effective_date_key |
| tbl_lease_ind_ext | tbl_lease_ind_ext_pkey |
| tbl_lease_mf_ext | tbl_lease_mf_ext_pkey |
| tbl_lease_ret_ext | idx_lease_ret_structure |
| tbl_lease_ret_ext | tbl_lease_ret_ext_pkey |
| tbl_lease_revenue_timing | idx_lease_revenue_timing_lease |
| tbl_lease_revenue_timing | idx_lease_revenue_timing_period |
| tbl_lease_revenue_timing | idx_lease_revenue_timing_project |
| tbl_lease_revenue_timing | idx_lease_revenue_timing_project_period |
| tbl_lease_revenue_timing | tbl_lease_revenue_timing_lease_id_period_id_key |
| tbl_lease_revenue_timing | tbl_lease_revenue_timing_pkey |
| tbl_leasing_commission | idx_commission_lease |
| tbl_leasing_commission | tbl_leasing_commission_pkey |
| tbl_leasing_commission | uq_commission_lease |
| tbl_loan | idx_loan_project |
| tbl_loan | idx_loan_seniority |
| tbl_loan | idx_loan_structure |
| tbl_loan | idx_loan_takes_out |
| tbl_loan | idx_loan_type |
| tbl_loan | tbl_loan_pkey |
| tbl_loan_container | idx_loan_container_division |
| tbl_loan_container | idx_loan_container_loan |
| tbl_loan_container | tbl_loan_container_loan_id_division_id_key |
| tbl_loan_container | tbl_loan_container_pkey |
| tbl_loan_finance_structure | idx_loan_fs_loan |
| tbl_loan_finance_structure | idx_loan_fs_structure |
| tbl_loan_finance_structure | tbl_loan_finance_structure_loan_id_finance_structure_id_key |
| tbl_loan_finance_structure | tbl_loan_finance_structure_pkey |
| tbl_lot | idx_lot_parcel |
| tbl_lot | idx_lot_phase |
| tbl_lot | idx_lot_sale_date |
| tbl_lot | idx_lot_status |
| tbl_lot | tbl_lot_pkey |
| tbl_lot | uq_lot_project_number |
| tbl_lot_type | tbl_producttype_pkey |
| tbl_lot_type | tbl_producttype_producttype_name_key |
| tbl_market_rate_analysis | idx_market_rate_analysis_project |
| tbl_market_rate_analysis | idx_market_rate_analysis_unit_type |
| tbl_market_rate_analysis | tbl_market_rate_analysis_pkey |
| tbl_measures | idx_measures_code |
| tbl_measures | idx_tbl_measures_sort_order |
| tbl_measures | tbl_measures_measure_code_key |
| tbl_measures | tbl_measures_pkey |
| tbl_milestone | idx_milestone_project |
| tbl_milestone | idx_milestone_target_date |
| tbl_milestone | idx_milestone_type |
| tbl_milestone | tbl_milestone_pkey |
| tbl_msa | idx_msa_active_display_order |
| tbl_msa | tbl_msa_pkey |
| tbl_multifamily_lease | idx_multifamily_lease_end_date |
| tbl_multifamily_lease | idx_multifamily_lease_is_renewal |
| tbl_multifamily_lease | idx_multifamily_lease_notice_date |
| tbl_multifamily_lease | idx_multifamily_lease_start_date |
| tbl_multifamily_lease | idx_multifamily_lease_status |
| tbl_multifamily_lease | idx_multifamily_lease_unit |
| tbl_multifamily_lease | tbl_multifamily_lease_pkey |
| tbl_multifamily_property | idx_multifamily_property_class |
| tbl_multifamily_property | idx_multifamily_property_project |
| tbl_multifamily_property | idx_multifamily_property_status |
| tbl_multifamily_property | tbl_multifamily_property_pkey |
| tbl_multifamily_property | tbl_multifamily_property_project_id_key |
| tbl_multifamily_turn | idx_multifamily_turn_make_ready_complete |
| tbl_multifamily_turn | idx_multifamily_turn_move_out |
| tbl_multifamily_turn | idx_multifamily_turn_status |
| tbl_multifamily_turn | idx_multifamily_turn_unit |
| tbl_multifamily_turn | tbl_multifamily_turn_pkey |
| tbl_multifamily_unit | idx_mf_unit_extra_data_gin |
| tbl_multifamily_unit | idx_multifamily_unit_building |
| tbl_multifamily_unit | idx_multifamily_unit_project |
| tbl_multifamily_unit | idx_multifamily_unit_renovation_status |
| tbl_multifamily_unit | idx_multifamily_unit_type |
| tbl_multifamily_unit | tbl_multifamily_unit_pkey |
| tbl_multifamily_unit | uq_unit_project_number |
| tbl_multifamily_unit_type | idx_multifamily_unit_type_code |
| tbl_multifamily_unit_type | idx_multifamily_unit_type_project |
| tbl_multifamily_unit_type | tbl_multifamily_unit_type_pkey |
| tbl_multifamily_unit_type | uq_unit_type_project_code |
| tbl_multifamily_unit_type | uq_unit_type_project_name |
| tbl_narrative_change | tbl_narrative_change_pkey |
| tbl_narrative_change | tbl_narrative_change_version_id_a0640063 |
| tbl_narrative_comment | tbl_narrative_comment_pkey |
| tbl_narrative_comment | tbl_narrative_comment_version_id_97cf6d0c |
| tbl_narrative_version | tbl_narrative_version_pkey |
| tbl_narrative_version | tbl_narrative_version_project_id_approach_type_4a4b4b01_uniq |
| tbl_operating_expense | idx_opex_category |
| tbl_operating_expense | idx_opex_parcel |
| tbl_operating_expense | idx_opex_project |
| tbl_operating_expense | tbl_operating_expense_pkey |
| tbl_operating_expense | uq_opex_project_category |
| tbl_operating_expenses | idx_operating_expenses_account |
| tbl_operating_expenses | idx_operating_expenses_category_id |
| tbl_operating_expenses | idx_opex_project_account |
| tbl_operating_expenses | idx_opex_project_statement |
| tbl_operating_expenses | idx_opex_recoverable |
| tbl_operating_expenses | idx_opex_source |
| tbl_operating_expenses | idx_opex_type |
| tbl_operating_expenses | tbl_operating_expenses_pkey |
| tbl_operating_expenses | ux_opex_proj_acct_stmt |
| tbl_operating_expenses | ux_opex_proj_cat_stmt |
| tbl_operations_user_inputs | idx_ops_inputs_category |
| tbl_operations_user_inputs | idx_ops_inputs_parent |
| tbl_operations_user_inputs | idx_ops_inputs_project |
| tbl_operations_user_inputs | idx_ops_inputs_section |
| tbl_operations_user_inputs | tbl_operations_user_inputs_pkey |
| tbl_operations_user_inputs | tbl_operations_user_inputs_project_id_section_line_item_key_key |
| tbl_opex_accounts_deprecated | idx_opex_accounts_level |
| tbl_opex_accounts_deprecated | idx_opex_accounts_number |
| tbl_opex_accounts_deprecated | idx_opex_accounts_parent |
| tbl_opex_accounts_deprecated | tbl_opex_accounts_account_number_key |
| tbl_opex_accounts_deprecated | tbl_opex_accounts_pkey |
| tbl_opex_timing | idx_opex_timing_opex |
| tbl_opex_timing | idx_opex_timing_period |
| tbl_opex_timing | idx_opex_timing_project |
| tbl_opex_timing | idx_opex_timing_project_period |
| tbl_opex_timing | tbl_opex_timing_opex_id_period_id_key |
| tbl_opex_timing | tbl_opex_timing_pkey |
| tbl_parcel | idx_parcel_sale_phase |
| tbl_parcel | idx_tbl_parcel_code |
| tbl_parcel | tbl_parcels_pkey |
| tbl_parcel_sale_assumptions | idx_parcel_sale_assumptions_parcel |
| tbl_parcel_sale_assumptions | tbl_parcel_sale_assumptions_parcel_id_key |
| tbl_parcel_sale_assumptions | tbl_parcel_sale_assumptions_pkey |
| tbl_parcel_sale_event | idx_sale_event_parcel |
| tbl_parcel_sale_event | idx_sale_event_project |
| tbl_parcel_sale_event | idx_sale_event_status |
| tbl_parcel_sale_event | idx_sale_event_type |
| tbl_parcel_sale_event | tbl_parcel_sale_event_pkey |
| tbl_participation_payment | idx_participation_date |
| tbl_participation_payment | idx_participation_period |
| tbl_participation_payment | idx_participation_project |
| tbl_participation_payment | idx_participation_settlement |
| tbl_participation_payment | idx_participation_status |
| tbl_participation_payment | tbl_participation_payment_pkey |
| tbl_percentage_rent | tbl_cre_percentage_rent_pkey |
| tbl_phase | tbl_devphase_pkey |
| tbl_platform_knowledge | idx_pk_document_active |
| tbl_platform_knowledge | idx_pk_document_property_types_gin |
| tbl_platform_knowledge | tbl_platform_knowledge_document_key_key |
| tbl_platform_knowledge | tbl_platform_knowledge_pkey |
| tbl_platform_knowledge_chapters | idx_pk_chapters_property_types_gin |
| tbl_platform_knowledge_chapters | idx_pk_chapters_topics_gin |
| tbl_platform_knowledge_chapters | tbl_platform_knowledge_chapters_document_id_chapter_number_key |
| tbl_platform_knowledge_chapters | tbl_platform_knowledge_chapters_pkey |
| tbl_platform_knowledge_chunks | idx_pk_chunks_chapter |
| tbl_platform_knowledge_chunks | idx_pk_chunks_document |
| tbl_platform_knowledge_chunks | idx_pk_chunks_embedding |
| tbl_platform_knowledge_chunks | tbl_platform_knowledge_chunks_document_id_chunk_index_key |
| tbl_platform_knowledge_chunks | tbl_platform_knowledge_chunks_pkey |
| tbl_project | idx_project_active_opex_discriminator |
| tbl_project | idx_project_analysis_type |
| tbl_project | idx_project_cabinet |
| tbl_project | idx_project_flood_zone |
| tbl_project | idx_project_focus |
| tbl_project | idx_project_improvement_attributes |
| tbl_project | idx_project_msa_id |
| tbl_project | idx_project_property_subtype |
| tbl_project | idx_project_site_attributes |
| tbl_project | idx_project_template |
| tbl_project | idx_project_topography |
| tbl_project | idx_tbl_project_created_by_id |
| tbl_project | tbl_project_pkey |
| tbl_project | tbl_project_project_name_key |
| tbl_project_assumption | idx_assumption_key |
| tbl_project_assumption | idx_assumption_project |
| tbl_project_assumption | tbl_project_assumption_pkey |
| tbl_project_assumption | uq_project_assumption |
| tbl_project_assumption | uq_project_assumption_key |
| tbl_project_config | idx_project_config_asset_type |
| tbl_project_config | idx_project_config_land_use_labels |
| tbl_project_config | tbl_project_config_pkey |
| tbl_project_contact | idx_project_contact_billing |
| tbl_project_contact | idx_project_contact_contact |
| tbl_project_contact | idx_project_contact_primary |
| tbl_project_contact | idx_project_contact_project |
| tbl_project_contact | idx_project_contact_role |
| tbl_project_contact | tbl_project_contact_pkey |
| tbl_project_contact | uq_project_contact_role |
| tbl_project_inventory_columns | idx_project_columns_order |
| tbl_project_inventory_columns | idx_project_columns_project |
| tbl_project_inventory_columns | tbl_project_inventory_columns_pkey |
| tbl_project_inventory_columns | uq_project_column |
| tbl_project_metrics | idx_metrics_latest |
| tbl_project_metrics | idx_metrics_project |
| tbl_project_metrics | tbl_project_metrics_pkey |
| tbl_project_metrics | uq_metrics_project_version |
| tbl_project_settings | idx_project_settings_currency |
| tbl_project_settings | tbl_project_settings_pkey |
| tbl_property_acquisition | idx_acquisition_project |
| tbl_property_acquisition | tbl_property_acquisition_pkey |
| tbl_property_apn | idx_property_apn_apn |
| tbl_property_apn | idx_property_apn_project |
| tbl_property_apn | tbl_property_apn_pkey |
| tbl_property_attribute_def | idx_prop_attr_def_category |
| tbl_property_attribute_def | idx_prop_attr_def_property_types |
| tbl_property_attribute_def | idx_prop_attr_def_subcategory |
| tbl_property_attribute_def | tbl_property_attribute_def_category_attribute_code_key |
| tbl_property_attribute_def | tbl_property_attribute_def_pkey |
| tbl_property_type_config | tbl_property_type_config_pkey |
| tbl_property_type_config | tbl_property_type_config_property_type_key |
| tbl_property_use_template | idx_template_property_type |
| tbl_property_use_template | tbl_property_use_template_pkey |
| tbl_recovery | idx_recovery_lease |
| tbl_recovery | tbl_recovery_pkey |
| tbl_recovery | uq_recovery_lease |
| tbl_renewal_option | idx_renewal_lease |
| tbl_renewal_option | idx_renewal_lease_number |
| tbl_renewal_option | idx_renewal_notice |
| tbl_renewal_option | tbl_renewal_option_pkey |
| tbl_rent_comparable | idx_rent_comparable_project |
| tbl_rent_comparable | idx_rent_comparable_unit_type |
| tbl_rent_comparable | tbl_rent_comparable_pkey |
| tbl_rent_concession | idx_concession_dates |
| tbl_rent_concession | idx_concession_lease |
| tbl_rent_concession | tbl_rent_concession_pkey |
| tbl_rent_escalation | tbl_cre_rent_escalation_pkey |
| tbl_rent_roll | idx_rent_roll_end_date |
| tbl_rent_roll | idx_rent_roll_project |
| tbl_rent_roll | idx_rent_roll_space_type |
| tbl_rent_roll | idx_rent_roll_status |
| tbl_rent_roll | tbl_rent_roll_pkey |
| tbl_rent_roll_unit | idx_rent_roll_unit |
| tbl_rent_roll_unit | tbl_rent_roll_unit_pkey |
| tbl_rent_schedule | idx_cre_base_rent_lease_id |
| tbl_rent_schedule | tbl_cre_base_rent_pkey |
| tbl_rent_step | idx_rent_step_date |
| tbl_rent_step | idx_rent_step_lease |
| tbl_rent_step | idx_rent_step_lease_number |
| tbl_rent_step | tbl_rent_step_pkey |
| tbl_rental_comparable | idx_rental_comp_location |
| tbl_rental_comparable | idx_rental_comp_project |
| tbl_rental_comparable | tbl_rental_comparable_pkey |
| tbl_revenue_other | idx_other_income_project |
| tbl_revenue_other | tbl_revenue_other_pkey |
| tbl_revenue_other | uq_revenue_other_project |
| tbl_revenue_rent | idx_rent_project |
| tbl_revenue_rent | tbl_revenue_rent_pkey |
| tbl_revenue_timing | idx_revenue_timing_absorption |
| tbl_revenue_timing | idx_revenue_timing_period |
| tbl_revenue_timing | tbl_revenue_timing_pkey |
| tbl_revenue_timing | uq_revenue_timing_period |
| tbl_sale_benchmarks | idx_sale_benchmarks_product |
| tbl_sale_benchmarks | idx_sale_benchmarks_scope |
| tbl_sale_benchmarks | idx_sale_benchmarks_type |
| tbl_sale_benchmarks | tbl_sale_benchmarks_pkey |
| tbl_sale_phases | idx_sale_phases_project |
| tbl_sale_phases | tbl_sale_phases_pkey |
| tbl_sale_settlement | idx_sale_settlement_container |
| tbl_sale_settlement | idx_sale_settlement_parcel |
| tbl_sale_settlement | idx_sale_settlement_phase |
| tbl_sale_settlement | idx_settlement_container |
| tbl_sale_settlement | idx_settlement_date |
| tbl_sale_settlement | idx_settlement_project |
| tbl_sale_settlement | idx_settlement_status |
| tbl_sale_settlement | tbl_sale_settlement_pkey |
| tbl_sales_comp_adjustments | idx_sales_comp_adjustments_comparable |
| tbl_sales_comp_adjustments | tbl_sales_comp_adjustments_pkey |
| tbl_sales_comp_history | idx_comp_history_comparable |
| tbl_sales_comp_history | idx_comp_history_date |
| tbl_sales_comp_history | tbl_sales_comp_history_pkey |
| tbl_sales_comp_hospitality | idx_comp_hospitality_brand |
| tbl_sales_comp_hospitality | idx_comp_hospitality_comparable |
| tbl_sales_comp_hospitality | tbl_sales_comp_hospitality_pkey |
| tbl_sales_comp_hospitality | uq_comp_hospitality |
| tbl_sales_comp_industrial | idx_comp_industrial_comparable |
| tbl_sales_comp_industrial | tbl_sales_comp_industrial_pkey |
| tbl_sales_comp_industrial | uq_comp_industrial |
| tbl_sales_comp_land | idx_comp_land_comparable |
| tbl_sales_comp_land | idx_comp_land_entitled |
| tbl_sales_comp_land | tbl_sales_comp_land_pkey |
| tbl_sales_comp_land | uq_comp_land |
| tbl_sales_comp_manufactured | idx_comp_manufactured_comparable |
| tbl_sales_comp_manufactured | tbl_sales_comp_manufactured_pkey |
| tbl_sales_comp_manufactured | uq_comp_manufactured |
| tbl_sales_comp_market_conditions | idx_comp_market_comparable |
| tbl_sales_comp_market_conditions | tbl_sales_comp_market_conditions_pkey |
| tbl_sales_comp_market_conditions | uq_comp_market_conditions |
| tbl_sales_comp_office | idx_comp_office_comparable |
| tbl_sales_comp_office | tbl_sales_comp_office_pkey |
| tbl_sales_comp_office | uq_comp_office |
| tbl_sales_comp_retail | idx_comp_retail_center_type |
| tbl_sales_comp_retail | idx_comp_retail_comparable |
| tbl_sales_comp_retail | tbl_sales_comp_retail_pkey |
| tbl_sales_comp_retail | uq_comp_retail |
| tbl_sales_comp_self_storage | idx_comp_self_storage_comparable |
| tbl_sales_comp_self_storage | tbl_sales_comp_self_storage_pkey |
| tbl_sales_comp_self_storage | uq_comp_self_storage |
| tbl_sales_comp_specialty_housing | idx_comp_specialty_comparable |
| tbl_sales_comp_specialty_housing | idx_comp_specialty_type |
| tbl_sales_comp_specialty_housing | tbl_sales_comp_specialty_housing_pkey |
| tbl_sales_comp_specialty_housing | uq_comp_specialty_housing |
| tbl_sales_comp_storage_unit_mix | idx_storage_unit_mix_parent |
| tbl_sales_comp_storage_unit_mix | tbl_sales_comp_storage_unit_mix_pkey |
| tbl_sales_comp_tenants | idx_comp_tenants_anchor |
| tbl_sales_comp_tenants | idx_comp_tenants_comparable |
| tbl_sales_comp_tenants | idx_comp_tenants_expiration |
| tbl_sales_comp_tenants | tbl_sales_comp_tenants_pkey |
| tbl_sales_comp_unit_mix | idx_comp_unit_mix_beds |
| tbl_sales_comp_unit_mix | idx_comp_unit_mix_comparable |
| tbl_sales_comp_unit_mix | tbl_sales_comp_unit_mix_pkey |
| tbl_sales_comparables | idx_sales_comp_building_class |
| tbl_sales_comparables | idx_sales_comp_costar_id |
| tbl_sales_comparables | idx_sales_comp_location |
| tbl_sales_comparables | idx_sales_comp_property_type |
| tbl_sales_comparables | idx_sales_comp_sale_date |
| tbl_sales_comparables | idx_sales_comp_submarket |
| tbl_sales_comparables | idx_sales_comparables_project |
| tbl_sales_comparables | idx_sales_comparables_sale_date |
| tbl_sales_comparables | tbl_sales_comparables_pkey |
| tbl_scenario | idx_scenario_active |
| tbl_scenario | idx_scenario_display_order |
| tbl_scenario | idx_scenario_project |
| tbl_scenario | tbl_scenario_pkey |
| tbl_scenario | tbl_scenario_scenario_code_key |
| tbl_scenario_comparison | idx_scenario_comparison_project |
| tbl_scenario_comparison | tbl_scenario_comparison_pkey |
| tbl_security_deposit | idx_deposit_lease |
| tbl_security_deposit | idx_deposit_loc_expiry |
| tbl_security_deposit | tbl_security_deposit_pkey |
| tbl_space | idx_cre_space_property_id |
| tbl_space | idx_cre_space_status |
| tbl_space | idx_space_income_property |
| tbl_space | tbl_cre_space_pkey |
| tbl_space_ind_ext | idx_space_ind_warehouse_sf |
| tbl_space_ind_ext | tbl_space_ind_ext_pkey |
| tbl_space_mf_ext | idx_space_mf_market_rent |
| tbl_space_mf_ext | idx_space_mf_unit_type |
| tbl_space_mf_ext | tbl_space_mf_ext_pkey |
| tbl_space_ret_ext | idx_space_ret_type |
| tbl_space_ret_ext | tbl_space_ret_ext_pkey |
| tbl_system_picklist | idx_picklist_active |
| tbl_system_picklist | idx_picklist_parent |
| tbl_system_picklist | idx_picklist_type |
| tbl_system_picklist | tbl_system_picklist_picklist_type_code_key |
| tbl_system_picklist | tbl_system_picklist_pkey |
| tbl_template_column_config | idx_template_column_template |
| tbl_template_column_config | tbl_template_column_config_pkey |
| tbl_tenant | idx_cre_tenant_credit |
| tbl_tenant | idx_cre_tenant_name |
| tbl_tenant | tbl_cre_tenant_pkey |
| tbl_tenant_improvement | idx_ti_lease |
| tbl_tenant_improvement | tbl_tenant_improvement_pkey |
| tbl_tenant_improvement | uq_ti_lease |
| tbl_termination_option | idx_termination_deadline |
| tbl_termination_option | idx_termination_lease |
| tbl_termination_option | tbl_termination_option_pkey |
| tbl_uom_calculation_formulas | idx_uom_formulas_code |
| tbl_uom_calculation_formulas | tbl_uom_calculation_formulas_pkey |
| tbl_uom_calculation_formulas | tbl_uom_calculation_formulas_uom_code_key |
| tbl_user_landscaper_profile | tbl_user_landscaper_profile_pkey |
| tbl_user_landscaper_profile | tbl_user_landscaper_profile_user_id_key |
| tbl_user_preference | tbl_user_pr_prefere_c180c6_idx |
| tbl_user_preference | tbl_user_pr_updated_4533b0_idx |
| tbl_user_preference | tbl_user_pr_user_id_c4e8f5_idx |
| tbl_user_preference | tbl_user_preference_pkey |
| tbl_user_preference | tbl_user_preference_preference_key_328aa664 |
| tbl_user_preference | tbl_user_preference_preference_key_328aa664_like |
| tbl_user_preference | tbl_user_preference_scope_id_f3ff4922 |
| tbl_user_preference | tbl_user_preference_scope_type_8cde7862 |
| tbl_user_preference | tbl_user_preference_scope_type_8cde7862_like |
| tbl_user_preference | tbl_user_preference_user_id_f8847056 |
| tbl_user_preference | tbl_user_preference_user_id_preference_key_s_0f07b87a_uniq |
| tbl_vacancy_assumption | idx_vacancy_project |
| tbl_vacancy_assumption | tbl_vacancy_assumption_pkey |
| tbl_valuation_reconciliation | idx_valuation_reconciliation_project |
| tbl_valuation_reconciliation | tbl_valuation_reconciliation_pkey |
| tbl_value_add_assumptions | tbl_value_add_assumptions_pkey |
| tbl_value_add_assumptions | tbl_value_add_assumptions_project_id_key |
| tbl_waterfall | idx_waterfall_active |
| tbl_waterfall | idx_waterfall_project |
| tbl_waterfall | tbl_waterfall_pkey |
| tbl_waterfall_tier | idx_waterfall_structure |
| tbl_waterfall_tier | tbl_waterfall_tier_pkey |
| tbl_zoning_control | idx_zc_lookup |
| tbl_zoning_control | idx_zc_validity |
| tbl_zoning_control | tbl_zoning_control_pkey |
| tbl_zoning_control | uq_zoning_nk |
| tester_feedback | idx_feedback_category |
| tester_feedback | idx_feedback_internal_id |
| tester_feedback | idx_feedback_status |
| tester_feedback | tester_feedback_duplicate_of_id_d09357c7 |
| tester_feedback | tester_feedback_pkey |
| tester_feedback | tester_feedback_user_id_70f5a728 |
| type_lot_product | subtype_lot_product_pkey |
| user_profile | user_profile_pkey |
| user_profile | user_profile_user_id_key |
| user_settings | user_settings_pkey |
| zonda_subdivisions | idx_zonda_builder |
| zonda_subdivisions | idx_zonda_location |
| zonda_subdivisions | idx_zonda_mpc |
| zonda_subdivisions | idx_zonda_msa_lotwidth |
| zonda_subdivisions | idx_zonda_price |
| zonda_subdivisions | zonda_subdivisions_msa_code_project_name_product_code_key |
| zonda_subdivisions | zonda_subdivisions_pkey |

## Standalone Constraint Inventory

| Table | Constraint | Type |
|---|---|---|
| _migrations | _migrations_pkey | PRIMARY KEY |
| _migrations | _migrations_migration_file_key | UNIQUE |
| ai_correction_log | ai_correction_log_queue_id_fkey | FOREIGN KEY |
| ai_correction_log | ai_correction_log_pkey | PRIMARY KEY |
| ai_debug_log | ai_debug_log_pkey | PRIMARY KEY |
| ai_extraction_staging | ai_extraction_staging_doc_id_fkey | FOREIGN KEY |
| ai_extraction_staging | ai_extraction_staging_project_id_fkey | FOREIGN KEY |
| ai_extraction_staging | ai_extraction_staging_pkey | PRIMARY KEY |
| ai_extraction_warnings | ai_extraction_warnings_queue_id_fkey | FOREIGN KEY |
| ai_extraction_warnings | ai_extraction_warnings_pkey | PRIMARY KEY |
| ai_ingestion_history | ai_ingestion_history_project_id_fkey | FOREIGN KEY |
| ai_ingestion_history | ai_ingestion_history_pkey | PRIMARY KEY |
| ai_review_history | ai_review_history_project_id_fkey | FOREIGN KEY |
| ai_review_history | ai_review_history_pkey | PRIMARY KEY |
| auth_group | auth_group_pkey | PRIMARY KEY |
| auth_group | auth_group_name_key | UNIQUE |
| auth_group_permissions | auth_group_permissio_permission_id_84c5c92e_fk_auth_perm | FOREIGN KEY |
| auth_group_permissions | auth_group_permissions_group_id_b120cbf9_fk_auth_group_id | FOREIGN KEY |
| auth_group_permissions | auth_group_permissions_pkey | PRIMARY KEY |
| auth_group_permissions | auth_group_permissions_group_id_permission_id_0cd325b0_uniq | UNIQUE |
| auth_permission | auth_permission_content_type_id_2f476e4b_fk_django_co | FOREIGN KEY |
| auth_permission | auth_permission_pkey | PRIMARY KEY |
| auth_permission | auth_permission_content_type_id_codename_01ab375a_uniq | UNIQUE |
| auth_user | auth_user_pkey | PRIMARY KEY |
| auth_user | auth_user_username_key | UNIQUE |
| auth_user_groups | auth_user_groups_group_id_97559544_fk_auth_group_id | FOREIGN KEY |
| auth_user_groups | auth_user_groups_user_id_6a12ed8b_fk_auth_user_id | FOREIGN KEY |
| auth_user_groups | auth_user_groups_pkey | PRIMARY KEY |
| auth_user_groups | auth_user_groups_user_id_group_id_94350c0c_uniq | UNIQUE |
| auth_user_user_permissions | auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm | FOREIGN KEY |
| auth_user_user_permissions | auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id | FOREIGN KEY |
| auth_user_user_permissions | auth_user_user_permissions_pkey | PRIMARY KEY |
| auth_user_user_permissions | auth_user_user_permissions_user_id_permission_id_14a6b632_uniq | UNIQUE |
| bmk_absorption_velocity | bmk_absorption_velocity_benchmark_id_fkey | FOREIGN KEY |
| bmk_absorption_velocity | bmk_absorption_velocity_pkey | PRIMARY KEY |
| bmk_builder_communities | bmk_builder_communities_pkey | PRIMARY KEY |
| bmk_builder_communities | bmk_builder_communities_source_source_id_key | UNIQUE |
| bmk_builder_inventory | bmk_builder_inventory_pkey | PRIMARY KEY |
| bmk_builder_inventory | bmk_builder_inventory_source_source_id_key | UNIQUE |
| bmk_builder_plans | bmk_builder_plans_pkey | PRIMARY KEY |
| bmk_builder_plans | bmk_builder_plans_source_source_id_key | UNIQUE |
| bmk_resale_closings | bmk_resale_closings_pkey | PRIMARY KEY |
| bmk_resale_closings | bmk_resale_closings_source_source_id_key | UNIQUE |
| core_category_lifecycle_stages | chk_lifecycle_stage_value | CHECK |
| core_category_lifecycle_stages | fk_category_lifecycle_category | FOREIGN KEY |
| core_category_lifecycle_stages | core_category_lifecycle_stages_pkey | PRIMARY KEY |
| core_category_tag_library | core_category_tag_library_pkey | PRIMARY KEY |
| core_category_tag_library | core_category_tag_library_tag_name_key | UNIQUE |
| core_doc | chk_media_scan_status | CHECK |
| core_doc | chk_processing_status | CHECK |
| core_doc | core_doc_status_check | CHECK |
| core_doc | core_doc_cabinet_id_fkey | FOREIGN KEY |
| core_doc | core_doc_parcel_id_fkey | FOREIGN KEY |
| core_doc | core_doc_parent_doc_id_fkey | FOREIGN KEY |
| core_doc | core_doc_phase_id_fkey | FOREIGN KEY |
| core_doc | core_doc_project_id_fkey | FOREIGN KEY |
| core_doc | core_doc_workspace_id_fkey | FOREIGN KEY |
| core_doc | core_doc_pkey | PRIMARY KEY |
| core_doc_attr_enum | core_doc_attr_enum_attr_id_fkey | FOREIGN KEY |
| core_doc_attr_enum | core_doc_attr_enum_pkey | PRIMARY KEY |
| core_doc_attr_lookup | core_doc_attr_lookup_attr_id_fkey | FOREIGN KEY |
| core_doc_attr_lookup | core_doc_attr_lookup_pkey | PRIMARY KEY |
| core_doc_folder | parent_not_self | CHECK |
| core_doc_folder | core_doc_folder_parent_id_fkey | FOREIGN KEY |
| core_doc_folder | core_doc_folder_pkey | PRIMARY KEY |
| core_doc_folder | unique_folder_path | UNIQUE |
| core_doc_folder_link | core_doc_folder_link_doc_id_fkey | FOREIGN KEY |
| core_doc_folder_link | core_doc_folder_link_folder_id_fkey | FOREIGN KEY |
| core_doc_folder_link | core_doc_folder_link_pkey | PRIMARY KEY |
| core_doc_media | chk_media_confidence | CHECK |
| core_doc_media | chk_media_extraction_method | CHECK |
| core_doc_media | chk_media_status | CHECK |
| core_doc_media | chk_suggested_action | CHECK |
| core_doc_media | chk_user_action | CHECK |
| core_doc_media | core_doc_media_classification_id_fkey | FOREIGN KEY |
| core_doc_media | core_doc_media_doc_id_fkey | FOREIGN KEY |
| core_doc_media | core_doc_media_project_id_fkey | FOREIGN KEY |
| core_doc_media | core_doc_media_workspace_id_fkey | FOREIGN KEY |
| core_doc_media | core_doc_media_pkey | PRIMARY KEY |
| core_doc_media_link | core_doc_media_link_media_id_fkey | FOREIGN KEY |
| core_doc_media_link | core_doc_media_link_pkey | PRIMARY KEY |
| core_doc_media_link | uq_media_entity_link | UNIQUE |
| core_doc_smartfilter | core_doc_smartfilter_pkey | PRIMARY KEY |
| core_doc_text | core_doc_text_doc_id_fkey | FOREIGN KEY |
| core_doc_text | core_doc_text_pkey | PRIMARY KEY |
| core_fin_budget_version | core_fin_budget_version_status_check | CHECK |
| core_fin_budget_version | fk_core_fin_budget_version_project | FOREIGN KEY |
| core_fin_budget_version | core_fin_budget_version_pkey | PRIMARY KEY |
| core_fin_category_uom | core_fin_category_uom_uom_code_fkey | FOREIGN KEY |
| core_fin_category_uom | core_fin_category_uom_pkey | PRIMARY KEY |
| core_fin_confidence_policy | core_fin_confidence_policy_pkey | PRIMARY KEY |
| core_fin_crosswalk_ad | core_fin_crosswalk_ad_pkey | PRIMARY KEY |
| core_fin_crosswalk_ae | core_fin_crosswalk_ae_pkey | PRIMARY KEY |
| core_fin_curve | core_fin_curve_pkey | PRIMARY KEY |
| core_fin_curve | core_fin_curve_name_key | UNIQUE |
| core_fin_division_applicability | core_fin_container_applicability_container_level_check | CHECK |
| core_fin_division_applicability | core_fin_container_applicability_pkey | PRIMARY KEY |
| core_fin_fact_actual | core_fin_fact_actual_scenario_id_fkey | FOREIGN KEY |
| core_fin_fact_actual | core_fin_fact_actual_uom_code_fkey | FOREIGN KEY |
| core_fin_fact_actual | fk_actual_container | FOREIGN KEY |
| core_fin_fact_actual | fk_core_fin_fact_actual_project | FOREIGN KEY |
| core_fin_fact_actual | core_fin_fact_actual_pkey | PRIMARY KEY |
| core_fin_fact_budget | chk_budget_lifecycle_stage | CHECK |
| core_fin_fact_budget | ck_budget_confidence_level | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_allocation_method_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_approval_status_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_budget_version_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_cost_allocation_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_cost_type_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_curve_profile_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_curve_steepness_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_draw_schedule_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_escalation_method_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_funding_draw_pct_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_invoice_frequency_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_percent_complete_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_retention_pct_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_status_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_tax_treatment_check | CHECK |
| core_fin_fact_budget | core_fin_fact_budget_budget_id_fkey | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_category_id_fkey | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_curve_id_fkey | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_finance_structure_id_fkey | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_funding_id_fkey | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_growth_rate_set_id_fkey | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_scenario_id_fkey | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_uom_code_fkey | FOREIGN KEY |
| core_fin_fact_budget | fk_budget_container | FOREIGN KEY |
| core_fin_fact_budget | fk_budget_vendor_contact | FOREIGN KEY |
| core_fin_fact_budget | fk_core_fin_fact_budget_project | FOREIGN KEY |
| core_fin_fact_budget | core_fin_fact_budget_pkey | PRIMARY KEY |
| core_fin_fact_tags | core_fin_fact_tags_fact_type_check | CHECK |
| core_fin_fact_tags | core_fin_fact_tags_pkey | PRIMARY KEY |
| core_fin_fact_tags | core_fin_fact_tags_fact_id_fact_type_tag_name_key | UNIQUE |
| core_fin_funding_source | core_fin_funding_source_type_check | CHECK |
| core_fin_funding_source | core_fin_funding_source_pkey | PRIMARY KEY |
| core_fin_growth_rate_sets | core_fin_growth_rate_sets_benchmark_id_fkey | FOREIGN KEY |
| core_fin_growth_rate_sets | core_fin_growth_rate_sets_pkey | PRIMARY KEY |
| core_fin_growth_rate_sets | core_fin_growth_rate_sets_project_id_card_type_set_name_key | UNIQUE |
| core_fin_growth_rate_steps | core_fin_growth_rate_steps_set_id_fkey | FOREIGN KEY |
| core_fin_growth_rate_steps | core_fin_growth_rate_steps_pkey | PRIMARY KEY |
| core_fin_growth_rate_steps | core_fin_growth_rate_steps_set_id_step_number_key | UNIQUE |
| core_fin_uom | core_fin_uom_pkey | PRIMARY KEY |
| core_item_benchmark_link | core_item_benchmark_link_item_id_fkey | FOREIGN KEY |
| core_item_benchmark_link | core_template_benchmark_link_benchmark_id_fkey | FOREIGN KEY |
| core_item_benchmark_link | core_item_benchmark_link_pkey | PRIMARY KEY |
| core_lookup_item | core_lookup_item_list_key_fkey | FOREIGN KEY |
| core_lookup_item | core_lookup_item_pkey | PRIMARY KEY |
| core_lookup_item | uq_core_lookup_item | UNIQUE |
| core_lookup_list | core_lookup_list_pkey | PRIMARY KEY |
| core_planning_standards | core_planning_standards_pkey | PRIMARY KEY |
| core_planning_standards | core_planning_standards_unique | UNIQUE |
| core_unit_cost_category | chk_tags_is_array | CHECK |
| core_unit_cost_category | core_unit_cost_category_parent_id_fkey | FOREIGN KEY |
| core_unit_cost_category | core_unit_cost_category_pkey | PRIMARY KEY |
| core_unit_cost_category | core_unit_cost_category_account_number_key | UNIQUE |
| core_unit_cost_item | core_unit_cost_template_project_type_code_check | CHECK |
| core_unit_cost_item | core_unit_cost_item_category_id_fkey | FOREIGN KEY |
| core_unit_cost_item | core_unit_cost_template_created_from_project_id_fkey | FOREIGN KEY |
| core_unit_cost_item | core_unit_cost_template_default_uom_code_fkey | FOREIGN KEY |
| core_unit_cost_item | core_unit_cost_item_pkey | PRIMARY KEY |
| core_unit_cost_item | core_unit_cost_template_unique | UNIQUE |
| core_workspace_member | core_workspace_member_role_check | CHECK |
| core_workspace_member | core_workspace_member_workspace_id_fkey | FOREIGN KEY |
| core_workspace_member | core_workspace_member_pkey | PRIMARY KEY |
| density_classification | density_classification_pkey | PRIMARY KEY |
| density_classification | density_classification_code_key | UNIQUE |
| developer_fees | developer_fees_project_id_fkey | FOREIGN KEY |
| developer_fees | developer_fees_pkey | PRIMARY KEY |
| django_admin_log | django_admin_log_action_flag_check | CHECK |
| django_admin_log | django_admin_log_content_type_id_c4bce8eb_fk_django_co | FOREIGN KEY |
| django_admin_log | django_admin_log_user_id_c564eba6_fk_auth_user_id | FOREIGN KEY |
| django_admin_log | django_admin_log_pkey | PRIMARY KEY |
| django_content_type | django_content_type_pkey | PRIMARY KEY |
| django_content_type | django_content_type_app_label_model_76bd3d3b_uniq | UNIQUE |
| django_migrations | django_migrations_pkey | PRIMARY KEY |
| django_session | django_session_pkey | PRIMARY KEY |
| dms_assertion | check_confidence_range | CHECK |
| dms_assertion | check_value_present | CHECK |
| dms_assertion | dms_assertion_project_id_fkey | FOREIGN KEY |
| dms_assertion | dms_assertion_pkey | PRIMARY KEY |
| dms_attributes | dms_attributes_attr_type_check | CHECK |
| dms_attributes | dms_attributes_pkey | PRIMARY KEY |
| dms_attributes | dms_attributes_attr_key_key | UNIQUE |
| dms_extract_queue | dms_extract_queue_status_check | CHECK |
| dms_extract_queue | dms_extract_queue_doc_id_fkey | FOREIGN KEY |
| dms_extract_queue | dms_extract_queue_pkey | PRIMARY KEY |
| dms_profile_audit | dms_profile_audit_doc_id_fkey | FOREIGN KEY |
| dms_profile_audit | dms_profile_audit_pkey | PRIMARY KEY |
| dms_template_attributes | dms_template_attributes_attr_id_fkey | FOREIGN KEY |
| dms_template_attributes | dms_template_attributes_template_id_fkey | FOREIGN KEY |
| dms_template_attributes | dms_template_attributes_pkey | PRIMARY KEY |
| dms_templates | dms_templates_project_id_fkey | FOREIGN KEY |
| dms_templates | dms_templates_workspace_id_fkey | FOREIGN KEY |
| dms_templates | dms_templates_pkey | PRIMARY KEY |
| dms_unmapped | dms_unmapped_project_id_fkey | FOREIGN KEY |
| dms_unmapped | dms_unmapped_pkey | PRIMARY KEY |
| dms_workspaces | dms_workspaces_pkey | PRIMARY KEY |
| dms_workspaces | dms_workspaces_workspace_code_key | UNIQUE |
| doc_extracted_facts | doc_extracted_facts_doc_id_fkey | FOREIGN KEY |
| doc_extracted_facts | doc_extracted_facts_pkey | PRIMARY KEY |
| doc_extracted_facts | unique_fact_per_version | UNIQUE |
| doc_processing_queue | doc_processing_queue_doc_id_fkey | FOREIGN KEY |
| doc_processing_queue | doc_processing_queue_pkey | PRIMARY KEY |
| doc_processing_queue | doc_processing_queue_doc_id_key | UNIQUE |
| extraction_commit_snapshot | extraction_commit_sn_committed_by_cf5a7ab7_fk_auth_user | FOREIGN KEY |
| extraction_commit_snapshot | extraction_commit_sn_project_id_4c8d51cf_fk_tbl_proje | FOREIGN KEY |
| extraction_commit_snapshot | extraction_commit_snapshot_doc_id_7bc0c667_fk_core_doc_doc_id | FOREIGN KEY |
| extraction_commit_snapshot | extraction_commit_snapshot_pkey | PRIMARY KEY |
| gis_boundary_history | gis_boundary_history_project_id_fkey | FOREIGN KEY |
| gis_boundary_history | gis_boundary_history_pkey | PRIMARY KEY |
| gis_document_ingestion | gis_document_ingestion_project_id_fkey | FOREIGN KEY |
| gis_document_ingestion | gis_document_ingestion_pkey | PRIMARY KEY |
| gis_mapping_history | gis_mapping_history_project_id_fkey | FOREIGN KEY |
| gis_mapping_history | gis_mapping_history_pkey | PRIMARY KEY |
| gis_plan_parcel | gis_plan_parcel_parcel_id_fkey | FOREIGN KEY |
| gis_plan_parcel | gis_plan_parcel_project_id_fkey | FOREIGN KEY |
| gis_plan_parcel | gis_plan_parcel_pkey | PRIMARY KEY |
| gis_project_boundary | gis_project_boundary_project_id_fkey | FOREIGN KEY |
| gis_project_boundary | gis_project_boundary_pkey | PRIMARY KEY |
| gis_project_boundary | gis_project_boundary_project_id_key | UNIQUE |
| gis_tax_parcel_ref | gis_tax_parcel_ref_pkey | PRIMARY KEY |
| glossary_zoning | glossary_zoning_ai_confidence_check | CHECK |
| glossary_zoning | glossary_zoning_allowance_check | CHECK |
| glossary_zoning | glossary_zoning_code_token_confidence_check | CHECK |
| glossary_zoning | glossary_zoning_mapped_use_check | CHECK |
| glossary_zoning | glossary_zoning_mapping_status_check | CHECK |
| glossary_zoning | glossary_zoning_pkey | PRIMARY KEY |
| knowledge_embeddings | knowledge_embeddings_pkey | PRIMARY KEY |
| knowledge_entities | knowledge_entities_created_by_id_49f837e1_fk_auth_user_id | FOREIGN KEY |
| knowledge_entities | knowledge_entities_pkey | PRIMARY KEY |
| knowledge_entities | knowledge_entities_canonical_name_key | UNIQUE |
| knowledge_facts | knowledge_facts_created_by_id_a1fa9f24_fk_auth_user_id | FOREIGN KEY |
| knowledge_facts | knowledge_facts_object_entity_id_ca9e8ef5_fk_knowledge | FOREIGN KEY |
| knowledge_facts | knowledge_facts_subject_entity_id_0c130194_fk_knowledge | FOREIGN KEY |
| knowledge_facts | knowledge_facts_superseded_by_id_eee8e8cb_fk_knowledge | FOREIGN KEY |
| knowledge_facts | knowledge_facts_pkey | PRIMARY KEY |
| knowledge_insights | knowledge_insights_acknowledged_by_id_68ba1117_fk_auth_user_id | FOREIGN KEY |
| knowledge_insights | knowledge_insights_subject_entity_id_c3b729c9_fk_knowledge | FOREIGN KEY |
| knowledge_insights | knowledge_insights_pkey | PRIMARY KEY |
| knowledge_interactions | knowledge_interactio_session_id_7f4000a5_fk_knowledge | FOREIGN KEY |
| knowledge_interactions | knowledge_interactions_pkey | PRIMARY KEY |
| knowledge_sessions | knowledge_sessions_user_id_fa891383_fk_auth_user_id | FOREIGN KEY |
| knowledge_sessions | knowledge_sessions_pkey | PRIMARY KEY |
| land_use_pricing | land_use_pricing_benchmark_id_fkey | FOREIGN KEY |
| land_use_pricing | land_use_pricing_growth_rate_set_id_fkey | FOREIGN KEY |
| land_use_pricing | land_use_pricing_pkey | PRIMARY KEY |
| land_use_pricing | land_use_pricing_project_lu_product_key | UNIQUE |
| land_use_pricing | land_use_pricing_project_type_product_key | UNIQUE |
| landscaper_absorption_detail | landscaper_absorption_detail_benchmark_id_fkey | FOREIGN KEY |
| landscaper_absorption_detail | landscaper_absorption_detail_pkey | PRIMARY KEY |
| landscaper_activity | landscaper_activity_activity_type_check | CHECK |
| landscaper_activity | landscaper_activity_confidence_check | CHECK |
| landscaper_activity | landscaper_activity_status_check | CHECK |
| landscaper_activity | landscaper_activity_project_id_fkey | FOREIGN KEY |
| landscaper_activity | landscaper_activity_pkey | PRIMARY KEY |
| landscaper_advice | landscaper_advice_message_id_5653931d_fk_landscape | FOREIGN KEY |
| landscaper_advice | landscaper_advice_project_id_6fb9f5af_fk_tbl_project_project_id | FOREIGN KEY |
| landscaper_advice | landscaper_advice_pkey | PRIMARY KEY |
| landscaper_chat_embedding | landscaper_chat_embedding_message_id_fkey | FOREIGN KEY |
| landscaper_chat_embedding | landscaper_chat_embedding_thread_id_fkey | FOREIGN KEY |
| landscaper_chat_embedding | landscaper_chat_embedding_pkey | PRIMARY KEY |
| landscaper_chat_message | landscaper_chat_mess_project_id_fc77d355_fk_tbl_proje | FOREIGN KEY |
| landscaper_chat_message | landscaper_chat_message_user_id_263e4adb_fk_auth_user_id | FOREIGN KEY |
| landscaper_chat_message | landscaper_chat_message_pkey | PRIMARY KEY |
| landscaper_chat_thread | landscaper_chat_thread_project_id_fkey | FOREIGN KEY |
| landscaper_chat_thread | landscaper_chat_thread_pkey | PRIMARY KEY |
| landscaper_thread_message | landscaper_thread_message_role_check | CHECK |
| landscaper_thread_message | landscaper_thread_message_thread_id_fkey | FOREIGN KEY |
| landscaper_thread_message | landscaper_thread_message_pkey | PRIMARY KEY |
| lkp_building_class | lkp_building_class_pkey | PRIMARY KEY |
| lkp_buyer_seller_type | lkp_buyer_seller_type_pkey | PRIMARY KEY |
| lkp_price_status | lkp_price_status_pkey | PRIMARY KEY |
| lkp_sale_type | lkp_sale_type_pkey | PRIMARY KEY |
| lu_acreage_allocation_type | lu_acreage_allocation_type_pkey | PRIMARY KEY |
| lu_acreage_allocation_type | lu_acreage_allocation_type_allocation_type_code_key | UNIQUE |
| lu_com_spec | lu_com_spec_cov_max_pct_check | CHECK |
| lu_com_spec | lu_com_spec_os_min_pct_check | CHECK |
| lu_com_spec | lu_com_spec_doc_id_fkey | FOREIGN KEY |
| lu_com_spec | lu_com_spec_subtype_id_fkey | FOREIGN KEY |
| lu_com_spec | lu_com_spec_pkey | PRIMARY KEY |
| lu_family | lu_family_pkey | PRIMARY KEY |
| lu_family | lu_family_code_key | UNIQUE |
| lu_lease_status | lu_lease_status_pkey | PRIMARY KEY |
| lu_lease_type | lu_lease_type_pkey | PRIMARY KEY |
| lu_market | lu_market_pkey | PRIMARY KEY |
| lu_market | lu_market_market_code_key | UNIQUE |
| lu_media_classification | chk_content_intent | CHECK |
| lu_media_classification | chk_default_action | CHECK |
| lu_media_classification | lu_media_classification_pkey | PRIMARY KEY |
| lu_media_classification | lu_media_classification_classification_code_key | UNIQUE |
| lu_picklist_display_config | lu_picklist_display_config_pkey | PRIMARY KEY |
| lu_picklist_display_config | lu_picklist_display_config_list_code_context_key | UNIQUE |
| lu_property_subtype | lu_property_subtype_pkey | PRIMARY KEY |
| lu_property_subtype | lu_property_subtype_property_type_code_subtype_code_key | UNIQUE |
| lu_recovery_structure | lu_recovery_structure_pkey | PRIMARY KEY |
| lu_res_spec | lu_res_spec_cov_max_pct_check | CHECK |
| lu_res_spec | lu_res_spec_os_min_pct_check | CHECK |
| lu_res_spec | lu_res_spec_doc_id_fkey | FOREIGN KEY |
| lu_res_spec | lu_res_spec_subtype_id_fkey | FOREIGN KEY |
| lu_res_spec | lu_res_spec_pkey | PRIMARY KEY |
| lu_subtype | lu_subtype_family_id_fkey1 | FOREIGN KEY |
| lu_subtype | lu_subtype_pkey1 | PRIMARY KEY |
| lu_subtype | lu_subtype_family_id_code_key | UNIQUE |
| lu_type | lu_subtype_family_id_fkey | FOREIGN KEY |
| lu_type | lu_subtype_pkey | PRIMARY KEY |
| lu_type | lu_subtype_code_key | UNIQUE |
| management_overhead | management_overhead_project_id_fkey | FOREIGN KEY |
| management_overhead | management_overhead_pkey | PRIMARY KEY |
| market_activity | market_activity_pkey | PRIMARY KEY |
| market_activity | market_activity_msa_code_source_metric_type_geography_type__key | UNIQUE |
| market_assumptions | market_assumptions_pkey | PRIMARY KEY |
| market_competitive_project_exclusions | market_competitive_project_exclusions_project_id_fkey | FOREIGN KEY |
| market_competitive_project_exclusions | market_competitive_project_exclusions_pkey | PRIMARY KEY |
| market_competitive_project_exclusions | market_competitive_project_exc_project_id_source_project_id_key | UNIQUE |
| market_competitive_project_products | market_competitive_project_products_competitive_project_id_fkey | FOREIGN KEY |
| market_competitive_project_products | market_competitive_project_products_product_id_fkey | FOREIGN KEY |
| market_competitive_project_products | market_competitive_project_products_pkey | PRIMARY KEY |
| market_competitive_projects | market_competitive_projects_project_id_fkey | FOREIGN KEY |
| market_competitive_projects | market_competitive_projects_pkey | PRIMARY KEY |
| mkt_data_source_registry | mkt_data_source_registry_pkey | PRIMARY KEY |
| mkt_data_source_registry | mkt_data_source_registry_source_code_key | UNIQUE |
| mkt_new_home_project | mkt_new_home_project_source_id_cbf21c81_fk_mkt_data_ | FOREIGN KEY |
| mkt_new_home_project | mkt_new_home_project_pkey | PRIMARY KEY |
| mkt_new_home_project | uq_mkt_project_source_date | UNIQUE |
| mkt_permit_history | mkt_permit_history_source_id_4d1eb402_fk_mkt_data_ | FOREIGN KEY |
| mkt_permit_history | mkt_permit_history_pkey | PRIMARY KEY |
| mkt_permit_history | uq_mkt_permit_month_jurisdiction | UNIQUE |
| mutation_audit_log | mutation_audit_log_action_check | CHECK |
| mutation_audit_log | mutation_audit_log_pkey | PRIMARY KEY |
| opex_account_migration_map | opex_account_migration_map_pkey | PRIMARY KEY |
| opex_benchmark | opex_benchmark_pkey | PRIMARY KEY |
| opex_benchmark | opex_benchmark_source_source_year_property_type_geographic__key | UNIQUE |
| opex_label_mapping | opex_label_mapping_pkey | PRIMARY KEY |
| opex_label_mapping | opex_label_mapping_source_label_key | UNIQUE |
| pending_mutations | pending_mutations_mutation_type_check | CHECK |
| pending_mutations | pending_mutations_status_check | CHECK |
| pending_mutations | pending_mutations_project_id_fkey | FOREIGN KEY |
| pending_mutations | pending_mutations_pkey | PRIMARY KEY |
| planning_doc | planning_doc_doc_type_check | CHECK |
| planning_doc | planning_doc_pkey | PRIMARY KEY |
| project_boundaries | project_boundaries_project_id_fkey | FOREIGN KEY |
| project_boundaries | project_boundaries_pkey | PRIMARY KEY |
| project_jurisdiction_mapping | project_jurisdiction_mapping_density_code_fkey | FOREIGN KEY |
| project_jurisdiction_mapping | project_jurisdiction_mapping_glossary_id_fkey | FOREIGN KEY |
| project_jurisdiction_mapping | project_jurisdiction_mapping_project_id_fkey | FOREIGN KEY |
| project_jurisdiction_mapping | project_jurisdiction_mapping_pkey | PRIMARY KEY |
| project_parcel_boundaries | project_parcel_boundaries_boundary_id_fkey | FOREIGN KEY |
| project_parcel_boundaries | project_parcel_boundaries_project_id_fkey | FOREIGN KEY |
| project_parcel_boundaries | project_parcel_boundaries_pkey | PRIMARY KEY |
| report_templates | report_templates_pkey | PRIMARY KEY |
| res_lot_product | res_lot_product_type_id_fkey | FOREIGN KEY |
| res_lot_product | res_lot_product_pkey | PRIMARY KEY |
| res_lot_product | res_lot_product_code_key | UNIQUE |
| sale_names | sale_names_project_id_fkey | FOREIGN KEY |
| sale_names | sale_names_pkey | PRIMARY KEY |
| sale_names | sale_names_project_id_sale_date_key | UNIQUE |
| spatial_ref_sys | spatial_ref_sys_srid_check | CHECK |
| spatial_ref_sys | spatial_ref_sys_pkey | PRIMARY KEY |
| tbl_absorption_schedule | tbl_absorption_schedule_probability_weight_check | CHECK |
| tbl_absorption_schedule | tbl_absorption_schedule_timing_method_check | CHECK |
| tbl_absorption_schedule | tbl_absorption_schedule_area_id_fkey | FOREIGN KEY |
| tbl_absorption_schedule | tbl_absorption_schedule_parcel_id_fkey | FOREIGN KEY |
| tbl_absorption_schedule | tbl_absorption_schedule_phase_id_fkey | FOREIGN KEY |
| tbl_absorption_schedule | tbl_absorption_schedule_project_id_fkey | FOREIGN KEY |
| tbl_absorption_schedule | tbl_absorption_schedule_scenario_id_fkey | FOREIGN KEY |
| tbl_absorption_schedule | tbl_absorption_schedule_pkey | PRIMARY KEY |
| tbl_acquisition | tbl_acquisition_category_id_fkey | FOREIGN KEY |
| tbl_acquisition | tbl_acquisition_contact_id_fkey | FOREIGN KEY |
| tbl_acquisition | tbl_acquisition_measure_id_fkey | FOREIGN KEY |
| tbl_acquisition | tbl_acquisition_project_id_fkey | FOREIGN KEY |
| tbl_acquisition | tbl_acquisition_subcategory_id_fkey | FOREIGN KEY |
| tbl_acquisition | tbl_acquisition_pkey | PRIMARY KEY |
| tbl_acreage_allocation | positive_acres | CHECK |
| tbl_acreage_allocation | tbl_acreage_allocation_allocation_type_id_fkey | FOREIGN KEY |
| tbl_acreage_allocation | tbl_acreage_allocation_parcel_id_fkey | FOREIGN KEY |
| tbl_acreage_allocation | tbl_acreage_allocation_phase_id_fkey | FOREIGN KEY |
| tbl_acreage_allocation | tbl_acreage_allocation_project_id_fkey | FOREIGN KEY |
| tbl_acreage_allocation | tbl_acreage_allocation_source_doc_id_fkey | FOREIGN KEY |
| tbl_acreage_allocation | tbl_acreage_allocation_pkey | PRIMARY KEY |
| tbl_additional_income | tbl_additional_income_lease_id_fkey | FOREIGN KEY |
| tbl_additional_income | tbl_additional_income_pkey | PRIMARY KEY |
| tbl_additional_income | uq_additional_income_lease | UNIQUE |
| tbl_ai_adjustment_suggestions | tbl_ai_adjustment_suggestions_confidence_level_check | CHECK |
| tbl_ai_adjustment_suggestions | tbl_ai_adjustment_suggestions_comparable_id_fkey | FOREIGN KEY |
| tbl_ai_adjustment_suggestions | tbl_ai_adjustment_suggestions_pkey | PRIMARY KEY |
| tbl_ai_adjustment_suggestions | tbl_ai_adjustment_suggestions_comparable_id_adjustment_type_key | UNIQUE |
| tbl_alpha_feedback | tbl_alpha_feedback_pkey | PRIMARY KEY |
| tbl_analysis_type_config | tbl_analysis_type_config_pkey | PRIMARY KEY |
| tbl_analysis_type_config | tbl_analysis_type_config_analysis_type_key | UNIQUE |
| tbl_approval | tbl_approval_project_id_fkey | FOREIGN KEY |
| tbl_approval | tbl_approval_pkey | PRIMARY KEY |
| tbl_area | tbl_planarea_project_id_fkey | FOREIGN KEY |
| tbl_area | tbl_planarea_pkey | PRIMARY KEY |
| tbl_assumptionrule | tbl_assumptionrule_pkey | PRIMARY KEY |
| tbl_base_rent | chk_base_rent_dates | CHECK |
| tbl_base_rent | tbl_base_rent_lease_id_fkey | FOREIGN KEY |
| tbl_base_rent | tbl_base_rent_pkey | PRIMARY KEY |
| tbl_base_rent | uq_base_rent_lease_period | UNIQUE |
| tbl_benchmark_ai_suggestions | valid_category_suggestion | CHECK |
| tbl_benchmark_ai_suggestions | valid_suggestion_status | CHECK |
| tbl_benchmark_ai_suggestions | tbl_benchmark_ai_suggestions_created_benchmark_id_fkey | FOREIGN KEY |
| tbl_benchmark_ai_suggestions | tbl_benchmark_ai_suggestions_document_id_fkey | FOREIGN KEY |
| tbl_benchmark_ai_suggestions | tbl_benchmark_ai_suggestions_existing_benchmark_id_fkey | FOREIGN KEY |
| tbl_benchmark_ai_suggestions | tbl_benchmark_ai_suggestions_project_id_fkey | FOREIGN KEY |
| tbl_benchmark_ai_suggestions | tbl_benchmark_ai_suggestions_pkey | PRIMARY KEY |
| tbl_benchmark_contingency | tbl_benchmark_contingency_percentage_check | CHECK |
| tbl_benchmark_contingency | tbl_benchmark_contingency_benchmark_id_fkey | FOREIGN KEY |
| tbl_benchmark_contingency | tbl_benchmark_contingency_pkey | PRIMARY KEY |
| tbl_benchmark_transaction_cost | valid_value_type | CHECK |
| tbl_benchmark_transaction_cost | tbl_benchmark_transaction_cost_benchmark_id_fkey | FOREIGN KEY |
| tbl_benchmark_transaction_cost | tbl_benchmark_transaction_cost_pkey | PRIMARY KEY |
| tbl_benchmark_unit_cost | tbl_benchmark_unit_cost_benchmark_id_fkey | FOREIGN KEY |
| tbl_benchmark_unit_cost | tbl_benchmark_unit_cost_pkey | PRIMARY KEY |
| tbl_budget | tbl_budget_devphase_id_fkey | FOREIGN KEY |
| tbl_budget | tbl_budget_measure_id_fkey | FOREIGN KEY |
| tbl_budget | tbl_budget_pkey | PRIMARY KEY |
| tbl_budget_fact | tbl_budget_fact_category_id_fkey | FOREIGN KEY |
| tbl_budget_fact | tbl_budget_fact_phase_id_fkey | FOREIGN KEY |
| tbl_budget_fact | tbl_budget_fact_project_id_fkey | FOREIGN KEY |
| tbl_budget_fact | tbl_budget_fact_source_doc_id_fkey | FOREIGN KEY |
| tbl_budget_fact | tbl_budget_fact_pkey | PRIMARY KEY |
| tbl_budget_fact | uq_budget_project_category | UNIQUE |
| tbl_budget_items | tbl_budget_items_s_curve_profile_check | CHECK |
| tbl_budget_items | tbl_budget_items_timing_method_check | CHECK |
| tbl_budget_items | tbl_budget_items_actual_period_id_fkey | FOREIGN KEY |
| tbl_budget_items | tbl_budget_items_project_id_fkey | FOREIGN KEY |
| tbl_budget_items | tbl_budget_items_structure_id_fkey | FOREIGN KEY |
| tbl_budget_items | tbl_budget_items_pkey | PRIMARY KEY |
| tbl_budget_structure | tbl_budget_structure_measure_id_fkey | FOREIGN KEY |
| tbl_budget_structure | tbl_budget_structure_pkey | PRIMARY KEY |
| tbl_budget_structure | tbl_budget_structure_scope_category_detail_key | UNIQUE |
| tbl_budget_timing | fk_budget_timing_fact | FOREIGN KEY |
| tbl_budget_timing | fk_budget_timing_period | FOREIGN KEY |
| tbl_budget_timing | tbl_budget_timing_pkey | PRIMARY KEY |
| tbl_budget_timing | uq_budget_timing | UNIQUE |
| tbl_cabinet | tbl_cabinet_cabinet_type_check | CHECK |
| tbl_cabinet | tbl_cabinet_pkey | PRIMARY KEY |
| tbl_calculation_period | ck_calculation_period_dates | CHECK |
| tbl_calculation_period | tbl_calculation_period_period_status_check | CHECK |
| tbl_calculation_period | fk_calculation_period_project | FOREIGN KEY |
| tbl_calculation_period | tbl_calculation_period_pkey | PRIMARY KEY |
| tbl_calculation_period | uq_calculation_period_sequence | UNIQUE |
| tbl_cap_rate_comps | tbl_cap_rate_comps_income_approach_id_fkey | FOREIGN KEY |
| tbl_cap_rate_comps | tbl_cap_rate_comps_pkey | PRIMARY KEY |
| tbl_capex_reserve | tbl_capex_reserve_project_id_fkey | FOREIGN KEY |
| tbl_capex_reserve | tbl_capex_reserve_pkey | PRIMARY KEY |
| tbl_capital_call | tbl_capital_call_period_id_fkey | FOREIGN KEY |
| tbl_capital_call | tbl_capital_call_project_id_fkey | FOREIGN KEY |
| tbl_capital_call | tbl_capital_call_pkey | PRIMARY KEY |
| tbl_capital_reserves | tbl_capital_reserves_reserve_type_check | CHECK |
| tbl_capital_reserves | tbl_capital_reserves_trigger_type_check | CHECK |
| tbl_capital_reserves | tbl_capital_reserves_project_id_fkey | FOREIGN KEY |
| tbl_capital_reserves | tbl_capital_reserves_trigger_lease_id_fkey | FOREIGN KEY |
| tbl_capital_reserves | tbl_capital_reserves_pkey | PRIMARY KEY |
| tbl_capitalization | tbl_capitalization_project_id_fkey | FOREIGN KEY |
| tbl_capitalization | tbl_capitalization_pkey | PRIMARY KEY |
| tbl_cashflow | tbl_cashflow_lease_id_fkey | FOREIGN KEY |
| tbl_cashflow | tbl_cashflow_lot_id_fkey | FOREIGN KEY |
| tbl_cashflow | tbl_cashflow_parcel_id_fkey | FOREIGN KEY |
| tbl_cashflow | tbl_cashflow_phase_id_fkey | FOREIGN KEY |
| tbl_cashflow | tbl_cashflow_project_id_fkey | FOREIGN KEY |
| tbl_cashflow | tbl_cashflow_pkey | PRIMARY KEY |
| tbl_cashflow_summary | tbl_cashflow_summary_project_id_fkey | FOREIGN KEY |
| tbl_cashflow_summary | tbl_cashflow_summary_pkey | PRIMARY KEY |
| tbl_cashflow_summary | uq_summary_project_period | UNIQUE |
| tbl_changelog | tbl_changelog_pkey | PRIMARY KEY |
| tbl_closing_event | closing_sequence_positive | CHECK |
| tbl_closing_event | closing_units_positive | CHECK |
| tbl_closing_event | tbl_closing_event_sale_event_id_fkey | FOREIGN KEY |
| tbl_closing_event | tbl_closing_event_pkey | PRIMARY KEY |
| tbl_closing_event | tbl_closing_event_sale_event_id_closing_sequence_key | UNIQUE |
| tbl_commercial_lease | tbl_cre_lease_cre_property_id_fkey | FOREIGN KEY |
| tbl_commercial_lease | tbl_cre_lease_space_id_fkey | FOREIGN KEY |
| tbl_commercial_lease | tbl_cre_lease_tenant_id_fkey | FOREIGN KEY |
| tbl_commercial_lease | tbl_cre_lease_pkey | PRIMARY KEY |
| tbl_contact | tbl_contact_contact_type_check | CHECK |
| tbl_contact | tbl_contact_cabinet_id_fkey | FOREIGN KEY |
| tbl_contact | tbl_contact_pkey | PRIMARY KEY |
| tbl_contact_relationship | chk_no_self_relationship | CHECK |
| tbl_contact_relationship | tbl_contact_relationship_relationship_type_check | CHECK |
| tbl_contact_relationship | tbl_contact_relationship_cabinet_id_fkey | FOREIGN KEY |
| tbl_contact_relationship | tbl_contact_relationship_contact_id_fkey | FOREIGN KEY |
| tbl_contact_relationship | tbl_contact_relationship_related_to_id_fkey | FOREIGN KEY |
| tbl_contact_relationship | tbl_contact_relationship_pkey | PRIMARY KEY |
| tbl_contact_relationship | uq_contact_relationship | UNIQUE |
| tbl_contact_role | tbl_contact_role_role_category_check | CHECK |
| tbl_contact_role | tbl_contact_role_cabinet_id_fkey | FOREIGN KEY |
| tbl_contact_role | tbl_contact_role_pkey | PRIMARY KEY |
| tbl_contacts_legacy | tbl_contacts_project_id_fkey | FOREIGN KEY |
| tbl_contacts_legacy | tbl_contacts_pkey | PRIMARY KEY |
| tbl_cost_allocation | valid_percentage | CHECK |
| tbl_cost_allocation | tbl_cost_allocation_container_id_fkey | FOREIGN KEY |
| tbl_cost_allocation | tbl_cost_allocation_finance_structure_id_fkey | FOREIGN KEY |
| tbl_cost_allocation | tbl_cost_allocation_scenario_id_fkey | FOREIGN KEY |
| tbl_cost_allocation | tbl_cost_allocation_pkey | PRIMARY KEY |
| tbl_cost_allocation | unique_allocation | UNIQUE |
| tbl_cost_approach | check_cost_method | CHECK |
| tbl_cost_approach | check_land_method | CHECK |
| tbl_cost_approach | tbl_cost_approach_project_id_fkey | FOREIGN KEY |
| tbl_cost_approach | tbl_cost_approach_pkey | PRIMARY KEY |
| tbl_cost_approach_depreciation | tbl_cost_approach_de_project_id_fd37fd12_fk_tbl_proje | FOREIGN KEY |
| tbl_cost_approach_depreciation | tbl_cost_approach_depreciation_pkey | PRIMARY KEY |
| tbl_cost_approach_depreciation | tbl_cost_approach_depreciation_project_id_key | UNIQUE |
| tbl_dcf_analysis | chk_dcf_cap_rate_method | CHECK |
| tbl_dcf_analysis | chk_dcf_property_type | CHECK |
| tbl_dcf_analysis | tbl_dcf_analysis_cost_inflation_set_id_fkey | FOREIGN KEY |
| tbl_dcf_analysis | tbl_dcf_analysis_expense_growth_set_id_fkey | FOREIGN KEY |
| tbl_dcf_analysis | tbl_dcf_analysis_income_growth_set_id_fkey | FOREIGN KEY |
| tbl_dcf_analysis | tbl_dcf_analysis_price_growth_set_id_fkey | FOREIGN KEY |
| tbl_dcf_analysis | tbl_dcf_analysis_project_id_fkey | FOREIGN KEY |
| tbl_dcf_analysis | tbl_dcf_analysis_pkey | PRIMARY KEY |
| tbl_dcf_analysis | uq_dcf_analysis_project_type | UNIQUE |
| tbl_debt_draw_schedule | tbl_debt_draw_schedule_draw_status_check | CHECK |
| tbl_debt_draw_schedule | tbl_debt_draw_schedule_loan_id_fkey | FOREIGN KEY |
| tbl_debt_draw_schedule | tbl_debt_draw_schedule_period_id_fkey | FOREIGN KEY |
| tbl_debt_draw_schedule | tbl_debt_draw_schedule_pkey | PRIMARY KEY |
| tbl_debt_draw_schedule | tbl_debt_draw_schedule_loan_id_period_id_key | UNIQUE |
| tbl_division | ck_container_parent_level | CHECK |
| tbl_division | tbl_container_container_level_check | CHECK |
| tbl_division | fk_container_parent | FOREIGN KEY |
| tbl_division | fk_container_project | FOREIGN KEY |
| tbl_division | tbl_container_pkey | PRIMARY KEY |
| tbl_division | uq_container_code | UNIQUE |
| tbl_document_project | tbl_document_project_relationship_type_check | CHECK |
| tbl_document_project | tbl_document_project_document_id_fkey | FOREIGN KEY |
| tbl_document_project | tbl_document_project_project_id_fkey | FOREIGN KEY |
| tbl_document_project | tbl_document_project_pkey | PRIMARY KEY |
| tbl_document_project | uq_document_project | UNIQUE |
| tbl_dynamic_column_definition | tbl_dynamic_column_d_created_by_id_9b1688b7_fk_auth_user | FOREIGN KEY |
| tbl_dynamic_column_definition | tbl_dynamic_column_d_project_id_1c6c3338_fk_tbl_proje | FOREIGN KEY |
| tbl_dynamic_column_definition | tbl_dynamic_column_d_proposed_from_docume_2d43666b_fk_core_doc_ | FOREIGN KEY |
| tbl_dynamic_column_definition | tbl_dynamic_column_definition_pkey | PRIMARY KEY |
| tbl_dynamic_column_definition | tbl_dynamic_column_defin_project_id_table_name_co_83f0e5e0_uniq | UNIQUE |
| tbl_dynamic_column_value | tbl_dynamic_column_v_column_definition_id_2b1ec228_fk_tbl_dynam | FOREIGN KEY |
| tbl_dynamic_column_value | tbl_dynamic_column_v_extracted_from_id_9be121bb_fk_core_doc_ | FOREIGN KEY |
| tbl_dynamic_column_value | tbl_dynamic_column_value_pkey | PRIMARY KEY |
| tbl_dynamic_column_value | tbl_dynamic_column_value_column_definition_id_row_e387982d_uniq | UNIQUE |
| tbl_equity | tbl_equity_project_id_fkey | FOREIGN KEY |
| tbl_equity | tbl_equity_pkey | PRIMARY KEY |
| tbl_equity_distribution | tbl_equity_distribution_distribution_status_check | CHECK |
| tbl_equity_distribution | tbl_equity_distribution_distribution_type_check | CHECK |
| tbl_equity_distribution | tbl_equity_distribution_partner_id_fkey | FOREIGN KEY |
| tbl_equity_distribution | tbl_equity_distribution_period_id_fkey | FOREIGN KEY |
| tbl_equity_distribution | tbl_equity_distribution_pkey | PRIMARY KEY |
| tbl_equity_partner | tbl_equity_partner_partner_class_check | CHECK |
| tbl_equity_partner | tbl_equity_partner_project_id_fkey | FOREIGN KEY |
| tbl_equity_partner | tbl_equity_partner_pkey | PRIMARY KEY |
| tbl_equity_structure | tbl_equity_structure_project_id_fkey | FOREIGN KEY |
| tbl_equity_structure | tbl_equity_structure_pkey | PRIMARY KEY |
| tbl_escalation | tbl_escalation_lease_id_fkey | FOREIGN KEY |
| tbl_escalation | tbl_escalation_pkey | PRIMARY KEY |
| tbl_expansion_option | tbl_expansion_option_exercised_space_id_fkey | FOREIGN KEY |
| tbl_expansion_option | tbl_expansion_option_lease_id_fkey | FOREIGN KEY |
| tbl_expansion_option | tbl_expansion_option_target_space_id_fkey | FOREIGN KEY |
| tbl_expansion_option | tbl_expansion_option_pkey | PRIMARY KEY |
| tbl_expense_detail | tbl_expense_detail_expense_id_fkey | FOREIGN KEY |
| tbl_expense_detail | tbl_expense_detail_project_id_fkey | FOREIGN KEY |
| tbl_expense_detail | tbl_expense_detail_pkey | PRIMARY KEY |
| tbl_expense_recovery | tbl_cre_expense_recovery_lease_id_fkey | FOREIGN KEY |
| tbl_expense_recovery | tbl_cre_expense_recovery_pkey | PRIMARY KEY |
| tbl_extraction_job | tbl_extraction_job_created_by_id_01e1ec43_fk_auth_user_id | FOREIGN KEY |
| tbl_extraction_job | tbl_extraction_job_pkey | PRIMARY KEY |
| tbl_extraction_log | tbl_extraction_log_mapping_id_fkey | FOREIGN KEY |
| tbl_extraction_log | tbl_extraction_log_pkey | PRIMARY KEY |
| tbl_extraction_mapping | chk_confidence | CHECK |
| tbl_extraction_mapping | chk_data_type | CHECK |
| tbl_extraction_mapping | chk_data_type | CHECK |
| tbl_extraction_mapping | tbl_extraction_mapping_pkey | PRIMARY KEY |
| tbl_extraction_mapping | uq_mapping_pattern_field | UNIQUE |
| tbl_field_catalog | tbl_field_catalog_pkey | PRIMARY KEY |
| tbl_field_catalog | tbl_field_catalog_table_name_field_name_key | UNIQUE |
| tbl_finance_structure | tbl_finance_structure_allocation_method_check | CHECK |
| tbl_finance_structure | tbl_finance_structure_recurrence_frequency_check | CHECK |
| tbl_finance_structure | tbl_finance_structure_structure_type_check | CHECK |
| tbl_finance_structure | tbl_finance_structure_project_id_fkey | FOREIGN KEY |
| tbl_finance_structure | tbl_finance_structure_scenario_id_fkey | FOREIGN KEY |
| tbl_finance_structure | tbl_finance_structure_pkey | PRIMARY KEY |
| tbl_finance_structure | unique_structure_code | UNIQUE |
| tbl_global_benchmark_registry | valid_category | CHECK |
| tbl_global_benchmark_registry | valid_confidence | CHECK |
| tbl_global_benchmark_registry | valid_source_type | CHECK |
| tbl_global_benchmark_registry | tbl_global_benchmark_registry_source_document_id_fkey | FOREIGN KEY |
| tbl_global_benchmark_registry | tbl_global_benchmark_registry_source_project_id_fkey | FOREIGN KEY |
| tbl_global_benchmark_registry | tbl_global_benchmark_registry_pkey | PRIMARY KEY |
| tbl_hbu_analysis | tbl_hbu_analysis_scenario_type_check | CHECK |
| tbl_hbu_analysis | tbl_hbu_analysis_status_check | CHECK |
| tbl_hbu_analysis | tbl_hbu_analysis_legal_zoning_source_doc_id_fkey | FOREIGN KEY |
| tbl_hbu_analysis | tbl_hbu_analysis_project_id_fkey | FOREIGN KEY |
| tbl_hbu_analysis | tbl_hbu_analysis_pkey | PRIMARY KEY |
| tbl_hbu_comparable_use | tbl_hbu_comparable_use_hbu_id_fkey | FOREIGN KEY |
| tbl_hbu_comparable_use | tbl_hbu_comparable_use_pkey | PRIMARY KEY |
| tbl_hbu_zoning_document | tbl_hbu_zoning_document_document_id_fkey | FOREIGN KEY |
| tbl_hbu_zoning_document | tbl_hbu_zoning_document_hbu_id_fkey | FOREIGN KEY |
| tbl_hbu_zoning_document | tbl_hbu_zoning_document_pkey | PRIMARY KEY |
| tbl_income_approach | check_cap_rate_method | CHECK |
| tbl_income_approach | check_noi_basis | CHECK |
| tbl_income_approach | check_selected_cap_rate | CHECK |
| tbl_income_approach | check_stabilized_vacancy_rate_ia | CHECK |
| tbl_income_approach | check_terminal_cap_rate | CHECK |
| tbl_income_approach | tbl_income_approach_project_id_fkey | FOREIGN KEY |
| tbl_income_approach | tbl_income_approach_pkey | PRIMARY KEY |
| tbl_income_property | tbl_cre_property_parcel_id_fkey | FOREIGN KEY |
| tbl_income_property | tbl_cre_property_project_id_fkey | FOREIGN KEY |
| tbl_income_property | tbl_cre_property_pkey | PRIMARY KEY |
| tbl_income_property_ind_ext | tbl_income_property_ind_ext_income_property_id_fkey | FOREIGN KEY |
| tbl_income_property_ind_ext | tbl_income_property_ind_ext_pkey | PRIMARY KEY |
| tbl_income_property_mf_ext | tbl_income_property_mf_ext_income_property_id_fkey | FOREIGN KEY |
| tbl_income_property_mf_ext | tbl_income_property_mf_ext_pkey | PRIMARY KEY |
| tbl_income_property_ret_ext | tbl_income_property_ret_ext_income_property_id_fkey | FOREIGN KEY |
| tbl_income_property_ret_ext | tbl_income_property_ret_ext_pkey | PRIMARY KEY |
| tbl_inventory_item | tbl_inventory_item_container_id_fkey | FOREIGN KEY |
| tbl_inventory_item | tbl_inventory_item_family_id_fkey | FOREIGN KEY |
| tbl_inventory_item | tbl_inventory_item_product_id_fkey | FOREIGN KEY |
| tbl_inventory_item | tbl_inventory_item_project_id_fkey | FOREIGN KEY |
| tbl_inventory_item | tbl_inventory_item_type_id_fkey | FOREIGN KEY |
| tbl_inventory_item | tbl_inventory_item_pkey | PRIMARY KEY |
| tbl_inventory_item | uq_inventory_item_code | UNIQUE |
| tbl_item_dependency | tbl_item_dependency_dependent_item_type_check | CHECK |
| tbl_item_dependency | tbl_item_dependency_trigger_event_check | CHECK |
| tbl_item_dependency | tbl_item_dependency_pkey | PRIMARY KEY |
| tbl_land_comp_adjustments | tbl_land_comp_adjust_land_comparable_id_366c2e08_fk_tbl_land_ | FOREIGN KEY |
| tbl_land_comp_adjustments | tbl_land_comp_adjustments_pkey | PRIMARY KEY |
| tbl_land_comparables | tbl_land_comparables_project_id_ed54f396_fk_tbl_proje | FOREIGN KEY |
| tbl_land_comparables | tbl_land_comparables_pkey | PRIMARY KEY |
| tbl_landuse | tbl_landuse_subtype_id_fkey | FOREIGN KEY |
| tbl_landuse | tbl_landuse_pkey | PRIMARY KEY |
| tbl_landuse | tbl_landuse_landuse_code_key | UNIQUE |
| tbl_landuse_program | tbl_landuse_program_pkey | PRIMARY KEY |
| tbl_lease | chk_lease_dates | CHECK |
| tbl_lease | chk_lease_dates | CHECK |
| tbl_lease | tbl_lease_lot_id_fkey | FOREIGN KEY |
| tbl_lease | tbl_lease_parcel_id_fkey | FOREIGN KEY |
| tbl_lease | tbl_lease_project_id_fkey | FOREIGN KEY |
| tbl_lease | tbl_lease_pkey | PRIMARY KEY |
| tbl_lease_assumptions | tbl_lease_assumptions_renewal_probability_check | CHECK |
| tbl_lease_assumptions | tbl_lease_assumptions_space_type_check | CHECK |
| tbl_lease_assumptions | tbl_lease_assumptions_project_id_fkey | FOREIGN KEY |
| tbl_lease_assumptions | tbl_lease_assumptions_pkey | PRIMARY KEY |
| tbl_lease_assumptions | tbl_lease_assumptions_project_id_space_type_effective_date_key | UNIQUE |
| tbl_lease_ind_ext | tbl_lease_ind_ext_lease_id_fkey | FOREIGN KEY |
| tbl_lease_ind_ext | tbl_lease_ind_ext_pkey | PRIMARY KEY |
| tbl_lease_mf_ext | tbl_lease_mf_ext_lease_id_fkey | FOREIGN KEY |
| tbl_lease_mf_ext | tbl_lease_mf_ext_pkey | PRIMARY KEY |
| tbl_lease_ret_ext | tbl_lease_ret_ext_lease_id_fkey | FOREIGN KEY |
| tbl_lease_ret_ext | tbl_lease_ret_ext_pkey | PRIMARY KEY |
| tbl_lease_revenue_timing | tbl_lease_revenue_timing_lease_id_fkey | FOREIGN KEY |
| tbl_lease_revenue_timing | tbl_lease_revenue_timing_project_id_fkey | FOREIGN KEY |
| tbl_lease_revenue_timing | tbl_lease_revenue_timing_pkey | PRIMARY KEY |
| tbl_lease_revenue_timing | tbl_lease_revenue_timing_lease_id_period_id_key | UNIQUE |
| tbl_leasing_commission | tbl_leasing_commission_lease_id_fkey | FOREIGN KEY |
| tbl_leasing_commission | tbl_leasing_commission_pkey | PRIMARY KEY |
| tbl_leasing_commission | uq_commission_lease | UNIQUE |
| tbl_loan | ck_loan_governing | CHECK |
| tbl_loan | ck_loan_sizing_method | CHECK |
| tbl_loan | tbl_loan_draw_trigger_type_check | CHECK |
| tbl_loan | tbl_loan_interest_calculation_check | CHECK |
| tbl_loan | tbl_loan_interest_payment_method_check | CHECK |
| tbl_loan | tbl_loan_interest_type_check | CHECK |
| tbl_loan | tbl_loan_loan_type_check | CHECK |
| tbl_loan | tbl_loan_payment_frequency_check | CHECK |
| tbl_loan | tbl_loan_status_check | CHECK |
| tbl_loan | tbl_loan_structure_type_check | CHECK |
| tbl_loan | tbl_loan_maturity_period_id_fkey | FOREIGN KEY |
| tbl_loan | tbl_loan_project_id_fkey | FOREIGN KEY |
| tbl_loan | tbl_loan_takes_out_loan_id_fkey | FOREIGN KEY |
| tbl_loan | tbl_loan_pkey | PRIMARY KEY |
| tbl_loan_container | tbl_loan_container_division_id_fkey | FOREIGN KEY |
| tbl_loan_container | tbl_loan_container_loan_id_fkey | FOREIGN KEY |
| tbl_loan_container | tbl_loan_container_pkey | PRIMARY KEY |
| tbl_loan_container | tbl_loan_container_loan_id_division_id_key | UNIQUE |
| tbl_loan_finance_structure | tbl_loan_finance_structure_finance_structure_id_fkey | FOREIGN KEY |
| tbl_loan_finance_structure | tbl_loan_finance_structure_loan_id_fkey | FOREIGN KEY |
| tbl_loan_finance_structure | tbl_loan_finance_structure_pkey | PRIMARY KEY |
| tbl_loan_finance_structure | tbl_loan_finance_structure_loan_id_finance_structure_id_key | UNIQUE |
| tbl_lot | tbl_lot_parcel_id_fkey | FOREIGN KEY |
| tbl_lot | tbl_lot_phase_id_fkey | FOREIGN KEY |
| tbl_lot | tbl_lot_project_id_fkey | FOREIGN KEY |
| tbl_lot | tbl_lot_pkey | PRIMARY KEY |
| tbl_lot | uq_lot_project_number | UNIQUE |
| tbl_lot_type | tbl_producttype_pkey | PRIMARY KEY |
| tbl_lot_type | tbl_producttype_producttype_name_key | UNIQUE |
| tbl_market_rate_analysis | tbl_market_rate_analysis_project_id_fkey | FOREIGN KEY |
| tbl_market_rate_analysis | tbl_market_rate_analysis_pkey | PRIMARY KEY |
| tbl_measures | tbl_measures_pkey | PRIMARY KEY |
| tbl_measures | tbl_measures_measure_code_key | UNIQUE |
| tbl_milestone | tbl_milestone_phase_id_fkey | FOREIGN KEY |
| tbl_milestone | tbl_milestone_predecessor_milestone_id_fkey | FOREIGN KEY |
| tbl_milestone | tbl_milestone_project_id_fkey | FOREIGN KEY |
| tbl_milestone | tbl_milestone_source_doc_id_fkey | FOREIGN KEY |
| tbl_milestone | tbl_milestone_pkey | PRIMARY KEY |
| tbl_msa | tbl_msa_pkey | PRIMARY KEY |
| tbl_multifamily_lease | chk_lease_dates | CHECK |
| tbl_multifamily_lease | chk_lease_dates | CHECK |
| tbl_multifamily_lease | chk_lease_status | CHECK |
| tbl_multifamily_lease | chk_months_free_rent | CHECK |
| tbl_multifamily_lease | tbl_multifamily_lease_unit_id_fkey | FOREIGN KEY |
| tbl_multifamily_lease | tbl_multifamily_lease_pkey | PRIMARY KEY |
| tbl_multifamily_property | tbl_multifamily_property_project_id_fkey | FOREIGN KEY |
| tbl_multifamily_property | tbl_multifamily_property_pkey | PRIMARY KEY |
| tbl_multifamily_property | tbl_multifamily_property_project_id_key | UNIQUE |
| tbl_multifamily_turn | chk_make_ready_date | CHECK |
| tbl_multifamily_turn | chk_move_in_date | CHECK |
| tbl_multifamily_turn | chk_turn_status | CHECK |
| tbl_multifamily_turn | tbl_multifamily_turn_unit_id_fkey | FOREIGN KEY |
| tbl_multifamily_turn | tbl_multifamily_turn_pkey | PRIMARY KEY |
| tbl_multifamily_unit | chk_renovation_status | CHECK |
| tbl_multifamily_unit | tbl_multifamily_unit_project_id_fkey | FOREIGN KEY |
| tbl_multifamily_unit | tbl_multifamily_unit_pkey | PRIMARY KEY |
| tbl_multifamily_unit | uq_unit_project_number | UNIQUE |
| tbl_multifamily_unit_type | chk_avg_square_feet | CHECK |
| tbl_multifamily_unit_type | chk_total_units | CHECK |
| tbl_multifamily_unit_type | tbl_multifamily_unit_type_container_id_fkey | FOREIGN KEY |
| tbl_multifamily_unit_type | tbl_multifamily_unit_type_project_id_fkey | FOREIGN KEY |
| tbl_multifamily_unit_type | tbl_multifamily_unit_type_pkey | PRIMARY KEY |
| tbl_multifamily_unit_type | uq_unit_type_project_code | UNIQUE |
| tbl_multifamily_unit_type | uq_unit_type_project_name | UNIQUE |
| tbl_narrative_change | tbl_narrative_change_version_id_a0640063_fk_tbl_narra | FOREIGN KEY |
| tbl_narrative_change | tbl_narrative_change_pkey | PRIMARY KEY |
| tbl_narrative_comment | tbl_narrative_commen_version_id_97cf6d0c_fk_tbl_narra | FOREIGN KEY |
| tbl_narrative_comment | tbl_narrative_comment_pkey | PRIMARY KEY |
| tbl_narrative_version | tbl_narrative_version_pkey | PRIMARY KEY |
| tbl_narrative_version | tbl_narrative_version_project_id_approach_type_4a4b4b01_uniq | UNIQUE |
| tbl_operating_expense | tbl_operating_expense_parcel_id_fkey | FOREIGN KEY |
| tbl_operating_expense | tbl_operating_expense_project_id_fkey | FOREIGN KEY |
| tbl_operating_expense | tbl_operating_expense_pkey | PRIMARY KEY |
| tbl_operating_expense | uq_opex_project_category | UNIQUE |
| tbl_operating_expenses | chk_calculation_basis | CHECK |
| tbl_operating_expenses | tbl_operating_expenses_escalation_type_check | CHECK |
| tbl_operating_expenses | tbl_operating_expenses_expense_type_check | CHECK |
| tbl_operating_expenses | tbl_operating_expenses_payment_frequency_check | CHECK |
| tbl_operating_expenses | tbl_operating_expenses_recovery_rate_check | CHECK |
| tbl_operating_expenses | fk_operating_expenses_category | FOREIGN KEY |
| tbl_operating_expenses | tbl_operating_expenses_account_id_fkey | FOREIGN KEY |
| tbl_operating_expenses | tbl_operating_expenses_project_id_fkey | FOREIGN KEY |
| tbl_operating_expenses | tbl_operating_expenses_pkey | PRIMARY KEY |
| tbl_operations_user_inputs | tbl_operations_user_inputs_section_check | CHECK |
| tbl_operations_user_inputs | tbl_operations_user_inputs_category_id_fkey | FOREIGN KEY |
| tbl_operations_user_inputs | tbl_operations_user_inputs_project_id_fkey | FOREIGN KEY |
| tbl_operations_user_inputs | tbl_operations_user_inputs_pkey | PRIMARY KEY |
| tbl_operations_user_inputs | tbl_operations_user_inputs_project_id_section_line_item_key_key | UNIQUE |
| tbl_opex_accounts_deprecated | chk_account_level | CHECK |
| tbl_opex_accounts_deprecated | chk_parent_level | CHECK |
| tbl_opex_accounts_deprecated | tbl_opex_accounts_parent_account_id_fkey | FOREIGN KEY |
| tbl_opex_accounts_deprecated | tbl_opex_accounts_pkey | PRIMARY KEY |
| tbl_opex_accounts_deprecated | tbl_opex_accounts_account_number_key | UNIQUE |
| tbl_opex_timing | tbl_opex_timing_opex_id_fkey | FOREIGN KEY |
| tbl_opex_timing | tbl_opex_timing_project_id_fkey | FOREIGN KEY |
| tbl_opex_timing | tbl_opex_timing_pkey | PRIMARY KEY |
| tbl_opex_timing | tbl_opex_timing_opex_id_period_id_key | UNIQUE |
| tbl_parcel | tbl_parcel_density_code_fkey | FOREIGN KEY |
| tbl_parcel | tbl_parcels_devphase_id_fkey | FOREIGN KEY |
| tbl_parcel | tbl_parcels_landuse_code_fkey | FOREIGN KEY |
| tbl_parcel | tbl_parcels_planarea_id_fkey | FOREIGN KEY |
| tbl_parcel | tbl_parcels_producttype_id_fkey | FOREIGN KEY |
| tbl_parcel | tbl_parcels_pkey | PRIMARY KEY |
| tbl_parcel_sale_assumptions | tbl_parcel_sale_assumptions_parcel_id_fkey | FOREIGN KEY |
| tbl_parcel_sale_assumptions | tbl_parcel_sale_assumptions_pkey | PRIMARY KEY |
| tbl_parcel_sale_assumptions | tbl_parcel_sale_assumptions_parcel_id_key | UNIQUE |
| tbl_parcel_sale_event | sale_event_units_positive | CHECK |
| tbl_parcel_sale_event | tbl_parcel_sale_event_sale_status_check | CHECK |
| tbl_parcel_sale_event | tbl_parcel_sale_event_sale_type_check | CHECK |
| tbl_parcel_sale_event | tbl_parcel_sale_event_project_id_fkey | FOREIGN KEY |
| tbl_parcel_sale_event | tbl_parcel_sale_event_pkey | PRIMARY KEY |
| tbl_participation_payment | positive_net_payment | CHECK |
| tbl_participation_payment | tbl_participation_payment_gross_home_sales_check | CHECK |
| tbl_participation_payment | tbl_participation_payment_homes_closed_count_check | CHECK |
| tbl_participation_payment | tbl_participation_payment_participation_amount_check | CHECK |
| tbl_participation_payment | tbl_participation_payment_payment_status_check | CHECK |
| tbl_participation_payment | tbl_participation_payment_project_id_fkey | FOREIGN KEY |
| tbl_participation_payment | tbl_participation_payment_settlement_id_fkey | FOREIGN KEY |
| tbl_participation_payment | tbl_participation_payment_pkey | PRIMARY KEY |
| tbl_percentage_rent | tbl_cre_percentage_rent_lease_id_fkey | FOREIGN KEY |
| tbl_percentage_rent | tbl_cre_percentage_rent_pkey | PRIMARY KEY |
| tbl_phase | tbl_devphase_planarea_id_fkey | FOREIGN KEY |
| tbl_phase | tbl_devphase_pkey | PRIMARY KEY |
| tbl_platform_knowledge | tbl_platform_knowledge_pkey | PRIMARY KEY |
| tbl_platform_knowledge | tbl_platform_knowledge_document_key_key | UNIQUE |
| tbl_platform_knowledge_chapters | tbl_platform_knowledge_chapters_document_id_fkey | FOREIGN KEY |
| tbl_platform_knowledge_chapters | tbl_platform_knowledge_chapters_pkey | PRIMARY KEY |
| tbl_platform_knowledge_chapters | tbl_platform_knowledge_chapters_document_id_chapter_number_key | UNIQUE |
| tbl_platform_knowledge_chunks | tbl_platform_knowledge_chunks_chapter_id_fkey | FOREIGN KEY |
| tbl_platform_knowledge_chunks | tbl_platform_knowledge_chunks_document_id_fkey | FOREIGN KEY |
| tbl_platform_knowledge_chunks | tbl_platform_knowledge_chunks_pkey | PRIMARY KEY |
| tbl_platform_knowledge_chunks | tbl_platform_knowledge_chunks_document_id_chunk_index_key | UNIQUE |
| tbl_project | check_project_type_code | CHECK |
| tbl_project | tbl_project_access_rating_check | CHECK |
| tbl_project | tbl_project_analysis_type_check | CHECK |
| tbl_project | tbl_project_condition_rating_check | CHECK |
| tbl_project | tbl_project_location_rating_check | CHECK |
| tbl_project | tbl_project_project_focus_check | CHECK |
| tbl_project | tbl_project_quality_rating_check | CHECK |
| tbl_project | tbl_project_site_utility_rating_check | CHECK |
| tbl_project | tbl_project_visibility_rating_check | CHECK |
| tbl_project | fk_project_created_by | FOREIGN KEY |
| tbl_project | tbl_project_cabinet_id_fkey | FOREIGN KEY |
| tbl_project | tbl_project_dms_template_id_fkey | FOREIGN KEY |
| tbl_project | tbl_project_msa_id_fkey | FOREIGN KEY |
| tbl_project | tbl_project_template_id_fkey | FOREIGN KEY |
| tbl_project | tbl_project_pkey | PRIMARY KEY |
| tbl_project | tbl_project_project_name_key | UNIQUE |
| tbl_project_assumption | tbl_project_assumption_project_id_fkey | FOREIGN KEY |
| tbl_project_assumption | tbl_project_assumption_source_doc_id_fkey | FOREIGN KEY |
| tbl_project_assumption | tbl_project_assumption_pkey | PRIMARY KEY |
| tbl_project_assumption | uq_project_assumption | UNIQUE |
| tbl_project_assumption | uq_project_assumption_key | UNIQUE |
| tbl_project_config | fk_project_config_project | FOREIGN KEY |
| tbl_project_config | tbl_project_config_pkey | PRIMARY KEY |
| tbl_project_contact | tbl_project_contact_contact_id_fkey | FOREIGN KEY |
| tbl_project_contact | tbl_project_contact_project_id_fkey | FOREIGN KEY |
| tbl_project_contact | tbl_project_contact_role_id_fkey | FOREIGN KEY |
| tbl_project_contact | tbl_project_contact_pkey | PRIMARY KEY |
| tbl_project_contact | uq_project_contact_role | UNIQUE |
| tbl_project_inventory_columns | chk_column_type | CHECK |
| tbl_project_inventory_columns | chk_data_type | CHECK |
| tbl_project_inventory_columns | chk_data_type | CHECK |
| tbl_project_inventory_columns | tbl_project_inventory_columns_project_id_fkey | FOREIGN KEY |
| tbl_project_inventory_columns | tbl_project_inventory_columns_pkey | PRIMARY KEY |
| tbl_project_inventory_columns | uq_project_column | UNIQUE |
| tbl_project_metrics | tbl_project_metrics_project_id_fkey | FOREIGN KEY |
| tbl_project_metrics | tbl_project_metrics_pkey | PRIMARY KEY |
| tbl_project_metrics | uq_metrics_project_version | UNIQUE |
| tbl_project_settings | ck_project_settings_dates | CHECK |
| tbl_project_settings | fk_project_settings_project | FOREIGN KEY |
| tbl_project_settings | tbl_project_settings_pkey | PRIMARY KEY |
| tbl_property_acquisition | tbl_property_acquisition_project_id_fkey | FOREIGN KEY |
| tbl_property_acquisition | tbl_property_acquisition_pkey | PRIMARY KEY |
| tbl_property_apn | tbl_property_apn_project_id_fkey | FOREIGN KEY |
| tbl_property_apn | tbl_property_apn_pkey | PRIMARY KEY |
| tbl_property_attribute_def | tbl_property_attribute_def_category_check | CHECK |
| tbl_property_attribute_def | tbl_property_attribute_def_data_type_check | CHECK |
| tbl_property_attribute_def | tbl_property_attribute_def_pkey | PRIMARY KEY |
| tbl_property_attribute_def | tbl_property_attribute_def_category_attribute_code_key | UNIQUE |
| tbl_property_type_config | tbl_property_type_config_pkey | PRIMARY KEY |
| tbl_property_type_config | tbl_property_type_config_property_type_key | UNIQUE |
| tbl_property_use_template | tbl_property_use_template_pkey | PRIMARY KEY |
| tbl_recovery | tbl_recovery_lease_id_fkey | FOREIGN KEY |
| tbl_recovery | tbl_recovery_pkey | PRIMARY KEY |
| tbl_recovery | uq_recovery_lease | UNIQUE |
| tbl_renewal_option | tbl_renewal_option_lease_id_fkey | FOREIGN KEY |
| tbl_renewal_option | tbl_renewal_option_pkey | PRIMARY KEY |
| tbl_rent_comparable | tbl_rent_comparable_project_id_fkey | FOREIGN KEY |
| tbl_rent_comparable | tbl_rent_comparable_pkey | PRIMARY KEY |
| tbl_rent_concession | tbl_rent_concession_lease_id_fkey | FOREIGN KEY |
| tbl_rent_concession | tbl_rent_concession_pkey | PRIMARY KEY |
| tbl_rent_escalation | tbl_cre_rent_escalation_lease_id_fkey | FOREIGN KEY |
| tbl_rent_escalation | tbl_cre_rent_escalation_pkey | PRIMARY KEY |
| tbl_rent_roll | tbl_rent_roll_escalation_type_check | CHECK |
| tbl_rent_roll | tbl_rent_roll_lease_status_check | CHECK |
| tbl_rent_roll | tbl_rent_roll_leased_sf_check | CHECK |
| tbl_rent_roll | tbl_rent_roll_recovery_structure_check | CHECK |
| tbl_rent_roll | tbl_rent_roll_space_type_check | CHECK |
| tbl_rent_roll | tbl_rent_roll_project_id_fkey | FOREIGN KEY |
| tbl_rent_roll | tbl_rent_roll_pkey | PRIMARY KEY |
| tbl_rent_roll_unit | tbl_rent_roll_unit_project_id_fkey | FOREIGN KEY |
| tbl_rent_roll_unit | tbl_rent_roll_unit_pkey | PRIMARY KEY |
| tbl_rent_schedule | tbl_cre_base_rent_lease_id_fkey | FOREIGN KEY |
| tbl_rent_schedule | tbl_cre_base_rent_pkey | PRIMARY KEY |
| tbl_rent_step | tbl_rent_step_lease_id_fkey | FOREIGN KEY |
| tbl_rent_step | tbl_rent_step_pkey | PRIMARY KEY |
| tbl_rental_comparable | tbl_rental_comparable_project_id_fkey | FOREIGN KEY |
| tbl_rental_comparable | tbl_rental_comparable_pkey | PRIMARY KEY |
| tbl_revenue_other | tbl_revenue_other_project_id_fkey | FOREIGN KEY |
| tbl_revenue_other | tbl_revenue_other_pkey | PRIMARY KEY |
| tbl_revenue_other | uq_revenue_other_project | UNIQUE |
| tbl_revenue_rent | tbl_revenue_rent_project_id_fkey | FOREIGN KEY |
| tbl_revenue_rent | tbl_revenue_rent_pkey | PRIMARY KEY |
| tbl_revenue_timing | tbl_revenue_timing_absorption_id_fkey | FOREIGN KEY |
| tbl_revenue_timing | tbl_revenue_timing_period_id_fkey | FOREIGN KEY |
| tbl_revenue_timing | tbl_revenue_timing_pkey | PRIMARY KEY |
| tbl_revenue_timing | uq_revenue_timing_period | UNIQUE |
| tbl_sale_benchmarks | tbl_sale_benchmarks_scope_level_check | CHECK |
| tbl_sale_benchmarks | tbl_sale_benchmarks_project_id_fkey | FOREIGN KEY |
| tbl_sale_benchmarks | tbl_sale_benchmarks_pkey | PRIMARY KEY |
| tbl_sale_phases | tbl_sale_phases_project_id_fkey | FOREIGN KEY |
| tbl_sale_phases | tbl_sale_phases_pkey | PRIMARY KEY |
| tbl_sale_settlement | tbl_sale_settlement_participation_basis_check | CHECK |
| tbl_sale_settlement | tbl_sale_settlement_settlement_status_check | CHECK |
| tbl_sale_settlement | tbl_sale_settlement_settlement_type_check | CHECK |
| tbl_sale_settlement | tbl_sale_settlement_container_id_fkey | FOREIGN KEY |
| tbl_sale_settlement | tbl_sale_settlement_project_id_fkey | FOREIGN KEY |
| tbl_sale_settlement | tbl_sale_settlement_pkey | PRIMARY KEY |
| tbl_sales_comp_adjustments | check_adjustment_type | CHECK |
| tbl_sales_comp_adjustments | tbl_sales_comp_adjustments_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_adjustments | tbl_sales_comp_adjustments_pkey | PRIMARY KEY |
| tbl_sales_comp_history | tbl_sales_comp_history_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_history | tbl_sales_comp_history_pkey | PRIMARY KEY |
| tbl_sales_comp_hospitality | tbl_sales_comp_hospitality_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_hospitality | tbl_sales_comp_hospitality_pkey | PRIMARY KEY |
| tbl_sales_comp_hospitality | uq_comp_hospitality | UNIQUE |
| tbl_sales_comp_industrial | tbl_sales_comp_industrial_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_industrial | tbl_sales_comp_industrial_pkey | PRIMARY KEY |
| tbl_sales_comp_industrial | uq_comp_industrial | UNIQUE |
| tbl_sales_comp_land | tbl_sales_comp_land_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_land | tbl_sales_comp_land_pkey | PRIMARY KEY |
| tbl_sales_comp_land | uq_comp_land | UNIQUE |
| tbl_sales_comp_manufactured | tbl_sales_comp_manufactured_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_manufactured | tbl_sales_comp_manufactured_pkey | PRIMARY KEY |
| tbl_sales_comp_manufactured | uq_comp_manufactured | UNIQUE |
| tbl_sales_comp_market_conditions | tbl_sales_comp_market_conditions_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_market_conditions | tbl_sales_comp_market_conditions_pkey | PRIMARY KEY |
| tbl_sales_comp_market_conditions | uq_comp_market_conditions | UNIQUE |
| tbl_sales_comp_office | tbl_sales_comp_office_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_office | tbl_sales_comp_office_pkey | PRIMARY KEY |
| tbl_sales_comp_office | uq_comp_office | UNIQUE |
| tbl_sales_comp_retail | tbl_sales_comp_retail_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_retail | tbl_sales_comp_retail_pkey | PRIMARY KEY |
| tbl_sales_comp_retail | uq_comp_retail | UNIQUE |
| tbl_sales_comp_self_storage | tbl_sales_comp_self_storage_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_self_storage | tbl_sales_comp_self_storage_pkey | PRIMARY KEY |
| tbl_sales_comp_self_storage | uq_comp_self_storage | UNIQUE |
| tbl_sales_comp_specialty_housing | tbl_sales_comp_specialty_housing_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_specialty_housing | tbl_sales_comp_specialty_housing_pkey | PRIMARY KEY |
| tbl_sales_comp_specialty_housing | uq_comp_specialty_housing | UNIQUE |
| tbl_sales_comp_storage_unit_mix | tbl_sales_comp_storage_unit_mix_storage_comp_id_fkey | FOREIGN KEY |
| tbl_sales_comp_storage_unit_mix | tbl_sales_comp_storage_unit_mix_pkey | PRIMARY KEY |
| tbl_sales_comp_tenants | tbl_sales_comp_tenants_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_tenants | tbl_sales_comp_tenants_pkey | PRIMARY KEY |
| tbl_sales_comp_unit_mix | tbl_sales_comp_unit_mix_comparable_id_fkey | FOREIGN KEY |
| tbl_sales_comp_unit_mix | tbl_sales_comp_unit_mix_pkey | PRIMARY KEY |
| tbl_sales_comparables | check_price_per_unit | CHECK |
| tbl_sales_comparables | tbl_sales_comparables_project_id_fkey | FOREIGN KEY |
| tbl_sales_comparables | tbl_sales_comparables_pkey | PRIMARY KEY |
| tbl_scenario | valid_scenario_type | CHECK |
| tbl_scenario | tbl_scenario_cloned_from_scenario_id_fkey | FOREIGN KEY |
| tbl_scenario | tbl_scenario_created_by_fkey | FOREIGN KEY |
| tbl_scenario | tbl_scenario_project_id_fkey | FOREIGN KEY |
| tbl_scenario | tbl_scenario_pkey | PRIMARY KEY |
| tbl_scenario | tbl_scenario_scenario_code_key | UNIQUE |
| tbl_scenario_comparison | valid_comparison_type | CHECK |
| tbl_scenario_comparison | tbl_scenario_comparison_project_id_fkey | FOREIGN KEY |
| tbl_scenario_comparison | tbl_scenario_comparison_pkey | PRIMARY KEY |
| tbl_security_deposit | tbl_security_deposit_lease_id_fkey | FOREIGN KEY |
| tbl_security_deposit | tbl_security_deposit_pkey | PRIMARY KEY |
| tbl_space | tbl_cre_space_cre_property_id_fkey | FOREIGN KEY |
| tbl_space | tbl_cre_space_pkey | PRIMARY KEY |
| tbl_space_ind_ext | tbl_space_ind_ext_space_id_fkey | FOREIGN KEY |
| tbl_space_ind_ext | tbl_space_ind_ext_pkey | PRIMARY KEY |
| tbl_space_mf_ext | tbl_space_mf_ext_space_id_fkey | FOREIGN KEY |
| tbl_space_mf_ext | tbl_space_mf_ext_pkey | PRIMARY KEY |
| tbl_space_ret_ext | tbl_space_ret_ext_space_id_fkey | FOREIGN KEY |
| tbl_space_ret_ext | tbl_space_ret_ext_pkey | PRIMARY KEY |
| tbl_system_picklist | tbl_system_picklist_parent_id_fkey | FOREIGN KEY |
| tbl_system_picklist | tbl_system_picklist_pkey | PRIMARY KEY |
| tbl_system_picklist | tbl_system_picklist_picklist_type_code_key | UNIQUE |
| tbl_template_column_config | tbl_template_column_config_column_type_check | CHECK |
| tbl_template_column_config | tbl_template_column_config_template_id_fkey | FOREIGN KEY |
| tbl_template_column_config | tbl_template_column_config_pkey | PRIMARY KEY |
| tbl_tenant | tbl_cre_tenant_pkey | PRIMARY KEY |
| tbl_tenant_improvement | tbl_tenant_improvement_lease_id_fkey | FOREIGN KEY |
| tbl_tenant_improvement | tbl_tenant_improvement_pkey | PRIMARY KEY |
| tbl_tenant_improvement | uq_ti_lease | UNIQUE |
| tbl_termination_option | tbl_termination_option_lease_id_fkey | FOREIGN KEY |
| tbl_termination_option | tbl_termination_option_pkey | PRIMARY KEY |
| tbl_uom_calculation_formulas | tbl_uom_calculation_formulas_pkey | PRIMARY KEY |
| tbl_uom_calculation_formulas | tbl_uom_calculation_formulas_uom_code_key | UNIQUE |
| tbl_user_landscaper_profile | tbl_user_landscaper_profile_user_id_fe467574_fk_auth_user_id | FOREIGN KEY |
| tbl_user_landscaper_profile | tbl_user_landscaper_profile_pkey | PRIMARY KEY |
| tbl_user_landscaper_profile | tbl_user_landscaper_profile_user_id_key | UNIQUE |
| tbl_user_preference | tbl_user_preference_user_id_f8847056_fk_auth_user_id | FOREIGN KEY |
| tbl_user_preference | tbl_user_preference_pkey | PRIMARY KEY |
| tbl_user_preference | tbl_user_preference_user_id_preference_key_s_0f07b87a_uniq | UNIQUE |
| tbl_vacancy_assumption | tbl_vacancy_assumption_project_id_fkey | FOREIGN KEY |
| tbl_vacancy_assumption | tbl_vacancy_assumption_pkey | PRIMARY KEY |
| tbl_valuation_reconciliation | check_weights_sum | CHECK |
| tbl_valuation_reconciliation | tbl_valuation_reconciliation_project_id_fkey | FOREIGN KEY |
| tbl_valuation_reconciliation | tbl_valuation_reconciliation_pkey | PRIMARY KEY |
| tbl_value_add_assumptions | valid_cost_basis | CHECK |
| tbl_value_add_assumptions | valid_months_to_complete | CHECK |
| tbl_value_add_assumptions | valid_pace | CHECK |
| tbl_value_add_assumptions | valid_premium | CHECK |
| tbl_value_add_assumptions | valid_start | CHECK |
| tbl_value_add_assumptions | valid_units | CHECK |
| tbl_value_add_assumptions | tbl_value_add_assumptions_project_id_fkey | FOREIGN KEY |
| tbl_value_add_assumptions | tbl_value_add_assumptions_pkey | PRIMARY KEY |
| tbl_value_add_assumptions | tbl_value_add_assumptions_project_id_key | UNIQUE |
| tbl_waterfall | tbl_waterfall_project_id_fkey | FOREIGN KEY |
| tbl_waterfall | tbl_waterfall_pkey | PRIMARY KEY |
| tbl_waterfall_tier | tbl_waterfall_tier_equity_structure_id_fkey | FOREIGN KEY |
| tbl_waterfall_tier | tbl_waterfall_tier_pkey | PRIMARY KEY |
| tbl_zoning_control | tbl_zoning_control_pkey | PRIMARY KEY |
| tbl_zoning_control | uq_zoning_nk | UNIQUE |
| tester_feedback | tester_feedback_report_count_check | CHECK |
| tester_feedback | tester_feedback_duplicate_of_id_d09357c7_fk_tester_feedback_id | FOREIGN KEY |
| tester_feedback | tester_feedback_user_id_70f5a728_fk_auth_user_id | FOREIGN KEY |
| tester_feedback | tester_feedback_pkey | PRIMARY KEY |
| type_lot_product | subtype_lot_product_product_id_fkey | FOREIGN KEY |
| type_lot_product | subtype_lot_product_subtype_id_fkey | FOREIGN KEY |
| type_lot_product | subtype_lot_product_pkey | PRIMARY KEY |
| user_profile | user_profile_user_id_fkey | FOREIGN KEY |
| user_profile | user_profile_pkey | PRIMARY KEY |
| user_profile | user_profile_user_id_key | UNIQUE |
| user_settings | user_settings_pkey | PRIMARY KEY |
| zonda_subdivisions | zonda_subdivisions_pkey | PRIMARY KEY |
| zonda_subdivisions | zonda_subdivisions_msa_code_project_name_product_code_key | UNIQUE |

## Triggers

### `trg_folder_path` on `core_doc_folder`

```sql
CREATE TRIGGER trg_folder_path BEFORE INSERT OR UPDATE OF name, parent_id ON landscape.core_doc_folder FOR EACH ROW EXECUTE FUNCTION update_folder_path()
```
### `trg_budget_calculate_amount` on `core_fin_fact_budget`

```sql
CREATE TRIGGER trg_budget_calculate_amount BEFORE INSERT OR UPDATE ON landscape.core_fin_fact_budget FOR EACH ROW EXECUTE FUNCTION trg_calculate_amount()
```
### `trg_budget_calculate_end_period` on `core_fin_fact_budget`

```sql
CREATE TRIGGER trg_budget_calculate_end_period BEFORE INSERT OR UPDATE ON landscape.core_fin_fact_budget FOR EACH ROW EXECUTE FUNCTION trg_calculate_end_period()
```
### `set_timestamp_glossary_zoning` on `glossary_zoning`

```sql
CREATE TRIGGER set_timestamp_glossary_zoning BEFORE UPDATE ON landscape.glossary_zoning FOR EACH ROW EXECUTE FUNCTION trg_set_timestamp()
```
### `trg_recalc_on_pricing_change` on `land_use_pricing`

```sql
CREATE TRIGGER trg_recalc_on_pricing_change AFTER INSERT OR UPDATE OF growth_rate, price_per_unit ON landscape.land_use_pricing FOR EACH ROW EXECUTE FUNCTION trigger_sale_recalculation()
```
### `trigger_update_market_comp_products_timestamp` on `market_competitive_project_products`

```sql
CREATE TRIGGER trigger_update_market_comp_products_timestamp BEFORE UPDATE ON landscape.market_competitive_project_products FOR EACH ROW EXECUTE FUNCTION update_market_comp_products_timestamp()
```
### `trigger_update_market_comp_timestamp` on `market_competitive_projects`

```sql
CREATE TRIGGER trigger_update_market_comp_timestamp BEFORE UPDATE ON landscape.market_competitive_projects FOR EACH ROW EXECUTE FUNCTION update_market_comp_timestamp()
```
### `trigger_update_project_boundaries_timestamp` on `project_boundaries`

```sql
CREATE TRIGGER trigger_update_project_boundaries_timestamp BEFORE UPDATE ON landscape.project_boundaries FOR EACH ROW EXECUTE FUNCTION update_project_boundaries_timestamp()
```
### `trg_update_updated_at` on `tbl_absorption_schedule`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_absorption_schedule FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_acquisition`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_acquisition FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_acquisition_updated_at` on `tbl_acquisition`

```sql
CREATE TRIGGER update_acquisition_updated_at BEFORE UPDATE ON landscape.tbl_acquisition FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_acreage_allocation_updated` on `tbl_acreage_allocation`

```sql
CREATE TRIGGER trg_acreage_allocation_updated BEFORE UPDATE ON landscape.tbl_acreage_allocation FOR EACH ROW EXECUTE FUNCTION update_acreage_allocation_timestamp()
```
### `trg_update_updated_at` on `tbl_additional_income`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_additional_income FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trigger_update_ai_suggestion_timestamp` on `tbl_ai_adjustment_suggestions`

```sql
CREATE TRIGGER trigger_update_ai_suggestion_timestamp BEFORE UPDATE ON landscape.tbl_ai_adjustment_suggestions FOR EACH ROW EXECUTE FUNCTION update_ai_suggestion_timestamp()
```
### `trg_analysis_type_config_updated_at` on `tbl_analysis_type_config`

```sql
CREATE TRIGGER trg_analysis_type_config_updated_at BEFORE UPDATE ON landscape.tbl_analysis_type_config FOR EACH ROW EXECUTE FUNCTION update_analysis_type_config_timestamp()
```
### `trg_update_updated_at` on `tbl_base_rent`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_base_rent FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_budget_fact_updated` on `tbl_budget_fact`

```sql
CREATE TRIGGER trg_budget_fact_updated BEFORE UPDATE ON landscape.tbl_budget_fact FOR EACH ROW EXECUTE FUNCTION update_budget_fact_timestamp()
```
### `trg_budget_items_variance` on `tbl_budget_items`

```sql
CREATE TRIGGER trg_budget_items_variance BEFORE INSERT OR UPDATE ON landscape.tbl_budget_items FOR EACH ROW EXECUTE FUNCTION update_budget_variance()
```
### `trg_update_updated_at` on `tbl_budget_items`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_budget_items FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_budget_items_updated_at` on `tbl_budget_items`

```sql
CREATE TRIGGER update_budget_items_updated_at BEFORE UPDATE ON landscape.tbl_budget_items FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_budget_structure`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_budget_structure FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_budget_structure_updated_at` on `tbl_budget_structure`

```sql
CREATE TRIGGER update_budget_structure_updated_at BEFORE UPDATE ON landscape.tbl_budget_structure FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_contacts_legacy`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_contacts_legacy FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_contacts_updated_at` on `tbl_contacts_legacy`

```sql
CREATE TRIGGER update_contacts_updated_at BEFORE UPDATE ON landscape.tbl_contacts_legacy FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_cost_approach_updated_at` on `tbl_cost_approach`

```sql
CREATE TRIGGER update_cost_approach_updated_at BEFORE UPDATE ON landscape.tbl_cost_approach FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_dcf_analysis_updated` on `tbl_dcf_analysis`

```sql
CREATE TRIGGER trg_dcf_analysis_updated BEFORE UPDATE ON landscape.tbl_dcf_analysis FOR EACH ROW EXECUTE FUNCTION update_dcf_analysis_updated_at()
```
### `trg_update_updated_at` on `tbl_division`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trigger_auto_populate_sort_order` on `tbl_division`

```sql
CREATE TRIGGER trigger_auto_populate_sort_order BEFORE INSERT ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION auto_populate_sort_order()
```
### `trigger_update_container_timestamp` on `tbl_division`

```sql
CREATE TRIGGER trigger_update_container_timestamp BEFORE UPDATE ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trigger_validate_container_parent` on `tbl_division`

```sql
CREATE TRIGGER trigger_validate_container_parent BEFORE INSERT OR UPDATE ON landscape.tbl_division FOR EACH ROW EXECUTE FUNCTION validate_container_parent()
```
### `trg_update_updated_at` on `tbl_equity`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_equity FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_equity_partner`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_equity_partner FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_escalation`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_escalation FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_hbu_analysis_updated_at` on `tbl_hbu_analysis`

```sql
CREATE TRIGGER trg_hbu_analysis_updated_at BEFORE UPDATE ON landscape.tbl_hbu_analysis FOR EACH ROW EXECUTE FUNCTION update_hbu_analysis_timestamp()
```
### `trg_hbu_updated_at` on `tbl_hbu_analysis`

```sql
CREATE TRIGGER trg_hbu_updated_at BEFORE UPDATE ON landscape.tbl_hbu_analysis FOR EACH ROW EXECUTE FUNCTION fn_hbu_updated_at()
```
### `update_income_approach_updated_at` on `tbl_income_approach`

```sql
CREATE TRIGGER update_income_approach_updated_at BEFORE UPDATE ON landscape.tbl_income_approach FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_auto_create_containers` on `tbl_inventory_item`

```sql
CREATE TRIGGER trg_auto_create_containers AFTER INSERT OR UPDATE ON landscape.tbl_inventory_item FOR EACH ROW EXECUTE FUNCTION trigger_auto_create_containers()
```
### `trg_update_updated_at` on `tbl_item_dependency`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_item_dependency FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_landuse`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_landuse FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_landuse_program`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_landuse_program FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_lease`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_lease FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_leasing_commission`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_leasing_commission FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_lot`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_lot FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_measures`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_measures FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_measures_updated_at` on `tbl_measures`

```sql
CREATE TRIGGER update_measures_updated_at BEFORE UPDATE ON landscape.tbl_measures FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_milestone_updated` on `tbl_milestone`

```sql
CREATE TRIGGER trg_milestone_updated BEFORE UPDATE ON landscape.tbl_milestone FOR EACH ROW EXECUTE FUNCTION update_milestone_timestamp()
```
### `trg_update_updated_at` on `tbl_operating_expense`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_operating_expense FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_operations_inputs_updated` on `tbl_operations_user_inputs`

```sql
CREATE TRIGGER trg_operations_inputs_updated BEFORE UPDATE ON landscape.tbl_operations_user_inputs FOR EACH ROW EXECUTE FUNCTION update_operations_inputs_timestamp()
```
### `trg_project_assumption_updated` on `tbl_project_assumption`

```sql
CREATE TRIGGER trg_project_assumption_updated BEFORE UPDATE ON landscape.tbl_project_assumption FOR EACH ROW EXECUTE FUNCTION update_project_assumption_timestamp()
```
### `trg_update_updated_at` on `tbl_project_config`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_project_config FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_project_settings`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_project_settings FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_prop_attr_def_updated_at` on `tbl_property_attribute_def`

```sql
CREATE TRIGGER trg_prop_attr_def_updated_at BEFORE UPDATE ON landscape.tbl_property_attribute_def FOR EACH ROW EXECUTE FUNCTION fn_prop_attr_def_updated_at()
```
### `trg_update_updated_at` on `tbl_recovery`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_recovery FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_revenue_timing`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_revenue_timing FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_sales_comparables_updated_at` on `tbl_sales_comparables`

```sql
CREATE TRIGGER update_sales_comparables_updated_at BEFORE UPDATE ON landscape.tbl_sales_comparables FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_scenario_activate` on `tbl_scenario`

```sql
CREATE TRIGGER trg_scenario_activate BEFORE UPDATE OF is_active ON landscape.tbl_scenario FOR EACH ROW WHEN ((new.is_active = true)) EXECUTE FUNCTION set_active_scenario()
```
### `update_system_picklist_timestamp` on `tbl_system_picklist`

```sql
CREATE TRIGGER update_system_picklist_timestamp BEFORE UPDATE ON landscape.tbl_system_picklist FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_tenant_improvement`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_tenant_improvement FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `update_valuation_reconciliation_updated_at` on `tbl_valuation_reconciliation`

```sql
CREATE TRIGGER update_valuation_reconciliation_updated_at BEFORE UPDATE ON landscape.tbl_valuation_reconciliation FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_waterfall`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_waterfall FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```
### `trg_update_updated_at` on `tbl_zoning_control`

```sql
CREATE TRIGGER trg_update_updated_at BEFORE UPDATE ON landscape.tbl_zoning_control FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
```

## Routines

### `_postgis_deprecate`

- Type: function
- Arguments: oldname text, newname text, version text
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape._postgis_deprecate(oldname text, newname text, version text)
 RETURNS void
 LANGUAGE plpgsql
 IMMUTABLE STRICT COST 250
AS $function$
DECLARE
  curver_text text;
BEGIN
  --
  -- Raises a NOTICE if it was deprecated in this version,
  -- a WARNING if in a previous version (only up to minor version checked)
  --
	curver_text := '3.5.0';
	IF pg_catalog.split_part(curver_text,'.',1)::int > pg_catalog.split_part(version,'.',1)::int OR
	   ( pg_catalog.split_part(curver_text,'.',1) = pg_catalog.split_part(version,'.',1) AND
		 pg_catalog.split_part(curver_text,'.',2) != split_part(version,'.',2) )
	THEN
	  RAISE WARNING '% signature was deprecated in %. Please use %', oldname, version, newname;
	ELSE
	  RAISE DEBUG '% signature was deprecated in %. Please use %', oldname, version, newname;
	END IF;
END;
$function$

```
### `_postgis_index_extent`

- Type: function
- Arguments: tbl regclass, col text
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape._postgis_index_extent(tbl regclass, col text)
 RETURNS box2d
 LANGUAGE c
 STABLE STRICT
AS '$libdir/postgis-3', $function$_postgis_gserialized_index_extent$function$

```
### `_postgis_join_selectivity`

- Type: function
- Arguments: regclass, text, regclass, text, text DEFAULT '2'::text
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._postgis_join_selectivity(regclass, text, regclass, text, text DEFAULT '2'::text)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$_postgis_gserialized_joinsel$function$

```
### `_postgis_pgsql_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape._postgis_pgsql_version()
 RETURNS text
 LANGUAGE sql
 STABLE
AS $function$
	SELECT CASE WHEN pg_catalog.split_part(s,'.',1)::integer > 9 THEN pg_catalog.split_part(s,'.',1) || '0'
	ELSE pg_catalog.split_part(s,'.', 1) || pg_catalog.split_part(s,'.', 2) END AS v
	FROM pg_catalog.substring(version(), E'PostgreSQL ([0-9\\.]+)') AS s;
$function$

```
### `_postgis_scripts_pgsql_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape._postgis_scripts_pgsql_version()
 RETURNS text
 LANGUAGE sql
 IMMUTABLE
AS $function$SELECT '170'::text AS version$function$

```
### `_postgis_selectivity`

- Type: function
- Arguments: tbl regclass, att_name text, geom geometry, mode text DEFAULT '2'::text
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._postgis_selectivity(tbl regclass, att_name text, geom geometry, mode text DEFAULT '2'::text)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$_postgis_gserialized_sel$function$

```
### `_postgis_stats`

- Type: function
- Arguments: tbl regclass, att_name text, text DEFAULT '2'::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape._postgis_stats(tbl regclass, att_name text, text DEFAULT '2'::text)
 RETURNS text
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$_postgis_gserialized_stats$function$

```
### `_st_3ddfullywithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_3ddfullywithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_dfullywithin3d$function$

```
### `_st_3ddwithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_3ddwithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_dwithin3d$function$

```
### `_st_3dintersects`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_3dintersects(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_3DIntersects$function$

```
### `_st_asgml`

- Type: function
- Arguments: integer, geometry, integer, integer, text, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape._st_asgml(integer, geometry, integer, integer, text, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asGML$function$

```
### `_st_asx3d`

- Type: function
- Arguments: integer, geometry, integer, integer, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape._st_asx3d(integer, geometry, integer, integer, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asX3D$function$

```
### `_st_bestsrid`

- Type: function
- Arguments: geography, geography
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape._st_bestsrid(geography, geography)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$geography_bestsrid$function$

```
### `_st_bestsrid`

- Type: function
- Arguments: geography
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape._st_bestsrid(geography)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$geography_bestsrid$function$

```
### `_st_contains`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_contains(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$contains$function$

```
### `_st_containsproperly`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_containsproperly(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$containsproperly$function$

```
### `_st_coveredby`

- Type: function
- Arguments: geog1 geography, geog2 geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_coveredby(geog1 geography, geog2 geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_coveredby$function$

```
### `_st_coveredby`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_coveredby(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$coveredby$function$

```
### `_st_covers`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_covers(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$covers$function$

```
### `_st_covers`

- Type: function
- Arguments: geog1 geography, geog2 geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_covers(geog1 geography, geog2 geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_covers$function$

```
### `_st_crosses`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_crosses(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$crosses$function$

```
### `_st_dfullywithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_dfullywithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_dfullywithin$function$

```
### `_st_distancetree`

- Type: function
- Arguments: geography, geography, double precision, boolean
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._st_distancetree(geography, geography, double precision, boolean)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_distance_tree$function$

```
### `_st_distancetree`

- Type: function
- Arguments: geography, geography
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._st_distancetree(geography, geography)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE STRICT
AS $function$SELECT landscape._ST_DistanceTree($1, $2, 0.0, true)$function$

```
### `_st_distanceuncached`

- Type: function
- Arguments: geography, geography
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._st_distanceuncached(geography, geography)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE STRICT
AS $function$SELECT landscape._ST_DistanceUnCached($1, $2, 0.0, true)$function$

```
### `_st_distanceuncached`

- Type: function
- Arguments: geography, geography, double precision, boolean
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._st_distanceuncached(geography, geography, double precision, boolean)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_distance_uncached$function$

```
### `_st_distanceuncached`

- Type: function
- Arguments: geography, geography, boolean
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._st_distanceuncached(geography, geography, boolean)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE STRICT
AS $function$SELECT landscape._ST_DistanceUnCached($1, $2, 0.0, $3)$function$

```
### `_st_dwithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_dwithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_dwithin$function$

```
### `_st_dwithin`

- Type: function
- Arguments: geog1 geography, geog2 geography, tolerance double precision, use_spheroid boolean DEFAULT true
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_dwithin(geog1 geography, geog2 geography, tolerance double precision, use_spheroid boolean DEFAULT true)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_dwithin$function$

```
### `_st_dwithinuncached`

- Type: function
- Arguments: geography, geography, double precision, boolean
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_dwithinuncached(geography, geography, double precision, boolean)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_dwithin_uncached$function$

```
### `_st_dwithinuncached`

- Type: function
- Arguments: geography, geography, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_dwithinuncached(geography, geography, double precision)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE
AS $function$SELECT $1 OPERATOR(landscape.&&) landscape._ST_Expand($2,$3) AND $2 OPERATOR(landscape.&&) landscape._ST_Expand($1,$3) AND landscape._ST_DWithinUnCached($1, $2, $3, true)$function$

```
### `_st_equals`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_equals(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Equals$function$

```
### `_st_expand`

- Type: function
- Arguments: geography, double precision
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape._st_expand(geography, double precision)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$geography_expand$function$

```
### `_st_geomfromgml`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape._st_geomfromgml(text, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$geom_from_gml$function$

```
### `_st_intersects`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_intersects(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Intersects$function$

```
### `_st_linecrossingdirection`

- Type: function
- Arguments: line1 geometry, line2 geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape._st_linecrossingdirection(line1 geometry, line2 geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_LineCrossingDirection$function$

```
### `_st_longestline`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape._st_longestline(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_longestline2d$function$

```
### `_st_maxdistance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape._st_maxdistance(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_maxdistance2d_linestring$function$

```
### `_st_orderingequals`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_orderingequals(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_same$function$

```
### `_st_overlaps`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_overlaps(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$overlaps$function$

```
### `_st_pointoutside`

- Type: function
- Arguments: geography
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape._st_pointoutside(geography)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE STRICT
AS '$libdir/postgis-3', $function$geography_point_outside$function$

```
### `_st_sortablehash`

- Type: function
- Arguments: geom geometry
- Returns: bigint

```sql
CREATE OR REPLACE FUNCTION landscape._st_sortablehash(geom geometry)
 RETURNS bigint
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$_ST_SortableHash$function$

```
### `_st_touches`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_touches(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$touches$function$

```
### `_st_voronoi`

- Type: function
- Arguments: g1 geometry, clip geometry DEFAULT NULL::geometry, tolerance double precision DEFAULT 0.0, return_polygons boolean DEFAULT true
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape._st_voronoi(g1 geometry, clip geometry DEFAULT NULL::geometry, tolerance double precision DEFAULT 0.0, return_polygons boolean DEFAULT true)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 5000
AS '$libdir/postgis-3', $function$ST_Voronoi$function$

```
### `_st_within`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape._st_within(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$SELECT landscape._ST_Contains($2,$1)$function$

```
### `add_category_tag`

- Type: function
- Arguments: p_category_id integer, p_tag_name text
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.add_category_tag(p_category_id integer, p_tag_name text)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
    UPDATE landscape.core_unit_cost_category
    SET tags = tags || jsonb_build_array(p_tag_name),
        updated_at = NOW()
    WHERE category_id = p_category_id
      AND NOT (tags ? p_tag_name);
END;
$function$

```
### `add_category_to_stage`

- Type: function
- Arguments: p_category_id integer, p_lifecycle_stage character varying, p_sort_order integer DEFAULT 0
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.add_category_to_stage(p_category_id integer, p_lifecycle_stage character varying, p_sort_order integer DEFAULT 0)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
    INSERT INTO landscape.core_category_lifecycle_stages
        (category_id, lifecycle_stage, sort_order)
    VALUES
        (p_category_id, p_lifecycle_stage, p_sort_order)
    ON CONFLICT (category_id, lifecycle_stage) DO UPDATE
        SET sort_order = EXCLUDED.sort_order,
            updated_at = NOW();
END;
$function$

```
### `addgeometrycolumn`

- Type: function
- Arguments: table_name character varying, column_name character varying, new_srid integer, new_type character varying, new_dim integer, use_typmod boolean DEFAULT true
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.addgeometrycolumn(table_name character varying, column_name character varying, new_srid integer, new_type character varying, new_dim integer, use_typmod boolean DEFAULT true)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	ret  text;
BEGIN
	SELECT landscape.AddGeometryColumn('','',$1,$2,$3,$4,$5, $6) into ret;
	RETURN ret;
END;
$function$

```
### `addgeometrycolumn`

- Type: function
- Arguments: catalog_name character varying, schema_name character varying, table_name character varying, column_name character varying, new_srid_in integer, new_type character varying, new_dim integer, use_typmod boolean DEFAULT true
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.addgeometrycolumn(catalog_name character varying, schema_name character varying, table_name character varying, column_name character varying, new_srid_in integer, new_type character varying, new_dim integer, use_typmod boolean DEFAULT true)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	rec RECORD;
	sr varchar;
	real_schema name;
	sql text;
	new_srid integer;

BEGIN

	-- Verify geometry type
	IF (postgis_type_name(new_type,new_dim) IS NULL )
	THEN
		RAISE EXCEPTION 'Invalid type name "%(%)" - valid ones are:
	POINT, MULTIPOINT,
	LINESTRING, MULTILINESTRING,
	POLYGON, MULTIPOLYGON,
	CIRCULARSTRING, COMPOUNDCURVE, MULTICURVE,
	CURVEPOLYGON, MULTISURFACE,
	GEOMETRY, GEOMETRYCOLLECTION,
	POINTM, MULTIPOINTM,
	LINESTRINGM, MULTILINESTRINGM,
	POLYGONM, MULTIPOLYGONM,
	CIRCULARSTRINGM, COMPOUNDCURVEM, MULTICURVEM
	CURVEPOLYGONM, MULTISURFACEM, TRIANGLE, TRIANGLEM,
	POLYHEDRALSURFACE, POLYHEDRALSURFACEM, TIN, TINM
	or GEOMETRYCOLLECTIONM', new_type, new_dim;
		RETURN 'fail';
	END IF;

	-- Verify dimension
	IF ( (new_dim >4) OR (new_dim <2) ) THEN
		RAISE EXCEPTION 'invalid dimension';
		RETURN 'fail';
	END IF;

	IF ( (new_type LIKE '%M') AND (new_dim!=3) ) THEN
		RAISE EXCEPTION 'TypeM needs 3 dimensions';
		RETURN 'fail';
	END IF;

	-- Verify SRID
	IF ( new_srid_in > 0 ) THEN
		IF new_srid_in > 998999 THEN
			RAISE EXCEPTION 'AddGeometryColumn() - SRID must be <= %', 998999;
		END IF;
		new_srid := new_srid_in;
		SELECT SRID INTO sr FROM spatial_ref_sys WHERE SRID = new_srid;
		IF NOT FOUND THEN
			RAISE EXCEPTION 'AddGeometryColumn() - invalid SRID';
			RETURN 'fail';
		END IF;
	ELSE
		new_srid := landscape.ST_SRID('POINT EMPTY'::landscape.geometry);
		IF ( new_srid_in != new_srid ) THEN
			RAISE NOTICE 'SRID value % converted to the officially unknown SRID value %', new_srid_in, new_srid;
		END IF;
	END IF;

	-- Verify schema
	IF ( schema_name IS NOT NULL AND schema_name != '' ) THEN
		sql := 'SELECT nspname FROM pg_namespace ' ||
			'WHERE text(nspname) = ' || quote_literal(schema_name) ||
			'LIMIT 1';
		RAISE DEBUG '%', sql;
		EXECUTE sql INTO real_schema;

		IF ( real_schema IS NULL ) THEN
			RAISE EXCEPTION 'Schema % is not a valid schemaname', quote_literal(schema_name);
			RETURN 'fail';
		END IF;
	END IF;

	IF ( real_schema IS NULL ) THEN
		RAISE DEBUG 'Detecting schema';
		sql := 'SELECT n.nspname AS schemaname ' ||
			'FROM pg_catalog.pg_class c ' ||
			  'JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace ' ||
			'WHERE c.relkind = ' || quote_literal('r') ||
			' AND n.nspname NOT IN (' || quote_literal('pg_catalog') || ', ' || quote_literal('pg_toast') || ')' ||
			' AND pg_catalog.pg_table_is_visible(c.oid)' ||
			' AND c.relname = ' || quote_literal(table_name);
		RAISE DEBUG '%', sql;
		EXECUTE sql INTO real_schema;

		IF ( real_schema IS NULL ) THEN
			RAISE EXCEPTION 'Table % does not occur in the search_path', quote_literal(table_name);
			RETURN 'fail';
		END IF;
	END IF;

	-- Add geometry column to table
	IF use_typmod THEN
		 sql := 'ALTER TABLE ' ||
			quote_ident(real_schema) || '.' || quote_ident(table_name)
			|| ' ADD COLUMN ' || quote_ident(column_name) ||
			' geometry(' || landscape.postgis_type_name(new_type, new_dim) || ', ' || new_srid::text || ')';
		RAISE DEBUG '%', sql;
	ELSE
		sql := 'ALTER TABLE ' ||
			quote_ident(real_schema) || '.' || quote_ident(table_name)
			|| ' ADD COLUMN ' || quote_ident(column_name) ||
			' geometry ';
		RAISE DEBUG '%', sql;
	END IF;
	EXECUTE sql;

	IF NOT use_typmod THEN
		-- Add table CHECKs
		sql := 'ALTER TABLE ' ||
			quote_ident(real_schema) || '.' || quote_ident(table_name)
			|| ' ADD CONSTRAINT '
			|| quote_ident('enforce_srid_' || column_name)
			|| ' CHECK (st_srid(' || quote_ident(column_name) ||
			') = ' || new_srid::text || ')' ;
		RAISE DEBUG '%', sql;
		EXECUTE sql;

		sql := 'ALTER TABLE ' ||
			quote_ident(real_schema) || '.' || quote_ident(table_name)
			|| ' ADD CONSTRAINT '
			|| quote_ident('enforce_dims_' || column_name)
			|| ' CHECK (st_ndims(' || quote_ident(column_name) ||
			') = ' || new_dim::text || ')' ;
		RAISE DEBUG '%', sql;
		EXECUTE sql;

		IF ( NOT (new_type = 'GEOMETRY')) THEN
			sql := 'ALTER TABLE ' ||
				quote_ident(real_schema) || '.' || quote_ident(table_name) || ' ADD CONSTRAINT ' ||
				quote_ident('enforce_geotype_' || column_name) ||
				' CHECK (GeometryType(' ||
				quote_ident(column_name) || ')=' ||
				quote_literal(new_type) || ' OR (' ||
				quote_ident(column_name) || ') is null)';
			RAISE DEBUG '%', sql;
			EXECUTE sql;
		END IF;
	END IF;

	RETURN
		real_schema || '.' ||
		table_name || '.' || column_name ||
		' SRID:' || new_srid::text ||
		' TYPE:' || new_type ||
		' DIMS:' || new_dim::text || ' ';
END;
$function$

```
### `addgeometrycolumn`

- Type: function
- Arguments: schema_name character varying, table_name character varying, column_name character varying, new_srid integer, new_type character varying, new_dim integer, use_typmod boolean DEFAULT true
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.addgeometrycolumn(schema_name character varying, table_name character varying, column_name character varying, new_srid integer, new_type character varying, new_dim integer, use_typmod boolean DEFAULT true)
 RETURNS text
 LANGUAGE plpgsql
 STABLE STRICT
AS $function$
DECLARE
	ret  text;
BEGIN
	SELECT landscape.AddGeometryColumn('',$1,$2,$3,$4,$5,$6,$7) into ret;
	RETURN ret;
END;
$function$

```
### `after_update_category_completeness`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.after_update_category_completeness()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.is_incomplete = FALSE THEN
    -- Clean up completion status records
    DELETE FROM landscape.core_category_completion_status
    WHERE category_id = NEW.category_id;
  ELSE
    -- Update completion status records
    PERFORM landscape.update_category_completion_status(NEW.category_id);
  END IF;

  RETURN NEW;
END;
$function$

```
### `apply_folder_inheritance`

- Type: function
- Arguments: p_doc_id integer, p_folder_id integer
- Returns: jsonb

```sql
CREATE OR REPLACE FUNCTION landscape.apply_folder_inheritance(p_doc_id integer, p_folder_id integer)
 RETURNS jsonb
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_folder_profile JSONB;
  v_current_profile JSONB;
  v_new_profile JSONB;
  v_opt_out BOOLEAN;
BEGIN
  -- Get current document profile
  SELECT profile_json INTO v_current_profile
  FROM landscape.core_doc
  WHERE doc_id = p_doc_id;

  -- Check if document has opted out
  v_opt_out := COALESCE((v_current_profile->>'_inherit')::boolean, true) = false;

  IF v_opt_out THEN
    RETURN v_current_profile;
  END IF;

  -- Get folder default profile
  SELECT default_profile INTO v_folder_profile
  FROM landscape.core_doc_folder
  WHERE folder_id = p_folder_id;

  -- Merge: folder values overwrite document values
  v_new_profile := v_current_profile || v_folder_profile;

  -- Update document
  UPDATE landscape.core_doc
  SET profile_json = v_new_profile,
      updated_at = NOW()
  WHERE doc_id = p_doc_id;

  -- Log to audit history
  INSERT INTO landscape.ai_review_history (
    doc_id,
    action_type,
    old_json,
    new_json,
    operation_summary,
    created_at
  ) VALUES (
    p_doc_id,
    'folder_inherit',
    v_current_profile,
    v_new_profile,
    jsonb_build_object(
      'folder_id', p_folder_id,
      'changes', (
        SELECT jsonb_object_agg(key, value)
        FROM jsonb_each(v_folder_profile)
      )
    ),
    NOW()
  );

  RETURN v_new_profile;
END;
$function$

```
### `armor`

- Type: function
- Arguments: bytea
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.armor(bytea)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_armor$function$

```
### `armor`

- Type: function
- Arguments: bytea, text[], text[]
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.armor(bytea, text[], text[])
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_armor$function$

```
### `array_to_halfvec`

- Type: function
- Arguments: double precision[], integer, boolean
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_halfvec(double precision[], integer, boolean)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_halfvec$function$

```
### `array_to_halfvec`

- Type: function
- Arguments: integer[], integer, boolean
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_halfvec(integer[], integer, boolean)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_halfvec$function$

```
### `array_to_halfvec`

- Type: function
- Arguments: real[], integer, boolean
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_halfvec(real[], integer, boolean)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_halfvec$function$

```
### `array_to_halfvec`

- Type: function
- Arguments: numeric[], integer, boolean
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_halfvec(numeric[], integer, boolean)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_halfvec$function$

```
### `array_to_sparsevec`

- Type: function
- Arguments: integer[], integer, boolean
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_sparsevec(integer[], integer, boolean)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_sparsevec$function$

```
### `array_to_sparsevec`

- Type: function
- Arguments: numeric[], integer, boolean
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_sparsevec(numeric[], integer, boolean)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_sparsevec$function$

```
### `array_to_sparsevec`

- Type: function
- Arguments: double precision[], integer, boolean
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_sparsevec(double precision[], integer, boolean)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_sparsevec$function$

```
### `array_to_sparsevec`

- Type: function
- Arguments: real[], integer, boolean
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_sparsevec(real[], integer, boolean)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_sparsevec$function$

```
### `array_to_vector`

- Type: function
- Arguments: double precision[], integer, boolean
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_vector(double precision[], integer, boolean)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_vector$function$

```
### `array_to_vector`

- Type: function
- Arguments: integer[], integer, boolean
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_vector(integer[], integer, boolean)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_vector$function$

```
### `array_to_vector`

- Type: function
- Arguments: numeric[], integer, boolean
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_vector(numeric[], integer, boolean)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_vector$function$

```
### `array_to_vector`

- Type: function
- Arguments: real[], integer, boolean
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.array_to_vector(real[], integer, boolean)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$array_to_vector$function$

```
### `auto_calculate_allocations`

- Type: function
- Arguments: p_finance_structure_id bigint
- Returns: TABLE(container_id bigint, allocation_percentage numeric, allocated_amount numeric)

```sql
CREATE OR REPLACE FUNCTION landscape.auto_calculate_allocations(p_finance_structure_id bigint)
 RETURNS TABLE(container_id bigint, allocation_percentage numeric, allocated_amount numeric)
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_structure RECORD;
  v_total_units INT;
  v_total_area NUMERIC(15,2);
  v_container_count INT;
BEGIN
  -- Get finance structure
  SELECT * INTO v_structure
  FROM landscape.tbl_finance_structure
  WHERE finance_structure_id = p_finance_structure_id;

  IF NOT FOUND THEN
    RAISE EXCEPTION 'Finance structure % not found', p_finance_structure_id;
  END IF;

  -- Calculate based on allocation method
  CASE v_structure.allocation_method
    WHEN 'equal' THEN
      -- Equal split
      SELECT COUNT(*) INTO v_container_count
      FROM landscape.tbl_cost_allocation
      WHERE finance_structure_id = p_finance_structure_id;

      RETURN QUERY
      SELECT
        ca.container_id,
        (100.0 / v_container_count)::NUMERIC(6,3) as allocation_percentage,
        (v_structure.total_budget_amount / v_container_count)::NUMERIC(15,2) as allocated_amount
      FROM landscape.tbl_cost_allocation ca
      WHERE ca.finance_structure_id = p_finance_structure_id;

    WHEN 'by_units' THEN
      -- Proportional by unit count
      SELECT SUM(COALESCE((c.attributes->>'units_total')::NUMERIC, 0))
      INTO v_total_units
      FROM landscape.tbl_cost_allocation ca
      JOIN landscape.tbl_container c ON ca.container_id = c.container_id
      WHERE ca.finance_structure_id = p_finance_structure_id;

      IF v_total_units = 0 THEN
        RAISE EXCEPTION 'Total units is zero - cannot allocate by units';
      END IF;

      RETURN QUERY
      SELECT
        ca.container_id,
        ((COALESCE((c.attributes->>'units_total')::NUMERIC, 0) / v_total_units) * 100)::NUMERIC(6,3) as allocation_percentage,
        (v_structure.total_budget_amount * (COALESCE((c.attributes->>'units_total')::NUMERIC, 0) / v_total_units))::NUMERIC(15,2) as allocated_amount
      FROM landscape.tbl_cost_allocation ca
      JOIN landscape.tbl_container c ON ca.container_id = c.container_id
      WHERE ca.finance_structure_id = p_finance_structure_id;

    WHEN 'by_area' THEN
      -- Proportional by area
      SELECT SUM(COALESCE((c.attributes->>'acres_gross')::NUMERIC, 0))
      INTO v_total_area
      FROM landscape.tbl_cost_allocation ca
      JOIN landscape.tbl_container c ON ca.container_id = c.container_id
      WHERE ca.finance_structure_id = p_finance_structure_id;

      IF v_total_area = 0 THEN
        RAISE EXCEPTION 'Total area is zero - cannot allocate by area';
      END IF;

      RETURN QUERY
      SELECT
        ca.container_id,
        ((COALESCE((c.attributes->>'acres_gross')::NUMERIC, 0) / v_total_area) * 100)::NUMERIC(6,3) as allocation_percentage,
        (v_structure.total_budget_amount * (COALESCE((c.attributes->>'acres_gross')::NUMERIC, 0) / v_total_area))::NUMERIC(15,2) as allocated_amount
      FROM landscape.tbl_cost_allocation ca
      JOIN landscape.tbl_container c ON ca.container_id = c.container_id
      WHERE ca.finance_structure_id = p_finance_structure_id;

    WHEN 'by_custom_pct' THEN
      -- Use existing percentages (no calculation needed)
      RETURN QUERY
      SELECT
        ca.container_id,
        ca.allocation_percentage,
        (v_structure.total_budget_amount * (ca.allocation_percentage / 100))::NUMERIC(15,2) as allocated_amount
      FROM landscape.tbl_cost_allocation ca
      WHERE ca.finance_structure_id = p_finance_structure_id;

    ELSE
      RAISE EXCEPTION 'Unknown allocation method: %', v_structure.allocation_method;
  END CASE;
END;
$function$

```
### `auto_check_category_completeness`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.auto_check_category_completeness()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
DECLARE
  is_now_complete BOOLEAN;
BEGIN
  -- Check if category is now complete
  is_now_complete := landscape.check_category_completeness(NEW.category_id);

  IF is_now_complete AND NEW.is_incomplete = TRUE THEN
    -- Category was incomplete but is now complete - auto-mark complete
    NEW.is_incomplete := FALSE;
    NEW.reminder_dismissed_at := NULL;
    NEW.last_reminded_at := NULL;
    NEW.updated_at := CURRENT_TIMESTAMP;

    -- Clean up completion status records (will happen in AFTER trigger)
  ELSIF NOT is_now_complete THEN
    -- Update completion status records in AFTER trigger
  END IF;

  RETURN NEW;
END;
$function$

```
### `auto_create_containers_from_inventory`

- Type: function
- Arguments: p_project_id bigint, p_item_id bigint
- Returns: bigint

```sql
CREATE OR REPLACE FUNCTION landscape.auto_create_containers_from_inventory(p_project_id bigint, p_item_id bigint)
 RETURNS bigint
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_item RECORD;
  v_hierarchy_cols RECORD;
  v_parent_container_id BIGINT;
  v_current_container_id BIGINT;
  v_container_name TEXT;
  v_min_level INT;
BEGIN
  -- Get the inventory item
  SELECT * INTO v_item
  FROM landscape.tbl_inventory_item
  WHERE item_id = p_item_id;

  IF NOT FOUND THEN
    RAISE EXCEPTION 'Inventory item % not found', p_item_id;
  END IF;

  -- Find the minimum container level for this project's hierarchy
  SELECT MIN(container_level) INTO v_min_level
  FROM landscape.tbl_project_inventory_columns
  WHERE project_id = p_project_id
    AND column_type = 'hierarchy';

  -- Initialize parent as NULL (will be used for level 1 containers)
  v_parent_container_id := NULL;

  -- Loop through hierarchy columns in order
  FOR v_hierarchy_cols IN
    SELECT column_name, column_label, container_level
    FROM landscape.tbl_project_inventory_columns
    WHERE project_id = p_project_id
      AND column_type = 'hierarchy'
    ORDER BY container_level ASC
  LOOP
    -- Get the value for this hierarchy level from JSONB
    v_container_name := v_item.hierarchy_values->>v_hierarchy_cols.column_name;

    IF v_container_name IS NOT NULL AND v_container_name != '' THEN
      -- Check if container already exists at this level
      IF v_hierarchy_cols.container_level = 1 THEN
        -- Level 1: no parent
        SELECT container_id INTO v_current_container_id
        FROM landscape.tbl_container
        WHERE project_id = p_project_id
          AND container_level = 1
          AND parent_container_id IS NULL
          AND display_name = v_container_name
          AND is_active = true
        LIMIT 1;
      ELSE
        -- Levels 2+: must have parent
        SELECT container_id INTO v_current_container_id
        FROM landscape.tbl_container
        WHERE project_id = p_project_id
          AND container_level = v_hierarchy_cols.container_level
          AND parent_container_id = v_parent_container_id
          AND display_name = v_container_name
          AND is_active = true
        LIMIT 1;
      END IF;

      -- If doesn't exist, create it
      IF v_current_container_id IS NULL THEN
        INSERT INTO landscape.tbl_container (
          project_id,
          parent_container_id,
          container_level,
          container_code,
          display_name,
          sort_order,
          is_active
        ) VALUES (
          p_project_id,
          CASE
            WHEN v_hierarchy_cols.container_level = 1 THEN NULL
            ELSE v_parent_container_id
          END,
          v_hierarchy_cols.container_level,
          -- Generate unique container_code using level, parent, and name
          'L' || v_hierarchy_cols.container_level || '-' ||
          COALESCE(v_parent_container_id::text || '-', '') ||
          REPLACE(v_container_name, ' ', '-'),
          v_container_name,
          0,
          true
        ) RETURNING container_id INTO v_current_container_id;
      END IF;

      -- Update parent for next level
      v_parent_container_id := v_current_container_id;
    END IF;
  END LOOP;

  -- Update inventory item with the deepest container ID
  UPDATE landscape.tbl_inventory_item
  SET container_id = v_parent_container_id
  WHERE item_id = p_item_id;

  RETURN v_parent_container_id;
END;
$function$

```
### `auto_populate_sort_order`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.auto_populate_sort_order()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  -- Only auto-populate on INSERT and if sort_order is NULL
  IF TG_OP = 'INSERT' AND NEW.sort_order IS NULL THEN
    NEW.sort_order := landscape.get_next_sort_order(NEW.project_id, NEW.parent_container_id);
  END IF;

  RETURN NEW;
END;
$function$

```
### `avg`

- Type: aggregate
- Arguments: vector
- Returns: vector

`routine_definition` is null (commonly aggregate/system metadata).

### `avg`

- Type: aggregate
- Arguments: halfvec
- Returns: halfvec

`routine_definition` is null (commonly aggregate/system metadata).

### `binary_quantize`

- Type: function
- Arguments: halfvec
- Returns: bit

```sql
CREATE OR REPLACE FUNCTION landscape.binary_quantize(halfvec)
 RETURNS bit
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_binary_quantize$function$

```
### `binary_quantize`

- Type: function
- Arguments: vector
- Returns: bit

```sql
CREATE OR REPLACE FUNCTION landscape.binary_quantize(vector)
 RETURNS bit
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$binary_quantize$function$

```
### `box`

- Type: function
- Arguments: geometry
- Returns: box

```sql
CREATE OR REPLACE FUNCTION landscape.box(geometry)
 RETURNS box
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_to_BOX$function$

```
### `box`

- Type: function
- Arguments: box3d
- Returns: box

```sql
CREATE OR REPLACE FUNCTION landscape.box(box3d)
 RETURNS box
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX3D_to_BOX$function$

```
### `box2d`

- Type: function
- Arguments: box3d
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.box2d(box3d)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX3D_to_BOX2D$function$

```
### `box2d`

- Type: function
- Arguments: geometry
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.box2d(geometry)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_to_BOX2D$function$

```
### `box2d_in`

- Type: function
- Arguments: cstring
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.box2d_in(cstring)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX2D_in$function$

```
### `box2d_out`

- Type: function
- Arguments: box2d
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.box2d_out(box2d)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX2D_out$function$

```
### `box2df_in`

- Type: function
- Arguments: cstring
- Returns: box2df

```sql
CREATE OR REPLACE FUNCTION landscape.box2df_in(cstring)
 RETURNS box2df
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$box2df_in$function$

```
### `box2df_out`

- Type: function
- Arguments: box2df
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.box2df_out(box2df)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$box2df_out$function$

```
### `box3d`

- Type: function
- Arguments: box2d
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.box3d(box2d)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX2D_to_BOX3D$function$

```
### `box3d`

- Type: function
- Arguments: geometry
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.box3d(geometry)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_to_BOX3D$function$

```
### `box3d_in`

- Type: function
- Arguments: cstring
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.box3d_in(cstring)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_in$function$

```
### `box3d_out`

- Type: function
- Arguments: box3d
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.box3d_out(box3d)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_out$function$

```
### `box3dtobox`

- Type: function
- Arguments: box3d
- Returns: box

```sql
CREATE OR REPLACE FUNCTION landscape.box3dtobox(box3d)
 RETURNS box
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX3D_to_BOX$function$

```
### `bytea`

- Type: function
- Arguments: geography
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.bytea(geography)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_to_bytea$function$

```
### `bytea`

- Type: function
- Arguments: geometry
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.bytea(geometry)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_to_bytea$function$

```
### `calculate_cost_to_complete`

- Type: function
- Arguments: p_container_id bigint
- Returns: numeric

```sql
CREATE OR REPLACE FUNCTION landscape.calculate_cost_to_complete(p_container_id bigint)
 RETURNS numeric
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_total_cost_to_complete NUMERIC(15,2) := 0;
  v_allocation RECORD;
  v_structure RECORD;
  v_spent NUMERIC(15,2);
  v_remaining NUMERIC(15,2);
  v_allocated_remaining NUMERIC(15,2);
BEGIN
  -- Get all cost allocations for this container
  FOR v_allocation IN
    SELECT ca.*, fs.total_budget_amount
    FROM landscape.tbl_cost_allocation ca
    JOIN landscape.tbl_finance_structure fs ON ca.finance_structure_id = fs.finance_structure_id
    WHERE ca.container_id = p_container_id
      AND fs.is_active = TRUE
      AND fs.structure_type = 'capital_cost_pool'
  LOOP
    -- Calculate spent to date for this finance structure
    SELECT COALESCE(SUM(budgeted_amount), 0)
    INTO v_spent
    FROM landscape.core_fin_fact_budget
    WHERE finance_structure_id = v_allocation.finance_structure_id
      AND is_active = TRUE;

    -- Calculate remaining budget
    v_remaining := v_allocation.total_budget_amount - v_spent;

    -- Apply allocation percentage
    v_allocated_remaining := v_remaining * (v_allocation.allocation_percentage / 100);

    -- Add to total
    v_total_cost_to_complete := v_total_cost_to_complete + v_allocated_remaining;
  END LOOP;

  RETURN v_total_cost_to_complete;
END;
$function$

```
### `calculate_land_dev_opex`

- Type: function
- Arguments: p_project_id bigint, p_calculation_basis character varying, p_unit_amount numeric
- Returns: numeric

```sql
CREATE OR REPLACE FUNCTION landscape.calculate_land_dev_opex(p_project_id bigint, p_calculation_basis character varying, p_unit_amount numeric)
 RETURNS numeric
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_unsold_parcels INTEGER;
  v_unsold_acres NUMERIC(12,4);
  v_total_parcels INTEGER;
  v_pct_unsold NUMERIC(7,4);
  v_calculated_amount NUMERIC(14,4);
  v_unit_amount NUMERIC(10,2) := COALESCE(p_unit_amount, 0);
BEGIN
  IF p_calculation_basis = 'FIXED_AMOUNT' THEN
    RETURN v_unit_amount;
  END IF;

  WITH parcel_status AS (
    SELECT
      p.parcel_id,
      p.acres_gross,
      COALESCE(ce.closing_date, NULL) AS actual_closing_date
    FROM landscape.tbl_parcel p
    LEFT JOIN LATERAL (
      SELECT MIN(ce.closing_date) AS closing_date
      FROM landscape.tbl_parcel_sale_event pse
      JOIN landscape.tbl_closing_event ce
        ON ce.sale_event_id = pse.sale_event_id
      WHERE pse.parcel_id = p.parcel_id
    ) ce ON TRUE
    WHERE p.project_id = p_project_id
  )
  SELECT COUNT(*) FILTER (
           WHERE actual_closing_date IS NULL OR actual_closing_date > CURRENT_DATE
         ),
         COALESCE(SUM(acres_gross) FILTER (
           WHERE actual_closing_date IS NULL OR actual_closing_date > CURRENT_DATE
         ), 0),
         COUNT(*)
  INTO v_unsold_parcels, v_unsold_acres, v_total_parcels
  FROM parcel_status;

  IF v_total_parcels > 0 THEN
    v_pct_unsold := (v_unsold_parcels::NUMERIC / v_total_parcels::NUMERIC) * 100;
  ELSE
    v_pct_unsold := 0;
  END IF;

  CASE p_calculation_basis
    WHEN 'PER_UNSOLD_PARCEL' THEN
      v_calculated_amount := v_unit_amount * COALESCE(v_unsold_parcels, 0);
    WHEN 'PER_UNSOLD_ACRE' THEN
      v_calculated_amount := v_unit_amount * COALESCE(v_unsold_acres, 0);
    WHEN 'PER_PCT_UNSOLD' THEN
      v_calculated_amount := v_unit_amount * (COALESCE(v_pct_unsold, 0) / 100);
    ELSE
      v_calculated_amount := 0;
  END CASE;

  RETURN COALESCE(v_calculated_amount, 0);
END;
$function$

```
### `calculate_opex_account_total`

- Type: function
- Arguments: p_project_id bigint, p_category_id integer
- Returns: numeric

```sql
CREATE OR REPLACE FUNCTION landscape.calculate_opex_account_total(p_project_id bigint, p_category_id integer)
 RETURNS numeric
 LANGUAGE plpgsql
AS $function$
DECLARE
    v_total NUMERIC := 0;
    v_is_calculated BOOLEAN;
BEGIN
    -- Check if this is a rollup parent
    SELECT is_calculated INTO v_is_calculated
    FROM landscape.core_unit_cost_category
    WHERE category_id = p_category_id;
    
    IF v_is_calculated THEN
        -- Sum children recursively
        SELECT COALESCE(SUM(
            landscape.calculate_opex_account_total(p_project_id, c.category_id)
        ), 0)
        INTO v_total
        FROM landscape.core_unit_cost_category c
        WHERE c.parent_id = p_category_id
          AND c.is_active = true;
    ELSE
        -- Get direct expense value
        SELECT COALESCE(SUM(oe.annual_amount), 0)
        INTO v_total
        FROM landscape.tbl_operating_expenses oe
        WHERE oe.project_id = p_project_id
          AND oe.category_id = p_category_id;
    END IF;
    
    RETURN v_total;
END;
$function$

```
### `can_delete_container`

- Type: function
- Arguments: p_container_id bigint
- Returns: TABLE(can_delete boolean, reason text, child_count integer, budget_count integer, actual_count integer)

```sql
CREATE OR REPLACE FUNCTION landscape.can_delete_container(p_container_id bigint)
 RETURNS TABLE(can_delete boolean, reason text, child_count integer, budget_count integer, actual_count integer)
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_child_count INT;
  v_budget_count INT;
  v_actual_count INT;
BEGIN
  -- Check for child containers
  SELECT COUNT(*) INTO v_child_count
  FROM landscape.tbl_container
  WHERE parent_container_id = p_container_id
    AND is_active = true;

  -- Check for budget items
  SELECT COUNT(*) INTO v_budget_count
  FROM landscape.core_fin_fact_budget
  WHERE container_id = p_container_id;

  -- Check for actual costs
  SELECT COUNT(*) INTO v_actual_count
  FROM landscape.core_fin_fact_actual
  WHERE container_id = p_container_id;

  -- Determine if safe to delete
  IF v_child_count > 0 THEN
    RETURN QUERY SELECT false, 'Has child containers'::TEXT, v_child_count, v_budget_count, v_actual_count;
  ELSIF v_budget_count > 0 THEN
    RETURN QUERY SELECT false, 'Has budget items'::TEXT, v_child_count, v_budget_count, v_actual_count;
  ELSIF v_actual_count > 0 THEN
    RETURN QUERY SELECT false, 'Has actual cost records'::TEXT, v_child_count, v_budget_count, v_actual_count;
  ELSE
    RETURN QUERY SELECT true, 'Safe to delete'::TEXT, v_child_count, v_budget_count, v_actual_count;
  END IF;
END;
$function$

```
### `category_has_tag`

- Type: function
- Arguments: category_tags jsonb, tag_name text
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.category_has_tag(category_tags jsonb, tag_name text)
 RETURNS boolean
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
BEGIN
    RETURN category_tags ? tag_name;
END;
$function$

```
### `check_category_completeness`

- Type: function
- Arguments: cat_id bigint
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.check_category_completeness(cat_id bigint)
 RETURNS boolean
 LANGUAGE plpgsql
AS $function$
DECLARE
  cat RECORD;
  is_complete BOOLEAN := TRUE;
BEGIN
  SELECT * INTO cat FROM landscape.core_budget_category WHERE category_id = cat_id;

  IF NOT FOUND THEN
    RETURN FALSE;
  END IF;

  -- Check optional fields that make a category "complete"
  IF cat.description IS NULL OR TRIM(cat.description) = '' THEN
    is_complete := FALSE;
  END IF;

  IF cat.icon IS NULL OR TRIM(cat.icon) = '' THEN
    is_complete := FALSE;
  END IF;

  IF cat.color IS NULL OR TRIM(cat.color) = '' THEN
    is_complete := FALSE;
  END IF;

  -- Level 2-4 categories need a valid parent at level-1
  IF cat.level > 1 THEN
    IF cat.parent_id IS NULL THEN
      is_complete := FALSE;
    ELSE
      -- Verify parent exists and is at correct level
      IF NOT EXISTS (
        SELECT 1 FROM landscape.core_budget_category parent
        WHERE parent.category_id = cat.parent_id
          AND parent.level = cat.level - 1
          AND parent.is_active = TRUE
      ) THEN
        is_complete := FALSE;
      END IF;
    END IF;
  END IF;

  RETURN is_complete;
END;
$function$

```
### `clone_scenario`

- Type: function
- Arguments: source_scenario_id integer, new_scenario_name character varying, new_scenario_type character varying DEFAULT 'custom'::character varying
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.clone_scenario(source_scenario_id integer, new_scenario_name character varying, new_scenario_type character varying DEFAULT 'custom'::character varying)
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
DECLARE
  new_scenario_id INT;
  source_project_id INT;
BEGIN
  -- Get source project
  SELECT project_id INTO source_project_id
  FROM tbl_scenario
  WHERE scenario_id = source_scenario_id;

  IF source_project_id IS NULL THEN
    RAISE EXCEPTION 'Source scenario % not found', source_scenario_id;
  END IF;

  -- Create new scenario
  INSERT INTO tbl_scenario (
    project_id, scenario_name, scenario_type,
    scenario_code, description, display_order,
    variance_method, revenue_variance_pct, cost_variance_pct,
    absorption_variance_pct, start_date_offset_months,
    cloned_from_scenario_id
  )
  SELECT
    project_id,
    new_scenario_name,
    new_scenario_type,
    'PROJ' || project_id || '-' || UPPER(LEFT(new_scenario_name, 10)) || '-' || EXTRACT(EPOCH FROM NOW())::INT,
    'Cloned from: ' || scenario_name,
    (SELECT COALESCE(MAX(display_order), 0) + 1 FROM tbl_scenario WHERE project_id = source_project_id),
    variance_method,
    revenue_variance_pct,
    cost_variance_pct,
    absorption_variance_pct,
    start_date_offset_months,
    source_scenario_id
  FROM tbl_scenario
  WHERE scenario_id = source_scenario_id
  RETURNING scenario_id INTO new_scenario_id;

  -- Clone budget items
  INSERT INTO core_fin_fact_budget (
    project_id, container_id, category_id, subcategory_id,
    line_item, amount, notes, scenario_id
  )
  SELECT
    project_id, container_id, category_id, subcategory_id,
    line_item, amount, notes, new_scenario_id
  FROM core_fin_fact_budget
  WHERE scenario_id = source_scenario_id;

  -- Clone revenue items
  INSERT INTO tbl_revenue_item (
    project_id, container_id, revenue_type, unit_price,
    total_units, notes, scenario_id
  )
  SELECT
    project_id, container_id, revenue_type, unit_price,
    total_units, notes, new_scenario_id
  FROM tbl_revenue_item
  WHERE scenario_id = source_scenario_id;

  -- Clone absorption schedules
  INSERT INTO tbl_absorption_schedule (
    project_id, container_id, period_start, period_end,
    units_absorbed, notes, scenario_id
  )
  SELECT
    project_id, container_id, period_start, period_end,
    units_absorbed, notes, new_scenario_id
  FROM tbl_absorption_schedule
  WHERE scenario_id = source_scenario_id;

  -- Clone finance structures
  INSERT INTO tbl_finance_structure (
    project_id, structure_code, structure_name, structure_type,
    total_budget_amount, allocation_method, scenario_id
  )
  SELECT
    project_id, structure_code, structure_name, structure_type,
    total_budget_amount, allocation_method, new_scenario_id
  FROM tbl_finance_structure
  WHERE scenario_id = source_scenario_id;

  -- Clone cost allocations
  INSERT INTO tbl_cost_allocation (
    project_id, structure_id, container_id,
    allocation_percentage, notes, scenario_id
  )
  SELECT
    project_id, structure_id, container_id,
    allocation_percentage, notes, new_scenario_id
  FROM tbl_cost_allocation
  WHERE scenario_id = source_scenario_id;

  RETURN new_scenario_id;
END;
$function$

```
### `contains_2d`

- Type: function
- Arguments: geometry, box2df
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.contains_2d(geometry, box2df)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 1
AS $function$SELECT $2 OPERATOR(landscape.@) $1;$function$

```
### `contains_2d`

- Type: function
- Arguments: box2df, box2df
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.contains_2d(box2df, box2df)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contains_box2df_box2df_2d$function$

```
### `contains_2d`

- Type: function
- Arguments: box2df, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.contains_2d(box2df, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contains_box2df_geom_2d$function$

```
### `cosine_distance`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.cosine_distance(sparsevec, sparsevec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_cosine_distance$function$

```
### `cosine_distance`

- Type: function
- Arguments: halfvec, halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.cosine_distance(halfvec, halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_cosine_distance$function$

```
### `cosine_distance`

- Type: function
- Arguments: vector, vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.cosine_distance(vector, vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$cosine_distance$function$

```
### `create_category_code`

- Type: function
- Arguments: p_scope text, p_category text, p_detail text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.create_category_code(p_scope text, p_category text, p_detail text)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
DECLARE
    v_scope_abbr TEXT;
    v_cat_abbr TEXT;
    v_detail_abbr TEXT;
BEGIN
    -- Abbreviate scope
    v_scope_abbr := CASE
        WHEN p_scope = 'Acquisition' THEN 'ACQ'
        WHEN p_scope = 'Stage 1' THEN 'STG1'
        WHEN p_scope = 'Stage 2' THEN 'STG2'
        WHEN p_scope = 'Stage 3' THEN 'STG3'
        WHEN p_scope = 'Project' THEN 'PRJ'
        ELSE UPPER(LEFT(p_scope, 3))
    END;

    -- Abbreviate category
    v_cat_abbr := CASE
        WHEN p_category = 'Diligence' THEN 'DUE'
        WHEN p_category = 'Purchase' THEN 'PUR'
        WHEN p_category = 'Other' THEN 'OTH'
        WHEN p_category = 'Entitlements' THEN 'ENT'
        WHEN p_category = 'Engineering' THEN 'ENG'
        WHEN p_category = 'Offsites' THEN 'OFF'
        WHEN p_category = 'Onsites' THEN 'ONS'
        WHEN p_category = 'Subdivision' THEN 'SUB'
        WHEN p_category = 'Exactions' THEN 'EXA'
        WHEN p_category = 'Management Fees' THEN 'MGT'
        WHEN p_category = 'Capital Cost / Interest' THEN 'CAP'
        WHEN p_category = 'Overhead' THEN 'OVH'
        ELSE UPPER(LEFT(p_category, 3))
    END;

    -- Create detail abbreviation (first 3 chars of first word)
    v_detail_abbr := UPPER(LEFT(SPLIT_PART(p_detail, ' ', 1), 3));

    RETURN 'USE-' || v_scope_abbr || '-' || v_cat_abbr || '-' || v_detail_abbr;
END;
$function$

```
### `crypt`

- Type: function
- Arguments: text, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.crypt(text, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_crypt$function$

```
### `dearmor`

- Type: function
- Arguments: text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.dearmor(text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_dearmor$function$

```
### `decrypt`

- Type: function
- Arguments: bytea, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.decrypt(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_decrypt$function$

```
### `decrypt_iv`

- Type: function
- Arguments: bytea, bytea, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.decrypt_iv(bytea, bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_decrypt_iv$function$

```
### `delete_budget_item`

- Type: function
- Arguments: p_fact_id bigint
- Returns: TABLE(success boolean, message text)

```sql
CREATE OR REPLACE FUNCTION landscape.delete_budget_item(p_fact_id bigint)
 RETURNS TABLE(success boolean, message text)
 LANGUAGE plpgsql
AS $function$
DECLARE
    v_has_actuals BOOLEAN;
    v_is_committed BOOLEAN;
BEGIN
    -- Check business rules
    SELECT 
        EXISTS(SELECT 1 FROM landscape.tbl_budget_timing WHERE fact_id = p_fact_id),
        is_committed
    INTO v_has_actuals, v_is_committed
    FROM landscape.core_fin_fact_budget
    WHERE fact_id = p_fact_id;
    
    -- Validation: Cannot delete if committed or has actuals
    IF v_is_committed THEN
        RETURN QUERY SELECT false, 'Cannot delete committed budget item';
        RETURN;
    END IF;
    
    IF v_has_actuals THEN
        RETURN QUERY SELECT false, 'Cannot delete budget item with actual transactions';
        RETURN;
    END IF;
    
    -- Safe to delete
    DELETE FROM landscape.core_fin_fact_budget WHERE fact_id = p_fact_id;
    
    RETURN QUERY SELECT true, 'Budget item deleted successfully';
END;
$function$

```
### `digest`

- Type: function
- Arguments: bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.digest(bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_digest$function$

```
### `digest`

- Type: function
- Arguments: text, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.digest(text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_digest$function$

```
### `dropgeometrycolumn`

- Type: function
- Arguments: schema_name character varying, table_name character varying, column_name character varying
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.dropgeometrycolumn(schema_name character varying, table_name character varying, column_name character varying)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	ret text;
BEGIN
	SELECT landscape.DropGeometryColumn('',$1,$2,$3) into ret;
	RETURN ret;
END;
$function$

```
### `dropgeometrycolumn`

- Type: function
- Arguments: table_name character varying, column_name character varying
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.dropgeometrycolumn(table_name character varying, column_name character varying)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	ret text;
BEGIN
	SELECT landscape.DropGeometryColumn('','',$1,$2) into ret;
	RETURN ret;
END;
$function$

```
### `dropgeometrycolumn`

- Type: function
- Arguments: catalog_name character varying, schema_name character varying, table_name character varying, column_name character varying
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.dropgeometrycolumn(catalog_name character varying, schema_name character varying, table_name character varying, column_name character varying)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	myrec RECORD;
	okay boolean;
	real_schema name;

BEGIN

	-- Find, check or fix schema_name
	IF ( schema_name != '' ) THEN
		okay = false;

		FOR myrec IN SELECT nspname FROM pg_namespace WHERE text(nspname) = schema_name LOOP
			okay := true;
		END LOOP;

		IF ( okay <>  true ) THEN
			RAISE NOTICE 'Invalid schema name - using current_schema()';
			SELECT current_schema() into real_schema;
		ELSE
			real_schema = schema_name;
		END IF;
	ELSE
		SELECT current_schema() into real_schema;
	END IF;

	-- Find out if the column is in the geometry_columns table
	okay = false;
	FOR myrec IN SELECT * from landscape.geometry_columns where f_table_schema = text(real_schema) and f_table_name = table_name and f_geometry_column = column_name LOOP
		okay := true;
	END LOOP;
	IF (okay <> true) THEN
		RAISE EXCEPTION 'column not found in geometry_columns table';
		RETURN false;
	END IF;

	-- Remove table column
	EXECUTE 'ALTER TABLE ' || quote_ident(real_schema) || '.' ||
		quote_ident(table_name) || ' DROP COLUMN ' ||
		quote_ident(column_name);

	RETURN real_schema || '.' || table_name || '.' || column_name ||' effectively removed.';

END;
$function$

```
### `dropgeometrytable`

- Type: function
- Arguments: catalog_name character varying, schema_name character varying, table_name character varying
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.dropgeometrytable(catalog_name character varying, schema_name character varying, table_name character varying)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	real_schema name;

BEGIN

	IF ( schema_name = '' ) THEN
		SELECT current_schema() into real_schema;
	ELSE
		real_schema = schema_name;
	END IF;

	-- TODO: Should we warn if table doesn't exist probably instead just saying dropped
	-- Remove table
	EXECUTE 'DROP TABLE IF EXISTS '
		|| quote_ident(real_schema) || '.' ||
		quote_ident(table_name) || ' RESTRICT';

	RETURN
		real_schema || '.' ||
		table_name ||' dropped.';

END;
$function$

```
### `dropgeometrytable`

- Type: function
- Arguments: table_name character varying
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.dropgeometrytable(table_name character varying)
 RETURNS text
 LANGUAGE sql
 STRICT
AS $function$ SELECT landscape.DropGeometryTable('','',$1) $function$

```
### `dropgeometrytable`

- Type: function
- Arguments: schema_name character varying, table_name character varying
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.dropgeometrytable(schema_name character varying, table_name character varying)
 RETURNS text
 LANGUAGE sql
 STRICT
AS $function$ SELECT landscape.DropGeometryTable('',$1,$2) $function$

```
### `encrypt`

- Type: function
- Arguments: bytea, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.encrypt(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_encrypt$function$

```
### `encrypt_iv`

- Type: function
- Arguments: bytea, bytea, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.encrypt_iv(bytea, bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_encrypt_iv$function$

```
### `equals`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.equals(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_Equals$function$

```
### `expire_pending_mutations`

- Type: function
- Arguments: (none)
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.expire_pending_mutations()
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
DECLARE
    expired_count INTEGER;
BEGIN
    WITH expired AS (
        UPDATE landscape.pending_mutations
        SET status = 'expired', resolved_at = NOW()
        WHERE status = 'pending' AND expires_at < NOW()
        RETURNING mutation_id, project_id, mutation_type, table_name, field_name, reason
    )
    INSERT INTO landscape.mutation_audit_log
        (mutation_id, project_id, mutation_type, table_name, field_name, action, reason)
    SELECT
        mutation_id, project_id, mutation_type, table_name, field_name,
        'expired', COALESCE(reason, 'Auto-expired after 1 hour')
    FROM expired;

    GET DIAGNOSTICS expired_count = ROW_COUNT;
    RETURN expired_count;
END;
$function$

```
### `find_srid`

- Type: function
- Arguments: character varying, character varying, character varying
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.find_srid(character varying, character varying, character varying)
 RETURNS integer
 LANGUAGE plpgsql
 STABLE PARALLEL SAFE STRICT
AS $function$
DECLARE
	schem varchar =  $1;
	tabl varchar = $2;
	sr int4;
BEGIN
-- if the table contains a . and the schema is empty
-- split the table into a schema and a table
-- otherwise drop through to default behavior
	IF ( schem = '' and strpos(tabl,'.') > 0 ) THEN
	 schem = substr(tabl,1,strpos(tabl,'.')-1);
	 tabl = substr(tabl,length(schem)+2);
	END IF;

	select SRID into sr from landscape.geometry_columns where (f_table_schema = schem or schem = '') and f_table_name = tabl and f_geometry_column = $3;
	IF NOT FOUND THEN
	   RAISE EXCEPTION 'find_srid() - could not find the corresponding SRID - is the geometry registered in the GEOMETRY_COLUMNS table?  Is there an uppercase/lowercase mismatch?';
	END IF;
	return sr;
END;
$function$

```
### `fn_hbu_updated_at`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.fn_hbu_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `fn_prop_attr_def_updated_at`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.fn_prop_attr_def_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `gen_random_bytes`

- Type: function
- Arguments: integer
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.gen_random_bytes(integer)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_random_bytes$function$

```
### `gen_random_uuid`

- Type: function
- Arguments: (none)
- Returns: uuid

```sql
CREATE OR REPLACE FUNCTION landscape.gen_random_uuid()
 RETURNS uuid
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/pgcrypto', $function$pg_random_uuid$function$

```
### `gen_salt`

- Type: function
- Arguments: text, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.gen_salt(text, integer)
 RETURNS text
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_gen_salt_rounds$function$

```
### `gen_salt`

- Type: function
- Arguments: text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.gen_salt(text)
 RETURNS text
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_gen_salt$function$

```
### `generate_container_code`

- Type: function
- Arguments: p_project_id bigint, p_container_level integer, p_parent_container_id bigint DEFAULT NULL::bigint
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.generate_container_code(p_project_id bigint, p_container_level integer, p_parent_container_id bigint DEFAULT NULL::bigint)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_prefix TEXT;
  v_max_num INT;
  v_next_num INT;
BEGIN
  -- Determine prefix based on level
  CASE p_container_level
    WHEN 1 THEN v_prefix := 'AREA-';
    WHEN 2 THEN v_prefix := 'PHASE-';
    WHEN 3 THEN v_prefix := 'UNIT-';
    ELSE v_prefix := 'CONT-';
  END CASE;

  -- Find max number for this prefix in project
  SELECT COALESCE(
    MAX(
      CASE
        WHEN container_code ~ ('^' || v_prefix || '[0-9]+$')
        THEN NULLIF(regexp_replace(container_code, '[^0-9]', '', 'g'), '')::INT
        ELSE NULL
      END
    ), 0
  ) INTO v_max_num
  FROM landscape.tbl_container
  WHERE project_id = p_project_id
    AND container_level = p_container_level;

  v_next_num := v_max_num + 1;

  RETURN v_prefix || v_next_num;
END;
$function$

```
### `geog_brin_inclusion_add_value`

- Type: function
- Arguments: internal, internal, internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geog_brin_inclusion_add_value(internal, internal, internal, internal)
 RETURNS boolean
 LANGUAGE c
AS '$libdir/postgis-3', $function$geog_brin_inclusion_add_value$function$

```
### `geography`

- Type: function
- Arguments: geometry
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.geography(geometry)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_from_geometry$function$

```
### `geography`

- Type: function
- Arguments: geography, integer, boolean
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.geography(geography, integer, boolean)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_enforce_typmod$function$

```
### `geography`

- Type: function
- Arguments: bytea
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.geography(bytea)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_from_binary$function$

```
### `geography_analyze`

- Type: function
- Arguments: internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_analyze(internal)
 RETURNS boolean
 LANGUAGE c
 STRICT
AS '$libdir/postgis-3', $function$gserialized_analyze_nd$function$

```
### `geography_cmp`

- Type: function
- Arguments: geography, geography
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.geography_cmp(geography, geography)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_cmp$function$

```
### `geography_distance_knn`

- Type: function
- Arguments: geography, geography
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geography_distance_knn(geography, geography)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 100
AS '$libdir/postgis-3', $function$geography_distance_knn$function$

```
### `geography_eq`

- Type: function
- Arguments: geography, geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_eq(geography, geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_eq$function$

```
### `geography_ge`

- Type: function
- Arguments: geography, geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_ge(geography, geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_ge$function$

```
### `geography_gist_compress`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_compress(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_compress$function$

```
### `geography_gist_consistent`

- Type: function
- Arguments: internal, geography, integer
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_consistent(internal, geography, integer)
 RETURNS boolean
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_consistent$function$

```
### `geography_gist_decompress`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_decompress(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_decompress$function$

```
### `geography_gist_distance`

- Type: function
- Arguments: internal, geography, integer
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_distance(internal, geography, integer)
 RETURNS double precision
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_geog_distance$function$

```
### `geography_gist_penalty`

- Type: function
- Arguments: internal, internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_penalty(internal, internal, internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_penalty$function$

```
### `geography_gist_picksplit`

- Type: function
- Arguments: internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_picksplit(internal, internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_picksplit$function$

```
### `geography_gist_same`

- Type: function
- Arguments: box2d, box2d, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_same(box2d, box2d, internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_same$function$

```
### `geography_gist_union`

- Type: function
- Arguments: bytea, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gist_union(bytea, internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/postgis-3', $function$gserialized_gist_union$function$

```
### `geography_gt`

- Type: function
- Arguments: geography, geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_gt(geography, geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_gt$function$

```
### `geography_in`

- Type: function
- Arguments: cstring, oid, integer
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.geography_in(cstring, oid, integer)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_in$function$

```
### `geography_le`

- Type: function
- Arguments: geography, geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_le(geography, geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_le$function$

```
### `geography_lt`

- Type: function
- Arguments: geography, geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_lt(geography, geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_lt$function$

```
### `geography_out`

- Type: function
- Arguments: geography
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.geography_out(geography)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_out$function$

```
### `geography_overlaps`

- Type: function
- Arguments: geography, geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_overlaps(geography, geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overlaps$function$

```
### `geography_recv`

- Type: function
- Arguments: internal, oid, integer
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.geography_recv(internal, oid, integer)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_recv$function$

```
### `geography_send`

- Type: function
- Arguments: geography
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.geography_send(geography)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_send$function$

```
### `geography_spgist_choose_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geography_spgist_choose_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_choose_nd$function$

```
### `geography_spgist_compress_nd`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geography_spgist_compress_nd(internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_compress_nd$function$

```
### `geography_spgist_config_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geography_spgist_config_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_config_nd$function$

```
### `geography_spgist_inner_consistent_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geography_spgist_inner_consistent_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_inner_consistent_nd$function$

```
### `geography_spgist_leaf_consistent_nd`

- Type: function
- Arguments: internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geography_spgist_leaf_consistent_nd(internal, internal)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_leaf_consistent_nd$function$

```
### `geography_spgist_picksplit_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geography_spgist_picksplit_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_picksplit_nd$function$

```
### `geography_typmod_in`

- Type: function
- Arguments: cstring[]
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.geography_typmod_in(cstring[])
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_typmod_in$function$

```
### `geography_typmod_out`

- Type: function
- Arguments: integer
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.geography_typmod_out(integer)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$postgis_typmod_out$function$

```
### `geom2d_brin_inclusion_add_value`

- Type: function
- Arguments: internal, internal, internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geom2d_brin_inclusion_add_value(internal, internal, internal, internal)
 RETURNS boolean
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$geom2d_brin_inclusion_add_value$function$

```
### `geom3d_brin_inclusion_add_value`

- Type: function
- Arguments: internal, internal, internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geom3d_brin_inclusion_add_value(internal, internal, internal, internal)
 RETURNS boolean
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$geom3d_brin_inclusion_add_value$function$

```
### `geom4d_brin_inclusion_add_value`

- Type: function
- Arguments: internal, internal, internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geom4d_brin_inclusion_add_value(internal, internal, internal, internal)
 RETURNS boolean
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$geom4d_brin_inclusion_add_value$function$

```
### `geometry`

- Type: function
- Arguments: box2d
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(box2d)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX2D_to_LWGEOM$function$

```
### `geometry`

- Type: function
- Arguments: path
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(path)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$path_to_geometry$function$

```
### `geometry`

- Type: function
- Arguments: point
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(point)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$point_to_geometry$function$

```
### `geometry`

- Type: function
- Arguments: geometry, integer, boolean
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(geometry, integer, boolean)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geometry_enforce_typmod$function$

```
### `geometry`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(bytea)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_from_bytea$function$

```
### `geometry`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$parse_WKT_lwgeom$function$

```
### `geometry`

- Type: function
- Arguments: box3d
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(box3d)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX3D_to_LWGEOM$function$

```
### `geometry`

- Type: function
- Arguments: geography
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(geography)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geometry_from_geography$function$

```
### `geometry`

- Type: function
- Arguments: polygon
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry(polygon)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$polygon_to_geometry$function$

```
### `geometry_above`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_above(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_above_2d$function$

```
### `geometry_analyze`

- Type: function
- Arguments: internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_analyze(internal)
 RETURNS boolean
 LANGUAGE c
 STRICT
AS '$libdir/postgis-3', $function$gserialized_analyze_nd$function$

```
### `geometry_below`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_below(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_below_2d$function$

```
### `geometry_cmp`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_cmp(geom1 geometry, geom2 geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_cmp$function$

```
### `geometry_contained_3d`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_contained_3d(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contained_3d$function$

```
### `geometry_contains`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_contains(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contains_2d$function$

```
### `geometry_contains_3d`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_contains_3d(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contains_3d$function$

```
### `geometry_contains_nd`

- Type: function
- Arguments: geometry, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_contains_nd(geometry, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contains$function$

```
### `geometry_distance_box`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_distance_box(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_distance_box_2d$function$

```
### `geometry_distance_centroid`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_distance_centroid(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_Distance$function$

```
### `geometry_distance_centroid_nd`

- Type: function
- Arguments: geometry, geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_distance_centroid_nd(geometry, geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_distance_nd$function$

```
### `geometry_distance_cpa`

- Type: function
- Arguments: geometry, geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_distance_cpa(geometry, geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_DistanceCPA$function$

```
### `geometry_eq`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_eq(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_eq$function$

```
### `geometry_ge`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_ge(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_ge$function$

```
### `geometry_gist_compress_2d`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_compress_2d(internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_compress_2d$function$

```
### `geometry_gist_compress_nd`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_compress_nd(internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_compress$function$

```
### `geometry_gist_consistent_2d`

- Type: function
- Arguments: internal, geometry, integer
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_consistent_2d(internal, geometry, integer)
 RETURNS boolean
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_consistent_2d$function$

```
### `geometry_gist_consistent_nd`

- Type: function
- Arguments: internal, geometry, integer
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_consistent_nd(internal, geometry, integer)
 RETURNS boolean
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_consistent$function$

```
### `geometry_gist_decompress_2d`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_decompress_2d(internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_decompress_2d$function$

```
### `geometry_gist_decompress_nd`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_decompress_nd(internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_decompress$function$

```
### `geometry_gist_distance_2d`

- Type: function
- Arguments: internal, geometry, integer
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_distance_2d(internal, geometry, integer)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_distance_2d$function$

```
### `geometry_gist_distance_nd`

- Type: function
- Arguments: internal, geometry, integer
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_distance_nd(internal, geometry, integer)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_distance$function$

```
### `geometry_gist_penalty_2d`

- Type: function
- Arguments: internal, internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_penalty_2d(internal, internal, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_penalty_2d$function$

```
### `geometry_gist_penalty_nd`

- Type: function
- Arguments: internal, internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_penalty_nd(internal, internal, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_penalty$function$

```
### `geometry_gist_picksplit_2d`

- Type: function
- Arguments: internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_picksplit_2d(internal, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_picksplit_2d$function$

```
### `geometry_gist_picksplit_nd`

- Type: function
- Arguments: internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_picksplit_nd(internal, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_picksplit$function$

```
### `geometry_gist_same_2d`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_same_2d(geom1 geometry, geom2 geometry, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_same_2d$function$

```
### `geometry_gist_same_nd`

- Type: function
- Arguments: geometry, geometry, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_same_nd(geometry, geometry, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_same$function$

```
### `geometry_gist_sortsupport_2d`

- Type: function
- Arguments: internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_sortsupport_2d(internal)
 RETURNS void
 LANGUAGE c
 STRICT
AS '$libdir/postgis-3', $function$gserialized_gist_sortsupport_2d$function$

```
### `geometry_gist_union_2d`

- Type: function
- Arguments: bytea, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_union_2d(bytea, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_union_2d$function$

```
### `geometry_gist_union_nd`

- Type: function
- Arguments: bytea, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gist_union_nd(bytea, internal)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_union$function$

```
### `geometry_gt`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_gt(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_gt$function$

```
### `geometry_hash`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_hash(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_hash$function$

```
### `geometry_in`

- Type: function
- Arguments: cstring
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_in(cstring)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_in$function$

```
### `geometry_le`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_le(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_le$function$

```
### `geometry_left`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_left(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_left_2d$function$

```
### `geometry_lt`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_lt(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_lt$function$

```
### `geometry_neq`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_neq(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_neq$function$

```
### `geometry_out`

- Type: function
- Arguments: geometry
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_out(geometry)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_out$function$

```
### `geometry_overabove`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_overabove(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overabove_2d$function$

```
### `geometry_overbelow`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_overbelow(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overbelow_2d$function$

```
### `geometry_overlaps`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_overlaps(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overlaps_2d$function$

```
### `geometry_overlaps_3d`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_overlaps_3d(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overlaps_3d$function$

```
### `geometry_overlaps_nd`

- Type: function
- Arguments: geometry, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_overlaps_nd(geometry, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overlaps$function$

```
### `geometry_overleft`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_overleft(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overleft_2d$function$

```
### `geometry_overright`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_overright(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overright_2d$function$

```
### `geometry_recv`

- Type: function
- Arguments: internal
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_recv(internal)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_recv$function$

```
### `geometry_right`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_right(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_right_2d$function$

```
### `geometry_same`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_same(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_same_2d$function$

```
### `geometry_same_3d`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_same_3d(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_same_3d$function$

```
### `geometry_same_nd`

- Type: function
- Arguments: geometry, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_same_nd(geometry, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_same$function$

```
### `geometry_send`

- Type: function
- Arguments: geometry
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_send(geometry)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_send$function$

```
### `geometry_sortsupport`

- Type: function
- Arguments: internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_sortsupport(internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$lwgeom_sortsupport$function$

```
### `geometry_spgist_choose_2d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_choose_2d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_choose_2d$function$

```
### `geometry_spgist_choose_3d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_choose_3d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_choose_3d$function$

```
### `geometry_spgist_choose_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_choose_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_choose_nd$function$

```
### `geometry_spgist_compress_2d`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_compress_2d(internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_compress_2d$function$

```
### `geometry_spgist_compress_3d`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_compress_3d(internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_compress_3d$function$

```
### `geometry_spgist_compress_nd`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_compress_nd(internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_compress_nd$function$

```
### `geometry_spgist_config_2d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_config_2d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_config_2d$function$

```
### `geometry_spgist_config_3d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_config_3d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_config_3d$function$

```
### `geometry_spgist_config_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_config_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_config_nd$function$

```
### `geometry_spgist_inner_consistent_2d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_inner_consistent_2d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_inner_consistent_2d$function$

```
### `geometry_spgist_inner_consistent_3d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_inner_consistent_3d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_inner_consistent_3d$function$

```
### `geometry_spgist_inner_consistent_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_inner_consistent_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_inner_consistent_nd$function$

```
### `geometry_spgist_leaf_consistent_2d`

- Type: function
- Arguments: internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_leaf_consistent_2d(internal, internal)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_leaf_consistent_2d$function$

```
### `geometry_spgist_leaf_consistent_3d`

- Type: function
- Arguments: internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_leaf_consistent_3d(internal, internal)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_leaf_consistent_3d$function$

```
### `geometry_spgist_leaf_consistent_nd`

- Type: function
- Arguments: internal, internal
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_leaf_consistent_nd(internal, internal)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_leaf_consistent_nd$function$

```
### `geometry_spgist_picksplit_2d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_picksplit_2d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_picksplit_2d$function$

```
### `geometry_spgist_picksplit_3d`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_picksplit_3d(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_picksplit_3d$function$

```
### `geometry_spgist_picksplit_nd`

- Type: function
- Arguments: internal, internal
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_spgist_picksplit_nd(internal, internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_spgist_picksplit_nd$function$

```
### `geometry_typmod_in`

- Type: function
- Arguments: cstring[]
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_typmod_in(cstring[])
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geometry_typmod_in$function$

```
### `geometry_typmod_out`

- Type: function
- Arguments: integer
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_typmod_out(integer)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$postgis_typmod_out$function$

```
### `geometry_within`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_within(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_within_2d$function$

```
### `geometry_within_nd`

- Type: function
- Arguments: geometry, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.geometry_within_nd(geometry, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_within$function$

```
### `geometrytype`

- Type: function
- Arguments: geography
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.geometrytype(geography)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_getTYPE$function$

```
### `geometrytype`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.geometrytype(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_getTYPE$function$

```
### `geomfromewkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geomfromewkb(bytea)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOMFromEWKB$function$

```
### `geomfromewkt`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.geomfromewkt(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$parse_WKT_lwgeom$function$

```
### `get_assertion_conflicts`

- Type: function
- Arguments: p_project_id integer, p_metric_key text
- Returns: TABLE(subject_type character varying, subject_ref text, value_num numeric, value_text text, doc_id text, as_of_date date, confidence numeric)

```sql
CREATE OR REPLACE FUNCTION landscape.get_assertion_conflicts(p_project_id integer, p_metric_key text)
 RETURNS TABLE(subject_type character varying, subject_ref text, value_num numeric, value_text text, doc_id text, as_of_date date, confidence numeric)
 LANGUAGE plpgsql
AS $function$
BEGIN
    RETURN QUERY
    SELECT
        a.subject_type,
        a.subject_ref,
        a.value_num,
        a.value_text,
        a.doc_id,
        a.as_of_date,
        a.confidence
    FROM landscape.dms_assertion a
    WHERE a.project_id = p_project_id
        AND a.metric_key = p_metric_key
    ORDER BY a.subject_ref, a.as_of_date DESC NULLS LAST;
END;
$function$

```
### `get_categories_by_tag`

- Type: function
- Arguments: p_tag_name text
- Returns: TABLE(category_id integer, category_name character varying, lifecycle_stage character varying, tags jsonb, sort_order integer)

```sql
CREATE OR REPLACE FUNCTION landscape.get_categories_by_tag(p_tag_name text)
 RETURNS TABLE(category_id integer, category_name character varying, lifecycle_stage character varying, tags jsonb, sort_order integer)
 LANGUAGE plpgsql
AS $function$
BEGIN
    RETURN QUERY
    SELECT
        c.category_id,
        c.category_name,
        c.lifecycle_stage,
        c.tags,
        c.sort_order
    FROM landscape.core_unit_cost_category c
    WHERE c.tags ? p_tag_name
      AND c.is_active = TRUE
    ORDER BY c.lifecycle_stage, c.sort_order, c.category_name;
END;
$function$

```
### `get_category_stages`

- Type: function
- Arguments: p_category_id integer
- Returns: text[]

```sql
CREATE OR REPLACE FUNCTION landscape.get_category_stages(p_category_id integer)
 RETURNS text[]
 LANGUAGE plpgsql
AS $function$
BEGIN
    RETURN ARRAY(
        SELECT activity  -- Fixed: was incorrectly 'lifecycle_stage'
        FROM landscape.core_category_lifecycle_stages
        WHERE category_id = p_category_id
        ORDER BY activity
    );
END;
$function$

```
### `get_date_from_period`

- Type: function
- Arguments: p_project_id bigint, p_period integer
- Returns: date

```sql
CREATE OR REPLACE FUNCTION landscape.get_date_from_period(p_project_id bigint, p_period integer)
 RETURNS date
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
  v_start_date DATE;
  v_period_type VARCHAR(50);
  v_months_to_add INTEGER;
BEGIN
  -- Get project start date and period type
  SELECT analysis_start_date, period_type
  INTO v_start_date, v_period_type
  FROM landscape.tbl_project
  WHERE project_id = p_project_id;

  IF v_start_date IS NULL THEN
    RETURN NULL;
  END IF;

  -- Calculate months to add
  CASE v_period_type
    WHEN 'MONTHLY' THEN
      v_months_to_add := p_period;
    WHEN 'QUARTERLY' THEN
      v_months_to_add := p_period * 3;
    WHEN 'ANNUAL' THEN
      v_months_to_add := p_period * 12;
    ELSE
      v_months_to_add := p_period;
  END CASE;

  RETURN v_start_date + (v_months_to_add || ' months')::INTERVAL;
END;
$function$

```
### `get_dcf_property_type`

- Type: function
- Arguments: p_project_type_code character varying
- Returns: character varying

```sql
CREATE OR REPLACE FUNCTION landscape.get_dcf_property_type(p_project_type_code character varying)
 RETURNS character varying
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
BEGIN
    IF p_project_type_code = 'LAND' THEN
        RETURN 'land_dev';
    ELSE
        RETURN 'cre';
    END IF;
END;
$function$

```
### `get_incomplete_categories_for_project`

- Type: function
- Arguments: proj_id bigint
- Returns: TABLE(category_id bigint, category_name character varying, category_code character varying, category_level integer, parent_name character varying, usage_count bigint, missing_fields character varying[], created_at timestamp with time zone, last_reminded_at timestamp with time zone, days_since_created integer)

```sql
CREATE OR REPLACE FUNCTION landscape.get_incomplete_categories_for_project(proj_id bigint)
 RETURNS TABLE(category_id bigint, category_name character varying, category_code character varying, category_level integer, parent_name character varying, usage_count bigint, missing_fields character varying[], created_at timestamp with time zone, last_reminded_at timestamp with time zone, days_since_created integer)
 LANGUAGE plpgsql
AS $function$
BEGIN
  RETURN QUERY
  WITH category_usage AS (
    -- Count how many times each category is used in budget facts for this project
    SELECT
      cat_ref AS cat_id,
      COUNT(*) as use_count
    FROM (
      SELECT UNNEST(ARRAY[
        fb.category_l1_id,
        fb.category_l2_id,
        fb.category_l3_id,
        fb.category_l4_id
      ]) AS cat_ref
      FROM landscape.core_fin_fact_budget fb
      WHERE fb.project_id = proj_id
    ) category_refs
    WHERE cat_ref IS NOT NULL
    GROUP BY cat_ref
  )
  SELECT
    c.category_id,
    c.name::VARCHAR AS category_name,
    c.code::VARCHAR AS category_code,
    c.level AS category_level,
    COALESCE(parent.name, 'No Parent')::VARCHAR AS parent_name,
    COALESCE(cu.use_count, 0) AS usage_count,
    COALESCE(
      ARRAY_AGG(DISTINCT ccs.missing_field ORDER BY ccs.missing_field)
      FILTER (WHERE ccs.missing_field IS NOT NULL),
      ARRAY[]::VARCHAR[]
    ) AS missing_fields,
    c.created_at,
    c.last_reminded_at,
    EXTRACT(DAY FROM CURRENT_TIMESTAMP - c.created_at)::INTEGER AS days_since_created
  FROM landscape.core_budget_category c
  LEFT JOIN landscape.core_budget_category parent ON parent.category_id = c.parent_id
  LEFT JOIN category_usage cu ON cu.cat_id = c.category_id
  LEFT JOIN landscape.core_category_completion_status ccs ON ccs.category_id = c.category_id
  WHERE c.is_incomplete = TRUE
    AND c.is_active = TRUE
    AND (c.reminder_dismissed_at IS NULL
         OR c.reminder_dismissed_at < CURRENT_TIMESTAMP - INTERVAL '7 days')
    AND COALESCE(cu.use_count, 0) > 0  -- Only show categories actually used in budget
  GROUP BY
    c.category_id,
    c.name,
    c.code,
    c.level,
    c.created_at,
    c.last_reminded_at,
    cu.use_count,
    parent.name
  ORDER BY
    COALESCE(cu.use_count, 0) DESC,  -- Most-used first
    c.created_at DESC;                -- Then newest first
END;
$function$

```
### `get_latest_assertion`

- Type: function
- Arguments: p_project_id integer, p_subject_type character varying, p_subject_ref text, p_metric_key text
- Returns: TABLE(value_num numeric, value_text text, units text, confidence numeric, doc_id text, as_of_date date)

```sql
CREATE OR REPLACE FUNCTION landscape.get_latest_assertion(p_project_id integer, p_subject_type character varying, p_subject_ref text, p_metric_key text)
 RETURNS TABLE(value_num numeric, value_text text, units text, confidence numeric, doc_id text, as_of_date date)
 LANGUAGE plpgsql
AS $function$
BEGIN
    RETURN QUERY
    SELECT
        a.value_num,
        a.value_text,
        a.units,
        a.confidence,
        a.doc_id,
        a.as_of_date
    FROM landscape.dms_assertion a
    WHERE a.project_id = p_project_id
        AND a.subject_type = p_subject_type
        AND (p_subject_ref IS NULL OR a.subject_ref = p_subject_ref)
        AND a.metric_key = p_metric_key
    ORDER BY a.as_of_date DESC NULLS LAST, a.created_at DESC
    LIMIT 1;
END;
$function$

```
### `get_next_sort_order`

- Type: function
- Arguments: p_project_id bigint, p_parent_container_id bigint DEFAULT NULL::bigint
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.get_next_sort_order(p_project_id bigint, p_parent_container_id bigint DEFAULT NULL::bigint)
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_max_order INT;
BEGIN
  -- Find max sort_order among siblings (same parent)
  SELECT COALESCE(MAX(sort_order), -1) + 1 INTO v_max_order
  FROM landscape.tbl_container
  WHERE project_id = p_project_id
    AND (
      (p_parent_container_id IS NULL AND parent_container_id IS NULL) OR
      (parent_container_id = p_parent_container_id)
    );

  RETURN v_max_order;
END;
$function$

```
### `get_opex_hierarchy_with_totals`

- Type: function
- Arguments: p_project_id bigint
- Returns: TABLE(account_id integer, account_number character varying, account_name character varying, account_level integer, parent_account_id integer, is_calculated boolean, calculated_total numeric, sort_order integer)

```sql
CREATE OR REPLACE FUNCTION landscape.get_opex_hierarchy_with_totals(p_project_id bigint)
 RETURNS TABLE(account_id integer, account_number character varying, account_name character varying, account_level integer, parent_account_id integer, is_calculated boolean, calculated_total numeric, sort_order integer)
 LANGUAGE plpgsql
AS $function$
BEGIN
  RETURN QUERY
  SELECT
    a.account_id,
    a.account_number,
    a.account_name,
    a.account_level,
    a.parent_account_id,
    a.is_calculated,
    landscape.calculate_opex_account_total(p_project_id, a.account_id) as calculated_total,
    a.sort_order
  FROM landscape.tbl_opex_accounts a
  WHERE a.is_active = TRUE
  ORDER BY a.sort_order;
END;
$function$

```
### `get_period_from_date`

- Type: function
- Arguments: p_project_id bigint, p_date date
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.get_period_from_date(p_project_id bigint, p_date date)
 RETURNS integer
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
  v_start_date DATE;
  v_period_type VARCHAR(50);
  v_months_elapsed INTEGER;
BEGIN
  -- Get project start date and period type
  SELECT analysis_start_date, period_type
  INTO v_start_date, v_period_type
  FROM landscape.tbl_project
  WHERE project_id = p_project_id;

  IF v_start_date IS NULL THEN
    RETURN NULL;
  END IF;

  -- Calculate months elapsed
  v_months_elapsed := EXTRACT(YEAR FROM AGE(p_date, v_start_date)) * 12 +
                      EXTRACT(MONTH FROM AGE(p_date, v_start_date));

  -- Return period based on period type
  CASE v_period_type
    WHEN 'MONTHLY' THEN
      RETURN v_months_elapsed;
    WHEN 'QUARTERLY' THEN
      RETURN v_months_elapsed / 3;
    WHEN 'ANNUAL' THEN
      RETURN v_months_elapsed / 12;
    ELSE
      RETURN v_months_elapsed;
  END CASE;
END;
$function$

```
### `get_proj4_from_srid`

- Type: function
- Arguments: integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.get_proj4_from_srid(integer)
 RETURNS text
 LANGUAGE plpgsql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$
	BEGIN
	RETURN proj4text::text FROM landscape.spatial_ref_sys WHERE srid= $1;
	END;
	$function$

```
### `get_stage_categories`

- Type: function
- Arguments: p_lifecycle_stage character varying
- Returns: TABLE(category_id integer, category_name character varying, tags jsonb, sort_order integer, is_active boolean)

```sql
CREATE OR REPLACE FUNCTION landscape.get_stage_categories(p_lifecycle_stage character varying)
 RETURNS TABLE(category_id integer, category_name character varying, tags jsonb, sort_order integer, is_active boolean)
 LANGUAGE plpgsql
 STABLE
AS $function$
BEGIN
    RETURN QUERY
    SELECT
        c.category_id,
        c.category_name,
        c.tags,
        cls.sort_order,
        c.is_active
    FROM landscape.core_unit_cost_category c
    INNER JOIN landscape.core_category_lifecycle_stages cls
        ON c.category_id = cls.category_id
    WHERE cls.lifecycle_stage = p_lifecycle_stage
      AND c.is_active = true
    ORDER BY cls.sort_order, c.category_name;
END;
$function$

```
### `get_tag_usage_stats`

- Type: function
- Arguments: (none)
- Returns: TABLE(tag_name text, usage_count bigint, lifecycle_stages text[])

```sql
CREATE OR REPLACE FUNCTION landscape.get_tag_usage_stats()
 RETURNS TABLE(tag_name text, usage_count bigint, lifecycle_stages text[])
 LANGUAGE plpgsql
AS $function$
BEGIN
    RETURN QUERY
    SELECT
        jsonb_array_elements_text(c.tags) AS tag_name,
        COUNT(*) AS usage_count,
        ARRAY_AGG(DISTINCT c.lifecycle_stage ORDER BY c.lifecycle_stage) AS lifecycle_stages
    FROM landscape.core_unit_cost_category c
    WHERE c.is_active = TRUE
    GROUP BY jsonb_array_elements_text(c.tags)
    ORDER BY usage_count DESC, tag_name;
END;
$function$

```
### `gidx_in`

- Type: function
- Arguments: cstring
- Returns: gidx

```sql
CREATE OR REPLACE FUNCTION landscape.gidx_in(cstring)
 RETURNS gidx
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gidx_in$function$

```
### `gidx_out`

- Type: function
- Arguments: gidx
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.gidx_out(gidx)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gidx_out$function$

```
### `gserialized_gist_joinsel_2d`

- Type: function
- Arguments: internal, oid, internal, smallint
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.gserialized_gist_joinsel_2d(internal, oid, internal, smallint)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_joinsel_2d$function$

```
### `gserialized_gist_joinsel_nd`

- Type: function
- Arguments: internal, oid, internal, smallint
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.gserialized_gist_joinsel_nd(internal, oid, internal, smallint)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_joinsel_nd$function$

```
### `gserialized_gist_sel_2d`

- Type: function
- Arguments: internal, oid, internal, integer
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.gserialized_gist_sel_2d(internal, oid, internal, integer)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_sel_2d$function$

```
### `gserialized_gist_sel_nd`

- Type: function
- Arguments: internal, oid, internal, integer
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.gserialized_gist_sel_nd(internal, oid, internal, integer)
 RETURNS double precision
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/postgis-3', $function$gserialized_gist_sel_nd$function$

```
### `halfvec`

- Type: function
- Arguments: halfvec, integer, boolean
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec(halfvec, integer, boolean)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec$function$

```
### `halfvec_accum`

- Type: function
- Arguments: double precision[], halfvec
- Returns: double precision[]

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_accum(double precision[], halfvec)
 RETURNS double precision[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_accum$function$

```
### `halfvec_add`

- Type: function
- Arguments: halfvec, halfvec
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_add(halfvec, halfvec)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_add$function$

```
### `halfvec_avg`

- Type: function
- Arguments: double precision[]
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_avg(double precision[])
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_avg$function$

```
### `halfvec_cmp`

- Type: function
- Arguments: halfvec, halfvec
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_cmp(halfvec, halfvec)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_cmp$function$

```
### `halfvec_combine`

- Type: function
- Arguments: double precision[], double precision[]
- Returns: double precision[]

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_combine(double precision[], double precision[])
 RETURNS double precision[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_combine$function$

```
### `halfvec_concat`

- Type: function
- Arguments: halfvec, halfvec
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_concat(halfvec, halfvec)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_concat$function$

```
### `halfvec_eq`

- Type: function
- Arguments: halfvec, halfvec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_eq(halfvec, halfvec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_eq$function$

```
### `halfvec_ge`

- Type: function
- Arguments: halfvec, halfvec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_ge(halfvec, halfvec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_ge$function$

```
### `halfvec_gt`

- Type: function
- Arguments: halfvec, halfvec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_gt(halfvec, halfvec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_gt$function$

```
### `halfvec_in`

- Type: function
- Arguments: cstring, oid, integer
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_in(cstring, oid, integer)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_in$function$

```
### `halfvec_l2_squared_distance`

- Type: function
- Arguments: halfvec, halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_l2_squared_distance(halfvec, halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_l2_squared_distance$function$

```
### `halfvec_le`

- Type: function
- Arguments: halfvec, halfvec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_le(halfvec, halfvec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_le$function$

```
### `halfvec_lt`

- Type: function
- Arguments: halfvec, halfvec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_lt(halfvec, halfvec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_lt$function$

```
### `halfvec_mul`

- Type: function
- Arguments: halfvec, halfvec
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_mul(halfvec, halfvec)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_mul$function$

```
### `halfvec_ne`

- Type: function
- Arguments: halfvec, halfvec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_ne(halfvec, halfvec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_ne$function$

```
### `halfvec_negative_inner_product`

- Type: function
- Arguments: halfvec, halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_negative_inner_product(halfvec, halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_negative_inner_product$function$

```
### `halfvec_out`

- Type: function
- Arguments: halfvec
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_out(halfvec)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_out$function$

```
### `halfvec_recv`

- Type: function
- Arguments: internal, oid, integer
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_recv(internal, oid, integer)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_recv$function$

```
### `halfvec_send`

- Type: function
- Arguments: halfvec
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_send(halfvec)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_send$function$

```
### `halfvec_spherical_distance`

- Type: function
- Arguments: halfvec, halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_spherical_distance(halfvec, halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_spherical_distance$function$

```
### `halfvec_sub`

- Type: function
- Arguments: halfvec, halfvec
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_sub(halfvec, halfvec)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_sub$function$

```
### `halfvec_to_float4`

- Type: function
- Arguments: halfvec, integer, boolean
- Returns: real[]

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_to_float4(halfvec, integer, boolean)
 RETURNS real[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_to_float4$function$

```
### `halfvec_to_sparsevec`

- Type: function
- Arguments: halfvec, integer, boolean
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_to_sparsevec(halfvec, integer, boolean)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_to_sparsevec$function$

```
### `halfvec_to_vector`

- Type: function
- Arguments: halfvec, integer, boolean
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_to_vector(halfvec, integer, boolean)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_to_vector$function$

```
### `halfvec_typmod_in`

- Type: function
- Arguments: cstring[]
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.halfvec_typmod_in(cstring[])
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_typmod_in$function$

```
### `hamming_distance`

- Type: function
- Arguments: bit, bit
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.hamming_distance(bit, bit)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$hamming_distance$function$

```
### `hmac`

- Type: function
- Arguments: bytea, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.hmac(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_hmac$function$

```
### `hmac`

- Type: function
- Arguments: text, text, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.hmac(text, text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_hmac$function$

```
### `hnsw_bit_support`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.hnsw_bit_support(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/vector', $function$hnsw_bit_support$function$

```
### `hnsw_halfvec_support`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.hnsw_halfvec_support(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/vector', $function$hnsw_halfvec_support$function$

```
### `hnsw_sparsevec_support`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.hnsw_sparsevec_support(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/vector', $function$hnsw_sparsevec_support$function$

```
### `hnswhandler`

- Type: function
- Arguments: internal
- Returns: index_am_handler

```sql
CREATE OR REPLACE FUNCTION landscape.hnswhandler(internal)
 RETURNS index_am_handler
 LANGUAGE c
AS '$libdir/vector', $function$hnswhandler$function$

```
### `ingest_ai_property_package`

- Type: function
- Arguments: p_project_id integer, p_package_name text, p_documents jsonb, p_user_choice text DEFAULT 'simple'::text
- Returns: jsonb

```sql
CREATE OR REPLACE FUNCTION landscape.ingest_ai_property_package(p_project_id integer, p_package_name text, p_documents jsonb, p_user_choice text DEFAULT 'simple'::text)
 RETURNS jsonb
 LANGUAGE plpgsql
AS $function$
DECLARE
  doc jsonb;
  doc_record uuid;
  parcel jsonb;
  area_id integer;
  phase_id integer;
  new_parcel_id integer;
  geom geometry;
  results jsonb := jsonb_build_object(
    'parcels_created', 0,
    'geometry_added', 0, 
    'areas_created', 0,
    'phases_created', 0,
    'errors', jsonb_build_array()
  );
BEGIN
  -- Process each document in the property package
  FOR doc IN SELECT * FROM jsonb_array_elements(p_documents)
  LOOP
    -- Log document ingestion
    INSERT INTO landscape.gis_document_ingestion (
      project_id, package_name, document_type, filename, ai_analysis
    ) VALUES (
      p_project_id, p_package_name, doc->>'type', doc->>'filename', doc->'ai_analysis'
    ) RETURNING id INTO doc_record;

    -- Extract parcels from AI analysis
    FOR parcel IN SELECT * FROM jsonb_array_elements(doc->'ai_analysis'->'parcels')
    LOOP
      BEGIN
        -- Handle user choice: simple vs master plan hierarchy
        IF p_user_choice = 'master_plan' THEN
          -- Parse area/phase from parcel code (1.101 → Area=1, Phase=1)
          DECLARE
            parcel_match text[];
            area_no integer;
            phase_no integer;
          BEGIN
            SELECT regexp_matches(parcel->>'parcel_code', '^\\d+\\.(\\d)(\\d{2})$') INTO parcel_match;
            
            IF parcel_match IS NOT NULL THEN
              area_no := parcel_match[1]::integer;
              phase_no := parcel_match[2]::integer;
              
              -- Get or create area
              SELECT a.area_id INTO area_id
              FROM landscape.tbl_area a 
              WHERE a.project_id = p_project_id AND a.area_no = area_no;
              
              IF area_id IS NULL THEN
                INSERT INTO landscape.tbl_area (project_id, area_no, area_alias)
                VALUES (p_project_id, area_no, 'Area ' || area_no)
                RETURNING area_id INTO area_id;
                
                results := jsonb_set(results, '{areas_created}', 
                  ((results->>'areas_created')::int + 1)::text::jsonb);
              END IF;
              
              -- Get or create phase
              SELECT ph.phase_id INTO phase_id
              FROM landscape.tbl_phase ph
              WHERE ph.project_id = p_project_id 
                AND ph.area_id = area_id 
                AND ph.phase_no = phase_no;
              
              IF phase_id IS NULL THEN
                INSERT INTO landscape.tbl_phase (project_id, area_id, phase_no, phase_name)
                VALUES (p_project_id, area_id, phase_no, 
                       'Phase ' || area_no || '.' || phase_no)
                RETURNING phase_id INTO phase_id;
                
                results := jsonb_set(results, '{phases_created}', 
                  ((results->>'phases_created')::int + 1)::text::jsonb);
              END IF;
            END IF;
          END;
        ELSE
          -- Simple project structure - direct to project
          area_id := NULL;
          phase_id := NULL;
        END IF;

        -- Create parcel business record
        INSERT INTO landscape.tbl_parcel (
          project_id, area_id, phase_id, parcel_code,
          landuse_code, acres_gross, units_total
        ) VALUES (
          p_project_id, area_id, phase_id, parcel->>'parcel_code',
          parcel->>'land_use', 
          (parcel->>'acres')::numeric, 
          (parcel->>'units')::integer
        ) RETURNING parcel_id INTO new_parcel_id;

        results := jsonb_set(results, '{parcels_created}', 
          ((results->>'parcels_created')::int + 1)::text::jsonb);

        -- Add geometry if available
        IF parcel ? 'geom' THEN
          geom := ST_GeomFromGeoJSON(parcel->'geom');
          IF ST_SRID(geom) = 4326 THEN
            geom := ST_Transform(geom, 3857);
          ELSIF ST_SRID(geom) IS NULL THEN
            geom := ST_SetSRID(geom, 4326);
            geom := ST_Transform(geom, 3857);
          END IF;

          INSERT INTO landscape.gis_plan_parcel (
            project_id, parcel_id, geom, source_doc, confidence
          ) VALUES (
            p_project_id, new_parcel_id, geom, 
            doc->>'filename',
            COALESCE((parcel->>'confidence')::numeric, 0.95)
          );

          results := jsonb_set(results, '{geometry_added}', 
            ((results->>'geometry_added')::int + 1)::text::jsonb);
        END IF;

      EXCEPTION WHEN OTHERS THEN
        results := jsonb_set(results, '{errors}', 
          results->'errors' || jsonb_build_array(
            'Parcel ' || (parcel->>'parcel_code') || ': ' || SQLERRM
          )
        );
      END;
    END LOOP;

    -- Update document status
    UPDATE landscape.gis_document_ingestion 
    SET status = 'completed', 
        parcels_created = (results->>'parcels_created')::integer,
        geometry_added = (results->>'geometry_added')::integer
    WHERE id = doc_record;
  END LOOP;

  RETURN results;
END $function$

```
### `ingest_assessor_selection`

- Type: function
- Arguments: p_project_id uuid, p_source text, p_features jsonb
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.ingest_assessor_selection(p_project_id uuid, p_source text, p_features jsonb)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
DECLARE
  f    jsonb;
  v_apn text;
  v_g   geometry;
BEGIN
  IF jsonb_typeof(p_features) <> 'array' THEN
    RAISE EXCEPTION 'p_features must be a JSON array';
  END IF;

  -- Upsert assessor parcels
  FOR f IN SELECT * FROM jsonb_array_elements(p_features) LOOP
    v_apn := COALESCE(f->>'apn', f->>'APN');
    IF v_apn IS NULL THEN
      RAISE EXCEPTION 'Missing APN in feature: %', f;
    END IF;

    -- Accept 4326 or 3857 GeoJSON; store as 3857
    v_g := ST_GeomFromGeoJSON(f->'geom');
    IF ST_SRID(v_g) IS NULL OR ST_SRID(v_g) NOT IN (4326,3857) THEN
      -- Assume 4326 if SRID absent
      v_g := ST_SetSRID(v_g, 4326);
    END IF;
    IF ST_SRID(v_g) = 4326 THEN
      v_g := ST_Transform(v_g, 3857);
    END IF;

    INSERT INTO landscape.gis_tax_parcel_ref (tax_parcel_id, geom, assessor_attrs, source_updated_at)
    VALUES (v_apn, ST_Multi(ST_CollectionExtract(v_g, 3)), NULL, now())
    ON CONFLICT (tax_parcel_id) DO UPDATE
      SET geom = EXCLUDED.geom,
          source_updated_at = now();
  END LOOP;

  -- Dissolve boundary for the project's current selection (based on APNs passed)
  WITH sel AS (
    SELECT (elem->>'apn')::text AS apn
    FROM jsonb_array_elements(p_features) elem
    UNION
    SELECT (elem->>'APN')::text FROM jsonb_array_elements(p_features) elem
  ),
  geoms AS (
    SELECT t.geom
    FROM sel s
    JOIN landscape.gis_tax_parcel_ref t ON t.tax_parcel_id = s.apn
  )
  INSERT INTO landscape.gis_project_boundary (project_id, geom, source)
  VALUES (p_project_id, ST_Multi(ST_UnaryUnion(ST_Collect(geom))), p_source)
  ON CONFLICT (project_id) DO UPDATE
    SET geom = EXCLUDED.geom,
        source = EXCLUDED.source;

END $function$

```
### `ingest_plan_parcels`

- Type: function
- Arguments: p_project_id uuid, p_source_doc text, p_features jsonb
- Returns: TABLE(parcel_code text, parcel_id uuid, inserted boolean, note text)

```sql
CREATE OR REPLACE FUNCTION landscape.ingest_plan_parcels(p_project_id uuid, p_source_doc text, p_features jsonb)
 RETURNS TABLE(parcel_code text, parcel_id uuid, inserted boolean, note text)
 LANGUAGE plpgsql
AS $function$
DECLARE
  f             jsonb;
  v_code        text;
  v_geom        geometry;
  v_poly        geometry;
  v_parcel_id   uuid;
  v_area_m2     double precision;
BEGIN
  IF jsonb_typeof(p_features) <> 'array' THEN
    RAISE EXCEPTION 'p_features must be a JSON array';
  END IF;

  FOR f IN SELECT * FROM jsonb_array_elements(p_features)
  LOOP
    v_code := f->>'parcel_code';
    IF v_code IS NULL OR v_code = '' THEN
      RETURN QUERY SELECT NULL::text, NULL::uuid, false, 'missing parcel_code';
      CONTINUE;
    END IF;

    -- Resolve business parcel by code (do not create new business rows)
    SELECT id INTO v_parcel_id FROM tbl_parcels WHERE parcel_code = v_code;
    IF v_parcel_id IS NULL THEN
      RETURN QUERY SELECT v_code, NULL::uuid, false, 'parcel_code not found in tbl_parcels';
      CONTINUE;
    END IF;

    -- Parse GeoJSON, normalize SRID to 3857, polygonize/multi
    v_geom := ST_GeomFromGeoJSON(f->'geom');
    IF v_geom IS NULL THEN
      RETURN QUERY SELECT v_code, v_parcel_id, false, 'invalid or null geometry';
      CONTINUE;
    END IF;
    IF ST_SRID(v_geom) IS NULL OR ST_SRID(v_geom) NOT IN (4326,3857) THEN
      v_geom := ST_SetSRID(v_geom, 4326);
    END IF;
    IF ST_SRID(v_geom) = 4326 THEN
      v_geom := ST_Transform(v_geom, 3857);
    END IF;
    -- Force polygonal multi (clip tiny artefacts if any)
    v_poly := ST_Multi(ST_CollectionExtract(ST_MakeValid(v_geom), 3));
    IF v_poly IS NULL OR ST_IsEmpty(v_poly) THEN
      RETURN QUERY SELECT v_code, v_parcel_id, false, 'non-polygon geometry after validation';
      CONTINUE;
    END IF;

    -- Deactivate any existing active geometry for this (project, parcel)
    UPDATE landscape.gis_plan_parcel
      SET is_active = false, valid_to = now()
    WHERE project_id = p_project_id
      AND parcel_id  = v_parcel_id
      AND is_active  = true;

    -- Insert new active geometry
    INSERT INTO landscape.gis_plan_parcel (
      project_id, parcel_id, geom, source_doc_id, version, valid_from, is_active, qa_rmse
    )
    VALUES (
      p_project_id, v_parcel_id, v_poly, p_source_doc,
      COALESCE((
        SELECT MAX(version)+1 FROM landscape.gis_plan_parcel
        WHERE project_id = p_project_id AND parcel_id = v_parcel_id
      ), 1),
      now(), true, NULL
    );

    -- Update M:N overlaps with assessor tax parcels (context)
    -- Compute intersections & stats for the new active geom
    WITH pp AS (
      SELECT geom AS g FROM landscape.gis_plan_parcel
      WHERE project_id = p_project_id AND parcel_id = v_parcel_id AND is_active
    ),
    hit AS (
      SELECT t.tax_parcel_id,
             ST_Area(ST_Intersection(t.geom, pp.g)) AS a_m2
      FROM pp, landscape.gis_tax_parcel_ref t
      WHERE ST_Intersects(t.geom, pp.g)
    ),
    tot AS (
      SELECT ST_Area(g) AS total_m2 FROM pp
    )
    INSERT INTO landscape.gis_planparcel_taxparcel (project_id, parcel_id, tax_parcel_id, overlap_sqft, overlap_pct)
    SELECT
      p_project_id,
      v_parcel_id,
      h.tax_parcel_id,
      (h.a_m2 / 0.09290304)::double precision,  -- m² → ft²
      CASE WHEN t.total_m2 > 0 THEN (h.a_m2 / t.total_m2) * 100 ELSE NULL END
    FROM hit h CROSS JOIN tot t
    ON CONFLICT (project_id, parcel_id, tax_parcel_id)
    DO UPDATE SET
      overlap_sqft = EXCLUDED.overlap_sqft,
      overlap_pct  = EXCLUDED.overlap_pct;

    v_area_m2 := (SELECT ST_Area(v_poly));
    RETURN QUERY SELECT v_code, v_parcel_id, true,
           format('ingested; area %.2f ac', v_area_m2/4046.8564224);
  END LOOP;
END $function$

```
### `ingest_tax_parcel_selection`

- Type: function
- Arguments: p_project_id integer, p_source text, p_features jsonb
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.ingest_tax_parcel_selection(p_project_id integer, p_source text, p_features jsonb)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
DECLARE
    feature jsonb;
    parcel_id_val text;
    boundary_geom geometry;
    geom_4326 geometry;
    geom_3857 geometry;
BEGIN
    -- Process each feature from the array
    FOR feature IN SELECT jsonb_array_elements(p_features)
    LOOP
        -- Extract PARCELID from either direct property or nested properties
        parcel_id_val := COALESCE(
            feature->>'parcelId',
            feature->'properties'->>'PARCELID'
        );

        IF parcel_id_val IS NULL OR parcel_id_val = '' THEN
            RAISE NOTICE 'Skipping feature with missing PARCELID';
            CONTINUE;
        END IF;

        -- Parse geometry from GeoJSON and transform to EPSG:3857
        geom_4326 := ST_SetSRID(ST_GeomFromGeoJSON(feature->>'geom'), 4326);
        geom_3857 := ST_Transform(geom_4326, 3857);

        -- Insert or update tax parcel reference
        INSERT INTO landscape.gis_tax_parcel_ref (
            tax_parcel_id,
            geom,
            assessor_attrs,
            source,
            created_at
        )
        VALUES (
            parcel_id_val,
            geom_3857,
            COALESCE(feature->'properties', feature->'attributes', '{}'::jsonb),
            p_source,
            NOW()
        )
        ON CONFLICT (tax_parcel_id)
        DO UPDATE SET
            geom = geom_3857,
            assessor_attrs = COALESCE(feature->'properties', feature->'attributes', '{}'::jsonb),
            source = p_source,
            updated_at = NOW();
    END LOOP;

    -- Create or update project boundary from union of all parcels
    SELECT ST_Multi(ST_Union(t.geom)) INTO boundary_geom
    FROM landscape.gis_tax_parcel_ref t
    WHERE EXISTS (
        SELECT 1 FROM jsonb_array_elements(p_features) AS f
        WHERE COALESCE(
            f->>'parcelId',
            f->'properties'->>'PARCELID'
        ) = t.tax_parcel_id
    );

    -- Insert or update project boundary
    INSERT INTO landscape.gis_project_boundary (
        project_id,
        geom,
        source,
        created_at
    )
    VALUES (
        p_project_id,
        boundary_geom,
        p_source,
        NOW()
    )
    ON CONFLICT (project_id)
    DO UPDATE SET
        geom = boundary_geom,
        source = p_source,
        created_at = NOW();

    RAISE NOTICE 'Successfully processed % tax parcels for project %', jsonb_array_length(p_features), p_project_id;
END;
$function$

```
### `inner_product`

- Type: function
- Arguments: vector, vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.inner_product(vector, vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$inner_product$function$

```
### `inner_product`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.inner_product(sparsevec, sparsevec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_inner_product$function$

```
### `inner_product`

- Type: function
- Arguments: halfvec, halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.inner_product(halfvec, halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_inner_product$function$

```
### `is_contained_2d`

- Type: function
- Arguments: geometry, box2df
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.is_contained_2d(geometry, box2df)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 1
AS $function$SELECT $2 OPERATOR(landscape.~) $1;$function$

```
### `is_contained_2d`

- Type: function
- Arguments: box2df, box2df
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.is_contained_2d(box2df, box2df)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contains_box2df_box2df_2d$function$

```
### `is_contained_2d`

- Type: function
- Arguments: box2df, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.is_contained_2d(box2df, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_within_box2df_geom_2d$function$

```
### `ivfflat_bit_support`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.ivfflat_bit_support(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/vector', $function$ivfflat_bit_support$function$

```
### `ivfflat_halfvec_support`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.ivfflat_halfvec_support(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/vector', $function$ivfflat_halfvec_support$function$

```
### `ivfflathandler`

- Type: function
- Arguments: internal
- Returns: index_am_handler

```sql
CREATE OR REPLACE FUNCTION landscape.ivfflathandler(internal)
 RETURNS index_am_handler
 LANGUAGE c
AS '$libdir/vector', $function$ivfflathandler$function$

```
### `jaccard_distance`

- Type: function
- Arguments: bit, bit
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.jaccard_distance(bit, bit)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$jaccard_distance$function$

```
### `json`

- Type: function
- Arguments: geometry
- Returns: json

```sql
CREATE OR REPLACE FUNCTION landscape."json"(geometry)
 RETURNS json
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geometry_to_json$function$

```
### `jsonb`

- Type: function
- Arguments: geometry
- Returns: jsonb

```sql
CREATE OR REPLACE FUNCTION landscape.jsonb(geometry)
 RETURNS jsonb
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geometry_to_jsonb$function$

```
### `l1_distance`

- Type: function
- Arguments: vector, vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l1_distance(vector, vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$l1_distance$function$

```
### `l1_distance`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l1_distance(sparsevec, sparsevec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_l1_distance$function$

```
### `l1_distance`

- Type: function
- Arguments: halfvec, halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l1_distance(halfvec, halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_l1_distance$function$

```
### `l2_distance`

- Type: function
- Arguments: vector, vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l2_distance(vector, vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$l2_distance$function$

```
### `l2_distance`

- Type: function
- Arguments: halfvec, halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l2_distance(halfvec, halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_l2_distance$function$

```
### `l2_distance`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l2_distance(sparsevec, sparsevec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_l2_distance$function$

```
### `l2_norm`

- Type: function
- Arguments: sparsevec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l2_norm(sparsevec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_l2_norm$function$

```
### `l2_norm`

- Type: function
- Arguments: halfvec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.l2_norm(halfvec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_l2_norm$function$

```
### `l2_normalize`

- Type: function
- Arguments: vector
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.l2_normalize(vector)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$l2_normalize$function$

```
### `l2_normalize`

- Type: function
- Arguments: sparsevec
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.l2_normalize(sparsevec)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_l2_normalize$function$

```
### `l2_normalize`

- Type: function
- Arguments: halfvec
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.l2_normalize(halfvec)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_l2_normalize$function$

```
### `last_db_update`

- Type: function
- Arguments: (none)
- Returns: timestamp with time zone

```sql
CREATE OR REPLACE FUNCTION landscape.last_db_update()
 RETURNS timestamp with time zone
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
  r record;
  ts timestamptz;
  max_ts timestamptz := NULL;
BEGIN
  FOR r IN
    SELECT table_schema, table_name
    FROM information_schema.columns
    WHERE column_name = 'updated_at'
      AND table_schema NOT IN ('pg_catalog','information_schema')
  LOOP
    EXECUTE format('SELECT max(updated_at) FROM %I.%I', r.table_schema, r.table_name)
      INTO ts;
    IF ts IS NOT NULL AND (max_ts IS NULL OR ts > max_ts) THEN
      max_ts := ts;
    END IF;
  END LOOP;

  RETURN max_ts;
END;
$function$

```
### `mark_category_complete`

- Type: function
- Arguments: cat_id bigint
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.mark_category_complete(cat_id bigint)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
  UPDATE landscape.core_budget_category
  SET is_incomplete = FALSE,
      reminder_dismissed_at = NULL,
      last_reminded_at = NULL,
      updated_at = CURRENT_TIMESTAMP
  WHERE category_id = cat_id;

  DELETE FROM landscape.core_category_completion_status
  WHERE category_id = cat_id;
END;
$function$

```
### `overlaps_2d`

- Type: function
- Arguments: box2df, box2df
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_2d(box2df, box2df)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_contains_box2df_box2df_2d$function$

```
### `overlaps_2d`

- Type: function
- Arguments: geometry, box2df
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_2d(geometry, box2df)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 1
AS $function$SELECT $2 OPERATOR(landscape.&&) $1;$function$

```
### `overlaps_2d`

- Type: function
- Arguments: box2df, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_2d(box2df, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_overlaps_box2df_geom_2d$function$

```
### `overlaps_geog`

- Type: function
- Arguments: geography, gidx
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_geog(geography, gidx)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE STRICT
AS $function$SELECT $2 OPERATOR(landscape.&&) $1;$function$

```
### `overlaps_geog`

- Type: function
- Arguments: gidx, geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_geog(gidx, geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE STRICT
AS '$libdir/postgis-3', $function$gserialized_gidx_geog_overlaps$function$

```
### `overlaps_geog`

- Type: function
- Arguments: gidx, gidx
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_geog(gidx, gidx)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE STRICT
AS '$libdir/postgis-3', $function$gserialized_gidx_gidx_overlaps$function$

```
### `overlaps_nd`

- Type: function
- Arguments: gidx, geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_nd(gidx, geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_gidx_geom_overlaps$function$

```
### `overlaps_nd`

- Type: function
- Arguments: geometry, gidx
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_nd(geometry, gidx)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 1
AS $function$SELECT $2 OPERATOR(landscape.&&&) $1;$function$

```
### `overlaps_nd`

- Type: function
- Arguments: gidx, gidx
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.overlaps_nd(gidx, gidx)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$gserialized_gidx_gidx_overlaps$function$

```
### `path`

- Type: function
- Arguments: geometry
- Returns: path

```sql
CREATE OR REPLACE FUNCTION landscape.path(geometry)
 RETURNS path
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geometry_to_path$function$

```
### `pgis_asflatgeobuf_finalfn`

- Type: function
- Arguments: internal
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asflatgeobuf_finalfn(internal)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asflatgeobuf_finalfn$function$

```
### `pgis_asflatgeobuf_transfn`

- Type: function
- Arguments: internal, anyelement, boolean
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asflatgeobuf_transfn(internal, anyelement, boolean)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_asflatgeobuf_transfn$function$

```
### `pgis_asflatgeobuf_transfn`

- Type: function
- Arguments: internal, anyelement
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asflatgeobuf_transfn(internal, anyelement)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_asflatgeobuf_transfn$function$

```
### `pgis_asflatgeobuf_transfn`

- Type: function
- Arguments: internal, anyelement, boolean, text
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asflatgeobuf_transfn(internal, anyelement, boolean, text)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_asflatgeobuf_transfn$function$

```
### `pgis_asgeobuf_finalfn`

- Type: function
- Arguments: internal
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asgeobuf_finalfn(internal)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asgeobuf_finalfn$function$

```
### `pgis_asgeobuf_transfn`

- Type: function
- Arguments: internal, anyelement, text
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asgeobuf_transfn(internal, anyelement, text)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_asgeobuf_transfn$function$

```
### `pgis_asgeobuf_transfn`

- Type: function
- Arguments: internal, anyelement
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asgeobuf_transfn(internal, anyelement)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_asgeobuf_transfn$function$

```
### `pgis_asmvt_combinefn`

- Type: function
- Arguments: internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_combinefn(internal, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_combinefn$function$

```
### `pgis_asmvt_deserialfn`

- Type: function
- Arguments: bytea, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_deserialfn(bytea, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_deserialfn$function$

```
### `pgis_asmvt_finalfn`

- Type: function
- Arguments: internal
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_finalfn(internal)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_finalfn$function$

```
### `pgis_asmvt_serialfn`

- Type: function
- Arguments: internal
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_serialfn(internal)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_serialfn$function$

```
### `pgis_asmvt_transfn`

- Type: function
- Arguments: internal, anyelement, text, integer, text, text
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_transfn(internal, anyelement, text, integer, text, text)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_transfn$function$

```
### `pgis_asmvt_transfn`

- Type: function
- Arguments: internal, anyelement
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_transfn(internal, anyelement)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_transfn$function$

```
### `pgis_asmvt_transfn`

- Type: function
- Arguments: internal, anyelement, text
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_transfn(internal, anyelement, text)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_transfn$function$

```
### `pgis_asmvt_transfn`

- Type: function
- Arguments: internal, anyelement, text, integer
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_transfn(internal, anyelement, text, integer)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_transfn$function$

```
### `pgis_asmvt_transfn`

- Type: function
- Arguments: internal, anyelement, text, integer, text
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_asmvt_transfn(internal, anyelement, text, integer, text)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_asmvt_transfn$function$

```
### `pgis_geometry_accum_transfn`

- Type: function
- Arguments: internal, geometry
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_accum_transfn(internal, geometry)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_geometry_accum_transfn$function$

```
### `pgis_geometry_accum_transfn`

- Type: function
- Arguments: internal, geometry, double precision
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_accum_transfn(internal, geometry, double precision)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_geometry_accum_transfn$function$

```
### `pgis_geometry_accum_transfn`

- Type: function
- Arguments: internal, geometry, double precision, integer
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_accum_transfn(internal, geometry, double precision, integer)
 RETURNS internal
 LANGUAGE c
 PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_geometry_accum_transfn$function$

```
### `pgis_geometry_clusterintersecting_finalfn`

- Type: function
- Arguments: internal
- Returns: geometry[]

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_clusterintersecting_finalfn(internal)
 RETURNS geometry[]
 LANGUAGE c
 PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_geometry_clusterintersecting_finalfn$function$

```
### `pgis_geometry_clusterwithin_finalfn`

- Type: function
- Arguments: internal
- Returns: geometry[]

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_clusterwithin_finalfn(internal)
 RETURNS geometry[]
 LANGUAGE c
 PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_geometry_clusterwithin_finalfn$function$

```
### `pgis_geometry_collect_finalfn`

- Type: function
- Arguments: internal
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_collect_finalfn(internal)
 RETURNS geometry
 LANGUAGE c
 PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_geometry_collect_finalfn$function$

```
### `pgis_geometry_coverageunion_finalfn`

- Type: function
- Arguments: internal
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_coverageunion_finalfn(internal)
 RETURNS geometry
 LANGUAGE c
 PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_geometry_coverageunion_finalfn$function$

```
### `pgis_geometry_makeline_finalfn`

- Type: function
- Arguments: internal
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_makeline_finalfn(internal)
 RETURNS geometry
 LANGUAGE c
 PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_geometry_makeline_finalfn$function$

```
### `pgis_geometry_polygonize_finalfn`

- Type: function
- Arguments: internal
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_polygonize_finalfn(internal)
 RETURNS geometry
 LANGUAGE c
 PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_geometry_polygonize_finalfn$function$

```
### `pgis_geometry_union_parallel_combinefn`

- Type: function
- Arguments: internal, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_union_parallel_combinefn(internal, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE
AS '$libdir/postgis-3', $function$pgis_geometry_union_parallel_combinefn$function$

```
### `pgis_geometry_union_parallel_deserialfn`

- Type: function
- Arguments: bytea, internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_union_parallel_deserialfn(bytea, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$pgis_geometry_union_parallel_deserialfn$function$

```
### `pgis_geometry_union_parallel_finalfn`

- Type: function
- Arguments: internal
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_union_parallel_finalfn(internal)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$pgis_geometry_union_parallel_finalfn$function$

```
### `pgis_geometry_union_parallel_serialfn`

- Type: function
- Arguments: internal
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_union_parallel_serialfn(internal)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$pgis_geometry_union_parallel_serialfn$function$

```
### `pgis_geometry_union_parallel_transfn`

- Type: function
- Arguments: internal, geometry, double precision
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_union_parallel_transfn(internal, geometry, double precision)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$pgis_geometry_union_parallel_transfn$function$

```
### `pgis_geometry_union_parallel_transfn`

- Type: function
- Arguments: internal, geometry
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.pgis_geometry_union_parallel_transfn(internal, geometry)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE
AS '$libdir/postgis-3', $function$pgis_geometry_union_parallel_transfn$function$

```
### `pgp_armor_headers`

- Type: function
- Arguments: text, OUT key text, OUT value text
- Returns: SETOF record

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_armor_headers(text, OUT key text, OUT value text)
 RETURNS SETOF record
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_armor_headers$function$

```
### `pgp_key_id`

- Type: function
- Arguments: bytea
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_key_id(bytea)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_key_id_w$function$

```
### `pgp_pub_decrypt`

- Type: function
- Arguments: bytea, bytea, text, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_decrypt(bytea, bytea, text, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_text$function$

```
### `pgp_pub_decrypt`

- Type: function
- Arguments: bytea, bytea
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_decrypt(bytea, bytea)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_text$function$

```
### `pgp_pub_decrypt`

- Type: function
- Arguments: bytea, bytea, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_decrypt(bytea, bytea, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_text$function$

```
### `pgp_pub_decrypt_bytea`

- Type: function
- Arguments: bytea, bytea
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_decrypt_bytea(bytea, bytea)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_bytea$function$

```
### `pgp_pub_decrypt_bytea`

- Type: function
- Arguments: bytea, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_decrypt_bytea(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_bytea$function$

```
### `pgp_pub_decrypt_bytea`

- Type: function
- Arguments: bytea, bytea, text, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_decrypt_bytea(bytea, bytea, text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_bytea$function$

```
### `pgp_pub_encrypt`

- Type: function
- Arguments: text, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_encrypt(text, bytea, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_text$function$

```
### `pgp_pub_encrypt`

- Type: function
- Arguments: text, bytea
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_encrypt(text, bytea)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_text$function$

```
### `pgp_pub_encrypt_bytea`

- Type: function
- Arguments: bytea, bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_encrypt_bytea(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_bytea$function$

```
### `pgp_pub_encrypt_bytea`

- Type: function
- Arguments: bytea, bytea
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_pub_encrypt_bytea(bytea, bytea)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_bytea$function$

```
### `pgp_sym_decrypt`

- Type: function
- Arguments: bytea, text, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_decrypt(bytea, text, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_text$function$

```
### `pgp_sym_decrypt`

- Type: function
- Arguments: bytea, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_decrypt(bytea, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_text$function$

```
### `pgp_sym_decrypt_bytea`

- Type: function
- Arguments: bytea, text, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_decrypt_bytea(bytea, text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_bytea$function$

```
### `pgp_sym_decrypt_bytea`

- Type: function
- Arguments: bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_decrypt_bytea(bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_bytea$function$

```
### `pgp_sym_encrypt`

- Type: function
- Arguments: text, text, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_encrypt(text, text, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_text$function$

```
### `pgp_sym_encrypt`

- Type: function
- Arguments: text, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_encrypt(text, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_text$function$

```
### `pgp_sym_encrypt_bytea`

- Type: function
- Arguments: bytea, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_encrypt_bytea(bytea, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_bytea$function$

```
### `pgp_sym_encrypt_bytea`

- Type: function
- Arguments: bytea, text, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.pgp_sym_encrypt_bytea(bytea, text, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_bytea$function$

```
### `point`

- Type: function
- Arguments: geometry
- Returns: point

```sql
CREATE OR REPLACE FUNCTION landscape.point(geometry)
 RETURNS point
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geometry_to_point$function$

```
### `polygon`

- Type: function
- Arguments: geometry
- Returns: polygon

```sql
CREATE OR REPLACE FUNCTION landscape.polygon(geometry)
 RETURNS polygon
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geometry_to_polygon$function$

```
### `populate_geometry_columns`

- Type: function
- Arguments: use_typmod boolean DEFAULT true
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.populate_geometry_columns(use_typmod boolean DEFAULT true)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
DECLARE
	inserted	integer;
	oldcount	integer;
	probed	  integer;
	stale	   integer;
	gcs		 RECORD;
	gc		  RECORD;
	gsrid	   integer;
	gndims	  integer;
	gtype	   text;
	query	   text;
	gc_is_valid boolean;

BEGIN
	SELECT count(*) INTO oldcount FROM landscape.geometry_columns;
	inserted := 0;

	-- Count the number of geometry columns in all tables and views
	SELECT count(DISTINCT c.oid) INTO probed
	FROM pg_class c,
		 pg_attribute a,
		 pg_type t,
		 pg_namespace n
	WHERE c.relkind IN('r','v','f', 'p')
		AND t.typname = 'geometry'
		AND a.attisdropped = false
		AND a.atttypid = t.oid
		AND a.attrelid = c.oid
		AND c.relnamespace = n.oid
		AND n.nspname NOT ILIKE 'pg_temp%' AND c.relname != 'raster_columns' ;

	-- Iterate through all non-dropped geometry columns
	RAISE DEBUG 'Processing Tables.....';

	FOR gcs IN
	SELECT DISTINCT ON (c.oid) c.oid, n.nspname, c.relname
		FROM pg_class c,
			 pg_attribute a,
			 pg_type t,
			 pg_namespace n
		WHERE c.relkind IN( 'r', 'f', 'p')
		AND t.typname = 'geometry'
		AND a.attisdropped = false
		AND a.atttypid = t.oid
		AND a.attrelid = c.oid
		AND c.relnamespace = n.oid
		AND n.nspname NOT ILIKE 'pg_temp%' AND c.relname != 'raster_columns'
	LOOP

		inserted := inserted + landscape.populate_geometry_columns(gcs.oid, use_typmod);
	END LOOP;

	IF oldcount > inserted THEN
		stale = oldcount-inserted;
	ELSE
		stale = 0;
	END IF;

	RETURN 'probed:' ||probed|| ' inserted:'||inserted;
END

$function$

```
### `populate_geometry_columns`

- Type: function
- Arguments: tbl_oid oid, use_typmod boolean DEFAULT true
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.populate_geometry_columns(tbl_oid oid, use_typmod boolean DEFAULT true)
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
DECLARE
	gcs		 RECORD;
	gc		  RECORD;
	gc_old	  RECORD;
	gsrid	   integer;
	gndims	  integer;
	gtype	   text;
	query	   text;
	gc_is_valid boolean;
	inserted	integer;
	constraint_successful boolean := false;

BEGIN
	inserted := 0;

	-- Iterate through all geometry columns in this table
	FOR gcs IN
	SELECT n.nspname, c.relname, a.attname, c.relkind
		FROM pg_class c,
			 pg_attribute a,
			 pg_type t,
			 pg_namespace n
		WHERE c.relkind IN('r', 'f', 'p')
		AND t.typname = 'geometry'
		AND a.attisdropped = false
		AND a.atttypid = t.oid
		AND a.attrelid = c.oid
		AND c.relnamespace = n.oid
		AND n.nspname NOT ILIKE 'pg_temp%'
		AND c.oid = tbl_oid
	LOOP

		RAISE DEBUG 'Processing column %.%.%', gcs.nspname, gcs.relname, gcs.attname;

		gc_is_valid := true;
		-- Find the srid, coord_dimension, and type of current geometry
		-- in geometry_columns -- which is now a view

		SELECT type, srid, coord_dimension, gcs.relkind INTO gc_old
			FROM geometry_columns
			WHERE f_table_schema = gcs.nspname AND f_table_name = gcs.relname AND f_geometry_column = gcs.attname;

		IF upper(gc_old.type) = 'GEOMETRY' THEN
		-- This is an unconstrained geometry we need to do something
		-- We need to figure out what to set the type by inspecting the data
			EXECUTE 'SELECT landscape.ST_srid(' || quote_ident(gcs.attname) || ') As srid, landscape.GeometryType(' || quote_ident(gcs.attname) || ') As type, landscape.ST_NDims(' || quote_ident(gcs.attname) || ') As dims ' ||
					 ' FROM ONLY ' || quote_ident(gcs.nspname) || '.' || quote_ident(gcs.relname) ||
					 ' WHERE ' || quote_ident(gcs.attname) || ' IS NOT NULL LIMIT 1;'
				INTO gc;
			IF gc IS NULL THEN -- there is no data so we can not determine geometry type
				RAISE WARNING 'No data in table %.%, so no information to determine geometry type and srid', gcs.nspname, gcs.relname;
				RETURN 0;
			END IF;
			gsrid := gc.srid; gtype := gc.type; gndims := gc.dims;

			IF use_typmod THEN
				BEGIN
					EXECUTE 'ALTER TABLE ' || quote_ident(gcs.nspname) || '.' || quote_ident(gcs.relname) || ' ALTER COLUMN ' || quote_ident(gcs.attname) ||
						' TYPE geometry(' || postgis_type_name(gtype, gndims, true) || ', ' || gsrid::text  || ') ';
					inserted := inserted + 1;
				EXCEPTION
						WHEN invalid_parameter_value OR feature_not_supported THEN
						RAISE WARNING 'Could not convert ''%'' in ''%.%'' to use typmod with srid %, type %: %', quote_ident(gcs.attname), quote_ident(gcs.nspname), quote_ident(gcs.relname), gsrid, postgis_type_name(gtype, gndims, true), SQLERRM;
							gc_is_valid := false;
				END;

			ELSE
				-- Try to apply srid check to column
				constraint_successful = false;
				IF (gsrid > 0 AND postgis_constraint_srid(gcs.nspname, gcs.relname,gcs.attname) IS NULL ) THEN
					BEGIN
						EXECUTE 'ALTER TABLE ONLY ' || quote_ident(gcs.nspname) || '.' || quote_ident(gcs.relname) ||
								 ' ADD CONSTRAINT ' || quote_ident('enforce_srid_' || gcs.attname) ||
								 ' CHECK (ST_srid(' || quote_ident(gcs.attname) || ') = ' || gsrid || ')';
						constraint_successful := true;
					EXCEPTION
						WHEN check_violation THEN
							RAISE WARNING 'Not inserting ''%'' in ''%.%'' into geometry_columns: could not apply constraint CHECK (st_srid(%) = %)', quote_ident(gcs.attname), quote_ident(gcs.nspname), quote_ident(gcs.relname), quote_ident(gcs.attname), gsrid;
							gc_is_valid := false;
					END;
				END IF;

				-- Try to apply ndims check to column
				IF (gndims IS NOT NULL AND postgis_constraint_dims(gcs.nspname, gcs.relname,gcs.attname) IS NULL ) THEN
					BEGIN
						EXECUTE 'ALTER TABLE ONLY ' || quote_ident(gcs.nspname) || '.' || quote_ident(gcs.relname) || '
								 ADD CONSTRAINT ' || quote_ident('enforce_dims_' || gcs.attname) || '
								 CHECK (st_ndims(' || quote_ident(gcs.attname) || ') = '||gndims||')';
						constraint_successful := true;
					EXCEPTION
						WHEN check_violation THEN
							RAISE WARNING 'Not inserting ''%'' in ''%.%'' into geometry_columns: could not apply constraint CHECK (st_ndims(%) = %)', quote_ident(gcs.attname), quote_ident(gcs.nspname), quote_ident(gcs.relname), quote_ident(gcs.attname), gndims;
							gc_is_valid := false;
					END;
				END IF;

				-- Try to apply geometrytype check to column
				IF (gtype IS NOT NULL AND postgis_constraint_type(gcs.nspname, gcs.relname,gcs.attname) IS NULL ) THEN
					BEGIN
						EXECUTE 'ALTER TABLE ONLY ' || quote_ident(gcs.nspname) || '.' || quote_ident(gcs.relname) || '
						ADD CONSTRAINT ' || quote_ident('enforce_geotype_' || gcs.attname) || '
						CHECK (geometrytype(' || quote_ident(gcs.attname) || ') = ' || quote_literal(gtype) || ')';
						constraint_successful := true;
					EXCEPTION
						WHEN check_violation THEN
							-- No geometry check can be applied. This column contains a number of geometry types.
							RAISE WARNING 'Could not add geometry type check (%) to table column: %.%.%', gtype, quote_ident(gcs.nspname),quote_ident(gcs.relname),quote_ident(gcs.attname);
					END;
				END IF;
				 --only count if we were successful in applying at least one constraint
				IF constraint_successful THEN
					inserted := inserted + 1;
				END IF;
			END IF;
		END IF;

	END LOOP;

	RETURN inserted;
END

$function$

```
### `postgis_addbbox`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_addbbox(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_addBBOX$function$

```
### `postgis_cache_bbox`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_cache_bbox()
 RETURNS trigger
 LANGUAGE c
AS '$libdir/postgis-3', $function$cache_bbox$function$

```
### `postgis_constraint_dims`

- Type: function
- Arguments: geomschema text, geomtable text, geomcolumn text
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_constraint_dims(geomschema text, geomtable text, geomcolumn text)
 RETURNS integer
 LANGUAGE sql
 STABLE PARALLEL SAFE STRICT COST 250
AS $function$
SELECT  replace(split_part(s.consrc, ' = ', 2), ')', '')::integer
		 FROM pg_class c, pg_namespace n, pg_attribute a
		 , (SELECT connamespace, conrelid, conkey, pg_get_constraintdef(oid) As consrc
			FROM pg_constraint) AS s
		 WHERE n.nspname = $1
		 AND c.relname = $2
		 AND a.attname = $3
		 AND a.attrelid = c.oid
		 AND s.connamespace = n.oid
		 AND s.conrelid = c.oid
		 AND a.attnum = ANY (s.conkey)
		 AND s.consrc LIKE '%ndims(% = %';
$function$

```
### `postgis_constraint_srid`

- Type: function
- Arguments: geomschema text, geomtable text, geomcolumn text
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_constraint_srid(geomschema text, geomtable text, geomcolumn text)
 RETURNS integer
 LANGUAGE sql
 STABLE PARALLEL SAFE STRICT COST 250
AS $function$
SELECT replace(replace(split_part(s.consrc, ' = ', 2), ')', ''), '(', '')::integer
		 FROM pg_class c, pg_namespace n, pg_attribute a
		 , (SELECT connamespace, conrelid, conkey, pg_get_constraintdef(oid) As consrc
			FROM pg_constraint) AS s
		 WHERE n.nspname = $1
		 AND c.relname = $2
		 AND a.attname = $3
		 AND a.attrelid = c.oid
		 AND s.connamespace = n.oid
		 AND s.conrelid = c.oid
		 AND a.attnum = ANY (s.conkey)
		 AND s.consrc LIKE '%srid(% = %';
$function$

```
### `postgis_constraint_type`

- Type: function
- Arguments: geomschema text, geomtable text, geomcolumn text
- Returns: character varying

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_constraint_type(geomschema text, geomtable text, geomcolumn text)
 RETURNS character varying
 LANGUAGE sql
 STABLE PARALLEL SAFE STRICT COST 250
AS $function$
SELECT  replace(split_part(s.consrc, '''', 2), ')', '')::varchar
		 FROM pg_class c, pg_namespace n, pg_attribute a
		 , (SELECT connamespace, conrelid, conkey, pg_get_constraintdef(oid) As consrc
			FROM pg_constraint) AS s
		 WHERE n.nspname = $1
		 AND c.relname = $2
		 AND a.attname = $3
		 AND a.attrelid = c.oid
		 AND s.connamespace = n.oid
		 AND s.conrelid = c.oid
		 AND a.attnum = ANY (s.conkey)
		 AND s.consrc LIKE '%geometrytype(% = %';
$function$

```
### `postgis_dropbbox`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_dropbbox(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_dropBBOX$function$

```
### `postgis_extensions_upgrade`

- Type: function
- Arguments: target_version text DEFAULT NULL::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_extensions_upgrade(target_version text DEFAULT NULL::text)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
DECLARE
	rec record;
	sql text;
	var_schema text;
BEGIN

	FOR rec IN
		SELECT name, default_version, installed_version
		FROM pg_catalog.pg_available_extensions
		WHERE name IN (
			'postgis',
			'postgis_raster',
			'postgis_sfcgal',
			'postgis_topology',
			'postgis_tiger_geocoder'
		)
		ORDER BY length(name) -- this is to make sure 'postgis' is first !
	LOOP --{

		IF target_version IS NULL THEN
			target_version := rec.default_version;
		END IF;

		IF rec.installed_version IS NULL THEN --{
			-- If the support installed by available extension
			-- is found unpackaged, we package it
			IF --{
				 -- PostGIS is always available (this function is part of it)
				 rec.name = 'postgis'

				 -- PostGIS raster is available if type 'raster' exists
				 OR ( rec.name = 'postgis_raster' AND EXISTS (
							SELECT 1 FROM pg_catalog.pg_type
							WHERE typname = 'raster' ) )

				 -- PostGIS SFCGAL is available if
				 -- 'postgis_sfcgal_version' function exists
				 OR ( rec.name = 'postgis_sfcgal' AND EXISTS (
							SELECT 1 FROM pg_catalog.pg_proc
							WHERE proname = 'postgis_sfcgal_version' ) )

				 -- PostGIS Topology is available if
				 -- 'topology.topology' table exists
				 -- NOTE: watch out for https://trac.osgeo.org/postgis/ticket/2503
				 OR ( rec.name = 'postgis_topology' AND EXISTS (
							SELECT 1 FROM pg_catalog.pg_class c
							JOIN pg_catalog.pg_namespace n ON (c.relnamespace = n.oid )
							WHERE n.nspname = 'topology' AND c.relname = 'topology') )

				 OR ( rec.name = 'postgis_tiger_geocoder' AND EXISTS (
							SELECT 1 FROM pg_catalog.pg_class c
							JOIN pg_catalog.pg_namespace n ON (c.relnamespace = n.oid )
							WHERE n.nspname = 'tiger' AND c.relname = 'geocode_settings') )
			THEN --}{ -- the code is unpackaged
				-- Force install in same schema as postgis
				SELECT INTO var_schema n.nspname
				  FROM pg_namespace n, pg_proc p
				  WHERE p.proname = 'postgis_full_version'
					AND n.oid = p.pronamespace
				  LIMIT 1;
				IF rec.name NOT IN('postgis_topology', 'postgis_tiger_geocoder')
				THEN
					sql := format(
							  'CREATE EXTENSION %1$I SCHEMA %2$I VERSION unpackaged;'
							  'ALTER EXTENSION %1$I UPDATE TO %3$I',
							  rec.name, var_schema, target_version);
				ELSE
					sql := format(
							 'CREATE EXTENSION %1$I VERSION unpackaged;'
							 'ALTER EXTENSION %1$I UPDATE TO %2$I',
							 rec.name, target_version);
				END IF;
				RAISE NOTICE 'Packaging and updating %', rec.name;
				RAISE DEBUG '%', sql;
				EXECUTE sql;
			ELSE
				RAISE DEBUG 'Skipping % (not in use)', rec.name;
			END IF; --}
		ELSE -- The code is already packaged, upgrade it --}{
			sql = format(
				'ALTER EXTENSION %1$I UPDATE TO "ANY";'
				'ALTER EXTENSION %1$I UPDATE TO %2$I',
				rec.name, target_version
				);
			RAISE NOTICE 'Updating extension % %', rec.name, rec.installed_version;
			RAISE DEBUG '%', sql;
			EXECUTE sql;
		END IF; --}

	END LOOP; --}

	RETURN format(
		'Upgrade to version %s completed, run SELECT postgis_full_version(); for details',
		target_version
	);


END
$function$

```
### `postgis_full_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_full_version()
 RETURNS text
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
DECLARE
	libver text;
	librev text;
	projver text;
	projver_compiled text;
	geosver text;
	geosver_compiled text;
	sfcgalver text;
	gdalver text := NULL;
	libxmlver text;
	liblwgeomver text;
	dbproc text;
	relproc text;
	fullver text;
	rast_lib_ver text := NULL;
	rast_scr_ver text := NULL;
	topo_scr_ver text := NULL;
	json_lib_ver text;
	protobuf_lib_ver text;
	wagyu_lib_ver text;
	sfcgal_lib_ver text;
	sfcgal_scr_ver text;
	pgsql_scr_ver text;
	pgsql_ver text;
	core_is_extension bool;
BEGIN
	SELECT landscape.postgis_lib_version() INTO libver;
	SELECT landscape.postgis_proj_version() INTO projver;
	SELECT landscape.postgis_geos_version() INTO geosver;
	SELECT landscape.postgis_geos_compiled_version() INTO geosver_compiled;
	SELECT landscape.postgis_proj_compiled_version() INTO projver_compiled;
	SELECT landscape.postgis_libjson_version() INTO json_lib_ver;
	SELECT landscape.postgis_libprotobuf_version() INTO protobuf_lib_ver;
	SELECT landscape.postgis_wagyu_version() INTO wagyu_lib_ver;
	SELECT landscape._postgis_scripts_pgsql_version() INTO pgsql_scr_ver;
	SELECT landscape._postgis_pgsql_version() INTO pgsql_ver;
	BEGIN
		SELECT landscape.postgis_gdal_version() INTO gdalver;
	EXCEPTION
		WHEN undefined_function THEN
			RAISE DEBUG 'Function postgis_gdal_version() not found.  Is raster support enabled and rtpostgis.sql installed?';
	END;
	BEGIN
		SELECT landscape.postgis_sfcgal_full_version() INTO sfcgalver;
		BEGIN
			SELECT landscape.postgis_sfcgal_scripts_installed() INTO sfcgal_scr_ver;
		EXCEPTION
			WHEN undefined_function THEN
				sfcgal_scr_ver := 'missing';
		END;
	EXCEPTION
		WHEN undefined_function THEN
			RAISE DEBUG 'Function postgis_sfcgal_scripts_installed() not found. Is sfcgal support enabled and sfcgal.sql installed?';
	END;
	SELECT landscape.postgis_liblwgeom_version() INTO liblwgeomver;
	SELECT landscape.postgis_libxml_version() INTO libxmlver;
	SELECT landscape.postgis_scripts_installed() INTO dbproc;
	SELECT landscape.postgis_scripts_released() INTO relproc;
	SELECT landscape.postgis_lib_revision() INTO librev;
	BEGIN
		SELECT topology.postgis_topology_scripts_installed() INTO topo_scr_ver;
	EXCEPTION
		WHEN undefined_function OR invalid_schema_name THEN
			RAISE DEBUG 'Function postgis_topology_scripts_installed() not found. Is topology support enabled and topology.sql installed?';
		WHEN insufficient_privilege THEN
			RAISE NOTICE 'Topology support cannot be inspected. Is current user granted USAGE on schema "topology" ?';
		WHEN OTHERS THEN
			RAISE NOTICE 'Function postgis_topology_scripts_installed() could not be called: % (%)', SQLERRM, SQLSTATE;
	END;

	BEGIN
		SELECT postgis_raster_scripts_installed() INTO rast_scr_ver;
	EXCEPTION
		WHEN undefined_function THEN
			RAISE DEBUG 'Function postgis_raster_scripts_installed() not found. Is raster support enabled and rtpostgis.sql installed?';
		WHEN OTHERS THEN
			RAISE NOTICE 'Function postgis_raster_scripts_installed() could not be called: % (%)', SQLERRM, SQLSTATE;
	END;

	BEGIN
		SELECT landscape.postgis_raster_lib_version() INTO rast_lib_ver;
	EXCEPTION
		WHEN undefined_function THEN
			RAISE DEBUG 'Function postgis_raster_lib_version() not found. Is raster support enabled and rtpostgis.sql installed?';
		WHEN OTHERS THEN
			RAISE NOTICE 'Function postgis_raster_lib_version() could not be called: % (%)', SQLERRM, SQLSTATE;
	END;

	fullver = 'POSTGIS="' || libver;

	IF  librev IS NOT NULL THEN
		fullver = fullver || ' ' || librev;
	END IF;

	fullver = fullver || '"';

	IF EXISTS (
		SELECT * FROM pg_catalog.pg_extension
		WHERE extname = 'postgis')
	THEN
			fullver = fullver || ' [EXTENSION]';
			core_is_extension := true;
	ELSE
			core_is_extension := false;
	END IF;

	IF liblwgeomver != relproc THEN
		fullver = fullver || ' (liblwgeom version mismatch: "' || liblwgeomver || '")';
	END IF;

	fullver = fullver || ' PGSQL="' || pgsql_scr_ver || '"';
	IF pgsql_scr_ver != pgsql_ver THEN
		fullver = fullver || ' (procs need upgrade for use with PostgreSQL "' || pgsql_ver || '")';
	END IF;

	IF  geosver IS NOT NULL THEN
		fullver = fullver || ' GEOS="' || geosver || '"';
		IF (string_to_array(geosver, '.'))[1:2] != (string_to_array(geosver_compiled, '.'))[1:2]
		THEN
			fullver = format('%s (compiled against GEOS %s)', fullver, geosver_compiled);
		END IF;
	END IF;

	IF  sfcgalver IS NOT NULL THEN
		fullver = fullver || ' SFCGAL="' || sfcgalver || '"';
	END IF;

	IF  projver IS NOT NULL THEN
		fullver = fullver || ' PROJ="' || projver || '"';
		IF (string_to_array(projver, '.'))[1:3] != (string_to_array(projver_compiled, '.'))[1:3]
		THEN
			fullver = format('%s (compiled against PROJ %s)', fullver, projver_compiled);
		END IF;
	END IF;

	IF  gdalver IS NOT NULL THEN
		fullver = fullver || ' GDAL="' || gdalver || '"';
	END IF;

	IF  libxmlver IS NOT NULL THEN
		fullver = fullver || ' LIBXML="' || libxmlver || '"';
	END IF;

	IF json_lib_ver IS NOT NULL THEN
		fullver = fullver || ' LIBJSON="' || json_lib_ver || '"';
	END IF;

	IF protobuf_lib_ver IS NOT NULL THEN
		fullver = fullver || ' LIBPROTOBUF="' || protobuf_lib_ver || '"';
	END IF;

	IF wagyu_lib_ver IS NOT NULL THEN
		fullver = fullver || ' WAGYU="' || wagyu_lib_ver || '"';
	END IF;

	IF dbproc != relproc THEN
		fullver = fullver || ' (core procs from "' || dbproc || '" need upgrade)';
	END IF;

	IF topo_scr_ver IS NOT NULL THEN
		fullver = fullver || ' TOPOLOGY';
		IF topo_scr_ver != relproc THEN
			fullver = fullver || ' (topology procs from "' || topo_scr_ver || '" need upgrade)';
		END IF;
		IF core_is_extension AND NOT EXISTS (
			SELECT * FROM pg_catalog.pg_extension
			WHERE extname = 'postgis_topology')
		THEN
				fullver = fullver || ' [UNPACKAGED!]';
		END IF;
	END IF;

	IF rast_lib_ver IS NOT NULL THEN
		fullver = fullver || ' RASTER';
		IF rast_lib_ver != relproc THEN
			fullver = fullver || ' (raster lib from "' || rast_lib_ver || '" need upgrade)';
		END IF;
		IF core_is_extension AND NOT EXISTS (
			SELECT * FROM pg_catalog.pg_extension
			WHERE extname = 'postgis_raster')
		THEN
				fullver = fullver || ' [UNPACKAGED!]';
		END IF;
	END IF;

	IF rast_scr_ver IS NOT NULL AND rast_scr_ver != relproc THEN
		fullver = fullver || ' (raster procs from "' || rast_scr_ver || '" need upgrade)';
	END IF;

	IF sfcgal_scr_ver IS NOT NULL AND sfcgal_scr_ver != relproc THEN
		fullver = fullver || ' (sfcgal procs from "' || sfcgal_scr_ver || '" need upgrade)';
	END IF;

	-- Check for the presence of deprecated functions
	IF EXISTS ( SELECT oid FROM pg_catalog.pg_proc WHERE proname LIKE '%_deprecated_by_postgis_%' )
	THEN
		fullver = fullver || ' (deprecated functions exist, upgrade is not complete)';
	END IF;

	RETURN fullver;
END
$function$

```
### `postgis_geos_compiled_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_geos_compiled_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_geos_compiled_version$function$

```
### `postgis_geos_noop`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_geos_noop(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$GEOSnoop$function$

```
### `postgis_geos_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_geos_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_geos_version$function$

```
### `postgis_getbbox`

- Type: function
- Arguments: geometry
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_getbbox(geometry)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_to_BOX2DF$function$

```
### `postgis_hasbbox`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_hasbbox(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_hasBBOX$function$

```
### `postgis_index_supportfn`

- Type: function
- Arguments: internal
- Returns: internal

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_index_supportfn(internal)
 RETURNS internal
 LANGUAGE c
AS '$libdir/postgis-3', $function$postgis_index_supportfn$function$

```
### `postgis_lib_build_date`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_lib_build_date()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_lib_build_date$function$

```
### `postgis_lib_revision`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_lib_revision()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_lib_revision$function$

```
### `postgis_lib_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_lib_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_lib_version$function$

```
### `postgis_libjson_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_libjson_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$postgis_libjson_version$function$

```
### `postgis_liblwgeom_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_liblwgeom_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_liblwgeom_version$function$

```
### `postgis_libprotobuf_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_libprotobuf_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE STRICT
AS '$libdir/postgis-3', $function$postgis_libprotobuf_version$function$

```
### `postgis_libxml_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_libxml_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_libxml_version$function$

```
### `postgis_noop`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_noop(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_noop$function$

```
### `postgis_proj_compiled_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_proj_compiled_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_proj_compiled_version$function$

```
### `postgis_proj_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_proj_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_proj_version$function$

```
### `postgis_scripts_build_date`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_scripts_build_date()
 RETURNS text
 LANGUAGE sql
 IMMUTABLE
AS $function$SELECT '2025-08-21 13:24:22'::text AS version$function$

```
### `postgis_scripts_installed`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_scripts_installed()
 RETURNS text
 LANGUAGE sql
 IMMUTABLE
AS $function$ SELECT trim('3.5.0'::text || $rev$ d2c3ca4 $rev$) AS version $function$

```
### `postgis_scripts_released`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_scripts_released()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_scripts_released$function$

```
### `postgis_srs`

- Type: function
- Arguments: auth_name text, auth_srid text
- Returns: TABLE(auth_name text, auth_srid text, srname text, srtext text, proj4text text, point_sw geometry, point_ne geometry)

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_srs(auth_name text, auth_srid text)
 RETURNS TABLE(auth_name text, auth_srid text, srname text, srtext text, proj4text text, point_sw geometry, point_ne geometry)
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$postgis_srs_entry$function$

```
### `postgis_srs_all`

- Type: function
- Arguments: (none)
- Returns: TABLE(auth_name text, auth_srid text, srname text, srtext text, proj4text text, point_sw geometry, point_ne geometry)

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_srs_all()
 RETURNS TABLE(auth_name text, auth_srid text, srname text, srtext text, proj4text text, point_sw geometry, point_ne geometry)
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$postgis_srs_entry_all$function$

```
### `postgis_srs_codes`

- Type: function
- Arguments: auth_name text
- Returns: SETOF text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_srs_codes(auth_name text)
 RETURNS SETOF text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$postgis_srs_codes$function$

```
### `postgis_srs_search`

- Type: function
- Arguments: bounds geometry, authname text DEFAULT 'EPSG'::text
- Returns: TABLE(auth_name text, auth_srid text, srname text, srtext text, proj4text text, point_sw geometry, point_ne geometry)

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_srs_search(bounds geometry, authname text DEFAULT 'EPSG'::text)
 RETURNS TABLE(auth_name text, auth_srid text, srname text, srtext text, proj4text text, point_sw geometry, point_ne geometry)
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$postgis_srs_search$function$

```
### `postgis_svn_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_svn_version()
 RETURNS text
 LANGUAGE sql
 IMMUTABLE
AS $function$
	SELECT landscape._postgis_deprecate(
		'postgis_svn_version', 'postgis_lib_revision', '3.1.0');
	SELECT landscape.postgis_lib_revision();
$function$

```
### `postgis_transform_geometry`

- Type: function
- Arguments: geom geometry, text, text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_transform_geometry(geom geometry, text, text, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$transform_geom$function$

```
### `postgis_transform_pipeline_geometry`

- Type: function
- Arguments: geom geometry, pipeline text, forward boolean, to_srid integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_transform_pipeline_geometry(geom geometry, pipeline text, forward boolean, to_srid integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$transform_pipeline_geom$function$

```
### `postgis_type_name`

- Type: function
- Arguments: geomname character varying, coord_dimension integer, use_new_name boolean DEFAULT true
- Returns: character varying

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_type_name(geomname character varying, coord_dimension integer, use_new_name boolean DEFAULT true)
 RETURNS character varying
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$
	SELECT CASE WHEN $3 THEN new_name ELSE old_name END As geomname
	FROM
	( VALUES
			('GEOMETRY', 'Geometry', 2),
			('GEOMETRY', 'GeometryZ', 3),
			('GEOMETRYM', 'GeometryM', 3),
			('GEOMETRY', 'GeometryZM', 4),

			('GEOMETRYCOLLECTION', 'GeometryCollection', 2),
			('GEOMETRYCOLLECTION', 'GeometryCollectionZ', 3),
			('GEOMETRYCOLLECTIONM', 'GeometryCollectionM', 3),
			('GEOMETRYCOLLECTION', 'GeometryCollectionZM', 4),

			('POINT', 'Point', 2),
			('POINT', 'PointZ', 3),
			('POINTM','PointM', 3),
			('POINT', 'PointZM', 4),

			('MULTIPOINT','MultiPoint', 2),
			('MULTIPOINT','MultiPointZ', 3),
			('MULTIPOINTM','MultiPointM', 3),
			('MULTIPOINT','MultiPointZM', 4),

			('POLYGON', 'Polygon', 2),
			('POLYGON', 'PolygonZ', 3),
			('POLYGONM', 'PolygonM', 3),
			('POLYGON', 'PolygonZM', 4),

			('MULTIPOLYGON', 'MultiPolygon', 2),
			('MULTIPOLYGON', 'MultiPolygonZ', 3),
			('MULTIPOLYGONM', 'MultiPolygonM', 3),
			('MULTIPOLYGON', 'MultiPolygonZM', 4),

			('MULTILINESTRING', 'MultiLineString', 2),
			('MULTILINESTRING', 'MultiLineStringZ', 3),
			('MULTILINESTRINGM', 'MultiLineStringM', 3),
			('MULTILINESTRING', 'MultiLineStringZM', 4),

			('LINESTRING', 'LineString', 2),
			('LINESTRING', 'LineStringZ', 3),
			('LINESTRINGM', 'LineStringM', 3),
			('LINESTRING', 'LineStringZM', 4),

			('CIRCULARSTRING', 'CircularString', 2),
			('CIRCULARSTRING', 'CircularStringZ', 3),
			('CIRCULARSTRINGM', 'CircularStringM' ,3),
			('CIRCULARSTRING', 'CircularStringZM', 4),

			('COMPOUNDCURVE', 'CompoundCurve', 2),
			('COMPOUNDCURVE', 'CompoundCurveZ', 3),
			('COMPOUNDCURVEM', 'CompoundCurveM', 3),
			('COMPOUNDCURVE', 'CompoundCurveZM', 4),

			('CURVEPOLYGON', 'CurvePolygon', 2),
			('CURVEPOLYGON', 'CurvePolygonZ', 3),
			('CURVEPOLYGONM', 'CurvePolygonM', 3),
			('CURVEPOLYGON', 'CurvePolygonZM', 4),

			('MULTICURVE', 'MultiCurve', 2),
			('MULTICURVE', 'MultiCurveZ', 3),
			('MULTICURVEM', 'MultiCurveM', 3),
			('MULTICURVE', 'MultiCurveZM', 4),

			('MULTISURFACE', 'MultiSurface', 2),
			('MULTISURFACE', 'MultiSurfaceZ', 3),
			('MULTISURFACEM', 'MultiSurfaceM', 3),
			('MULTISURFACE', 'MultiSurfaceZM', 4),

			('POLYHEDRALSURFACE', 'PolyhedralSurface', 2),
			('POLYHEDRALSURFACE', 'PolyhedralSurfaceZ', 3),
			('POLYHEDRALSURFACEM', 'PolyhedralSurfaceM', 3),
			('POLYHEDRALSURFACE', 'PolyhedralSurfaceZM', 4),

			('TRIANGLE', 'Triangle', 2),
			('TRIANGLE', 'TriangleZ', 3),
			('TRIANGLEM', 'TriangleM', 3),
			('TRIANGLE', 'TriangleZM', 4),

			('TIN', 'Tin', 2),
			('TIN', 'TinZ', 3),
			('TINM', 'TinM', 3),
			('TIN', 'TinZM', 4) )
			 As g(old_name, new_name, coord_dimension)
	WHERE (upper(old_name) = upper($1) OR upper(new_name) = upper($1))
		AND coord_dimension = $2;
$function$

```
### `postgis_typmod_dims`

- Type: function
- Arguments: integer
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_typmod_dims(integer)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$postgis_typmod_dims$function$

```
### `postgis_typmod_srid`

- Type: function
- Arguments: integer
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_typmod_srid(integer)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$postgis_typmod_srid$function$

```
### `postgis_typmod_type`

- Type: function
- Arguments: integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_typmod_type(integer)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$postgis_typmod_type$function$

```
### `postgis_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_version$function$

```
### `postgis_wagyu_version`

- Type: function
- Arguments: (none)
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.postgis_wagyu_version()
 RETURNS text
 LANGUAGE c
 IMMUTABLE
AS '$libdir/postgis-3', $function$postgis_wagyu_version$function$

```
### `refresh_doc_search_mv`

- Type: function
- Arguments: (none)
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.refresh_doc_search_mv()
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
    REFRESH MATERIALIZED VIEW CONCURRENTLY landscape.mv_doc_search;
END;
$function$

```
### `refresh_mv_doc_search`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.refresh_mv_doc_search()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- Use CONCURRENTLY to avoid blocking reads
    -- Note: This requires a unique index on the matview
    REFRESH MATERIALIZED VIEW CONCURRENTLY landscape.mv_doc_search;
    RETURN NULL;
END;
$function$

```
### `remove_category_from_stage`

- Type: function
- Arguments: p_category_id integer, p_lifecycle_stage character varying
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.remove_category_from_stage(p_category_id integer, p_lifecycle_stage character varying)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
    DELETE FROM landscape.core_category_lifecycle_stages
    WHERE category_id = p_category_id
      AND lifecycle_stage = p_lifecycle_stage;
END;
$function$

```
### `remove_category_tag`

- Type: function
- Arguments: p_category_id integer, p_tag_name text
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.remove_category_tag(p_category_id integer, p_tag_name text)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
    UPDATE landscape.core_unit_cost_category
    SET tags = tags - p_tag_name,
        updated_at = NOW()
    WHERE category_id = p_category_id;
END;
$function$

```
### `set_active_scenario`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.set_active_scenario()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.is_active = true THEN
    -- Deactivate all other scenarios for this project
    UPDATE tbl_scenario
    SET is_active = false
    WHERE project_id = NEW.project_id
      AND scenario_id != NEW.scenario_id;
  END IF;

  RETURN NEW;
END;
$function$

```
### `sparsevec`

- Type: function
- Arguments: sparsevec, integer, boolean
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec(sparsevec, integer, boolean)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec$function$

```
### `sparsevec_cmp`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_cmp(sparsevec, sparsevec)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_cmp$function$

```
### `sparsevec_eq`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_eq(sparsevec, sparsevec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_eq$function$

```
### `sparsevec_ge`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_ge(sparsevec, sparsevec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_ge$function$

```
### `sparsevec_gt`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_gt(sparsevec, sparsevec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_gt$function$

```
### `sparsevec_in`

- Type: function
- Arguments: cstring, oid, integer
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_in(cstring, oid, integer)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_in$function$

```
### `sparsevec_l2_squared_distance`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_l2_squared_distance(sparsevec, sparsevec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_l2_squared_distance$function$

```
### `sparsevec_le`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_le(sparsevec, sparsevec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_le$function$

```
### `sparsevec_lt`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_lt(sparsevec, sparsevec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_lt$function$

```
### `sparsevec_ne`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_ne(sparsevec, sparsevec)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_ne$function$

```
### `sparsevec_negative_inner_product`

- Type: function
- Arguments: sparsevec, sparsevec
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_negative_inner_product(sparsevec, sparsevec)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_negative_inner_product$function$

```
### `sparsevec_out`

- Type: function
- Arguments: sparsevec
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_out(sparsevec)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_out$function$

```
### `sparsevec_recv`

- Type: function
- Arguments: internal, oid, integer
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_recv(internal, oid, integer)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_recv$function$

```
### `sparsevec_send`

- Type: function
- Arguments: sparsevec
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_send(sparsevec)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_send$function$

```
### `sparsevec_to_halfvec`

- Type: function
- Arguments: sparsevec, integer, boolean
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_to_halfvec(sparsevec, integer, boolean)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_to_halfvec$function$

```
### `sparsevec_to_vector`

- Type: function
- Arguments: sparsevec, integer, boolean
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_to_vector(sparsevec, integer, boolean)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_to_vector$function$

```
### `sparsevec_typmod_in`

- Type: function
- Arguments: cstring[]
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.sparsevec_typmod_in(cstring[])
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$sparsevec_typmod_in$function$

```
### `spheroid_in`

- Type: function
- Arguments: cstring
- Returns: spheroid

```sql
CREATE OR REPLACE FUNCTION landscape.spheroid_in(cstring)
 RETURNS spheroid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$ellipsoid_in$function$

```
### `spheroid_out`

- Type: function
- Arguments: spheroid
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.spheroid_out(spheroid)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$ellipsoid_out$function$

```
### `st_3dclosestpoint`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dclosestpoint(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_closestpoint3d$function$

```
### `st_3ddfullywithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_3ddfullywithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$LWGEOM_dfullywithin3d$function$

```
### `st_3ddistance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_3ddistance(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_3DDistance$function$

```
### `st_3ddwithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_3ddwithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$LWGEOM_dwithin3d$function$

```
### `st_3dextent`

- Type: aggregate
- Arguments: geometry
- Returns: box3d

`routine_definition` is null (commonly aggregate/system metadata).

### `st_3dintersects`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dintersects(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$ST_3DIntersects$function$

```
### `st_3dlength`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dlength(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_length_linestring$function$

```
### `st_3dlineinterpolatepoint`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dlineinterpolatepoint(geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_3DLineInterpolatePoint$function$

```
### `st_3dlongestline`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dlongestline(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_longestline3d$function$

```
### `st_3dmakebox`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dmakebox(geom1 geometry, geom2 geometry)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX3D_construct$function$

```
### `st_3dmaxdistance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dmaxdistance(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_maxdistance3d$function$

```
### `st_3dperimeter`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dperimeter(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_perimeter_poly$function$

```
### `st_3dshortestline`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_3dshortestline(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_shortestline3d$function$

```
### `st_addmeasure`

- Type: function
- Arguments: geometry, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_addmeasure(geometry, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_AddMeasure$function$

```
### `st_addpoint`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_addpoint(geom1 geometry, geom2 geometry, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_addpoint$function$

```
### `st_addpoint`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_addpoint(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_addpoint$function$

```
### `st_affine`

- Type: function
- Arguments: geometry, double precision, double precision, double precision, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_affine(geometry, double precision, double precision, double precision, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1,  $2, $3, 0,  $4, $5, 0,  0, 0, 1,  $6, $7, 0)$function$

```
### `st_affine`

- Type: function
- Arguments: geometry, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_affine(geometry, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_affine$function$

```
### `st_angle`

- Type: function
- Arguments: pt1 geometry, pt2 geometry, pt3 geometry, pt4 geometry DEFAULT '0101000000000000000000F87F000000000000F87F'::geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_angle(pt1 geometry, pt2 geometry, pt3 geometry, pt4 geometry DEFAULT '0101000000000000000000F87F000000000000F87F'::geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_angle$function$

```
### `st_angle`

- Type: function
- Arguments: line1 geometry, line2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_angle(line1 geometry, line2 geometry)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT ST_Angle(St_StartPoint($1), ST_EndPoint($1), St_StartPoint($2), ST_EndPoint($2))$function$

```
### `st_area`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_area(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Area$function$

```
### `st_area`

- Type: function
- Arguments: geog geography, use_spheroid boolean DEFAULT true
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_area(geog geography, use_spheroid boolean DEFAULT true)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_area$function$

```
### `st_area`

- Type: function
- Arguments: text
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_area(text)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$ SELECT landscape.ST_Area($1::landscape.geometry);  $function$

```
### `st_area2d`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_area2d(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Area$function$

```
### `st_asbinary`

- Type: function
- Arguments: geometry
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_asbinary(geometry)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_asBinary$function$

```
### `st_asbinary`

- Type: function
- Arguments: geography, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_asbinary(geography, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$LWGEOM_asBinary$function$

```
### `st_asbinary`

- Type: function
- Arguments: geography
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_asbinary(geography)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_asBinary$function$

```
### `st_asbinary`

- Type: function
- Arguments: geometry, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_asbinary(geometry, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_asBinary$function$

```
### `st_asencodedpolyline`

- Type: function
- Arguments: geom geometry, nprecision integer DEFAULT 5
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asencodedpolyline(geom geometry, nprecision integer DEFAULT 5)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asEncodedPolyline$function$

```
### `st_asewkb`

- Type: function
- Arguments: geometry, text
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_asewkb(geometry, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$WKBFromLWGEOM$function$

```
### `st_asewkb`

- Type: function
- Arguments: geometry
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_asewkb(geometry)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$WKBFromLWGEOM$function$

```
### `st_asewkt`

- Type: function
- Arguments: geography, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asewkt(geography, integer)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asEWKT$function$

```
### `st_asewkt`

- Type: function
- Arguments: geography
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asewkt(geography)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asEWKT$function$

```
### `st_asewkt`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asewkt(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asEWKT$function$

```
### `st_asewkt`

- Type: function
- Arguments: geometry, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asewkt(geometry, integer)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asEWKT$function$

```
### `st_asewkt`

- Type: function
- Arguments: text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asewkt(text)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$ SELECT landscape.ST_AsEWKT($1::landscape.geometry);  $function$

```
### `st_asflatgeobuf`

- Type: aggregate
- Arguments: anyelement
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asflatgeobuf`

- Type: aggregate
- Arguments: anyelement, boolean, text
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asflatgeobuf`

- Type: aggregate
- Arguments: anyelement, boolean
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asgeobuf`

- Type: aggregate
- Arguments: anyelement, text
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asgeobuf`

- Type: aggregate
- Arguments: anyelement
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asgeojson`

- Type: function
- Arguments: r record, geom_column text DEFAULT ''::text, maxdecimaldigits integer DEFAULT 9, pretty_bool boolean DEFAULT false, id_column text DEFAULT ''::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgeojson(r record, geom_column text DEFAULT ''::text, maxdecimaldigits integer DEFAULT 9, pretty_bool boolean DEFAULT false, id_column text DEFAULT ''::text)
 RETURNS text
 LANGUAGE c
 STABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_AsGeoJsonRow$function$

```
### `st_asgeojson`

- Type: function
- Arguments: geom geometry, maxdecimaldigits integer DEFAULT 9, options integer DEFAULT 8
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgeojson(geom geometry, maxdecimaldigits integer DEFAULT 9, options integer DEFAULT 8)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asGeoJson$function$

```
### `st_asgeojson`

- Type: function
- Arguments: geog geography, maxdecimaldigits integer DEFAULT 9, options integer DEFAULT 0
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgeojson(geog geography, maxdecimaldigits integer DEFAULT 9, options integer DEFAULT 0)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_as_geojson$function$

```
### `st_asgeojson`

- Type: function
- Arguments: text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgeojson(text)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$ SELECT landscape.ST_AsGeoJson($1::landscape.geometry, 9, 0);  $function$

```
### `st_asgml`

- Type: function
- Arguments: version integer, geog geography, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0, nprefix text DEFAULT 'gml'::text, id text DEFAULT ''::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgml(version integer, geog geography, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0, nprefix text DEFAULT 'gml'::text, id text DEFAULT ''::text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_as_gml$function$

```
### `st_asgml`

- Type: function
- Arguments: geog geography, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0, nprefix text DEFAULT 'gml'::text, id text DEFAULT ''::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgml(geog geography, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0, nprefix text DEFAULT 'gml'::text, id text DEFAULT ''::text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_as_gml$function$

```
### `st_asgml`

- Type: function
- Arguments: version integer, geom geometry, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0, nprefix text DEFAULT NULL::text, id text DEFAULT NULL::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgml(version integer, geom geometry, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0, nprefix text DEFAULT NULL::text, id text DEFAULT NULL::text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asGML$function$

```
### `st_asgml`

- Type: function
- Arguments: text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgml(text)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$ SELECT landscape._ST_AsGML(2,$1::landscape.geometry,15,0, NULL, NULL);  $function$

```
### `st_asgml`

- Type: function
- Arguments: geom geometry, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asgml(geom geometry, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asGML$function$

```
### `st_ashexewkb`

- Type: function
- Arguments: geometry, text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_ashexewkb(geometry, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_asHEXEWKB$function$

```
### `st_ashexewkb`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_ashexewkb(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_asHEXEWKB$function$

```
### `st_askml`

- Type: function
- Arguments: text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_askml(text)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$ SELECT landscape.ST_AsKML($1::landscape.geometry, 15);  $function$

```
### `st_askml`

- Type: function
- Arguments: geog geography, maxdecimaldigits integer DEFAULT 15, nprefix text DEFAULT ''::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_askml(geog geography, maxdecimaldigits integer DEFAULT 15, nprefix text DEFAULT ''::text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_as_kml$function$

```
### `st_askml`

- Type: function
- Arguments: geom geometry, maxdecimaldigits integer DEFAULT 15, nprefix text DEFAULT ''::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_askml(geom geometry, maxdecimaldigits integer DEFAULT 15, nprefix text DEFAULT ''::text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asKML$function$

```
### `st_aslatlontext`

- Type: function
- Arguments: geom geometry, tmpl text DEFAULT ''::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_aslatlontext(geom geometry, tmpl text DEFAULT ''::text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_to_latlon$function$

```
### `st_asmarc21`

- Type: function
- Arguments: geom geometry, format text DEFAULT 'hdddmmss'::text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asmarc21(geom geometry, format text DEFAULT 'hdddmmss'::text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_AsMARC21$function$

```
### `st_asmvt`

- Type: aggregate
- Arguments: anyelement
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asmvt`

- Type: aggregate
- Arguments: anyelement, text
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asmvt`

- Type: aggregate
- Arguments: anyelement, text, integer
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asmvt`

- Type: aggregate
- Arguments: anyelement, text, integer, text
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asmvt`

- Type: aggregate
- Arguments: anyelement, text, integer, text, text
- Returns: bytea

`routine_definition` is null (commonly aggregate/system metadata).

### `st_asmvtgeom`

- Type: function
- Arguments: geom geometry, bounds box2d, extent integer DEFAULT 4096, buffer integer DEFAULT 256, clip_geom boolean DEFAULT true
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_asmvtgeom(geom geometry, bounds box2d, extent integer DEFAULT 4096, buffer integer DEFAULT 256, clip_geom boolean DEFAULT true)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$ST_AsMVTGeom$function$

```
### `st_assvg`

- Type: function
- Arguments: geog geography, rel integer DEFAULT 0, maxdecimaldigits integer DEFAULT 15
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_assvg(geog geography, rel integer DEFAULT 0, maxdecimaldigits integer DEFAULT 15)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_as_svg$function$

```
### `st_assvg`

- Type: function
- Arguments: text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_assvg(text)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$ SELECT landscape.ST_AsSVG($1::landscape.geometry,0,15);  $function$

```
### `st_assvg`

- Type: function
- Arguments: geom geometry, rel integer DEFAULT 0, maxdecimaldigits integer DEFAULT 15
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_assvg(geom geometry, rel integer DEFAULT 0, maxdecimaldigits integer DEFAULT 15)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asSVG$function$

```
### `st_astext`

- Type: function
- Arguments: text
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_astext(text)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$ SELECT landscape.ST_AsText($1::landscape.geometry);  $function$

```
### `st_astext`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_astext(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asText$function$

```
### `st_astext`

- Type: function
- Arguments: geometry, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_astext(geometry, integer)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asText$function$

```
### `st_astext`

- Type: function
- Arguments: geography
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_astext(geography)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asText$function$

```
### `st_astext`

- Type: function
- Arguments: geography, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_astext(geography, integer)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_asText$function$

```
### `st_astwkb`

- Type: function
- Arguments: geom geometry, prec integer DEFAULT NULL::integer, prec_z integer DEFAULT NULL::integer, prec_m integer DEFAULT NULL::integer, with_sizes boolean DEFAULT NULL::boolean, with_boxes boolean DEFAULT NULL::boolean
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_astwkb(geom geometry, prec integer DEFAULT NULL::integer, prec_z integer DEFAULT NULL::integer, prec_m integer DEFAULT NULL::integer, with_sizes boolean DEFAULT NULL::boolean, with_boxes boolean DEFAULT NULL::boolean)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$TWKBFromLWGEOM$function$

```
### `st_astwkb`

- Type: function
- Arguments: geom geometry[], ids bigint[], prec integer DEFAULT NULL::integer, prec_z integer DEFAULT NULL::integer, prec_m integer DEFAULT NULL::integer, with_sizes boolean DEFAULT NULL::boolean, with_boxes boolean DEFAULT NULL::boolean
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.st_astwkb(geom geometry[], ids bigint[], prec integer DEFAULT NULL::integer, prec_z integer DEFAULT NULL::integer, prec_m integer DEFAULT NULL::integer, with_sizes boolean DEFAULT NULL::boolean, with_boxes boolean DEFAULT NULL::boolean)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$TWKBFromLWGEOMArray$function$

```
### `st_asx3d`

- Type: function
- Arguments: geom geometry, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_asx3d(geom geometry, maxdecimaldigits integer DEFAULT 15, options integer DEFAULT 0)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE COST 250
AS $function$SELECT landscape._ST_AsX3D(3,$1,$2,$3,'');$function$

```
### `st_azimuth`

- Type: function
- Arguments: geog1 geography, geog2 geography
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_azimuth(geog1 geography, geog2 geography)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_azimuth$function$

```
### `st_azimuth`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_azimuth(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_azimuth$function$

```
### `st_bdmpolyfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_bdmpolyfromtext(text, integer)
 RETURNS geometry
 LANGUAGE plpgsql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$
DECLARE
	geomtext alias for $1;
	srid alias for $2;
	mline landscape.geometry;
	geom landscape.geometry;
BEGIN
	mline := landscape.ST_MultiLineStringFromText(geomtext, srid);

	IF mline IS NULL
	THEN
		RAISE EXCEPTION 'Input is not a MultiLinestring';
	END IF;

	geom := landscape.ST_Multi(landscape.ST_BuildArea(mline));

	RETURN geom;
END;
$function$

```
### `st_bdpolyfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_bdpolyfromtext(text, integer)
 RETURNS geometry
 LANGUAGE plpgsql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$
DECLARE
	geomtext alias for $1;
	srid alias for $2;
	mline landscape.geometry;
	geom landscape.geometry;
BEGIN
	mline := landscape.ST_MultiLineStringFromText(geomtext, srid);

	IF mline IS NULL
	THEN
		RAISE EXCEPTION 'Input is not a MultiLinestring';
	END IF;

	geom := landscape.ST_BuildArea(mline);

	IF landscape.GeometryType(geom) != 'POLYGON'
	THEN
		RAISE EXCEPTION 'Input returns more then a single polygon, try using BdMPolyFromText instead';
	END IF;

	RETURN geom;
END;
$function$

```
### `st_boundary`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_boundary(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$boundary$function$

```
### `st_boundingdiagonal`

- Type: function
- Arguments: geom geometry, fits boolean DEFAULT false
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_boundingdiagonal(geom geometry, fits boolean DEFAULT false)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$ST_BoundingDiagonal$function$

```
### `st_box2dfromgeohash`

- Type: function
- Arguments: text, integer DEFAULT NULL::integer
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_box2dfromgeohash(text, integer DEFAULT NULL::integer)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$box2d_from_geohash$function$

```
### `st_buffer`

- Type: function
- Arguments: text, double precision, text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(text, double precision, text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$ SELECT landscape.ST_Buffer($1::landscape.geometry, $2, $3);  $function$

```
### `st_buffer`

- Type: function
- Arguments: geom geometry, radius double precision, options text DEFAULT ''::text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(geom geometry, radius double precision, options text DEFAULT ''::text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$buffer$function$

```
### `st_buffer`

- Type: function
- Arguments: geom geometry, radius double precision, quadsegs integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(geom geometry, radius double precision, quadsegs integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$ SELECT landscape.ST_Buffer($1, $2, CAST('quad_segs='||CAST($3 AS text) as text)) $function$

```
### `st_buffer`

- Type: function
- Arguments: geography, double precision
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(geography, double precision)
 RETURNS geography
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$SELECT landscape.geography(landscape.ST_Transform(landscape.ST_Buffer(landscape.ST_Transform(landscape.geometry($1), landscape._ST_BestSRID($1)), $2), landscape.ST_SRID($1)))$function$

```
### `st_buffer`

- Type: function
- Arguments: geography, double precision, integer
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(geography, double precision, integer)
 RETURNS geography
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$SELECT landscape.geography(landscape.ST_Transform(landscape.ST_Buffer(landscape.ST_Transform(landscape.geometry($1), landscape._ST_BestSRID($1)), $2, $3), landscape.ST_SRID($1)))$function$

```
### `st_buffer`

- Type: function
- Arguments: geography, double precision, text
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(geography, double precision, text)
 RETURNS geography
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$SELECT landscape.geography(landscape.ST_Transform(landscape.ST_Buffer(landscape.ST_Transform(landscape.geometry($1), landscape._ST_BestSRID($1)), $2, $3), landscape.ST_SRID($1)))$function$

```
### `st_buffer`

- Type: function
- Arguments: text, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(text, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$ SELECT landscape.ST_Buffer($1::landscape.geometry, $2);  $function$

```
### `st_buffer`

- Type: function
- Arguments: text, double precision, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_buffer(text, double precision, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$ SELECT landscape.ST_Buffer($1::landscape.geometry, $2, $3);  $function$

```
### `st_buildarea`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_buildarea(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_BuildArea$function$

```
### `st_centroid`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_centroid(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$centroid$function$

```
### `st_centroid`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_centroid(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$ SELECT landscape.ST_Centroid($1::landscape.geometry);  $function$

```
### `st_centroid`

- Type: function
- Arguments: geography, use_spheroid boolean DEFAULT true
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_centroid(geography, use_spheroid boolean DEFAULT true)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_centroid$function$

```
### `st_chaikinsmoothing`

- Type: function
- Arguments: geometry, integer DEFAULT 1, boolean DEFAULT false
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_chaikinsmoothing(geometry, integer DEFAULT 1, boolean DEFAULT false)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_ChaikinSmoothing$function$

```
### `st_cleangeometry`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_cleangeometry(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_CleanGeometry$function$

```
### `st_clipbybox2d`

- Type: function
- Arguments: geom geometry, box box2d
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_clipbybox2d(geom geometry, box box2d)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_ClipByBox2d$function$

```
### `st_closestpoint`

- Type: function
- Arguments: geography, geography, use_spheroid boolean DEFAULT true
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_closestpoint(geography, geography, use_spheroid boolean DEFAULT true)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_closestpoint$function$

```
### `st_closestpoint`

- Type: function
- Arguments: text, text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_closestpoint(text, text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_ClosestPoint($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_closestpoint`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_closestpoint(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_closestpoint$function$

```
### `st_closestpointofapproach`

- Type: function
- Arguments: geometry, geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_closestpointofapproach(geometry, geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_ClosestPointOfApproach$function$

```
### `st_clusterdbscan`

- Type: function
- Arguments: geometry, eps double precision, minpoints integer
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_clusterdbscan(geometry, eps double precision, minpoints integer)
 RETURNS integer
 LANGUAGE c
 WINDOW IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_ClusterDBSCAN$function$

```
### `st_clusterintersecting`

- Type: function
- Arguments: geometry[]
- Returns: geometry[]

```sql
CREATE OR REPLACE FUNCTION landscape.st_clusterintersecting(geometry[])
 RETURNS geometry[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$clusterintersecting_garray$function$

```
### `st_clusterintersecting`

- Type: aggregate
- Arguments: geometry
- Returns: geometry[]

`routine_definition` is null (commonly aggregate/system metadata).

### `st_clusterintersectingwin`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_clusterintersectingwin(geometry)
 RETURNS integer
 LANGUAGE c
 WINDOW IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_ClusterIntersectingWin$function$

```
### `st_clusterkmeans`

- Type: function
- Arguments: geom geometry, k integer, max_radius double precision DEFAULT NULL::double precision
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_clusterkmeans(geom geometry, k integer, max_radius double precision DEFAULT NULL::double precision)
 RETURNS integer
 LANGUAGE c
 WINDOW STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_ClusterKMeans$function$

```
### `st_clusterwithin`

- Type: function
- Arguments: geometry[], double precision
- Returns: geometry[]

```sql
CREATE OR REPLACE FUNCTION landscape.st_clusterwithin(geometry[], double precision)
 RETURNS geometry[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$cluster_within_distance_garray$function$

```
### `st_clusterwithin`

- Type: aggregate
- Arguments: geometry, double precision
- Returns: geometry[]

`routine_definition` is null (commonly aggregate/system metadata).

### `st_clusterwithinwin`

- Type: function
- Arguments: geometry, distance double precision
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_clusterwithinwin(geometry, distance double precision)
 RETURNS integer
 LANGUAGE c
 WINDOW IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_ClusterWithinWin$function$

```
### `st_collect`

- Type: function
- Arguments: geometry[]
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_collect(geometry[])
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_collect_garray$function$

```
### `st_collect`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_collect(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$LWGEOM_collect$function$

```
### `st_collect`

- Type: aggregate
- Arguments: geometry
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_collectionextract`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_collectionextract(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_CollectionExtract$function$

```
### `st_collectionextract`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_collectionextract(geometry, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_CollectionExtract$function$

```
### `st_collectionhomogenize`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_collectionhomogenize(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_CollectionHomogenize$function$

```
### `st_combinebbox`

- Type: function
- Arguments: box3d, box3d
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.st_combinebbox(box3d, box3d)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$BOX3D_combine_BOX3D$function$

```
### `st_combinebbox`

- Type: function
- Arguments: box3d, geometry
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.st_combinebbox(box3d, geometry)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$BOX3D_combine$function$

```
### `st_combinebbox`

- Type: function
- Arguments: box2d, geometry
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_combinebbox(box2d, geometry)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE
AS '$libdir/postgis-3', $function$BOX2D_combine$function$

```
### `st_concavehull`

- Type: function
- Arguments: param_geom geometry, param_pctconvex double precision, param_allow_holes boolean DEFAULT false
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_concavehull(param_geom geometry, param_pctconvex double precision, param_allow_holes boolean DEFAULT false)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_ConcaveHull$function$

```
### `st_contains`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_contains(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$contains$function$

```
### `st_containsproperly`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_containsproperly(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$containsproperly$function$

```
### `st_convexhull`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_convexhull(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$convexhull$function$

```
### `st_coorddim`

- Type: function
- Arguments: geometry geometry
- Returns: smallint

```sql
CREATE OR REPLACE FUNCTION landscape.st_coorddim(geometry geometry)
 RETURNS smallint
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_ndims$function$

```
### `st_coverageinvalidedges`

- Type: function
- Arguments: geom geometry, tolerance double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_coverageinvalidedges(geom geometry, tolerance double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 WINDOW IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_CoverageInvalidEdges$function$

```
### `st_coveragesimplify`

- Type: function
- Arguments: geom geometry, tolerance double precision, simplifyboundary boolean DEFAULT true
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_coveragesimplify(geom geometry, tolerance double precision, simplifyboundary boolean DEFAULT true)
 RETURNS geometry
 LANGUAGE c
 WINDOW IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_CoverageSimplify$function$

```
### `st_coverageunion`

- Type: function
- Arguments: geometry[]
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_coverageunion(geometry[])
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_CoverageUnion$function$

```
### `st_coverageunion`

- Type: aggregate
- Arguments: geometry
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_coveredby`

- Type: function
- Arguments: geog1 geography, geog2 geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_coveredby(geog1 geography, geog2 geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$geography_coveredby$function$

```
### `st_coveredby`

- Type: function
- Arguments: text, text
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_coveredby(text, text)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_CoveredBy($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_coveredby`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_coveredby(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$coveredby$function$

```
### `st_covers`

- Type: function
- Arguments: text, text
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_covers(text, text)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_Covers($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_covers`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_covers(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$covers$function$

```
### `st_covers`

- Type: function
- Arguments: geog1 geography, geog2 geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_covers(geog1 geography, geog2 geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$geography_covers$function$

```
### `st_cpawithin`

- Type: function
- Arguments: geometry, geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_cpawithin(geometry, geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_CPAWithin$function$

```
### `st_crosses`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_crosses(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$crosses$function$

```
### `st_curven`

- Type: function
- Arguments: geometry geometry, i integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_curven(geometry geometry, i integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_CurveN$function$

```
### `st_curvetoline`

- Type: function
- Arguments: geom geometry, tol double precision DEFAULT 32, toltype integer DEFAULT 0, flags integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_curvetoline(geom geometry, tol double precision DEFAULT 32, toltype integer DEFAULT 0, flags integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_CurveToLine$function$

```
### `st_delaunaytriangles`

- Type: function
- Arguments: g1 geometry, tolerance double precision DEFAULT 0.0, flags integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_delaunaytriangles(g1 geometry, tolerance double precision DEFAULT 0.0, flags integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_DelaunayTriangles$function$

```
### `st_dfullywithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_dfullywithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$LWGEOM_dfullywithin$function$

```
### `st_difference`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, gridsize double precision DEFAULT '-1.0'::numeric
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_difference(geom1 geometry, geom2 geometry, gridsize double precision DEFAULT '-1.0'::numeric)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Difference$function$

```
### `st_dimension`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_dimension(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_dimension$function$

```
### `st_disjoint`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_disjoint(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$disjoint$function$

```
### `st_distance`

- Type: function
- Arguments: text, text
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distance(text, text)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$ SELECT landscape.ST_Distance($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_distance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distance(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Distance$function$

```
### `st_distance`

- Type: function
- Arguments: geog1 geography, geog2 geography, use_spheroid boolean DEFAULT true
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distance(geog1 geography, geog2 geography, use_spheroid boolean DEFAULT true)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$geography_distance$function$

```
### `st_distancecpa`

- Type: function
- Arguments: geometry, geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distancecpa(geometry, geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_DistanceCPA$function$

```
### `st_distancesphere`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, radius double precision
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distancesphere(geom1 geometry, geom2 geometry, radius double precision)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_distance_sphere$function$

```
### `st_distancesphere`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distancesphere(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$select landscape.ST_distance( landscape.geography($1), landscape.geography($2),false)$function$

```
### `st_distancespheroid`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, spheroid
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distancespheroid(geom1 geometry, geom2 geometry, spheroid)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_distance_ellipsoid$function$

```
### `st_distancespheroid`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_distancespheroid(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_distance_ellipsoid$function$

```
### `st_dump`

- Type: function
- Arguments: geometry
- Returns: SETOF geometry_dump

```sql
CREATE OR REPLACE FUNCTION landscape.st_dump(geometry)
 RETURNS SETOF geometry_dump
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_dump$function$

```
### `st_dumppoints`

- Type: function
- Arguments: geometry
- Returns: SETOF geometry_dump

```sql
CREATE OR REPLACE FUNCTION landscape.st_dumppoints(geometry)
 RETURNS SETOF geometry_dump
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_dumppoints$function$

```
### `st_dumprings`

- Type: function
- Arguments: geometry
- Returns: SETOF geometry_dump

```sql
CREATE OR REPLACE FUNCTION landscape.st_dumprings(geometry)
 RETURNS SETOF geometry_dump
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_dump_rings$function$

```
### `st_dumpsegments`

- Type: function
- Arguments: geometry
- Returns: SETOF geometry_dump

```sql
CREATE OR REPLACE FUNCTION landscape.st_dumpsegments(geometry)
 RETURNS SETOF geometry_dump
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_dumpsegments$function$

```
### `st_dwithin`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_dwithin(geom1 geometry, geom2 geometry, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$LWGEOM_dwithin$function$

```
### `st_dwithin`

- Type: function
- Arguments: text, text, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_dwithin(text, text, double precision)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_DWithin($1::landscape.geometry, $2::landscape.geometry, $3);  $function$

```
### `st_dwithin`

- Type: function
- Arguments: geog1 geography, geog2 geography, tolerance double precision, use_spheroid boolean DEFAULT true
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_dwithin(geog1 geography, geog2 geography, tolerance double precision, use_spheroid boolean DEFAULT true)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$geography_dwithin$function$

```
### `st_endpoint`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_endpoint(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_endpoint_linestring$function$

```
### `st_envelope`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_envelope(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_envelope$function$

```
### `st_equals`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_equals(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$ST_Equals$function$

```
### `st_estimatedextent`

- Type: function
- Arguments: text, text
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_estimatedextent(text, text)
 RETURNS box2d
 LANGUAGE c
 STABLE STRICT
AS '$libdir/postgis-3', $function$gserialized_estimated_extent$function$

```
### `st_estimatedextent`

- Type: function
- Arguments: text, text, text
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_estimatedextent(text, text, text)
 RETURNS box2d
 LANGUAGE c
 STABLE STRICT
AS '$libdir/postgis-3', $function$gserialized_estimated_extent$function$

```
### `st_estimatedextent`

- Type: function
- Arguments: text, text, text, boolean
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_estimatedextent(text, text, text, boolean)
 RETURNS box2d
 LANGUAGE c
 STABLE STRICT
AS '$libdir/postgis-3', $function$gserialized_estimated_extent$function$

```
### `st_expand`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_expand(geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_expand$function$

```
### `st_expand`

- Type: function
- Arguments: box3d, double precision
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.st_expand(box3d, double precision)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX3D_expand$function$

```
### `st_expand`

- Type: function
- Arguments: box box3d, dx double precision, dy double precision, dz double precision DEFAULT 0
- Returns: box3d

```sql
CREATE OR REPLACE FUNCTION landscape.st_expand(box box3d, dx double precision, dy double precision, dz double precision DEFAULT 0)
 RETURNS box3d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$BOX3D_expand$function$

```
### `st_expand`

- Type: function
- Arguments: box2d, double precision
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_expand(box2d, double precision)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX2D_expand$function$

```
### `st_expand`

- Type: function
- Arguments: box box2d, dx double precision, dy double precision
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_expand(box box2d, dx double precision, dy double precision)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX2D_expand$function$

```
### `st_expand`

- Type: function
- Arguments: geom geometry, dx double precision, dy double precision, dz double precision DEFAULT 0, dm double precision DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_expand(geom geometry, dx double precision, dy double precision, dz double precision DEFAULT 0, dm double precision DEFAULT 0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_expand$function$

```
### `st_extent`

- Type: aggregate
- Arguments: geometry
- Returns: box2d

`routine_definition` is null (commonly aggregate/system metadata).

### `st_exteriorring`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_exteriorring(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_exteriorring_polygon$function$

```
### `st_filterbym`

- Type: function
- Arguments: geometry, double precision, double precision DEFAULT NULL::double precision, boolean DEFAULT false
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_filterbym(geometry, double precision, double precision DEFAULT NULL::double precision, boolean DEFAULT false)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$LWGEOM_FilterByM$function$

```
### `st_findextent`

- Type: function
- Arguments: text, text
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_findextent(text, text)
 RETURNS box2d
 LANGUAGE plpgsql
 STABLE PARALLEL SAFE STRICT
AS $function$
DECLARE
	tablename alias for $1;
	columnname alias for $2;
	myrec RECORD;

BEGIN
	FOR myrec IN EXECUTE 'SELECT landscape.ST_Extent("' || columnname || '") As extent FROM "' || tablename || '"' LOOP
		return myrec.extent;
	END LOOP;
END;
$function$

```
### `st_findextent`

- Type: function
- Arguments: text, text, text
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_findextent(text, text, text)
 RETURNS box2d
 LANGUAGE plpgsql
 STABLE PARALLEL SAFE STRICT
AS $function$
DECLARE
	schemaname alias for $1;
	tablename alias for $2;
	columnname alias for $3;
	myrec RECORD;
BEGIN
	FOR myrec IN EXECUTE 'SELECT landscape.ST_Extent("' || columnname || '") As extent FROM "' || schemaname || '"."' || tablename || '"' LOOP
		return myrec.extent;
	END LOOP;
END;
$function$

```
### `st_flipcoordinates`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_flipcoordinates(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_FlipCoordinates$function$

```
### `st_force2d`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_force2d(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_2d$function$

```
### `st_force3d`

- Type: function
- Arguments: geom geometry, zvalue double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_force3d(geom geometry, zvalue double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Force3DZ($1, $2)$function$

```
### `st_force3dm`

- Type: function
- Arguments: geom geometry, mvalue double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_force3dm(geom geometry, mvalue double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_3dm$function$

```
### `st_force3dz`

- Type: function
- Arguments: geom geometry, zvalue double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_force3dz(geom geometry, zvalue double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_3dz$function$

```
### `st_force4d`

- Type: function
- Arguments: geom geometry, zvalue double precision DEFAULT 0.0, mvalue double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_force4d(geom geometry, zvalue double precision DEFAULT 0.0, mvalue double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_4d$function$

```
### `st_forcecollection`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_forcecollection(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_collection$function$

```
### `st_forcecurve`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_forcecurve(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_force_curve$function$

```
### `st_forcepolygonccw`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_forcepolygonccw(geometry)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$ SELECT landscape.ST_Reverse(landscape.ST_ForcePolygonCW($1)) $function$

```
### `st_forcepolygoncw`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_forcepolygoncw(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_clockwise_poly$function$

```
### `st_forcerhr`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_forcerhr(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_clockwise_poly$function$

```
### `st_forcesfs`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_forcesfs(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_force_sfs$function$

```
### `st_forcesfs`

- Type: function
- Arguments: geometry, version text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_forcesfs(geometry, version text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_force_sfs$function$

```
### `st_frechetdistance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision DEFAULT '-1'::integer
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_frechetdistance(geom1 geometry, geom2 geometry, double precision DEFAULT '-1'::integer)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_FrechetDistance$function$

```
### `st_fromflatgeobuf`

- Type: function
- Arguments: anyelement, bytea
- Returns: SETOF anyelement

```sql
CREATE OR REPLACE FUNCTION landscape.st_fromflatgeobuf(anyelement, bytea)
 RETURNS SETOF anyelement
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$pgis_fromflatgeobuf$function$

```
### `st_fromflatgeobuftotable`

- Type: function
- Arguments: text, text, bytea
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.st_fromflatgeobuftotable(text, text, bytea)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$pgis_tablefromflatgeobuf$function$

```
### `st_generatepoints`

- Type: function
- Arguments: area geometry, npoints integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_generatepoints(area geometry, npoints integer)
 RETURNS geometry
 LANGUAGE c
 PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_GeneratePoints$function$

```
### `st_generatepoints`

- Type: function
- Arguments: area geometry, npoints integer, seed integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_generatepoints(area geometry, npoints integer, seed integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_GeneratePoints$function$

```
### `st_geogfromtext`

- Type: function
- Arguments: text
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_geogfromtext(text)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_from_text$function$

```
### `st_geogfromwkb`

- Type: function
- Arguments: bytea
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_geogfromwkb(bytea)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$geography_from_binary$function$

```
### `st_geographyfromtext`

- Type: function
- Arguments: text
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_geographyfromtext(text)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_from_text$function$

```
### `st_geohash`

- Type: function
- Arguments: geom geometry, maxchars integer DEFAULT 0
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_geohash(geom geometry, maxchars integer DEFAULT 0)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_GeoHash$function$

```
### `st_geohash`

- Type: function
- Arguments: geog geography, maxchars integer DEFAULT 0
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_geohash(geog geography, maxchars integer DEFAULT 0)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_GeoHash$function$

```
### `st_geomcollfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomcollfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE
	WHEN landscape.geometrytype(landscape.ST_GeomFromText($1)) = 'GEOMETRYCOLLECTION'
	THEN landscape.ST_GeomFromText($1)
	ELSE NULL END
	$function$

```
### `st_geomcollfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomcollfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE
	WHEN landscape.geometrytype(landscape.ST_GeomFromText($1, $2)) = 'GEOMETRYCOLLECTION'
	THEN landscape.ST_GeomFromText($1,$2)
	ELSE NULL END
	$function$

```
### `st_geomcollfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomcollfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE
	WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'GEOMETRYCOLLECTION'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_geomcollfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomcollfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE
	WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'GEOMETRYCOLLECTION'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_geometricmedian`

- Type: function
- Arguments: g geometry, tolerance double precision DEFAULT NULL::double precision, max_iter integer DEFAULT 10000, fail_if_not_converged boolean DEFAULT false
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geometricmedian(g geometry, tolerance double precision DEFAULT NULL::double precision, max_iter integer DEFAULT 10000, fail_if_not_converged boolean DEFAULT false)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 5000
AS '$libdir/postgis-3', $function$ST_GeometricMedian$function$

```
### `st_geometryfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geometryfromtext(text, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_from_text$function$

```
### `st_geometryfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geometryfromtext(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_from_text$function$

```
### `st_geometryn`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geometryn(geometry, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_geometryn_collection$function$

```
### `st_geometrytype`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_geometrytype(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geometry_geometrytype$function$

```
### `st_geomfromewkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromewkb(bytea)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOMFromEWKB$function$

```
### `st_geomfromewkt`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromewkt(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$parse_WKT_lwgeom$function$

```
### `st_geomfromgeohash`

- Type: function
- Arguments: text, integer DEFAULT NULL::integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromgeohash(text, integer DEFAULT NULL::integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE COST 50
AS $function$ SELECT CAST(landscape.ST_Box2dFromGeoHash($1, $2) AS geometry); $function$

```
### `st_geomfromgeojson`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromgeojson(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geom_from_geojson$function$

```
### `st_geomfromgeojson`

- Type: function
- Arguments: jsonb
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromgeojson(jsonb)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_GeomFromGeoJson($1::text)$function$

```
### `st_geomfromgeojson`

- Type: function
- Arguments: json
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromgeojson(json)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_GeomFromGeoJson($1::text)$function$

```
### `st_geomfromgml`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromgml(text, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geom_from_gml$function$

```
### `st_geomfromgml`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromgml(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape._ST_GeomFromGML($1, 0)$function$

```
### `st_geomfromkml`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromkml(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geom_from_kml$function$

```
### `st_geomfrommarc21`

- Type: function
- Arguments: marc21xml text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfrommarc21(marc21xml text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 500
AS '$libdir/postgis-3', $function$ST_GeomFromMARC21$function$

```
### `st_geomfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromtext(text, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_from_text$function$

```
### `st_geomfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromtext(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_from_text$function$

```
### `st_geomfromtwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromtwkb(bytea)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOMFromTWKB$function$

```
### `st_geomfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_SetSRID(landscape.ST_GeomFromWKB($1), $2)$function$

```
### `st_geomfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_geomfromwkb(bytea)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_from_WKB$function$

```
### `st_gmltosql`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_gmltosql(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape._ST_GeomFromGML($1, 0)$function$

```
### `st_gmltosql`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_gmltosql(text, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geom_from_gml$function$

```
### `st_hasarc`

- Type: function
- Arguments: geometry geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_hasarc(geometry geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_has_arc$function$

```
### `st_hasm`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_hasm(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_hasm$function$

```
### `st_hasz`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_hasz(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_hasz$function$

```
### `st_hausdorffdistance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_hausdorffdistance(geom1 geometry, geom2 geometry, double precision)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$hausdorffdistancedensify$function$

```
### `st_hausdorffdistance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_hausdorffdistance(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$hausdorffdistance$function$

```
### `st_hexagon`

- Type: function
- Arguments: size double precision, cell_i integer, cell_j integer, origin geometry DEFAULT '010100000000000000000000000000000000000000'::geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_hexagon(size double precision, cell_i integer, cell_j integer, origin geometry DEFAULT '010100000000000000000000000000000000000000'::geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Hexagon$function$

```
### `st_hexagongrid`

- Type: function
- Arguments: size double precision, bounds geometry, OUT geom geometry, OUT i integer, OUT j integer
- Returns: SETOF record

```sql
CREATE OR REPLACE FUNCTION landscape.st_hexagongrid(size double precision, bounds geometry, OUT geom geometry, OUT i integer, OUT j integer)
 RETURNS SETOF record
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_ShapeGrid$function$

```
### `st_interiorringn`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_interiorringn(geometry, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_interiorringn_polygon$function$

```
### `st_interpolatepoint`

- Type: function
- Arguments: line geometry, point geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_interpolatepoint(line geometry, point geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_InterpolatePoint$function$

```
### `st_intersection`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, gridsize double precision DEFAULT '-1'::integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_intersection(geom1 geometry, geom2 geometry, gridsize double precision DEFAULT '-1'::integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Intersection$function$

```
### `st_intersection`

- Type: function
- Arguments: text, text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_intersection(text, text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$ SELECT landscape.ST_Intersection($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_intersection`

- Type: function
- Arguments: geography, geography
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_intersection(geography, geography)
 RETURNS geography
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$SELECT landscape.geography(landscape.ST_Transform(landscape.ST_Intersection(landscape.ST_Transform(landscape.geometry($1), landscape._ST_BestSRID($1, $2)), landscape.ST_Transform(landscape.geometry($2), landscape._ST_BestSRID($1, $2))), landscape.ST_SRID($1)))$function$

```
### `st_intersects`

- Type: function
- Arguments: text, text
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_intersects(text, text)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_Intersects($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_intersects`

- Type: function
- Arguments: geog1 geography, geog2 geography
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_intersects(geog1 geography, geog2 geography)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$geography_intersects$function$

```
### `st_intersects`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_intersects(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$ST_Intersects$function$

```
### `st_inversetransformpipeline`

- Type: function
- Arguments: geom geometry, pipeline text, to_srid integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_inversetransformpipeline(geom geometry, pipeline text, to_srid integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT landscape.postgis_transform_pipeline_geometry($1, $2, FALSE, $3)$function$

```
### `st_isclosed`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_isclosed(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_isclosed$function$

```
### `st_iscollection`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_iscollection(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$ST_IsCollection$function$

```
### `st_isempty`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_isempty(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_isempty$function$

```
### `st_ispolygonccw`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_ispolygonccw(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_IsPolygonCCW$function$

```
### `st_ispolygoncw`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_ispolygoncw(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_IsPolygonCW$function$

```
### `st_isring`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_isring(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$isring$function$

```
### `st_issimple`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_issimple(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$issimple$function$

```
### `st_isvalid`

- Type: function
- Arguments: geometry, integer
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_isvalid(geometry, integer)
 RETURNS boolean
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT (landscape.ST_isValidDetail($1, $2)).valid$function$

```
### `st_isvalid`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_isvalid(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$isvalid$function$

```
### `st_isvaliddetail`

- Type: function
- Arguments: geom geometry, flags integer DEFAULT 0
- Returns: valid_detail

```sql
CREATE OR REPLACE FUNCTION landscape.st_isvaliddetail(geom geometry, flags integer DEFAULT 0)
 RETURNS valid_detail
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$isvaliddetail$function$

```
### `st_isvalidreason`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_isvalidreason(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$isvalidreason$function$

```
### `st_isvalidreason`

- Type: function
- Arguments: geometry, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_isvalidreason(geometry, integer)
 RETURNS text
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$
	SELECT CASE WHEN valid THEN 'Valid Geometry' ELSE reason END FROM (
		SELECT (landscape.ST_isValidDetail($1, $2)).*
	) foo
	$function$

```
### `st_isvalidtrajectory`

- Type: function
- Arguments: geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_isvalidtrajectory(geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_IsValidTrajectory$function$

```
### `st_largestemptycircle`

- Type: function
- Arguments: geom geometry, tolerance double precision DEFAULT 0.0, boundary geometry DEFAULT '0101000000000000000000F87F000000000000F87F'::geometry, OUT center geometry, OUT nearest geometry, OUT radius double precision
- Returns: record

```sql
CREATE OR REPLACE FUNCTION landscape.st_largestemptycircle(geom geometry, tolerance double precision DEFAULT 0.0, boundary geometry DEFAULT '0101000000000000000000F87F000000000000F87F'::geometry, OUT center geometry, OUT nearest geometry, OUT radius double precision)
 RETURNS record
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_LargestEmptyCircle$function$

```
### `st_length`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_length(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_length2d_linestring$function$

```
### `st_length`

- Type: function
- Arguments: geog geography, use_spheroid boolean DEFAULT true
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_length(geog geography, use_spheroid boolean DEFAULT true)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_length$function$

```
### `st_length`

- Type: function
- Arguments: text
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_length(text)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$ SELECT landscape.ST_Length($1::landscape.geometry);  $function$

```
### `st_length2d`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_length2d(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_length2d_linestring$function$

```
### `st_length2dspheroid`

- Type: function
- Arguments: geometry, spheroid
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_length2dspheroid(geometry, spheroid)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_length2d_ellipsoid$function$

```
### `st_lengthspheroid`

- Type: function
- Arguments: geometry, spheroid
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_lengthspheroid(geometry, spheroid)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_length_ellipsoid_linestring$function$

```
### `st_letters`

- Type: function
- Arguments: letters text, font json DEFAULT NULL::json
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_letters(letters text, font json DEFAULT NULL::json)
 RETURNS geometry
 LANGUAGE plpgsql
 IMMUTABLE PARALLEL SAFE COST 250
 SET standard_conforming_strings TO 'on'
AS $function$
DECLARE
  letterarray text[];
  letter text;
  geom geometry;
  prevgeom geometry = NULL;
  adjustment float8 = 0.0;
  position float8 = 0.0;
  text_height float8 = 100.0;
  width float8;
  m_width float8;
  spacing float8;
  dist float8;
  wordarr geometry[];
  wordgeom geometry;
  -- geometry has been run through replace(encode(st_astwkb(geom),'base64'), E'\n', '')
  font_default_height float8 = 1000.0;
  font_default json = '{
  "!":"BgACAQhUrgsTFOQCABQAExELiwi5AgAJiggBYQmJCgAOAg4CDAIOBAoEDAYKBgoGCggICAgICAgGCgYKBgoGCgQMBAoECgQMAgoADAIKAAoADAEKAAwBCgMKAQwDCgMKAwoFCAUKBwgHBgcIBwYJBgkECwYJBAsCDQILAg0CDQANAQ0BCwELAwsDCwUJBQkFCQcHBwcHBwcFCQUJBQkFCQMLAwkDCQMLAQkACwEJAAkACwIJAAsCCQQJAgsECQQJBAkGBwYJCAcIBQgHCAUKBQoDDAUKAQwDDgEMAQ4BDg==",
  "&":"BgABAskBygP+BowEAACZAmcAANsCAw0FDwUNBQ0FDQcLBw0HCwcLCQsJCwkLCQkJCwsJCwkLCQ0HCwcNBw8HDQUPBQ8DDwMRAw8DEQERAREBEQERABcAFQIXAhUCEwQVBBMGEwYTBhEIEQgPChEKDwoPDA0MDQwNDgsOCRAJEAkQBxAHEgUSBRQFFAMUAxQBFgEWARgAigEAFAISABICEgQQAhAEEAQQBg4GEAoOCg4MDg4ODgwSDgsMCwoJDAcMBwwFDgUMAw4DDgEOARABDgEQARIBEAASAHgAIAQeBB4GHAgaChoMGA4WDhYQFBISEhISDhQQFAwWDBYKFgoYBhgIGAQYBBgCGgAaABgBGAMYAxYHFgUWCRYJFAsUCxIPEg0SERARDhMOFQwVDBcIGQYbBhsCHQIfAR+dAgAADAAKAQoBCgEIAwgFBgUGBQYHBAUEBwQHAgcCBwIHAAcABwAHAQcBBwMHAwUDBwUFBQUHBQUBBwMJAQkBCQAJAJcBAAUCBQAFAgUEBQIDBAUEAwQDBgMEAQYDBgEGAAgBBgAKSeECAJ8BFi84HUQDQCAAmAKNAQAvExMx",
  "\"":"BgACAQUmwguEAgAAkwSDAgAAlAQBBfACAIACAACTBP8BAACUBA==",
  "''":"BgABAQUmwguEAgAAkwSDAgAAlAQ=",
  "(":"BgABAUOQBNwLDScNKw0rCysLLwsxCTEJMwc1BzcHNwM7AzsDPwE/AEEANwI1AjMEMwIzBjEGLwYvCC0ILQgrCCkKKQonCicMJbkCAAkqCSoHLAksBywFLgcuBS4FMAMwAzADMgEwATQBMgA0ADwCOgI6BDoEOAY4BjYINgg2CjQKMgoyCjIMMAwwDi7AAgA=",
  ")":"BgABAUMQ3Au6AgAOLQwvDC8KMQoxCjEKMwg1CDUGNQY3BDcEOQI5AjkAOwAzATEBMQExAy8DLwMvBS8FLQctBS0HKwktBykJKwkpswIADCYKKAooCioIKggsCC4ILgYwBjAGMgQ0AjQCNAI2ADgAQgFAAz4DPAM8BzgHOAc2CTQJMgsyCzALLg0sDSoNKg==",
  "+":"BgABAQ3IBOwGALcBuAEAANUBtwEAALcB0wEAALgBtwEAANYBuAEAALgB1AEA",
  "/":"BgABAQVCAoIDwAuyAgCFA78LrQIA",
  "4":"BgABAhDkBr4EkgEAEREApwJ/AADxARIR5QIAEhIA9AHdAwAA7ALIA9AG6gIAEREA8QYFqwIAAIIDwwH/AgABxAEA",
  "v":"BgABASDmA5AEPu4CROwBExb6AgAZFdMC0wgUFaECABIU0wLWCBcW+AIAExVE6wEEFQQXBBUEFwQVBBUEFwQVBBUEFwQVBBUEFwQXBBUEFwYA",
  ",":"BgABAWMYpAEADgIOAgwCDgQMBAoGDAYKBgoICAgICAgICAoGCgYKBAoEDAQKBAoCDAIKAgwCCgAKAAwACgEMAQoBCgMMAwoDCgUKBQgFCgUIBwYJCAcGCQYJBAsGCQQLAg0CCwINAg0AAwABAAMAAwADAQMAAwADAAMBBQAFAQcBBwEHAwcBCQMJAQsDCwMLAw0FDQMNBQ8FDwURBxMFEwkTBxcJFwkXswEAIMgBCQYJBgkGBwYJCAcIBQgHCgUKBQoFDAEMAwwBDgEOABA=",
  "-":"BgABAQUq0AMArALEBAAAqwLDBAA=",
  ".":"BgABAWFOrAEADgIOAg4CDgQMBAoGDAYKBgoICAgKCAgIBgoGCgYKBgoEDAQKBAwECgIMAAwCDAAMAAwBCgAMAQoDDAMKAwoDCgUKBQgFCgUIBwgJBgcICQYJBgsGCQQLAg0CDQINAA0ADQENAQ0BCwMNAwkFCwUJBQkHBwcJBwUHBwkFCQUJBQkDCwMJAwsDCQELAAsBCwALAAsCCQALAgkECwQJBAkECQYJBgcGBwgJBgcKBQgHCgUKBQwFCgEOAwwBDgEOAA4=",
  "0":"BgABAoMB+APaCxwAHAEaARoDFgMYBRYFFAcUBxIJEgkQCRALEAsOCwwNDA0MDQoPCg0IDwgPBhEGDwYRBA8EEQIRAhMCEQITABMA4QUAEQETAREBEQMRAxEFEQURBREHDwkPBw8JDwsNCw0LDQ0NDQsNCw8JEQkRCREJEwcTBxUFFQUVAxUDFwEXARkAGQAZAhcCFwQXBBUGEwYTCBMIEQoRCg8KDwoPDA0MDQ4NDgsOCQ4JEAkQBxAHEAUSBRIDEgMSAxIDEgESARQAEgDiBQASAhQCEgISBBIEEgYSBhIGEggQChAIEAoQDBAMDgwODg4ODA4MEgwQChIKEggUCBQIFgYWBBYGGAQYAhgCGgILZIcDHTZBEkMRHTUA4QUeOUITRBIePADiBQ==",
  "2":"BgABAWpUwALUA44GAAoBCAEKAQgDBgMGBQYFBgUEBwQFBAUCBwIHAgUABwAHAAUBBwMFAQcFBQMHBQUHBQcFBwMJAwkBCQELAQsAC68CAAAUAhIAFAISBBQCEgQUBBIEEgYUCBIGEAgSChAKEAoQDBAMDg4ODgwQDBIMEgoSChQIFggWCBgGGAQaAhwCHAIWABQBFgEUARQDFAMSAxQFEgUSBxIHEAkQCRALDgsODQ4NDA8KDwwRCBMKEwgTBhUGFwQXBBcEGwAbABsAHQEftwPJBdIDAACpAhIPzwYAFBIArgI=",
  "1":"BgABARCsBLALAJ0LEhERADcA2QEANwATABQSAOYIpwEAALgCERKEBAASABER",
  "3":"BgABAZ0B/gbEC/sB0QQOAwwBDAMMAwwFCgMKBQoFCgUIBwoFCAcICQgJBgkICQYLCAsECwYLBA0GDwINBA8CDwQRAhECEQITABUCFQAVAH0AEQETAREBEQETAxEDEQURBREFDwcRBw8JDwkNCQ8LDQsNDQsNCw0LDwsPCREJEQcRBxMFFQUVBRUDFwEXARkAGQAZAhkCFwQVBBUEEwYTCBEIEQgRCg0MDwoNDA0OCw4LDgkQCRAHEAkQBRAFEgUSAxIDFAMSAxYBFAEWARYAFqQCAAALAgkCCQQHAgcGBwYHBgUIBQYDCAMIAwYDCAEIAQgACAAIAAgCCAIIAgYCCAQIBAgGBgYEBgQIBAoCCgAKAAwAvAEABgEIAAYBBgMGAwQDBgMEBQQDBAUCBQQFAgUABwIFAJkBAACmAaIB3ALbAgAREQDmAhIRggYA",
  "5":"BgABAaAB0APgBxIAFAESABIBEgMSARADEgMQAxIFEAcOBRAHDgkOCQ4JDgsMCwwLCgsKDQoPCA0IDwgPBhEEEwYTAhMEFwIXABcAiQIAEwETABEBEQMTAxEDDwMRBQ8FDwUPBw8JDQcNCQ0LDQsLCwsNCw0JDwkPCREHEQcTBxMFEwMVAxcDGQEZARkAFwAVAhUCFQQTBBMGEwYRCBEIDwoPCg8KDQwNDA0MCw4LDgkOCRAJEAcOBxAHEgUQBRIDEAMSAxIBEgEUARIAFLgCAAAFAgUABQIFBAUCBQQDBAUEAwYDBgMIAwgBCAEIAQoACAAIAgYACAQGAgQEBgQEBAQGBAQCBgIGAgYCBgIIAAYA4AEABgEIAAYBBgMGAQQDBgMEAwQFBAMCBQQFAgUABwIFAPkBAG+OAQCCBRESAgAAAuYFABMRAK8CjQMAAJ8BNgA=",
  "7":"BgABAQrQBsILhQOvCxQR7wIAEhK+AvYIiwMAAKgCERKwBgA=",
  "6":"BgABAsYBnAOqBxgGFgYYBBYEFgIWABQBFgEUAxQDFAUUBRIFEAcSCRAJEAkOCw4NDgsMDQoPCg8KDwgRCBEGEQYRBBMCEwITAhUAkwIBAAERAREBEQEPAxEFEQMPBREFDwcPBw8HDwkNCQ0LDQsNCwsNCw0LDQkPCQ8JDwcRBxEHEwUTAxMFFQEXAxcBGQAVABUCEwIVBBMEEQYTBhEIEQgPChEKDQoPDA0MDQwNDgsOCxALDgkQCRAHEgcQBxIFEgUSBRIBFAMSARIBFAASAOIFABACEgIQAhIEEAQQBhIGEAYQCBAKEAgOChAMDgwMDA4ODA4MDgwODBAKEAoQChIIEggSBhQGFgYUAhYCGAIYABoAGAEYARYBFgMUBRQFEgUSBxAHEAcQCQ4LDgkMCwwNDA0KDQgPCg0GEQgPBhEEEQQRBBMEEwITAhMCFQIVABWrAgAACgEIAQoBCAEGAwYDBgUGBQQFBAUEBQQFAgUABwIFAAUABwEFAAUBBQMFAwUDBQMFBQMFAwUBBQEHAQkBBwAJAJcBDUbpBDASFi4A4AETLC8SBQAvERUrAN8BFC0yEQQA",
  "8":"BgABA9gB6gPYCxYAFAEUARYBEgMUBRQFEgUSBxIHEAcSCQ4JEAkOCw4LDgsMDQwNCg0KDQoPCg8IDwgPBhEGEQQPBBMCEQIRABMAQwAxAA8BEQEPAREDDwMRAw8FEQUPBxEJDwkPCQ8NDw0PDQ8IBwYHCAcGBwgHBgkGBwYJBgcECQYJBAkGCQQJBAsECwQLBA0CCwINAg8CDwIPAA8AaQATAREBEwERAxEFEQURBREHEQcPBw8JDwkPCw8LDQsNDQ0LCw0LDwsNCQ8JDwcPBw8HEQURAxEFEQMRARMBEwFDABEAEwIRAhEEEQQRBg8GEQgPCA8KDwoPCg0MDQwNDAsOCw4LDgkQCRAJDgkQBxIHEAcSBRADEgMUAxIBFAEUABQAagAOAhAADgIOAg4EDAIOBAwEDAQMBgwECgYMBAoGCAYKBgoGCggKBgoICgYICAoICA0MCwwLDgsOCRAHEAcQBxIFEgUSAxIDEgMSARABEgASADIARAASAhICEgQSAhIGEAYSBhAIEAgQCBAKDgoODA4MDgwMDgwODA4KEAwQCBIKEggSCBQIFAYUBBQEFgQWAhYCGAANT78EFis0EwYANBIYLgC0ARcsMRQFADERGS0AswELogHtAhcuNxA3DRkvALMBGjE6ETYSGDIAtAE=",
  "9":"BgABAsYBpASeBBcFFQUXAxUDFQEVABMCFQITBBMEEwYRBhMGDwgRCg8KDwoNDA0OCwwNDgkQCRAJEAcSBxIFEgUSAxQBFAEUARYAlAICAAISAhICEgQSAhAGEgQQBhIGEAgSCA4IEAoOChAMDAwODAwODA4MEAoOChAKEAgSCBIIFAYUBBQGFgIYBBgCGgAWABYBFAEWAxQDEgUUBRIHEgcQCRIJEAkOCw4LDgsODQwNDA0MDwoPCg8IDwgRCBEGEQYRBhEEEQITAhECEwARAOEFAA8BEQEPAREDDwMPBREFDwUPBw8JDwcNCQ8LDQsLCw0NCw0LDQsNCw8JEQkPCREHEQcTBRMFEwUTARUBFQEXABkAFwIXAhcCFQQTBhMGEQYRCA8IDwgNCg8MCwoLDAsOCQ4JDgkQBxAHEAUQBRIFEgMSAxQDFAEUAxQAFgEWABamAgAACwIJAgkCCQIHBAcEBwYFBgUGAwYDBgMGAQgBBgEIAAgABgIIAgYCBgQGBAYEBgYGBgQIBAgECAIKAgoCCgAMAJgBDUXqBC8RFS0A3wEUKzARBgAwEhYsAOABEy4xEgMA",
  ":":"BgACAWE0rAEADgIOAg4CDgQMBAoGDAYKBgoICAgKCAgIBgoGCgYKBgoEDAQKBAwECgIMAAwCDAAMAAwBCgAMAQoDDAMKAwoDCgUKBQgFCgUIBwgJBgcICQYJBgsGCQQLAg0CDQINAA0ADQENAQ0BCwMNAwkFCwUJBQkHBwcJBwUHBwkFCQUJBQkDCwMJAwsDCQELAAsBCwALAAsCCQALAgkECwQJBAkECQYJBgcGBwgJBgcKBQgHCgUKBQwFCgEOAwwBDgEOAA4BYQDqBAAOAg4CDgIOBAwECgYMBgoGCggICAoICAgGCgYKBgoGCgQMBAoEDAQKAgwADAIMAAwADAEKAAwBCgMMAwoDCgMKBQoFCAUKBQgHCAkGBwgJBgkGCwYJBAsCDQINAg0ADQANAQ0BDQELAw0DCQULBQkFCQcHBwkHBQcHCQUJBQkFCQMLAwkDCwEJAwsACwELAAsACwIJAAsECQILBAkECQQJBgkGBwYHCAkGBwoFCAcKBQoFDAUKAQ4DDAEOAQ4ADg==",
  "x":"BgABARHmAoAJMIMBNLUBNrYBMIQB1AIA9QG/BI4CvwTVAgA5hgFBwAFFxwE1fdUCAI4CwATzAcAE1AIA",
  ";":"BgACAWEslgYADgIOAg4CDgQMBAoGDAYKBgoICAgKCAgIBgoGCgYKBgoEDAQKBAwECgIMAAwCDAAMAAwBCgAMAQoDDAMKAwoDCgUKBQgFCgUIBwgJBgcICQYJBgsGCQQLAg0CDQINAA0ADQENAQ0BCwMNAwkFCwUJBQkHBwcJBwUHBwkFCQUJBQkDCwMJAwsBCQMLAAsBCwALAAsCCQALBAkCCwQJBAkECQYJBgcGBwgJBgcKBQgHCgUKBQwFCgEOAwwBDgEOAA4BYwjxBAAOAg4CDAIOBAwECgYMBgoGCggICAgICAgICgYKBgoECgQMBAoECgIMAgoCDAIKAAoADAAKAQwBCgEKAwwDCgMKBQoFCAUKBQgHBgkIBwYJBgkECwYJBAsCDQILAg0CDQADAAEAAwADAAMBAwADAAMAAwEFAAUBBwEHAQcDBwEJAwkBCwMLAwsDDQUNAw0FDwUPBREHEwUTCRMHFwkXCRezAQAgyAEJBgkGCQYHBgkIBwgFCAcKBQoFCgUMAQwDDAEOAQ4AEA==",
  "=":"BgACAQUawAUA5gHEBAAA5QHDBAABBQC5AgDsAcQEAADrAcMEAA==",
  "B":"BgABA2e2BMQLFgAUARQBFAEUAxIDEgUSBRIFEAcQBxAJDgkOCQ4LDgsMCwwNDA0KDQgNCg0IDwYPBg8GDwQRBBEEEQIRAhMAEwAHAAkABwEHAAkBCQAHAQkBCQEHAQkBCQMJAwcDCQMJAwkFBwUJAwkHCQUHBQkHCQcJBwcHBwkHBwcJBwsHCQUQBQ4FDgcOCQ4JDAkMCwoNCg0IDwgRBhMEFQQXAhcCGwDJAQEvAysFJwklDSMPHREbFRkXFRsTHw8fCyUJJwcrAy0B6wMAEhIAoAsREuYDAAiRAYEElgEAKioSSA1EOR6JAQAA0wEJkAGPBSwSEiwAzAETKikSjwEAAMUCkAEA",
  "A":"BgABAg/KBfIBqQIAN98BEhHzAgAWEuwCngsREvwCABMR8gKdCxIR8QIAFBI54AEFlwGCBk3TA6ABAE3UAwMA",
  "?":"BgACAe4BsgaYCAAZABkBFwEXBRUDEwUTBxEHEQcPCQ8JDQkNCQ0LCwsLCwsLCQsJCwcNBwsHDQcLBQsFDQULAwkFCwMLAwkDCQMBAAABAQABAAEBAQABAAEAAQABAAABAQAAAQEAEwcBAQABAAMBAwADAAUABQAFAAcABwAFAAcABwAFAgcABQAHAAUAW7cCAABcABgBFgAUAhQAFAISAhACEAIQBA4EDgQMBgwGDAYMBgoICgYKCAgKCggICAgKBgoICgYMCAwGDAgOBg4GEAYQBgIAAgIEAAICBAACAgQCBAIKBAoGCAQKBggIBgYICAYIBggGCgQIBAoECAQKAggCCgIKAAgACgAKAAgBCAEKAwgDCAMIAwgFBgMIBQYHBAUGBQQFBAcCBQQHAgcCCQIHAgkCBwAJAgkACQAJAAkBCQAJAQsACQELAQsDCwELAwsDCwMLAwsDCwULAwsFCwMLBV2YAgYECAQKBAwGDAQMBhAIEAYSBhIIEgYUBhIEFgYUBBYEFgQWAhgCFgIYABYAGAAYARgBGAMWBRYHFgcWCRYLFA0IBQYDCAUIBwYFCAcGBwgHBgcICQYJCAkGCQYJCAsGCwYLBgsGDQYNBA0GDQQNBA8EDwQPAg8EEQIRAhEAEQITAWGpBesGAA4CDgIOAg4EDAQKBgwGCgYKCAgICggICAYKBgoGCgYKBAwECgQMBAoCDAAMAgwADAAMAQoADAEKAwwDCgMKAwoFCgUIBQoFCAcICQYHCAkGCQYLBgkECwINAg0CDQANAA0BDQENAQsDDQMJBQsFCQUJBwcHCQcFBwcJBQkFCQUJAwsDCQMLAwkBCwALAQsACwALAgkACwIJBAsECQQJBAkGCQYHBgcICQYHCgUIBwoFCgUMBQoBDgMMAQ4BDgAO",
  "C":"BgABAWmmA4ADAAUCBQAFAgUEBQIDBAUEAwQDBgMEAQYDBgEGAAgBBgDWAgAAwQLVAgATABMCEQITBBEEEQQRBhEIEQgPCA8KDwoNCg0MDQwNDAsOCw4LDgkOCxAHEAkQBxIHEgUSBRIDEgEUARIBFAAUAMIFABQCFAISBBQEEgQSBhIIEggSCBAKEAoQCg4MDgwODA4ODA4MDgwQDA4KEggQChIIEggSBhIGFAQSAhQCEgIUAMYCAADBAsUCAAUABwEFAAUBBQMDAQUDAwMDAwMFAQMDBQEFAAUBBwAFAMEF",
  "L":"BgABAQmcBhISEdkFABIQALQLwgIAAIEJ9AIAAK8C",
  "D":"BgABAkeyBMQLFAAUARIBFAESAxIDEgMSBRIFEAcQBxAHDgkOCQ4LDgsMCwwNDA0KDwoPCg8IDwgRCBEGEwQTBBMEEwIVAhUAFwDBBQAXARcBFwMTAxUDEwUTBxEHEQcPCQ8JDwkNCw0LCwsLDQsNCQ0JDQcPBw8HDwcRBREFEQMRAxEDEwERARMBEwDfAwASEgCgCxES4AMACT6BAxEuKxKLAQAAvwaMAQAsEhIsAMIF",
  "F":"BgABARGABoIJ2QIAAIECsgIAEhIA4QIRErECAACvBBIR5QIAEhIAsgucBQASEgDlAhES",
  "E":"BgABARRkxAuWBQAQEgDlAhES0QIAAP0BtgIAEhIA5wIRFLUCAAD/AfACABISAOUCERLDBQASEgCyCw==",
  "G":"BgABAZsBjgeIAgMNBQ8FDQUNBQ0HCwcNBwsHCwkLCQsJCwsJCwsLCQsJDQkLBw0HDwcNBw8FDwUPAw8DEQMPAxEBEQERARMBEQAXABUCFwIVAhMEFQQTBhMGEwYRCBEIDwoRCg8KDwwNDA0MDQ4LDgkQCRAJEAcQBxIFEgUUBRQDFAMUARYBFgEYAMoFABQCFAASBBQCEgQSBBIEEgYSBhAGEAgQCBAKDgoOCg4MDgwMDgwOChAKEAoSCBIIFAgUBhQEGAYWAhgEGAIaAOoCAAC3AukCAAcABwEFAQUBBQMFAwMFAwUDBQEFAQcBBQEFAQUABwAFAMUFAAUCBwIFAgUCBQQFBAMGBQYDBgUGAwgDBgMIAQgDCAEIAQoBCAEIAAgACgAIAAgCCAIIAggECgQGBAgECAYIBgC6AnEAAJwCmAMAAJcF",
  "H":"BgABARbSB7ILAQAAnwsSEeUCABISAOAE5QEAAN8EEhHlAgASEgCiCxEQ5gIAEREA/QPmAQAAgAQPEOYCABER",
  "I":"BgABAQmuA7ILAJ8LFBHtAgAUEgCgCxMS7gIAExE=",
  "J":"BgABAWuqB7ILALEIABEBEwERAREDEwMRAxEFEQURBw8HEQcPCQ0LDwsNCw0NDQ0LDwsPCxEJEQkTCRMJFQcVBxcFFwMZAxsBGwEbAB8AHQIbAhsEGQYXBhcGFQgTCBMKEwoRDA8KDwwNDA0OCw4LDgkQCRAJEAcQBRIFEgUSAxQDEgESARIBFAESABIAgAEREtoCABERAn8ACQIHBAcEBwYHBgUIBQoDCgMKAwoDDAEKAQwBCgEMAAwACgAMAgoCDAIKBAoECgYKBggGBgYGCAQGBAgCCgAIALIIERLmAgAREQ==",
  "M":"BgACAQRm1gsUABMAAAABE5wIAQDBCxIR5QIAEhIA6gIK5gLVAe0B1wHuAQztAgDhAhIR5QIAEhIAxAsUAPoDtwT4A7YEFgA=",
  "K":"BgABAVXMCRoLBQsDCQMLAwsDCwMLAwsBCwELAQsBCwELAQ0ACwELAAsADQALAg0ACwILAA0CCwILAgsCDQQLBAsECwYNBAsGCwYLCAsGCwgJCgsICQoJCgkMCQwJDAkOCRALEAkQCRKZAdICUQAAiwQSEecCABQSAKALExLoAgAREQC3BEIA+AG4BAEAERKCAwAREdkCzQXGAYUDCA0KDQgJCgkMBwoFDAUMAQwBDgAMAg4CDAQOBAwGDghmlQI=",
  "O":"BgABAoMBsATaCxwAHAEaARoDGgMYBRYFFgcWBxQJEgkSCRILEAsODQ4NDg0MDwoNDA8KDwgPCBEIDwYRBg8GEQQRAhMCEQITABMA0QUAEQETAREBEQMTBREFEQURBxEHDwcRCQ8LDQsPCw0NDQ0NDwsPCw8LEQkTCRMJEwkVBxUHFwUXAxkDGQEbARsAGwAZAhkCGQQXBhcGFQYVCBUIEwoRChEMEQoRDA8MDQ4NDg0OCxAJEAsQCRAHEgcSBxIFFAMSAxIDEgEUARIAEgDSBQASAhQCEgISBBIEEgYSBhIIEggQCBAKEgwODBAMEA4ODg4QDhIMEAwSChQKFAgUCBYIFgYYBBoGGgQcAh4CHgILggGLAylCWxZbFSlBANEFKklcGVwYKkwA0gU=",
  "N":"BgABAQ+YA/oEAOUEEhHVAgASEgC+CxQAwATnBQDIBRMS2AIAExEAzQsRAL8ElgU=",
  "P":"BgABAkqoB5AGABcBFQEVAxMDEwMTBREHEQcRBw8JDwkNCQ0LDQsNCwsNCw0JDQkNCQ8HDwcPBxEFEQURAxEDEQMTAREBEwETAH8AAIMDEhHlAgASEgCgCxES1AMAFAAUARIAFAESAxIDEgMSAxIFEAUQBRAHDgkOCQ4JDgsMCwwNDA0KDQoNCg8IDwgRCBEGEwQTBBUEFQIXAhkAGQCzAgnBAsoCESwrEn8AANUDgAEALBISLgDYAg==",
  "R":"BgABAj9msgsREvYDABQAFAESARQBEgESAxIDEgUSBRAFEAcQBw4JDgkOCQ4LDAsMDQwLCg0KDwoNCA8IDwgPBhEEEwYTAhMEFQIXABcAowIAEwEVARMDEwMTBRMFEQcTBxELEQsRDQ8PDREPEQ0VC8QB/QMSEfkCABQSiQGyA3EAALEDFBHnAgASEgCgCwnCAscFogEALhISLACqAhEsLRKhAQAApQM=",
  "Q":"BgABA4YBvAniAbkB8wGZAYABBQUFAwUFBQUHBQUDBwUFBQcFBQMHBQcDBwUJAwcDCQMJAwkDCQMJAQsDCwMLAQsDCwENAw0BDQEPAA8BDwAPABsAGwIZAhcEGQQXBBUGFQgVCBMIEQoTChEKDwwPDA8ODQ4NDgsQCxAJEAkQBxIHEgUSBRQFFAMUARQDFAEWABYAxgUAEgIUAhICEgQSBBIGEgYSCBIIEAgQChIMDgwQDBAODg4OEA4SDBAMEgoUChQIFAgWCBYGGAQaBhoEHAIeAh4CHAAcARoBGgMaAxgFFgUWBxYHFAkSCRIJEgsQCw4NDg0ODQwPCg0MDwoPCA8IEQgPBhEGDwYRBBECEwIRAhMAEwC7BdgBrwEImQSyAwC6AylAWxZbFSk/AP0BjAK7AQeLAoMCGEc4J0wHVBbvAaYBAEM=",
  "S":"BgABAYMC8gOEBxIFEgUQBxIFEgcSBxIJEgcSCRIJEAkQCRALEAsOCw4NDg0MDQ4PDA0KEQoPChEKEQgRCBMGFQQTBBcCFQAXABkBEwARAREBEQMPAQ8DDwMPAw0DDQUNAw0FCwULBwsFCwUJBwsFCQcHBQkHCQUHBwcHBwUHBwUFBQcHBwUHAwcFEQsRCxMJEwkTBxMFEwUVBRUDFQMVARMBFwEVABUAFQIVAhUCFQQVBBUEEwYVBhMIEwgTCBMIEwgRCBMKEQgRCmK6AgwFDgUMAw4FEAUOBRAFEAUQBRAFEAMSAw4DEAMQAxABEAEOAQ4AEAIMAg4CDgQMBAwGCggKCAoKBgwGDgYQBBACCgAMAAoBCAMKBQgFCAcIBwgJCAsGCQgLCA0IDQgNCA8IDQgPCA8IDwgPChEIDwgPCBEKDwoPDBEMDwwPDg8ODw4NEA0QCxALEgsSCRIHEgcUBRQFGAUYAxgBGgEcAR4CJAYkBiAIIAweDBwQHBAYEhgUFBYUFhQWEBoQGg4aDBwKHAoeBh4GIAQgAiACIgEiASIFIgUiBSAJIgkgCyINZ58CBwQJAgkECwQLAgsECwINBA0CDQQNAg0CDQALAg0ADQANAAsBCwELAQsDCwULBQkFCQcHBwcJBwkFCwMLAw0BDQENAAsCCwQLBAkGCQgJCAkKBwoJCgcMBQoHDAcMBQwF",
  "V":"BgABARG2BM4DXrYEbKwDERL0AgAVEesCnQsSEfsCABQS8QKeCxES8gIAExFuqwNgtQQEAA==",
  "T":"BgABAQskxAv0BgAAtQKVAgAA+wgSEeUCABISAPwImwIAALYC",
  "U":"BgABAW76B7ALAKMIABcBFwMXARUFFQUTBxMHEwkRCREJEQsPDQ0LDw0NDwsPCw8LEQkPCRMJEQcTBxMFEwUVBRUDEwMXARUBFQEXABUAEwIVAhMCFQQTBBUEEwYTBhMIEwgRChEIEQwRDA8MDw4PDg0OCxANEAsSCRIJEgcUBxQHFAMWBRYBGAEYARgApggBAREU9AIAExMAAgClCAALAgkECQQHBAcIBwgHCAUKBQoDCgMKAwwBCgEMAQwADAAMAgoCDAIKAgoECgQKBggGCAYICAYKBAgCCgIMAgwApggAARMU9AIAExM=",
  "X":"BgABARmsCBISEYkDABQSS54BWYICXYkCRZUBEhGJAwAUEtYCzgXVAtIFExKIAwATEVClAVj3AVb0AVKqAREShgMAERHXAtEF2ALNBQ==",
  "W":"BgABARuODcQLERHpAp8LFBHlAgASEnW8A2+7AxIR6wIAFBKNA6ALERKSAwATEdQB7wZigARZ8AIREugCAA8RaKsDYsMDXsoDaqYDExLqAgA=",
  "Y":"BgABARK4BcQLhgMAERHnAvMGAKsEEhHnAgAUEgCsBOkC9AYREoYDABERWOEBUJsCUqICVtwBERI=",
  "Z":"BgABAQmAB8QLnwOBCaADAADBAusGAMgDggmhAwAAwgLGBgA=",
  "`":"BgABAQfqAd4JkQHmAQAOlgJCiAGpAgALiwIA",
  "c":"BgABAW3UA84GBQAFAQUABQEFAwMBBQMDAwMDAwUBAwMFAQUABQEHAAUAnQMABQIFAAUCBQQFAgMEBQQDBAMGAwQBBgMGAQYABgEGAPABABoMAMsCGw7tAQATABMCEwARAhMEEQIPBBEEDwQPBg8IDwYNCA0KDQoNCgsMCwwLDAkOCRAHDgcQBxIFEgUUBRQDFAEWAxgBGAAYAKQDABQCFAISBBQCEgYSBhAGEggQCBAIEAoQCg4MDAwODAwODAwKDgwQCg4IEAgQCBAIEAYSBhIGEgQSAhQCFAIUAOABABwOAM0CGQzbAQA=",
  "a":"BgABApoB8AYCxwF+BwkHCQcJCQkHBwkHBwcJBQkFBwUJBQkFCQMHBQkDCQMJAwcDCQEHAQkBBwEJAQcABwAHAQcABQAHAAUBBQAFABMAEwITAhEEEwQPBBEGDwgPCA0IDwoLCg0KCwwLDAsMCQ4JDgkOBw4HEAcQBRAFEAUSAxADEgESAxIBFAESABQAFAISAhQCEgQSBBIEEgYSBhIIEAgQChAIDgwODA4MDg4MDgwODBAMEAoSCBIKEggUCBQGFgYWBBgEGAIaAhoAcgAADgEMAQoBCgEIAwgDBgUEBQQFBAcCBwIHAgkCCQAJAKsCABcPAMwCHAvCAgAUABYBEgAUARIDFAMQAxIDEAUSBQ4FEAcOCRAJDAkOCwwLDA0MCwoNCg8IDwgPCA8GEQYRBhMEEwIXAhUCFwAZAIMGFwAKmQLqA38ATxchQwgnGiMwD1AMUDYAdg==",
  "b":"BgABAkqmBIIJGAAYARYBFgEUAxQDEgUSBRIFEAcQCQ4HDgkOCw4LDAsMDQoNCg0KDQgPBg8GDwYRBBEEEQQTBBECEwIVAhMAFQD/AgAZARcBFwEXAxUDEwUTBREFEQcPBw8JDwkNCQ0LDQsLCwsNCQ0JDQcPBw8HDwURAxEDEQMTAxMBEwMVARUAFQHPAwAUEgCWCxEY5gIAERkAowKCAQAJOvECESwrEn8AAJsEgAEALBISLgCeAw==",
  "d":"BgABAkryBgDLAXAREQ8NEQ0PDREJDwkRBw8FDwURAw8DDwERAw8BEQEPACMCHwQfCB0MGw4bEhcUFxgVGhEeDSANJAkmBSgDKgEuAIADABYCFAIUAhQCFAQUBBIGEgYSBhAIEAgQCBAKDgoODAwMDAwMDgoOCg4KEAgQCBIGEgYSBhQEFgQWBBYCGAIYAHwAAKQCERrmAgARFwCnCxcADOsCugJGMgDmA3sAKxERLQCfAwolHBUmBSQKBAA=",
  "e":"BgABAqMBigP+AgAJAgkCCQQHBAcGBwYFCAUIBQgDCgMIAQoDCAEKAQoACgAKAAoCCAIKAggECgQIBAgGCAYGBgQIBAoECAIKAAyiAgAAGQEXARcBFwMVBRMFEwURBxEHDwcPCQ8LDQkNCwsNCw0LDQkNBw8JDwcPBQ8FEQURAxEDEwMTAxMBFQAVARcALwIrBCkIJwwlDiESHxQbGBkaFR4TIA0iCyQJKAMqASwAggMAFAIUABIEFAISBBIEEgQSBhIGEAgQCBAIEAoODA4MDgwODgwQDBAKEAoSChIIFAgUCBYGGAQYBhoCGgQcAh4ALgEqAygFJgkkDSANHhEaFRgXFBsSHQ4fDCUIJwQpAi0AGQEXAxcDFQcTBRMJEQkPCw8LDQ0PDQsNDQ8LEQsRCxEJEwkTCRMJEwcTBxUHFQUVBRUHFQUVBRUHFwcVBRUHCs4BkAMfOEUURxEfMwBvbBhAGBwaBiA=",
  "h":"BgABAUHYBJAGAAYBBgAGAQYDBgEEAwYDBAMEBQQDAgUEBQIFAAUCBQB1AAC5BhIT5wIAFhQAlAsRGOYCABEZAKMCeAAYABgBFgEWARQDFAMSBRIFEgUQBxAJDgcOCQ4LDgsMCwwNCg0KDQoNCA8GDwYPBhEEEQQRBBMEEQITAhUCEwAVAO0FFhPnAgAUEgD+BQ==",
  "g":"BgABArkBkAeACQCNCw8ZERkRFxEVExMVERUPFQ8XDRcLGQkZBxsFGwUdAR0BDQALAA0ADQINAAsCDQANAg0CDQILAg0EDQINBA0GDQQNBg0EDQYNCA0GDwgNCA0IDQgPCg0KDwwNDA8MDw4PDqIB7gEQDRALEAkQCQ4JEAcOBw4FDgUOAwwFDgMMAQwBDAEMAQwACgEKAAoACAIIAAgCCAIGAggCBgIGBAYCBgQEAgYEAqIBAQADAAEBAwADAAMABQADAAUAAwAFAAMABQAFAAMABQA3ABMAEwIRAhMCEQQRBBEEEQYRBg8IDwgPCA0KDQoNCg0MCwwLDgsOCQ4JDgkQBxAHEgcSBRIDFAMWAxQBFgEYABgA/gIAFgIWAhQEFgQUBBIGFAgSCBIIEAoSChAKDgwODA4MDg4MDgwODA4KEAgQCBAIEgYSBhIEEgYSBBQCEgIUAhQCOgAQABABDgEQAQ4BEAMOAw4FDgUOBQwFDgcMBQ4HDAkMB4oBUBgACbsCzQYAnAR/AC0RES0AnQMSKy4RgAEA",
  "f":"BgABAUH8A6QJBwAHAAUABwEFAQcBBQEFAwUDBQMDAwMDAwUDAwMFAQUAwQHCAQAWEgDZAhUUwQEAAOMEFhftAgAWFADKCQoSChIKEAoQCg4KDgwOCgwMDAoKDAwMCgwIDAgMCAwIDAYOCAwEDgYMBA4GDAIOBA4CDgQOAg4CDgAOAg4ADgC2AQAcDgDRAhkQowEA",
  "i":"BgACAQlQABISALoIERLqAgAREQC5CBIR6QIAAWELyAoADgIOAgwEDgIKBgwGCgYKCAoGCAgICggIBggGCgYKBAoECgQMBAoCDAIMAgwCDAAMAAwADAEMAQoBDAMKAwoDCgUKBQgFCgUIBwgHCAcICQgJBgkECwQJBA0CCwANAA0ADQELAQ0BCwMJBQsFCQUJBwkFBwcHBwcJBQcFCQUJBQkDCQMLAwkBCwELAQsACwALAAsCCwILAgkCCwIJBAkECQQJBgcGCQYHCAcIBwgHCgUKBQwFCgMMAQwBDgEMAA4=",
  "j":"BgACAWFKyAoADgIOAgwEDgIKBgwGCgYKCAoGCAgICggIBggGCgYKBAoECgQMBAoCDAIMAgwCDAAMAAwADAEMAQoBDAMKAwoDCgUKBQgFCgUIBwgHCAcICQgJBgkECwQJBA0CCwANAA0ADQELAQ0BCwMJBQsFCQUJBwkFBwcHBwcJBQcFCQUJBQkDCQMLAwkBCwELAQsACwALAAsCCwILAgkCCwIJBAkECQQJBgcGCQYHCAcIBwgHCgUKBQwFCgMMAQwBDgEMAA4BO+YCnwwJEQkRCQ8JDwsNCQ0LDQkLCwsJCQsLCQkLBwsHCwcLBwsFCwcNAwsFDQMLBQ0BDQMNAQ0DDQENAQ0ADQENAA0AVwAbDQDSAhoPQgAIAAgABgAIAgYCCAIGAgYEBgQGBAQEBAQEBgQEBAYCBgC4CRES6gIAEREAowo=",
  "k":"BgABARKoA/QFIAC0AYoD5gIAjwK5BJICwwTfAgDDAbIDFwAAnwMSEeUCABISAJILERLmAgAREQCvBQ==",
  "n":"BgABAW1yggmQAU8GBAgEBgQGBgYCCAQGBAYEBgQIAgYECAQGAggEBgIIBAgCCAQIAggCCAIIAgoACAIKAAgCCgAKAgoADAAKAgwAFgAWARQAFAEUAxQDFAMSAxIFEgUQBRIHEAkOBxAJDgsOCwwLDA0MDQoPCA8IEQgRBhEGEwYVBBUEFQIXAhkCGQDtBRQR5QIAFBAA/AUACAEIAQYBCAMGBQQFBgUEBwQFBAcCBwIHAgcCCQIHAAcACQAHAQcABwMHAQUDBwMFAwUFBQUDBQEFAwcBBwAHAPkFEhHjAgASEgDwCBAA",
  "m":"BgABAZoBfoIJigFbDAwMCg4KDggOCA4IDgYQBhAGEAQQBBAEEAISAhACEgAmASQDJAciCyANHhEcFRwXDg4QDBAKEAwQCBAKEggSBhIGEgYSBBQEEgIUAhICFAAUABQBEgEUARIDEgMSAxIFEgUQBxAHEAcQBw4JDgkOCw4LDAsMDQoNCg8KDwgPCBEIEQYRBBMEEwQTAhMCFQAVAP0FEhHlAgASEgCCBgAIAQgBBgEGAwYFBgUEBQQHBAUEBwIHAgcCBwIJAAcABwAJAAcBBwEHAQUBBwMFAwUDBQMDBQMFAwUBBQEHAQcAgQYSEeUCABISAIIGAAgBCAEGAQYDBgUGBQQFBAcEBQQHAgcCBwIHAgkABwAHAAkABwEHAQcBBQEHAwUDBQMFAwMFAwUDBQEFAQcBBwCBBhIR5QIAEhIA8AgYAA==",
  "l":"BgABAQnAAwDrAgASFgDWCxEa6gIAERkA0wsUFw==",
  "y":"BgABAZ8BogeNAg8ZERkRFxEVExMVERUPFQ8XDRcLGQkZBxsFGwUdAR0BDQALAA0ADQINAAsCDQANAg0CDQILAg0EDQINBA0GDQQNBg0EDQYNCA0GDwgNCA0IDQgPCg0KDwwNDA8MDw4PDqIB7gEQDRALEAkQCQ4JEAcOBw4FDgUOAwwFDgMMAQwBDAEMAQwACgEKAAoACAIIAAgCCAIGAggCBgIGBAYCBgQEAgYEAqIBAQADAAEBAwADAAMABQADAAUAAwAFAAMABQAFAAMABQA3ABMAEwIRABECEwQRAg8EEQQPBBEGDwgNCA8IDQgNCg0MDQwLDAkOCw4JDgcQBxAHEgUSBRQFFAMWARgDGAEaABwA9AUTEuQCABEPAP8FAAUCBQAFAgUEBQIDBAUEAwQDBgMEAQYDBgEGAAgBBgCAAQAAvAYREuICABMPAP0K",
  "q":"BgABAmj0A4YJFgAWARQAEgESAxADEAMOAw4FDgUMBQ4HDgcOBwwJDgmeAU4A2QwWGesCABYaAN4DAwADAAMBAwADAAUAAwADAAMABQAFAAUABwAHAQcACQAVABUCFQATAhUCEwQRAhMEEQQRBhEGDwgPCA8IDQoNDA0MCwwLDgkOCRAJEAkQBxIHEgUUBRYDFgMYARoBGgAcAP4CABYCFgIWBBYEFAQSBhQIEggSCBAKEgoQDA4MDgwODg4ODBAMDgwQChIIEAoSCBIGEgYUBhQEFAQWAhYCFgIWAApbkQYSKy4ReAAAjARTEjkRHykJMwDvAg==",
  "p":"BgABAmiCBIYJFgAWARYBFAEWAxQDEgUUBRIFEgcSBxAJEAkQCQ4LDgsOCwwNDA0KDwoPCg8IEQgRCBEGEwQTBhMCFQQVAhUAFQD9AgAbARkBFwMXAxcDEwUTBxMHEQcRCQ8JDQsNCw0LCw0LDQkPCQ0JDwURBxEFEQURAxMDEQMTARUBEwEVARUBFQAJAAcABwAFAAcABQAFAAMAAwADAAUAAwIDAAMAAwIDAADdAxYZ6wIAFhoA2gyeAU0OCgwIDgoMCA4GDgYMBg4GDgQQBBAEEgQUAhQCFgIWAApcoQMJNB8qNxJVEQCLBHgALhISLADwAg==",
  "o":"BgABAoMB8gOICRYAFgEWARQBFgMUAxIDFAUSBRIHEgcQBxAJEAkOCw4LDgsMDQwNCg8KDwoPCg8IEQgRBhMGEwQTBBMCFQIVABcAiwMAFwEVARUDEwMTAxMFEwcRBxEHDwkPCQ8LDQsNCw0NCw0LDwkNCw8HEQkPBxEHEQcRBRMFEwMTAxUDFQEVABUAFQAVAhUCFQITBBMEEwYTBhEGEQgRCA8KDwoPCg0KDQwNDAsOCw4JDgkQCRAJEgcSBxIFFAUUAxQDFgEWARYAFgCMAwAYAhYCFgQUBBQEFAYUCBIIEggQChAKEAwODA4MDg4MDgwQCg4KEgoQChIIEggSBhQGEgYUBBYEFAIWAhYCFgALYv0CHTZBFEMRHTcAjwMcNUITQhIiOACQAw==",
  "r":"BgACAQRigAkQAA8AAAABShAAhAFXDAwODAwKDgoOCBAIDgYQBhAEEAQQBBAEEAISABACEAAQAA4BEAAQARADEAEQAxADEAUSBRIHFAcUCxQLFA0WDVJFsQHzAQsMDQwLCgkICwgLCAkGCQYJBAkGBwIJBAcCBwQHAAcCBwAFAgcABQAHAQUABQEFAQUBBQEDAQUBAwMDAQMDAwEAmwYSEeMCABISAO4IEAA=",
  "u":"BgABAV2KBwGPAVANCQsHDQcNBw0FCwUNBQ0FDQMPAw8DEQMTARMBFQEVABUAFQITABMEEwITBBMEEQQRBhEGDwYRCA8KDQgPCg0MDQwLDAsOCRALDgcQBxIHEgUUBRQFFAMWAxgBGAEYARoA7gUTEuYCABMPAPsFAAcCBwIFBAcCBQYDBgUGAwgDBgMIAQgBCAEIAQoBCAAIAAoACAIIAggCCAIGBAgEBgQGBgYGBAYCBgQIAggACAD6BRES5AIAEREA7wgPAA==",
  "s":"BgABAasC/gLwBQoDCgMMBQ4DDgUOBRAFEAUSBRAHEgcQCRIJEAkSCxALEAsQDRANDg0ODw4PDA8MDwoRChEIEwYTBBcCFQIXABkBGQEXAxcFFQUTBRMHEwcRCREJDwkNCQ8LDQ0LCwsNCw0JDQkPBw8HDwUPBREDEQMRAREDEQETABEBEwARABMADwIRABECEQIRBBMCEwQVBBUEFQYVBhMIFwgVChUKFQxgsAIIAwYDCAMKAQgDCAMKAQoDCgEKAwoBCgMKAQwDCgEKAwoBDAMKAQoBCgEMAQoACgEKAAoBCgAKAQgACgAIAQgABgoECAIKAgoCCgAMAQoBDAUEBwIHBAcEBwIHBAkECQQJBAkECQYLBAkGCwYJBgsGCwYJCAsGCwgJBgsICQgLCAkICwgJCgkKCQoJCgcKCQwHDAcMBwwFDAcMAw4FDAMOAw4BDgMQARAAEAESABIAEgIQAg4CDgIOBA4CDgQMBAwEDAQMBgoECgYKBgoGCgYIBggGCAgIBggGBgYIBgYGBgYGBgYGBAgGBgQIBAYECAQQChIIEggSBhIEEgQSBBQCFAISABQAEgASABIAEgESARIBEAEQAxIDDgMQAxADDgUOBQwDDAMMAwoDCAMIAQYBe6cCAwIDAgUAAwIFAgUCBwIFAgcCBQIHAgUCBwIHAAUCBwIHAgUABwIHAgcABQIHAAcCBwAFAgUABQIFAAUABQIDAAEAAQABAQEAAQEBAQEBAQEBAQEDAQEAAwEBAQMAAwEDAAMBAwADAQMAAwABAQMAAwADAAEAAwIBAAMCAQQDAgE=",
  "t":"BgABAUe8BLACWAAaEADRAhsOaQANAA0ADwINAA0CDQANAg0CDQINBA0CCwYNBA0GCwYNBgsIDQgLCAsKCwgJDAsKCQwJDAkOCQ4HEAcSBxIHEgUUAOAEawAVEQDWAhYTbAAAygIVFOYCABUXAMUCogEAFhQA1QIVEqEBAADzAwIFBAMEBQQDBAMEAwYDBgMGAwYBCAEGAQgBBgEIAAgA",
  "w":"BgABARz8BsAEINYCKNgBERLuAgARD+8B3QgSEc0CABQSW7YCV7UCFBHJAgASEpMC3AgREvACABERmAHxBDDaAVeYAxES7gIAEREo1QE81wIIAA==",
  "z":"BgABAQ6cA9AGuQIAFw8AzAIaC9QFAAAr9wKjBuACABYQAMsCGQyZBgCaA9AG"
   }';
BEGIN

  IF font IS NULL THEN
    font := font_default;
  END IF;

  -- For character spacing, use m as guide size
  geom := ST_GeomFromTWKB(decode(font->>'m', 'base64'));
  m_width := ST_XMax(geom) - ST_XMin(geom);
  spacing := m_width / 12;

  letterarray := regexp_split_to_array(replace(letters, ' ', E'\t'), E'');
  FOREACH letter IN ARRAY letterarray
  LOOP
    geom := ST_GeomFromTWKB(decode(font->>(letter), 'base64'));
    -- Chars are not already zeroed out, so do it now
    geom := ST_Translate(geom, -1 * ST_XMin(geom), 0.0);
    -- unknown characters are treated as spaces
    IF geom IS NULL THEN
      -- spaces are a "quarter m" in width
      width := m_width / 3.5;
    ELSE
      width := (ST_XMax(geom) - ST_XMin(geom));
    END IF;
    geom := ST_Translate(geom, position, 0.0);
    -- Tighten up spacing when characters have a large gap
    -- between them like Yo or To
    adjustment := 0.0;
    IF prevgeom IS NOT NULL AND geom IS NOT NULL THEN
      dist = ST_Distance(prevgeom, geom);
      IF dist > spacing THEN
        adjustment = spacing - dist;
        geom := ST_Translate(geom, adjustment, 0.0);
      END IF;
    END IF;
    prevgeom := geom;
    position := position + width + spacing + adjustment;
    wordarr := array_append(wordarr, geom);
  END LOOP;
  -- apply the start point and scaling options
  wordgeom := ST_CollectionExtract(ST_Collect(wordarr));
  wordgeom := ST_Scale(wordgeom,
                text_height/font_default_height,
                text_height/font_default_height);
  return wordgeom;
END;
$function$

```
### `st_linecrossingdirection`

- Type: function
- Arguments: line1 geometry, line2 geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_linecrossingdirection(line1 geometry, line2 geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$ST_LineCrossingDirection$function$

```
### `st_lineextend`

- Type: function
- Arguments: geom geometry, distance_forward double precision, distance_backward double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_lineextend(geom geometry, distance_forward double precision, distance_backward double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$geometry_line_extend$function$

```
### `st_linefromencodedpolyline`

- Type: function
- Arguments: txtin text, nprecision integer DEFAULT 5
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linefromencodedpolyline(txtin text, nprecision integer DEFAULT 5)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$line_from_encoded_polyline$function$

```
### `st_linefrommultipoint`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linefrommultipoint(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_line_from_mpoint$function$

```
### `st_linefromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linefromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1)) = 'LINESTRING'
	THEN landscape.ST_GeomFromText($1)
	ELSE NULL END
	$function$

```
### `st_linefromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linefromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1, $2)) = 'LINESTRING'
	THEN landscape.ST_GeomFromText($1,$2)
	ELSE NULL END
	$function$

```
### `st_linefromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linefromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'LINESTRING'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_linefromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linefromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'LINESTRING'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_lineinterpolatepoint`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_lineinterpolatepoint(geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_line_interpolate_point$function$

```
### `st_lineinterpolatepoint`

- Type: function
- Arguments: text, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_lineinterpolatepoint(text, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_LineInterpolatePoint($1::landscape.geometry, $2);  $function$

```
### `st_lineinterpolatepoint`

- Type: function
- Arguments: geography, double precision, use_spheroid boolean DEFAULT true
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_lineinterpolatepoint(geography, double precision, use_spheroid boolean DEFAULT true)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_line_interpolate_point$function$

```
### `st_lineinterpolatepoints`

- Type: function
- Arguments: geography, double precision, use_spheroid boolean DEFAULT true, repeat boolean DEFAULT true
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_lineinterpolatepoints(geography, double precision, use_spheroid boolean DEFAULT true, repeat boolean DEFAULT true)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_line_interpolate_point$function$

```
### `st_lineinterpolatepoints`

- Type: function
- Arguments: geometry, double precision, repeat boolean DEFAULT true
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_lineinterpolatepoints(geometry, double precision, repeat boolean DEFAULT true)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_line_interpolate_point$function$

```
### `st_lineinterpolatepoints`

- Type: function
- Arguments: text, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_lineinterpolatepoints(text, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_LineInterpolatePoints($1::landscape.geometry, $2);  $function$

```
### `st_linelocatepoint`

- Type: function
- Arguments: geography, geography, use_spheroid boolean DEFAULT true
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_linelocatepoint(geography, geography, use_spheroid boolean DEFAULT true)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_line_locate_point$function$

```
### `st_linelocatepoint`

- Type: function
- Arguments: text, text
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_linelocatepoint(text, text)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_LineLocatePoint($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_linelocatepoint`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_linelocatepoint(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_line_locate_point$function$

```
### `st_linemerge`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linemerge(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$linemerge$function$

```
### `st_linemerge`

- Type: function
- Arguments: geometry, boolean
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linemerge(geometry, boolean)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$linemerge$function$

```
### `st_linestringfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linestringfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'LINESTRING'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_linestringfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linestringfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'LINESTRING'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_linesubstring`

- Type: function
- Arguments: text, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linesubstring(text, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_LineSubstring($1::landscape.geometry, $2, $3);  $function$

```
### `st_linesubstring`

- Type: function
- Arguments: geography, double precision, double precision
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_linesubstring(geography, double precision, double precision)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_line_substring$function$

```
### `st_linesubstring`

- Type: function
- Arguments: geometry, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linesubstring(geometry, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_line_substring$function$

```
### `st_linetocurve`

- Type: function
- Arguments: geometry geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_linetocurve(geometry geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_line_desegmentize$function$

```
### `st_locatealong`

- Type: function
- Arguments: geometry geometry, measure double precision, leftrightoffset double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_locatealong(geometry geometry, measure double precision, leftrightoffset double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_LocateAlong$function$

```
### `st_locatebetween`

- Type: function
- Arguments: geometry geometry, frommeasure double precision, tomeasure double precision, leftrightoffset double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_locatebetween(geometry geometry, frommeasure double precision, tomeasure double precision, leftrightoffset double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_LocateBetween$function$

```
### `st_locatebetweenelevations`

- Type: function
- Arguments: geometry geometry, fromelevation double precision, toelevation double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_locatebetweenelevations(geometry geometry, fromelevation double precision, toelevation double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_LocateBetweenElevations$function$

```
### `st_longestline`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_longestline(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT landscape._ST_LongestLine(landscape.ST_ConvexHull($1), landscape.ST_ConvexHull($2))$function$

```
### `st_m`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_m(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_m_point$function$

```
### `st_makebox2d`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: box2d

```sql
CREATE OR REPLACE FUNCTION landscape.st_makebox2d(geom1 geometry, geom2 geometry)
 RETURNS box2d
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX2D_construct$function$

```
### `st_makeenvelope`

- Type: function
- Arguments: double precision, double precision, double precision, double precision, integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makeenvelope(double precision, double precision, double precision, double precision, integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_MakeEnvelope$function$

```
### `st_makeline`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makeline(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makeline$function$

```
### `st_makeline`

- Type: function
- Arguments: geometry[]
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makeline(geometry[])
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makeline_garray$function$

```
### `st_makeline`

- Type: aggregate
- Arguments: geometry
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_makepoint`

- Type: function
- Arguments: double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makepoint(double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makepoint$function$

```
### `st_makepoint`

- Type: function
- Arguments: double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makepoint(double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makepoint$function$

```
### `st_makepoint`

- Type: function
- Arguments: double precision, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makepoint(double precision, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makepoint$function$

```
### `st_makepointm`

- Type: function
- Arguments: double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makepointm(double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makepoint3dm$function$

```
### `st_makepolygon`

- Type: function
- Arguments: geometry, geometry[]
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makepolygon(geometry, geometry[])
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makepoly$function$

```
### `st_makepolygon`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makepolygon(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makepoly$function$

```
### `st_makevalid`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makevalid(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_MakeValid$function$

```
### `st_makevalid`

- Type: function
- Arguments: geom geometry, params text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_makevalid(geom geometry, params text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_MakeValid$function$

```
### `st_maxdistance`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_maxdistance(geom1 geometry, geom2 geometry)
 RETURNS double precision
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT landscape._ST_MaxDistance(landscape.ST_ConvexHull($1), landscape.ST_ConvexHull($2))$function$

```
### `st_maximuminscribedcircle`

- Type: function
- Arguments: geometry, OUT center geometry, OUT nearest geometry, OUT radius double precision
- Returns: record

```sql
CREATE OR REPLACE FUNCTION landscape.st_maximuminscribedcircle(geometry, OUT center geometry, OUT nearest geometry, OUT radius double precision)
 RETURNS record
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_MaximumInscribedCircle$function$

```
### `st_memcollect`

- Type: aggregate
- Arguments: geometry
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_memsize`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_memsize(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_mem_size$function$

```
### `st_memunion`

- Type: aggregate
- Arguments: geometry
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_minimumboundingcircle`

- Type: function
- Arguments: inputgeom geometry, segs_per_quarter integer DEFAULT 48
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_minimumboundingcircle(inputgeom geometry, segs_per_quarter integer DEFAULT 48)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_MinimumBoundingCircle$function$

```
### `st_minimumboundingradius`

- Type: function
- Arguments: geometry, OUT center geometry, OUT radius double precision
- Returns: record

```sql
CREATE OR REPLACE FUNCTION landscape.st_minimumboundingradius(geometry, OUT center geometry, OUT radius double precision)
 RETURNS record
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_MinimumBoundingRadius$function$

```
### `st_minimumclearance`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_minimumclearance(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_MinimumClearance$function$

```
### `st_minimumclearanceline`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_minimumclearanceline(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_MinimumClearanceLine$function$

```
### `st_mlinefromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mlinefromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1)) = 'MULTILINESTRING'
	THEN landscape.ST_GeomFromText($1)
	ELSE NULL END
	$function$

```
### `st_mlinefromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mlinefromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE
	WHEN landscape.geometrytype(landscape.ST_GeomFromText($1, $2)) = 'MULTILINESTRING'
	THEN landscape.ST_GeomFromText($1,$2)
	ELSE NULL END
	$function$

```
### `st_mlinefromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mlinefromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'MULTILINESTRING'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_mlinefromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mlinefromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'MULTILINESTRING'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_mpointfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpointfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1)) = 'MULTIPOINT'
	THEN landscape.ST_GeomFromText($1)
	ELSE NULL END
	$function$

```
### `st_mpointfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpointfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1, $2)) = 'MULTIPOINT'
	THEN ST_GeomFromText($1, $2)
	ELSE NULL END
	$function$

```
### `st_mpointfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpointfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'MULTIPOINT'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_mpointfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpointfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'MULTIPOINT'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_mpolyfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpolyfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1)) = 'MULTIPOLYGON'
	THEN landscape.ST_GeomFromText($1)
	ELSE NULL END
	$function$

```
### `st_mpolyfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpolyfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1, $2)) = 'MULTIPOLYGON'
	THEN landscape.ST_GeomFromText($1,$2)
	ELSE NULL END
	$function$

```
### `st_mpolyfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpolyfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'MULTIPOLYGON'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_mpolyfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_mpolyfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'MULTIPOLYGON'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_multi`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multi(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_force_multi$function$

```
### `st_multilinefromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multilinefromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'MULTILINESTRING'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_multilinestringfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multilinestringfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_MLineFromText($1)$function$

```
### `st_multilinestringfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multilinestringfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_MLineFromText($1, $2)$function$

```
### `st_multipointfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multipointfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_MPointFromText($1)$function$

```
### `st_multipointfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multipointfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'MULTIPOINT'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_multipointfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multipointfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1,$2)) = 'MULTIPOINT'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_multipolyfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multipolyfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'MULTIPOLYGON'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_multipolyfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multipolyfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'MULTIPOLYGON'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_multipolygonfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multipolygonfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_MPolyFromText($1, $2)$function$

```
### `st_multipolygonfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_multipolygonfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_MPolyFromText($1)$function$

```
### `st_ndims`

- Type: function
- Arguments: geometry
- Returns: smallint

```sql
CREATE OR REPLACE FUNCTION landscape.st_ndims(geometry)
 RETURNS smallint
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_ndims$function$

```
### `st_node`

- Type: function
- Arguments: g geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_node(g geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Node$function$

```
### `st_normalize`

- Type: function
- Arguments: geom geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_normalize(geom geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_Normalize$function$

```
### `st_npoints`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_npoints(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_npoints$function$

```
### `st_nrings`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_nrings(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_nrings$function$

```
### `st_numcurves`

- Type: function
- Arguments: geometry geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_numcurves(geometry geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_NumCurves$function$

```
### `st_numgeometries`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_numgeometries(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_numgeometries_collection$function$

```
### `st_numinteriorring`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_numinteriorring(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_numinteriorrings_polygon$function$

```
### `st_numinteriorrings`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_numinteriorrings(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_numinteriorrings_polygon$function$

```
### `st_numpatches`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_numpatches(geometry)
 RETURNS integer
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.ST_GeometryType($1) = 'ST_PolyhedralSurface'
	THEN landscape.ST_NumGeometries($1)
	ELSE NULL END
	$function$

```
### `st_numpoints`

- Type: function
- Arguments: geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_numpoints(geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_numpoints_linestring$function$

```
### `st_offsetcurve`

- Type: function
- Arguments: line geometry, distance double precision, params text DEFAULT ''::text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_offsetcurve(line geometry, distance double precision, params text DEFAULT ''::text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_OffsetCurve$function$

```
### `st_orderingequals`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_orderingequals(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$LWGEOM_same$function$

```
### `st_orientedenvelope`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_orientedenvelope(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_OrientedEnvelope$function$

```
### `st_overlaps`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_overlaps(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$overlaps$function$

```
### `st_patchn`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_patchn(geometry, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.ST_GeometryType($1) = 'ST_PolyhedralSurface'
	THEN landscape.ST_GeometryN($1, $2)
	ELSE NULL END
	$function$

```
### `st_perimeter`

- Type: function
- Arguments: geog geography, use_spheroid boolean DEFAULT true
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_perimeter(geog geography, use_spheroid boolean DEFAULT true)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_perimeter$function$

```
### `st_perimeter`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_perimeter(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_perimeter2d_poly$function$

```
### `st_perimeter2d`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_perimeter2d(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_perimeter2d_poly$function$

```
### `st_point`

- Type: function
- Arguments: double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_point(double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_makepoint$function$

```
### `st_point`

- Type: function
- Arguments: double precision, double precision, srid integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_point(double precision, double precision, srid integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Point$function$

```
### `st_pointfromgeohash`

- Type: function
- Arguments: text, integer DEFAULT NULL::integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointfromgeohash(text, integer DEFAULT NULL::integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 50
AS '$libdir/postgis-3', $function$point_from_geohash$function$

```
### `st_pointfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1)) = 'POINT'
	THEN landscape.ST_GeomFromText($1)
	ELSE NULL END
	$function$

```
### `st_pointfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1, $2)) = 'POINT'
	THEN landscape.ST_GeomFromText($1, $2)
	ELSE NULL END
	$function$

```
### `st_pointfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'POINT'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_pointfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'POINT'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_pointinsidecircle`

- Type: function
- Arguments: geometry, double precision, double precision, double precision
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointinsidecircle(geometry, double precision, double precision, double precision)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_inside_circle_point$function$

```
### `st_pointm`

- Type: function
- Arguments: xcoordinate double precision, ycoordinate double precision, mcoordinate double precision, srid integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointm(xcoordinate double precision, ycoordinate double precision, mcoordinate double precision, srid integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_PointM$function$

```
### `st_pointn`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointn(geometry, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_pointn_linestring$function$

```
### `st_pointonsurface`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointonsurface(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$pointonsurface$function$

```
### `st_points`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_points(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_Points$function$

```
### `st_pointz`

- Type: function
- Arguments: xcoordinate double precision, ycoordinate double precision, zcoordinate double precision, srid integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointz(xcoordinate double precision, ycoordinate double precision, zcoordinate double precision, srid integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_PointZ$function$

```
### `st_pointzm`

- Type: function
- Arguments: xcoordinate double precision, ycoordinate double precision, zcoordinate double precision, mcoordinate double precision, srid integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_pointzm(xcoordinate double precision, ycoordinate double precision, zcoordinate double precision, mcoordinate double precision, srid integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_PointZM$function$

```
### `st_polyfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polyfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1)) = 'POLYGON'
	THEN landscape.ST_GeomFromText($1)
	ELSE NULL END
	$function$

```
### `st_polyfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polyfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromText($1, $2)) = 'POLYGON'
	THEN landscape.ST_GeomFromText($1, $2)
	ELSE NULL END
	$function$

```
### `st_polyfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polyfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1, $2)) = 'POLYGON'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_polyfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polyfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'POLYGON'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_polygon`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polygon(geometry, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT landscape.ST_SetSRID(landscape.ST_MakePolygon($1), $2)
	$function$

```
### `st_polygonfromtext`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polygonfromtext(text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_PolyFromText($1)$function$

```
### `st_polygonfromtext`

- Type: function
- Arguments: text, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polygonfromtext(text, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS $function$SELECT landscape.ST_PolyFromText($1, $2)$function$

```
### `st_polygonfromwkb`

- Type: function
- Arguments: bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polygonfromwkb(bytea)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1)) = 'POLYGON'
	THEN landscape.ST_GeomFromWKB($1)
	ELSE NULL END
	$function$

```
### `st_polygonfromwkb`

- Type: function
- Arguments: bytea, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polygonfromwkb(bytea, integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$
	SELECT CASE WHEN landscape.geometrytype(landscape.ST_GeomFromWKB($1,$2)) = 'POLYGON'
	THEN landscape.ST_GeomFromWKB($1, $2)
	ELSE NULL END
	$function$

```
### `st_polygonize`

- Type: function
- Arguments: geometry[]
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_polygonize(geometry[])
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$polygonize_garray$function$

```
### `st_polygonize`

- Type: aggregate
- Arguments: geometry
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_project`

- Type: function
- Arguments: geom1 geometry, distance double precision, azimuth double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_project(geom1 geometry, distance double precision, azimuth double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$geometry_project_direction$function$

```
### `st_project`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, distance double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_project(geom1 geometry, geom2 geometry, distance double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$geometry_project_geometry$function$

```
### `st_project`

- Type: function
- Arguments: geog geography, distance double precision, azimuth double precision
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_project(geog geography, distance double precision, azimuth double precision)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$geography_project$function$

```
### `st_project`

- Type: function
- Arguments: geog_from geography, geog_to geography, distance double precision
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_project(geog_from geography, geog_to geography, distance double precision)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_project_geography$function$

```
### `st_quantizecoordinates`

- Type: function
- Arguments: g geometry, prec_x integer, prec_y integer DEFAULT NULL::integer, prec_z integer DEFAULT NULL::integer, prec_m integer DEFAULT NULL::integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_quantizecoordinates(g geometry, prec_x integer, prec_y integer DEFAULT NULL::integer, prec_z integer DEFAULT NULL::integer, prec_m integer DEFAULT NULL::integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE COST 250
AS '$libdir/postgis-3', $function$ST_QuantizeCoordinates$function$

```
### `st_reduceprecision`

- Type: function
- Arguments: geom geometry, gridsize double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_reduceprecision(geom geometry, gridsize double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_ReducePrecision$function$

```
### `st_relate`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_relate(geom1 geometry, geom2 geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$relate_full$function$

```
### `st_relate`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, text
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_relate(geom1 geometry, geom2 geometry, text)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$relate_pattern$function$

```
### `st_relate`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_relate(geom1 geometry, geom2 geometry, integer)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$relate_full$function$

```
### `st_relatematch`

- Type: function
- Arguments: text, text
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_relatematch(text, text)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_RelateMatch$function$

```
### `st_removeirrelevantpointsforview`

- Type: function
- Arguments: geometry, box2d, boolean DEFAULT false
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_removeirrelevantpointsforview(geometry, box2d, boolean DEFAULT false)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_RemoveIrrelevantPointsForView$function$

```
### `st_removepoint`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_removepoint(geometry, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_removepoint$function$

```
### `st_removerepeatedpoints`

- Type: function
- Arguments: geom geometry, tolerance double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_removerepeatedpoints(geom geometry, tolerance double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_RemoveRepeatedPoints$function$

```
### `st_removesmallparts`

- Type: function
- Arguments: geometry, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_removesmallparts(geometry, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_RemoveSmallParts$function$

```
### `st_reverse`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_reverse(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_reverse$function$

```
### `st_rotate`

- Type: function
- Arguments: geometry, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_rotate(geometry, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1,  cos($2), -sin($2), 0,  sin($2),  cos($2), 0, 0, 0, 1,	$3 - cos($2) * $3 + sin($2) * $4, $4 - sin($2) * $3 - cos($2) * $4, 0)$function$

```
### `st_rotate`

- Type: function
- Arguments: geometry, double precision, geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_rotate(geometry, double precision, geometry)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1,  cos($2), -sin($2), 0,  sin($2),  cos($2), 0, 0, 0, 1, landscape.ST_X($3) - cos($2) * landscape.ST_X($3) + sin($2) * landscape.ST_Y($3), landscape.ST_Y($3) - sin($2) * landscape.ST_X($3) - cos($2) * landscape.ST_Y($3), 0)$function$

```
### `st_rotate`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_rotate(geometry, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1,  cos($2), -sin($2), 0,  sin($2), cos($2), 0,  0, 0, 1,  0, 0, 0)$function$

```
### `st_rotatex`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_rotatex(geometry, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1, 1, 0, 0, 0, cos($2), -sin($2), 0, sin($2), cos($2), 0, 0, 0)$function$

```
### `st_rotatey`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_rotatey(geometry, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1,  cos($2), 0, sin($2),  0, 1, 0,  -sin($2), 0, cos($2), 0,  0, 0)$function$

```
### `st_rotatez`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_rotatez(geometry, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Rotate($1, $2)$function$

```
### `st_scale`

- Type: function
- Arguments: geometry, geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_scale(geometry, geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Scale$function$

```
### `st_scale`

- Type: function
- Arguments: geometry, geometry, origin geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_scale(geometry, geometry, origin geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Scale$function$

```
### `st_scale`

- Type: function
- Arguments: geometry, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_scale(geometry, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Scale($1, landscape.ST_MakePoint($2, $3, $4))$function$

```
### `st_scale`

- Type: function
- Arguments: geometry, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_scale(geometry, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Scale($1, $2, $3, 1)$function$

```
### `st_scroll`

- Type: function
- Arguments: geometry, geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_scroll(geometry, geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Scroll$function$

```
### `st_segmentize`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_segmentize(geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_segmentize2d$function$

```
### `st_segmentize`

- Type: function
- Arguments: geog geography, max_segment_length double precision
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_segmentize(geog geography, max_segment_length double precision)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$geography_segmentize$function$

```
### `st_seteffectivearea`

- Type: function
- Arguments: geometry, double precision DEFAULT '-1'::integer, integer DEFAULT 1
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_seteffectivearea(geometry, double precision DEFAULT '-1'::integer, integer DEFAULT 1)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_SetEffectiveArea$function$

```
### `st_setpoint`

- Type: function
- Arguments: geometry, integer, geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_setpoint(geometry, integer, geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_setpoint_linestring$function$

```
### `st_setsrid`

- Type: function
- Arguments: geog geography, srid integer
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_setsrid(geog geography, srid integer)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_set_srid$function$

```
### `st_setsrid`

- Type: function
- Arguments: geom geometry, srid integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_setsrid(geom geometry, srid integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_set_srid$function$

```
### `st_sharedpaths`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_sharedpaths(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_SharedPaths$function$

```
### `st_shiftlongitude`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_shiftlongitude(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_longitude_shift$function$

```
### `st_shortestline`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_shortestline(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_shortestline2d$function$

```
### `st_shortestline`

- Type: function
- Arguments: geography, geography, use_spheroid boolean DEFAULT true
- Returns: geography

```sql
CREATE OR REPLACE FUNCTION landscape.st_shortestline(geography, geography, use_spheroid boolean DEFAULT true)
 RETURNS geography
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$geography_shortestline$function$

```
### `st_shortestline`

- Type: function
- Arguments: text, text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_shortestline(text, text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape.ST_ShortestLine($1::landscape.geometry, $2::landscape.geometry);  $function$

```
### `st_simplify`

- Type: function
- Arguments: geometry, double precision, boolean
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_simplify(geometry, double precision, boolean)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_simplify2d$function$

```
### `st_simplify`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_simplify(geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_simplify2d$function$

```
### `st_simplifypolygonhull`

- Type: function
- Arguments: geom geometry, vertex_fraction double precision, is_outer boolean DEFAULT true
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_simplifypolygonhull(geom geometry, vertex_fraction double precision, is_outer boolean DEFAULT true)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_SimplifyPolygonHull$function$

```
### `st_simplifypreservetopology`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_simplifypreservetopology(geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$topologypreservesimplify$function$

```
### `st_simplifyvw`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_simplifyvw(geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$LWGEOM_SetEffectiveArea$function$

```
### `st_snap`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_snap(geom1 geometry, geom2 geometry, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Snap$function$

```
### `st_snaptogrid`

- Type: function
- Arguments: geometry, double precision, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_snaptogrid(geometry, double precision, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_snaptogrid$function$

```
### `st_snaptogrid`

- Type: function
- Arguments: geometry, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_snaptogrid(geometry, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_SnapToGrid($1, 0, 0, $2, $2)$function$

```
### `st_snaptogrid`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, double precision, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_snaptogrid(geom1 geometry, geom2 geometry, double precision, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_snaptogrid_pointoff$function$

```
### `st_snaptogrid`

- Type: function
- Arguments: geometry, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_snaptogrid(geometry, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_SnapToGrid($1, 0, 0, $2, $3)$function$

```
### `st_split`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_split(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Split$function$

```
### `st_square`

- Type: function
- Arguments: size double precision, cell_i integer, cell_j integer, origin geometry DEFAULT '010100000000000000000000000000000000000000'::geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_square(size double precision, cell_i integer, cell_j integer, origin geometry DEFAULT '010100000000000000000000000000000000000000'::geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_Square$function$

```
### `st_squaregrid`

- Type: function
- Arguments: size double precision, bounds geometry, OUT geom geometry, OUT i integer, OUT j integer
- Returns: SETOF record

```sql
CREATE OR REPLACE FUNCTION landscape.st_squaregrid(size double precision, bounds geometry, OUT geom geometry, OUT i integer, OUT j integer)
 RETURNS SETOF record
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$ST_ShapeGrid$function$

```
### `st_srid`

- Type: function
- Arguments: geom geometry
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_srid(geom geometry)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_get_srid$function$

```
### `st_srid`

- Type: function
- Arguments: geog geography
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.st_srid(geog geography)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_get_srid$function$

```
### `st_startpoint`

- Type: function
- Arguments: geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_startpoint(geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_startpoint_linestring$function$

```
### `st_subdivide`

- Type: function
- Arguments: geom geometry, maxvertices integer DEFAULT 256, gridsize double precision DEFAULT '-1.0'::numeric
- Returns: SETOF geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_subdivide(geom geometry, maxvertices integer DEFAULT 256, gridsize double precision DEFAULT '-1.0'::numeric)
 RETURNS SETOF geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Subdivide$function$

```
### `st_summary`

- Type: function
- Arguments: geography
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_summary(geography)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_summary$function$

```
### `st_summary`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.st_summary(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_summary$function$

```
### `st_swapordinates`

- Type: function
- Arguments: geom geometry, ords cstring
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_swapordinates(geom geometry, ords cstring)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_SwapOrdinates$function$

```
### `st_symdifference`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, gridsize double precision DEFAULT '-1.0'::numeric
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_symdifference(geom1 geometry, geom2 geometry, gridsize double precision DEFAULT '-1.0'::numeric)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_SymDifference$function$

```
### `st_symmetricdifference`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_symmetricdifference(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE sql
AS $function$SELECT ST_SymDifference(geom1, geom2, -1.0);$function$

```
### `st_tileenvelope`

- Type: function
- Arguments: zoom integer, x integer, y integer, bounds geometry DEFAULT '0102000020110F00000200000093107C45F81B73C193107C45F81B73C193107C45F81B734193107C45F81B7341'::geometry, margin double precision DEFAULT 0.0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_tileenvelope(zoom integer, x integer, y integer, bounds geometry DEFAULT '0102000020110F00000200000093107C45F81B73C193107C45F81B73C193107C45F81B734193107C45F81B7341'::geometry, margin double precision DEFAULT 0.0)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_TileEnvelope$function$

```
### `st_touches`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_touches(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$touches$function$

```
### `st_transform`

- Type: function
- Arguments: geom geometry, from_proj text, to_srid integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_transform(geom geometry, from_proj text, to_srid integer)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT landscape.postgis_transform_geometry($1, $2, proj4text, $3)
	FROM spatial_ref_sys WHERE srid=$3;$function$

```
### `st_transform`

- Type: function
- Arguments: geom geometry, from_proj text, to_proj text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_transform(geom geometry, from_proj text, to_proj text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT landscape.postgis_transform_geometry($1, $2, $3, 0)$function$

```
### `st_transform`

- Type: function
- Arguments: geom geometry, to_proj text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_transform(geom geometry, to_proj text)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT landscape.postgis_transform_geometry($1, proj4text, $2, 0)
	FROM spatial_ref_sys WHERE srid=landscape.ST_SRID($1);$function$

```
### `st_transform`

- Type: function
- Arguments: geometry, integer
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_transform(geometry, integer)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$transform$function$

```
### `st_transformpipeline`

- Type: function
- Arguments: geom geometry, pipeline text, to_srid integer DEFAULT 0
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_transformpipeline(geom geometry, pipeline text, to_srid integer DEFAULT 0)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS $function$SELECT landscape.postgis_transform_pipeline_geometry($1, $2, TRUE, $3)$function$

```
### `st_translate`

- Type: function
- Arguments: geometry, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_translate(geometry, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1, 1, 0, 0, 0, 1, 0, 0, 0, 1, $2, $3, $4)$function$

```
### `st_translate`

- Type: function
- Arguments: geometry, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_translate(geometry, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Translate($1, $2, $3, 0)$function$

```
### `st_transscale`

- Type: function
- Arguments: geometry, double precision, double precision, double precision, double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_transscale(geometry, double precision, double precision, double precision, double precision)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS $function$SELECT landscape.ST_Affine($1,  $4, 0, 0,  0, $5, 0,
		0, 0, 1,  $2 * $4, $3 * $5, 0)$function$

```
### `st_triangulatepolygon`

- Type: function
- Arguments: g1 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_triangulatepolygon(g1 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_TriangulatePolygon$function$

```
### `st_unaryunion`

- Type: function
- Arguments: geometry, gridsize double precision DEFAULT '-1.0'::numeric
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_unaryunion(geometry, gridsize double precision DEFAULT '-1.0'::numeric)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_UnaryUnion$function$

```
### `st_union`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_union(geom1 geometry, geom2 geometry)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Union$function$

```
### `st_union`

- Type: function
- Arguments: geom1 geometry, geom2 geometry, gridsize double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_union(geom1 geometry, geom2 geometry, gridsize double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$ST_Union$function$

```
### `st_union`

- Type: function
- Arguments: geometry[]
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_union(geometry[])
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000
AS '$libdir/postgis-3', $function$pgis_union_geometry_array$function$

```
### `st_union`

- Type: aggregate
- Arguments: geometry, gridsize double precision
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_union`

- Type: aggregate
- Arguments: geometry
- Returns: geometry

`routine_definition` is null (commonly aggregate/system metadata).

### `st_voronoilines`

- Type: function
- Arguments: g1 geometry, tolerance double precision DEFAULT 0.0, extend_to geometry DEFAULT NULL::geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_voronoilines(g1 geometry, tolerance double precision DEFAULT 0.0, extend_to geometry DEFAULT NULL::geometry)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape._ST_Voronoi(g1, extend_to, tolerance, false) $function$

```
### `st_voronoipolygons`

- Type: function
- Arguments: g1 geometry, tolerance double precision DEFAULT 0.0, extend_to geometry DEFAULT NULL::geometry
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_voronoipolygons(g1 geometry, tolerance double precision DEFAULT 0.0, extend_to geometry DEFAULT NULL::geometry)
 RETURNS geometry
 LANGUAGE sql
 IMMUTABLE PARALLEL SAFE
AS $function$ SELECT landscape._ST_Voronoi(g1, extend_to, tolerance, true) $function$

```
### `st_within`

- Type: function
- Arguments: geom1 geometry, geom2 geometry
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.st_within(geom1 geometry, geom2 geometry)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 5000 SUPPORT postgis_index_supportfn
AS '$libdir/postgis-3', $function$within$function$

```
### `st_wkbtosql`

- Type: function
- Arguments: wkb bytea
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_wkbtosql(wkb bytea)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_from_WKB$function$

```
### `st_wkttosql`

- Type: function
- Arguments: text
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_wkttosql(text)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 250
AS '$libdir/postgis-3', $function$LWGEOM_from_text$function$

```
### `st_wrapx`

- Type: function
- Arguments: geom geometry, wrap double precision, move double precision
- Returns: geometry

```sql
CREATE OR REPLACE FUNCTION landscape.st_wrapx(geom geometry, wrap double precision, move double precision)
 RETURNS geometry
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$ST_WrapX$function$

```
### `st_x`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_x(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_x_point$function$

```
### `st_xmax`

- Type: function
- Arguments: box3d
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_xmax(box3d)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_xmax$function$

```
### `st_xmin`

- Type: function
- Arguments: box3d
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_xmin(box3d)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_xmin$function$

```
### `st_y`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_y(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_y_point$function$

```
### `st_ymax`

- Type: function
- Arguments: box3d
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_ymax(box3d)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_ymax$function$

```
### `st_ymin`

- Type: function
- Arguments: box3d
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_ymin(box3d)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_ymin$function$

```
### `st_z`

- Type: function
- Arguments: geometry
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_z(geometry)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_z_point$function$

```
### `st_zmax`

- Type: function
- Arguments: box3d
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_zmax(box3d)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_zmax$function$

```
### `st_zmflag`

- Type: function
- Arguments: geometry
- Returns: smallint

```sql
CREATE OR REPLACE FUNCTION landscape.st_zmflag(geometry)
 RETURNS smallint
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$LWGEOM_zmflag$function$

```
### `st_zmin`

- Type: function
- Arguments: box3d
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.st_zmin(box3d)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/postgis-3', $function$BOX3D_zmin$function$

```
### `subvector`

- Type: function
- Arguments: vector, integer, integer
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.subvector(vector, integer, integer)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$subvector$function$

```
### `subvector`

- Type: function
- Arguments: halfvec, integer, integer
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.subvector(halfvec, integer, integer)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_subvector$function$

```
### `sum`

- Type: aggregate
- Arguments: halfvec
- Returns: halfvec

`routine_definition` is null (commonly aggregate/system metadata).

### `sum`

- Type: aggregate
- Arguments: vector
- Returns: vector

`routine_definition` is null (commonly aggregate/system metadata).

### `text`

- Type: function
- Arguments: geometry
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.text(geometry)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT COST 50
AS '$libdir/postgis-3', $function$LWGEOM_to_text$function$

```
### `trg_calculate_amount`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.trg_calculate_amount()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- If qty and rate are provided, calculate amount
    IF NEW.qty IS NOT NULL AND NEW.rate IS NOT NULL THEN
        NEW.amount := NEW.qty * NEW.rate;
    END IF;
    
    -- Ensure at least amount or (qty + rate) is provided
    IF NEW.amount IS NULL AND (NEW.qty IS NULL OR NEW.rate IS NULL) THEN
        RAISE EXCEPTION 'Must provide either amount OR (quantity + rate)';
    END IF;
    
    RETURN NEW;
END;
$function$

```
### `trg_calculate_end_period`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.trg_calculate_end_period()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  -- Calculate end_period if start_period and periods_to_complete are provided
  IF NEW.start_period IS NOT NULL AND NEW.periods_to_complete IS NOT NULL THEN
    NEW.end_period := NEW.start_period + NEW.periods_to_complete - 1;
  ELSE
    NEW.end_period := NULL;
  END IF;

  RETURN NEW;
END;
$function$

```
### `trg_set_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.trg_set_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN NEW.updated_at = now(); RETURN NEW; END; $function$

```
### `trigger_auto_create_containers`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.trigger_auto_create_containers()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  -- Only process if hierarchy_values changed or new record
  IF (TG_OP = 'INSERT') OR
     (TG_OP = 'UPDATE' AND NEW.hierarchy_values IS DISTINCT FROM OLD.hierarchy_values) THEN
    PERFORM landscape.auto_create_containers_from_inventory(NEW.project_id, NEW.item_id);
  END IF;
  RETURN NEW;
END;
$function$

```
### `trigger_sale_recalculation`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.trigger_sale_recalculation()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- Just clear the cache - the view will show null and force recalculation
    DELETE FROM landscape.tbl_parcel_sale_assumptions psa
    USING landscape.tbl_parcel p
    WHERE psa.parcel_id = p.parcel_id
      AND p.project_id = NEW.project_id
      AND p.type_code = NEW.lu_type_code
      AND (NEW.product_code IS NULL OR p.product_code = NEW.product_code);
    
    -- Note: We can't call the API from here, so the frontend must handle null values
    RETURN NEW;
END;
$function$

```
### `update_acreage_allocation_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_acreage_allocation_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_ai_suggestion_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_ai_suggestion_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_analysis_type_config_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_analysis_type_config_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_budget_category_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_budget_category_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_budget_fact_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_budget_fact_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_budget_item`

- Type: function
- Arguments: p_fact_id bigint, p_category_id bigint DEFAULT NULL::bigint, p_qty numeric DEFAULT NULL::numeric, p_rate numeric DEFAULT NULL::numeric, p_amount numeric DEFAULT NULL::numeric, p_start_date date DEFAULT NULL::date, p_end_date date DEFAULT NULL::date, p_escalation_rate numeric DEFAULT NULL::numeric, p_contingency_pct numeric DEFAULT NULL::numeric, p_timing_method text DEFAULT NULL::text, p_contract_number text DEFAULT NULL::text, p_purchase_order text DEFAULT NULL::text, p_confidence_level text DEFAULT NULL::text, p_notes text DEFAULT NULL::text
- Returns: TABLE(fact_id bigint, category_id bigint, qty numeric, rate numeric, amount numeric)

```sql
CREATE OR REPLACE FUNCTION landscape.update_budget_item(p_fact_id bigint, p_category_id bigint DEFAULT NULL::bigint, p_qty numeric DEFAULT NULL::numeric, p_rate numeric DEFAULT NULL::numeric, p_amount numeric DEFAULT NULL::numeric, p_start_date date DEFAULT NULL::date, p_end_date date DEFAULT NULL::date, p_escalation_rate numeric DEFAULT NULL::numeric, p_contingency_pct numeric DEFAULT NULL::numeric, p_timing_method text DEFAULT NULL::text, p_contract_number text DEFAULT NULL::text, p_purchase_order text DEFAULT NULL::text, p_confidence_level text DEFAULT NULL::text, p_notes text DEFAULT NULL::text)
 RETURNS TABLE(fact_id bigint, category_id bigint, qty numeric, rate numeric, amount numeric)
 LANGUAGE plpgsql
AS $function$
DECLARE
    v_current_qty NUMERIC;
    v_current_rate NUMERIC;
    v_new_amount NUMERIC;
BEGIN
    -- Get current values
    SELECT fb.qty, fb.rate INTO v_current_qty, v_current_rate
    FROM landscape.core_fin_fact_budget fb
    WHERE fb.fact_id = p_fact_id;
    
    -- Calculate new amount based on what changed
    IF p_qty IS NOT NULL OR p_rate IS NOT NULL THEN
        v_new_amount := COALESCE(p_qty, v_current_qty) * COALESCE(p_rate, v_current_rate);
    ELSE
        v_new_amount := p_amount;
    END IF;
    
    -- Update with calculated values
    RETURN QUERY
    UPDATE landscape.core_fin_fact_budget fb
    SET 
        category_id = COALESCE(p_category_id, fb.category_id),
        qty = COALESCE(p_qty, fb.qty),
        rate = COALESCE(p_rate, fb.rate),
        amount = COALESCE(v_new_amount, fb.amount),
        start_date = COALESCE(p_start_date, fb.start_date),
        end_date = COALESCE(p_end_date, fb.end_date),
        escalation_rate = COALESCE(p_escalation_rate, fb.escalation_rate),
        contingency_pct = COALESCE(p_contingency_pct, fb.contingency_pct),
        timing_method = COALESCE(p_timing_method, fb.timing_method),
        contract_number = COALESCE(p_contract_number, fb.contract_number),
        purchase_order = COALESCE(p_purchase_order, fb.purchase_order),
        confidence_level = COALESCE(p_confidence_level, fb.confidence_level),
        notes = COALESCE(p_notes, fb.notes)
    WHERE fb.fact_id = p_fact_id
    RETURNING 
        fb.fact_id,
        fb.category_id,
        fb.qty,
        fb.rate,
        fb.amount;
END;
$function$

```
### `update_budget_variance`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_budget_variance()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.variance_amount := NEW.amount - COALESCE(NEW.actual_amount, 0);

  IF NEW.amount > 0 THEN
    NEW.variance_pct := (NEW.variance_amount / NEW.amount);
  ELSE
    NEW.variance_pct := 0;
  END IF;

  RETURN NEW;
END;
$function$

```
### `update_category_completion_status`

- Type: function
- Arguments: cat_id bigint
- Returns: void

```sql
CREATE OR REPLACE FUNCTION landscape.update_category_completion_status(cat_id bigint)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
DECLARE
  cat RECORD;
BEGIN
  SELECT * INTO cat FROM landscape.core_budget_category WHERE category_id = cat_id;

  IF NOT FOUND THEN
    RETURN;
  END IF;

  -- Clear existing completion status records
  DELETE FROM landscape.core_category_completion_status
  WHERE category_id = cat_id;

  -- Re-add missing field records if category is incomplete
  IF cat.description IS NULL OR TRIM(cat.description) = '' THEN
    INSERT INTO landscape.core_category_completion_status (category_id, missing_field)
    VALUES (cat_id, 'description');
  END IF;

  IF cat.icon IS NULL OR TRIM(cat.icon) = '' THEN
    INSERT INTO landscape.core_category_completion_status (category_id, missing_field)
    VALUES (cat_id, 'icon');
  END IF;

  IF cat.color IS NULL OR TRIM(cat.color) = '' THEN
    INSERT INTO landscape.core_category_completion_status (category_id, missing_field)
    VALUES (cat_id, 'color');
  END IF;

  IF cat.level > 1 THEN
    IF cat.parent_id IS NULL THEN
      INSERT INTO landscape.core_category_completion_status (category_id, missing_field)
      VALUES (cat_id, 'parent');
    ELSIF NOT EXISTS (
      SELECT 1 FROM landscape.core_budget_category parent
      WHERE parent.category_id = cat.parent_id
        AND parent.level = cat.level - 1
        AND parent.is_active = TRUE
    ) THEN
      INSERT INTO landscape.core_category_completion_status (category_id, missing_field)
      VALUES (cat_id, 'parent');
    END IF;
  END IF;
END;
$function$

```
### `update_dcf_analysis_updated_at`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_dcf_analysis_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$function$

```
### `update_folder_path`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_folder_path()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  -- Update path based on parent
  IF NEW.parent_id IS NULL THEN
    NEW.path := '/' || NEW.name;
  ELSE
    NEW.path := (SELECT path FROM landscape.core_doc_folder WHERE folder_id = NEW.parent_id) || '/' || NEW.name;
  END IF;

  NEW.updated_at := NOW();
  RETURN NEW;
END;
$function$

```
### `update_hbu_analysis_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_hbu_analysis_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_market_comp_products_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_market_comp_products_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_market_comp_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_market_comp_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_milestone_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_milestone_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_operations_inputs_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_operations_inputs_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$function$

```
### `update_project_assumption_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_project_assumption_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$function$

```
### `update_project_boundaries_timestamp`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_project_boundaries_timestamp()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$function$

```
### `update_updated_at_column`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.update_updated_at_column()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$function$

```
### `updategeometrysrid`

- Type: function
- Arguments: catalogn_name character varying, schema_name character varying, table_name character varying, column_name character varying, new_srid_in integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.updategeometrysrid(catalogn_name character varying, schema_name character varying, table_name character varying, column_name character varying, new_srid_in integer)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	myrec RECORD;
	okay boolean;
	cname varchar;
	real_schema name;
	unknown_srid integer;
	new_srid integer := new_srid_in;

BEGIN

	-- Find, check or fix schema_name
	IF ( schema_name != '' ) THEN
		okay = false;

		FOR myrec IN SELECT nspname FROM pg_namespace WHERE text(nspname) = schema_name LOOP
			okay := true;
		END LOOP;

		IF ( okay <> true ) THEN
			RAISE EXCEPTION 'Invalid schema name';
		ELSE
			real_schema = schema_name;
		END IF;
	ELSE
		SELECT INTO real_schema current_schema()::text;
	END IF;

	-- Ensure that column_name is in geometry_columns
	okay = false;
	FOR myrec IN SELECT type, coord_dimension FROM landscape.geometry_columns WHERE f_table_schema = text(real_schema) and f_table_name = table_name and f_geometry_column = column_name LOOP
		okay := true;
	END LOOP;
	IF (NOT okay) THEN
		RAISE EXCEPTION 'column not found in geometry_columns table';
		RETURN false;
	END IF;

	-- Ensure that new_srid is valid
	IF ( new_srid > 0 ) THEN
		IF ( SELECT count(*) = 0 from spatial_ref_sys where srid = new_srid ) THEN
			RAISE EXCEPTION 'invalid SRID: % not found in spatial_ref_sys', new_srid;
			RETURN false;
		END IF;
	ELSE
		unknown_srid := landscape.ST_SRID('POINT EMPTY'::landscape.geometry);
		IF ( new_srid != unknown_srid ) THEN
			new_srid := unknown_srid;
			RAISE NOTICE 'SRID value % converted to the officially unknown SRID value %', new_srid_in, new_srid;
		END IF;
	END IF;

	IF postgis_constraint_srid(real_schema, table_name, column_name) IS NOT NULL THEN
	-- srid was enforced with constraints before, keep it that way.
		-- Make up constraint name
		cname = 'enforce_srid_'  || column_name;

		-- Drop enforce_srid constraint
		EXECUTE 'ALTER TABLE ' || quote_ident(real_schema) ||
			'.' || quote_ident(table_name) ||
			' DROP constraint ' || quote_ident(cname);

		-- Update geometries SRID
		EXECUTE 'UPDATE ' || quote_ident(real_schema) ||
			'.' || quote_ident(table_name) ||
			' SET ' || quote_ident(column_name) ||
			' = landscape.ST_SetSRID(' || quote_ident(column_name) ||
			', ' || new_srid::text || ')';

		-- Reset enforce_srid constraint
		EXECUTE 'ALTER TABLE ' || quote_ident(real_schema) ||
			'.' || quote_ident(table_name) ||
			' ADD constraint ' || quote_ident(cname) ||
			' CHECK (st_srid(' || quote_ident(column_name) ||
			') = ' || new_srid::text || ')';
	ELSE
		-- We will use typmod to enforce if no srid constraints
		-- We are using postgis_type_name to lookup the new name
		-- (in case Paul changes his mind and flips geometry_columns to return old upper case name)
		EXECUTE 'ALTER TABLE ' || quote_ident(real_schema) || '.' || quote_ident(table_name) ||
		' ALTER COLUMN ' || quote_ident(column_name) || ' TYPE  geometry(' || landscape.postgis_type_name(myrec.type, myrec.coord_dimension, true) || ', ' || new_srid::text || ') USING landscape.ST_SetSRID(' || quote_ident(column_name) || ',' || new_srid::text || ');' ;
	END IF;

	RETURN real_schema || '.' || table_name || '.' || column_name ||' SRID changed to ' || new_srid::text;

END;
$function$

```
### `updategeometrysrid`

- Type: function
- Arguments: character varying, character varying, character varying, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.updategeometrysrid(character varying, character varying, character varying, integer)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	ret  text;
BEGIN
	SELECT landscape.UpdateGeometrySRID('',$1,$2,$3,$4) into ret;
	RETURN ret;
END;
$function$

```
### `updategeometrysrid`

- Type: function
- Arguments: character varying, character varying, integer
- Returns: text

```sql
CREATE OR REPLACE FUNCTION landscape.updategeometrysrid(character varying, character varying, integer)
 RETURNS text
 LANGUAGE plpgsql
 STRICT
AS $function$
DECLARE
	ret  text;
BEGIN
	SELECT landscape.UpdateGeometrySRID('','',$1,$2,$3) into ret;
	RETURN ret;
END;
$function$

```
### `validate_budget_category_hierarchy`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.validate_budget_category_hierarchy()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- Ensure parent level = child level - 1
    IF NEW.parent_id IS NOT NULL THEN
        IF (SELECT level FROM landscape.core_budget_category WHERE category_id = NEW.parent_id) != NEW.level - 1 THEN
            RAISE EXCEPTION 'Invalid hierarchy: parent must be exactly one level above child';
        END IF;
    END IF;

    -- Ensure Level 1 categories have no parent
    IF NEW.level = 1 AND NEW.parent_id IS NOT NULL THEN
        RAISE EXCEPTION 'Level 1 categories cannot have a parent';
    END IF;

    -- Ensure Level 2-4 categories have a parent
    IF NEW.level > 1 AND NEW.parent_id IS NULL THEN
        RAISE EXCEPTION 'Level % categories must have a parent', NEW.level;
    END IF;

    RETURN NEW;
END;
$function$

```
### `validate_budget_item`

- Type: function
- Arguments: p_project_id bigint, p_category_id bigint, p_qty numeric, p_rate numeric, p_amount numeric, p_start_date date, p_end_date date, p_escalation_rate numeric, p_contingency_pct numeric
- Returns: TABLE(is_valid boolean, error_code text, error_message text)

```sql
CREATE OR REPLACE FUNCTION landscape.validate_budget_item(p_project_id bigint, p_category_id bigint, p_qty numeric, p_rate numeric, p_amount numeric, p_start_date date, p_end_date date, p_escalation_rate numeric, p_contingency_pct numeric)
 RETURNS TABLE(is_valid boolean, error_code text, error_message text)
 LANGUAGE plpgsql
AS $function$
BEGIN
    -- Phase 4: NULL categories allowed for MVP
    -- Only validate if category_id is provided
    IF p_category_id IS NOT NULL THEN
        IF NOT EXISTS(
            SELECT 1 FROM landscape.core_unit_cost_category
            WHERE category_id = p_category_id AND is_active = true
        ) THEN
            RETURN QUERY SELECT false::BOOLEAN, 'INVALID_CATEGORY'::TEXT, 'Category does not exist or is inactive'::TEXT;
            RETURN;
        END IF;
    END IF;

    -- Simplified validation - all checks passed
    RETURN QUERY SELECT true::BOOLEAN, NULL::TEXT, NULL::TEXT;
END;
$function$

```
### `validate_container_parent`

- Type: function
- Arguments: (none)
- Returns: trigger

```sql
CREATE OR REPLACE FUNCTION landscape.validate_container_parent()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
DECLARE
  parent_project_id BIGINT;
  parent_level INT;
BEGIN
  -- Level 1: ensure no parent
  IF NEW.container_level = 1 THEN
    IF NEW.parent_container_id IS NOT NULL THEN
      RAISE EXCEPTION 'Level 1 containers cannot have a parent';
    END IF;
    RETURN NEW;
  END IF;

  -- Level 2/3: ensure parent exists and is correct level
  IF NEW.container_level IN (2, 3) THEN
    IF NEW.parent_container_id IS NULL THEN
      RAISE EXCEPTION 'Level % containers must have a parent', NEW.container_level;
    END IF;

    -- Check parent exists, belongs to same project, and is correct level
    SELECT project_id, container_level
    INTO parent_project_id, parent_level
    FROM landscape.tbl_container
    WHERE container_id = NEW.parent_container_id;

    IF NOT FOUND THEN
      RAISE EXCEPTION 'Parent container % does not exist', NEW.parent_container_id;
    END IF;

    IF parent_project_id != NEW.project_id THEN
      RAISE EXCEPTION 'Parent container must belong to same project (parent project: %, child project: %)',
        parent_project_id, NEW.project_id;
    END IF;

    IF parent_level != NEW.container_level - 1 THEN
      RAISE EXCEPTION 'Parent must be exactly 1 level above (parent level: %, child level: %)',
        parent_level, NEW.container_level;
    END IF;
  END IF;

  RETURN NEW;
END;
$function$

```
### `vector`

- Type: function
- Arguments: vector, integer, boolean
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector(vector, integer, boolean)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector$function$

```
### `vector_accum`

- Type: function
- Arguments: double precision[], vector
- Returns: double precision[]

```sql
CREATE OR REPLACE FUNCTION landscape.vector_accum(double precision[], vector)
 RETURNS double precision[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_accum$function$

```
### `vector_add`

- Type: function
- Arguments: vector, vector
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector_add(vector, vector)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_add$function$

```
### `vector_avg`

- Type: function
- Arguments: double precision[]
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector_avg(double precision[])
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_avg$function$

```
### `vector_cmp`

- Type: function
- Arguments: vector, vector
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.vector_cmp(vector, vector)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_cmp$function$

```
### `vector_combine`

- Type: function
- Arguments: double precision[], double precision[]
- Returns: double precision[]

```sql
CREATE OR REPLACE FUNCTION landscape.vector_combine(double precision[], double precision[])
 RETURNS double precision[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_combine$function$

```
### `vector_concat`

- Type: function
- Arguments: vector, vector
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector_concat(vector, vector)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_concat$function$

```
### `vector_dims`

- Type: function
- Arguments: vector
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.vector_dims(vector)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_dims$function$

```
### `vector_dims`

- Type: function
- Arguments: halfvec
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.vector_dims(halfvec)
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$halfvec_vector_dims$function$

```
### `vector_eq`

- Type: function
- Arguments: vector, vector
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.vector_eq(vector, vector)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_eq$function$

```
### `vector_ge`

- Type: function
- Arguments: vector, vector
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.vector_ge(vector, vector)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_ge$function$

```
### `vector_gt`

- Type: function
- Arguments: vector, vector
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.vector_gt(vector, vector)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_gt$function$

```
### `vector_in`

- Type: function
- Arguments: cstring, oid, integer
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector_in(cstring, oid, integer)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_in$function$

```
### `vector_l2_squared_distance`

- Type: function
- Arguments: vector, vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.vector_l2_squared_distance(vector, vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_l2_squared_distance$function$

```
### `vector_le`

- Type: function
- Arguments: vector, vector
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.vector_le(vector, vector)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_le$function$

```
### `vector_lt`

- Type: function
- Arguments: vector, vector
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.vector_lt(vector, vector)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_lt$function$

```
### `vector_mul`

- Type: function
- Arguments: vector, vector
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector_mul(vector, vector)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_mul$function$

```
### `vector_ne`

- Type: function
- Arguments: vector, vector
- Returns: boolean

```sql
CREATE OR REPLACE FUNCTION landscape.vector_ne(vector, vector)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_ne$function$

```
### `vector_negative_inner_product`

- Type: function
- Arguments: vector, vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.vector_negative_inner_product(vector, vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_negative_inner_product$function$

```
### `vector_norm`

- Type: function
- Arguments: vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.vector_norm(vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_norm$function$

```
### `vector_out`

- Type: function
- Arguments: vector
- Returns: cstring

```sql
CREATE OR REPLACE FUNCTION landscape.vector_out(vector)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_out$function$

```
### `vector_recv`

- Type: function
- Arguments: internal, oid, integer
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector_recv(internal, oid, integer)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_recv$function$

```
### `vector_send`

- Type: function
- Arguments: vector
- Returns: bytea

```sql
CREATE OR REPLACE FUNCTION landscape.vector_send(vector)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_send$function$

```
### `vector_spherical_distance`

- Type: function
- Arguments: vector, vector
- Returns: double precision

```sql
CREATE OR REPLACE FUNCTION landscape.vector_spherical_distance(vector, vector)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_spherical_distance$function$

```
### `vector_sub`

- Type: function
- Arguments: vector, vector
- Returns: vector

```sql
CREATE OR REPLACE FUNCTION landscape.vector_sub(vector, vector)
 RETURNS vector
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_sub$function$

```
### `vector_to_float4`

- Type: function
- Arguments: vector, integer, boolean
- Returns: real[]

```sql
CREATE OR REPLACE FUNCTION landscape.vector_to_float4(vector, integer, boolean)
 RETURNS real[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_to_float4$function$

```
### `vector_to_halfvec`

- Type: function
- Arguments: vector, integer, boolean
- Returns: halfvec

```sql
CREATE OR REPLACE FUNCTION landscape.vector_to_halfvec(vector, integer, boolean)
 RETURNS halfvec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_to_halfvec$function$

```
### `vector_to_sparsevec`

- Type: function
- Arguments: vector, integer, boolean
- Returns: sparsevec

```sql
CREATE OR REPLACE FUNCTION landscape.vector_to_sparsevec(vector, integer, boolean)
 RETURNS sparsevec
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_to_sparsevec$function$

```
### `vector_typmod_in`

- Type: function
- Arguments: cstring[]
- Returns: integer

```sql
CREATE OR REPLACE FUNCTION landscape.vector_typmod_in(cstring[])
 RETURNS integer
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/vector', $function$vector_typmod_in$function$

```
