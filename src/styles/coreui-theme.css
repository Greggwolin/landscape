/* CoreUI Theme Customization */

/* Import CoreUI base styles */
@import '@coreui/coreui/dist/css/coreui.min.css';

/* v1.0 – CoreUI Bridge (2025-11-07) */
:root {
  /* Global card header sizing */
  --cui-card-cap-padding-y: 0.25rem;
  --cui-card-cap-padding-x: 1rem;
  --cui-card-border-radius: 0.375rem;
  --bs-body-bg: var(--surface-bg);
  --bs-body-color: var(--text-primary);
  --bs-border-color: var(--line-soft);

  /* CoreUI specifics */
  --cui-body-bg: var(--surface-bg);
  --cui-body-color: var(--text-primary);
  --cui-card-bg: var(--surface-card);
  --cui-card-border-color: var(--line-soft);
  --cui-border-color: var(--cui-card-border-color);
  --cui-footer-bg: var(--surface-card);
  --cui-card-shadow: 0 6px 18px rgba(9, 10, 11, 0.25);

  /* Primary brand bridge */
  --bs-primary: var(--brand-primary);
  --bs-link-color: var(--brand-primary);
  --cui-primary-ramp-01: #1f5fbf;
  --cui-primary-ramp-02: #316bc2;
  --cui-primary-ramp-03: #4f7fc7;
  --cui-primary-ramp-04: #6789bb;
  --cui-primary-ramp-05: #7390bb;
  --cui-primary: var(--cui-primary-ramp-03);
  --cui-primary-rgb: 79, 127, 199;
  --cui-primary-text: #ffffff;
  --cui-primary-text: #ffffff;

  /* Canonical CoreUI palette (01-color Preview) */
  --cui-secondary: #6b7785;
  --cui-secondary-rgb: 107, 119, 133;
  --cui-success: #57c68a;
  --cui-success-rgb: 87, 198, 138;
  --cui-warning: #d97706;
  --cui-warning-rgb: 217, 119, 6;
  --cui-danger-ramp-01: #ae0303;
  --cui-danger-ramp-02: #d53434;
  --cui-danger-ramp-03: #e55353;
  --cui-danger-ramp-04: #ed6565;
  --cui-danger: var(--cui-danger-ramp-03);
  --cui-danger-rgb: 229, 83, 83;
  --cui-danger-text: #ffffff;
  --cui-info: #7a80ec;
  --cui-info-rgb: 122, 128, 236;
  --cui-light: #f8fafc;
  --cui-dark: #0b1220;

  /* Dark mode companions */
  --cui-primary-dark: var(--cui-primary-ramp-01);
  --cui-secondary-dark: #4b5563;
  --cui-success-dark: #2f855a;
  --cui-danger-dark: var(--cui-danger-ramp-01);
  --cui-warning-dark: #92400e;
  --cui-info-dark: #4c51bf;

  /* Structural neutrals */
  --cui-surface-900: #0f172a;
  --cui-surface-800: #1e293b;
  --cui-surface-700: #334155;

  /* Primary surface ramp (dark structural blue) */
  --cui-primary-surface-01: #152744;
  --cui-primary-surface-02: #243a5e;
  --cui-primary-surface-03: #2c4368;
  --cui-primary-surface-04: #344b70;
  --cui-primary-surface-05: #3f567a;

  /* Background variants */
  --cui-primary-bg: rgba(61, 153, 245, 0.10);
  --cui-success-bg: rgba(87, 198, 138, 0.10);
  --cui-danger-bg: rgba(230, 64, 114, 0.10);
  --cui-warning-bg: rgba(217, 119, 6, 0.10);

  /* Subtle background variants */
  --cui-primary-bg-subtle: rgba(61, 153, 245, 0.05);
  --cui-dark-bg-subtle: rgba(33, 38, 49, 0.05);
  --cui-light-bg-subtle: rgba(243, 244, 247, 1);

  /* Border subtle variants */
  --cui-primary-border-subtle: rgba(61, 153, 245, 0.30);
  --cui-danger-border-subtle: rgba(230, 64, 114, 0.30);

  /* Color aliases */
  --cui-primary-color: var(--cui-primary);
  --cui-success-color: #57c68a;
  --cui-danger-color: var(--cui-danger);

  --filter-icon-color: var(--cui-body-color);

  /* Top Navigation Bridge */
  --cui-header-bg: var(--nav-bg);
  --cui-header-color: var(--nav-text);
  --cui-header-border-color: var(--nav-border);
  --cui-header-hover-bg: var(--nav-hover-bg);
  --cui-header-active-bg: var(--nav-active-bg);
  --cui-header-brand-color: var(--nav-brand);

  /* Validation Report */
  --validation-unit-price-color: #000;

  /* Tiles & Navigation - Landscaper Icon Fill */
  --landscaper-icon-color: #080A0C;
  --landscaper-panel-icon-size: 1.5rem;
}

/* v1.0 · Dark header contrast fix — keep near other CoreUI var bridges */
[data-theme="dark"] .app-header,
[data-coreui-theme="dark"] .app-header,
.navbar-dark,
.navbar[data-coreui-theme="dark"] {
  --cui-navbar-color: var(--nav-text);
  --cui-navbar-active-color: #ffffff;
  --cui-navbar-brand-color: var(--nav-text);
  --cui-navbar-brand-hover-color: #ffffff;
  --cui-header-brand-color: var(--nav-text);
  --cui-header-brand-hover-color: #ffffff;
  background-color: var(--nav-bg) !important;
  color: var(--nav-text) !important;
}

[data-theme="dark"] .app-header a,
[data-coreui-theme="dark"] .app-header a,
.navbar-dark a {
  color: var(--nav-text) !important;
}

[data-theme='dark'] {
  --bs-body-bg: var(--surface-bg);
  --bs-body-color: var(--text-primary);
  --bs-border-color: var(--line-soft);

  --cui-card-bg: var(--surface-card);
  --cui-card-border-color: var(--line-strong);
  --cui-footer-bg: var(--surface-card);

  /* CoreUI semantic colors — base values stay the same for buttons/non-badge uses.
     Badge-specific dark-mode contrast is handled by .badge.bg-* overrides above. */
  --cui-primary: var(--cui-primary-ramp-03);
  --cui-primary-rgb: 79, 127, 199;
  --cui-primary-text: #ffffff;
  --cui-success: #57c68a;
  --cui-success-rgb: 87, 198, 138;
  --cui-warning: #d97706;
  --cui-warning-rgb: 217, 119, 6;
  --cui-danger: var(--cui-danger-ramp-03);
  --cui-danger-rgb: 229, 83, 83;
  --cui-danger-text: #ffffff;
  --cui-info: #7a80ec;
  --cui-info-rgb: 122, 128, 236;

  /* Light/dark variants need explicit dark-mode overrides */
  --cui-light: #1e293b;
  --cui-light-rgb: 30, 41, 59;
  --cui-dark: #374151;
  --cui-dark-rgb: 55, 65, 81;

  /* Top Navigation Bridge */
  --cui-header-bg: var(--nav-bg);
  --cui-header-color: var(--nav-text);
  --cui-header-border-color: var(--nav-border);
}

/* [data-coreui-theme] attribute selectors for theme switching */
[data-coreui-theme='light'] {
  --cui-body-bg: var(--surface-bg);
  --cui-body-color: var(--text-primary);
  --cui-border-color: var(--line-soft);
  --cui-tertiary-bg: var(--surface-card);
  --cui-secondary-color: var(--text-secondary);
  --cui-primary-text: #ffffff;
  --cui-danger-text: #ffffff;
  --cui-card-bg: var(--surface-card);
}

[data-coreui-theme='dark'] {
  --cui-body-bg: var(--surface-bg);
  --cui-body-color: var(--text-primary);
  --cui-border-color: var(--line-strong);
  --cui-tertiary-bg: var(--surface-card);
  --cui-secondary-color: var(--text-secondary);
  --cui-card-bg: var(--surface-card);
  --filter-icon-color: #ffffff;
  --validation-unit-price-color: #07FF8A;
  /* Tiles & Navigation - Landscaper Icon Fill */
  --landscaper-icon-color: #FFFFFF;
  --landscaper-panel-icon-size: 1.5rem;
  --cui-primary-text: #ffffff;
  --cui-danger-text: #ffffff;
}

/* Contacts module theming */
.contacts-modal {
  border-radius: var(--cui-card-border-radius);
  border: 1px solid var(--cui-border-color);
  background-color: var(--cui-card-bg);
  color: var(--cui-body-color);
  box-shadow: var(--cui-card-shadow);
}

.contacts-modal-header {
  border-color: var(--cui-border-color);
}

.contacts-modal-title {
  color: var(--cui-body-color);
}

.contacts-modal-label {
  color: var(--cui-body-color);
}

.contacts-input {
  background-color: var(--cui-body-bg);
  color: var(--cui-body-color);
  border-color: var(--cui-border-color);
}

.contacts-role-card {
  border: 1px solid var(--cui-border-color);
  border-radius: var(--cui-card-border-radius);
  overflow: hidden;
}

.contacts-role-header {
  background-color: var(--cui-tertiary-bg);
  color: var(--cui-body-color);
}

.contacts-role-content {
  background-color: var(--cui-body-bg);
}

.contacts-card,
.contacts-card-edit {
  border: 1px solid var(--cui-border-color);
  border-radius: var(--cui-card-border-radius);
  background-color: var(--cui-card-bg);
  color: var(--cui-body-color);
  box-shadow: var(--cui-card-shadow);
}

.contacts-card-edit {
  background-color: var(--cui-body-bg);
}

.contacts-card-icon {
  color: var(--cui-secondary-color);
}

.contacts-card-name {
  color: var(--cui-body-color);
}

.contacts-card-title,
.contacts-card-meta,
.contacts-card-notes {
  color: var(--cui-secondary-color);
}

.contacts-card-link {
  color: var(--cui-primary);
}

.contacts-card-notes {
  border-top: 1px solid var(--cui-border-color);
}

/* ==========================================================================
   DARK MODE BADGE OVERRIDES
   CBadge uses .bg-{color} → rgba(var(--cui-{color}-rgb), var(--cui-bg-opacity))
   with --cui-badge-color: #fff (white text).

   Strategy: Use semi-transparent backgrounds with bright text for legibility
   on dark surfaces. Mirrors the button override pattern below.
   ========================================================================== */

[data-coreui-theme='dark'] .badge.bg-success {
  --cui-bg-opacity: 0.2;
  color: #6ee7a0 !important;
  border: 1px solid rgba(87, 198, 138, 0.4);
}

[data-coreui-theme='dark'] .badge.bg-info {
  --cui-bg-opacity: 0.2;
  color: #a5b4fc !important;
  border: 1px solid rgba(122, 128, 236, 0.4);
}

[data-coreui-theme='dark'] .badge.bg-warning {
  --cui-bg-opacity: 0.25;
  color: #fbbf24 !important;
  border: 1px solid rgba(217, 119, 6, 0.5);
}

[data-coreui-theme='dark'] .badge.bg-danger {
  --cui-bg-opacity: 0.2;
  color: #fca5a5 !important;
  border: 1px solid rgba(229, 83, 83, 0.4);
}

[data-coreui-theme='dark'] .badge.bg-primary {
  --cui-bg-opacity: 0.2;
  color: #93c5fd !important;
  border: 1px solid rgba(79, 127, 199, 0.4);
}

[data-coreui-theme='dark'] .badge.bg-secondary {
  --cui-bg-opacity: 0.2;
  color: #d1d5db !important;
  border: 1px solid rgba(107, 119, 133, 0.4);
}

/* light + dark variants are the worst offenders — completely invisible */
[data-coreui-theme='dark'] .badge.bg-light {
  background-color: rgba(255, 255, 255, 0.1) !important;
  color: #e5e7eb !important;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

[data-coreui-theme='dark'] .badge.bg-dark {
  background-color: rgba(255, 255, 255, 0.12) !important;
  color: #e5e7eb !important;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Ensure textColor="dark" overrides don't break dark mode badges */
[data-coreui-theme='dark'] .badge.text-dark {
  color: #e5e7eb !important;
}

/* ==========================================================================
   Studio Badge Classes — from Style Catalog
   Translucent pill badges with colored text + subtle border.
   Work in both light and dark modes via CSS variable bridge.
   ========================================================================== */

.studio-badge-info {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  padding: 0.3rem 0.65rem;
  border-radius: 999px;
  font-size: 0.7rem;
  font-weight: 600;
  line-height: 1.15;
  cursor: pointer;
  border: 1px solid rgba(37, 99, 235, 0.3);
  background-color: rgba(37, 99, 235, 0.1);
  color: #2563eb;
}
.studio-badge-info:hover {
  background-color: rgba(37, 99, 235, 0.18);
}
[data-coreui-theme='dark'] .studio-badge-info {
  background-color: rgba(96, 165, 250, 0.15);
  color: #93c5fd;
  border-color: rgba(96, 165, 250, 0.35);
}
[data-coreui-theme='dark'] .studio-badge-info:hover {
  background-color: rgba(96, 165, 250, 0.25);
}

.studio-badge-success {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  padding: 0.3rem 0.65rem;
  border-radius: 999px;
  font-size: 0.7rem;
  font-weight: 600;
  line-height: 1.15;
  cursor: pointer;
  border: 1px solid rgba(22, 163, 74, 0.3);
  background-color: rgba(22, 163, 74, 0.1);
  color: #16a34a;
}
.studio-badge-success:hover {
  background-color: rgba(22, 163, 74, 0.18);
}
[data-coreui-theme='dark'] .studio-badge-success {
  background-color: rgba(110, 231, 160, 0.15);
  color: #6ee7a0;
  border-color: rgba(110, 231, 160, 0.35);
}
[data-coreui-theme='dark'] .studio-badge-success:hover {
  background-color: rgba(110, 231, 160, 0.25);
}

.studio-badge-warning {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  padding: 0.3rem 0.65rem;
  border-radius: 999px;
  font-size: 0.7rem;
  font-weight: 600;
  line-height: 1.15;
  cursor: pointer;
  border: 1px solid rgba(217, 119, 6, 0.3);
  background-color: rgba(217, 119, 6, 0.1);
  color: #d97706;
}
.studio-badge-warning:hover {
  background-color: rgba(217, 119, 6, 0.18);
}
[data-coreui-theme='dark'] .studio-badge-warning {
  background-color: rgba(251, 191, 36, 0.15);
  color: #fbbf24;
  border-color: rgba(251, 191, 36, 0.35);
}
[data-coreui-theme='dark'] .studio-badge-warning:hover {
  background-color: rgba(251, 191, 36, 0.25);
}

.studio-badge-error {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
  padding: 0.3rem 0.65rem;
  border-radius: 999px;
  font-size: 0.7rem;
  font-weight: 600;
  line-height: 1.15;
  cursor: pointer;
  border: 1px solid rgba(220, 38, 38, 0.3);
  background-color: rgba(220, 38, 38, 0.1);
  color: #dc2626;
}
.studio-badge-error:hover {
  background-color: rgba(220, 38, 38, 0.18);
}
[data-coreui-theme='dark'] .studio-badge-error {
  background-color: rgba(252, 165, 165, 0.15);
  color: #fca5a5;
  border-color: rgba(252, 165, 165, 0.35);
}
[data-coreui-theme='dark'] .studio-badge-error:hover {
  background-color: rgba(252, 165, 165, 0.25);
}

/* Dark mode button overrides - direct rules, not variables */
[data-coreui-theme='dark'] .btn-warning {
  background-color: rgba(217, 119, 6, 0.2) !important;
  border-color: #d97706 !important;
  color: #fbbf24 !important;
}

[data-coreui-theme='dark'] .btn-warning:hover {
  background-color: rgba(217, 119, 6, 0.3) !important;
  color: #fbbf24 !important;
}

[data-coreui-theme='dark'] .btn-success {
  background-color: rgba(25, 135, 84, 0.2) !important;
  border-color: #198754 !important;
  color: #ffffff !important;
}

[data-coreui-theme='dark'] .btn-success:hover {
  background-color: rgba(25, 135, 84, 0.3) !important;
  color: #ffffff !important;
}

[data-coreui-theme='dark'] .btn-danger {
  background-color: rgba(220, 53, 69, 0.2) !important;
  border-color: #dc3545 !important;
  color: #ffffff !important;
}

[data-coreui-theme='dark'] .btn-danger:hover {
  background-color: rgba(220, 53, 69, 0.3) !important;
  color: #ffffff !important;
}

/* Outline buttons get special treatment */
[data-coreui-theme='dark'] .btn-outline-warning {
  border-color: #ffc107 !important;
  color: #ffc107 !important;
  background-color: transparent !important;
}

[data-coreui-theme='dark'] .btn-outline-success {
  border-color: #198754 !important;
  color: #198754 !important;
  background-color: transparent !important;
}

[data-coreui-theme='dark'] .btn-outline-danger {
  border-color: #dc3545 !important;
  color: #dc3545 !important;
  background-color: transparent !important;
}

/* Active state for outline buttons in dark mode */
[data-coreui-theme='dark'] .btn-outline-warning.active {
  background-color: rgba(255, 193, 7, 0.15) !important;
  font-weight: 600 !important;
}

[data-coreui-theme='dark'] .btn-outline-success.active {
  background-color: rgba(25, 135, 84, 0.15) !important;
  font-weight: 600 !important;
}

[data-coreui-theme='dark'] .btn-outline-danger.active {
  background-color: rgba(220, 53, 69, 0.15) !important;
  font-weight: 600 !important;
}

/* Ghost button variants in dark mode */
[data-coreui-theme='dark'] .btn-ghost-primary {
  background-color: transparent !important;
  color: var(--cui-body-color) !important;
  border: none !important;
}

[data-coreui-theme='dark'] .btn-ghost-primary:hover {
  background-color: rgba(var(--cui-primary-rgb), 0.1) !important;
  color: var(--cui-primary) !important;
}

[data-coreui-theme='dark'] .btn-ghost-secondary {
  background-color: transparent !important;
  color: var(--cui-body-color) !important;
  border: none !important;
}

[data-coreui-theme='dark'] .btn-ghost-secondary:hover {
  background-color: var(--cui-tertiary-bg) !important;
  color: var(--cui-body-color) !important;
}

/* Light mode ghost buttons */
.btn-ghost-primary {
  background-color: transparent !important;
  color: var(--cui-body-color) !important;
  border: none !important;
}

.btn-ghost-primary:hover {
  background-color: rgba(var(--cui-primary-rgb), 0.1) !important;
  color: var(--cui-primary) !important;
}

.btn-ghost-secondary {
  background-color: transparent !important;
  color: var(--cui-body-color) !important;
  border: none !important;
}

.btn-ghost-secondary:hover {
  background-color: var(--cui-tertiary-bg) !important;
  color: var(--cui-body-color) !important;
}

/* UI Standards v1.0 · 2025-11-02 */
.tnum {
  font-variant-numeric: tabular-nums;
}

/* Light Theme (Default) - Using CoreUI Modern native variables */
.light-theme {
  /* Backgrounds driven by tokens */
  --cui-body-bg: var(--surface-bg);
  --cui-tertiary-bg: var(--surface-card);
  --cui-secondary-bg: var(--surface-card);
  --cui-body-color: var(--text-primary);
  --cui-border-color: var(--line-soft);

  /* Card styles */
  --cui-card-bg: var(--surface-card);
  --cui-card-border-color: var(--line-soft);
  --cui-card-cap-bg: var(--surface-card);

  /* Primary color - token bridge */
  --cui-primary: var(--cui-primary-ramp-03);
  --cui-primary-rgb: 79, 127, 199;
  --cui-primary-text: #ffffff;

  /* Text colors */
  --cui-emphasis-color: var(--text-primary);
  --cui-secondary-color: var(--text-secondary);
  --cui-tertiary-color: color-mix(in srgb, var(--text-secondary) 70%, var(--surface-bg));
  --cui-danger-text: #ffffff;

  /* Forms */
  --cui-input-bg: var(--surface-card);
  --cui-input-border-color: var(--line-soft);
  --cui-input-focus-border-color: var(--brand-primary);

  /* Tables */
  --cui-table-bg: var(--surface-card);
  --cui-table-hover-bg: color-mix(in srgb, var(--surface-card) 92%, var(--surface-bg));
  --cui-table-striped-bg: color-mix(in srgb, var(--surface-card) 96%, var(--surface-bg));

  /* Shadows - CoreUI Modern native values */
  --cui-box-shadow: 0 0.5rem 1rem rgba(8, 10, 12, 0.15);
  --cui-box-shadow-sm: 0 0.125rem 0.25rem rgba(8, 10, 12, 0.075);
  --cui-box-shadow-lg: 0 1rem 3rem rgba(8, 10, 12, 0.175);
}

/* Dark Theme */
.dark-theme {
  --cui-body-bg: var(--surface-bg);
  --cui-body-color: var(--text-primary);
  --cui-border-color: var(--line-strong);

  /* Card styles */
  --cui-card-bg: var(--surface-card);
  --cui-card-border-color: var(--line-strong);
  --cui-card-cap-bg: var(--surface-card);

  /* Primary color */
  --cui-primary: var(--cui-primary-ramp-03);
  --cui-primary-rgb: 79, 127, 199;
  --cui-primary-text: #ffffff;

  /* Text colors */
  --cui-emphasis-color: var(--text-primary);
  --cui-secondary-color: var(--text-secondary);
  --cui-tertiary-color: color-mix(in srgb, var(--text-secondary) 70%, var(--surface-bg));
  --cui-danger-text: #ffffff;

  /* Forms */
  --cui-input-bg: var(--surface-card);
  --cui-input-border-color: var(--line-strong);
  --cui-input-focus-border-color: var(--brand-primary);
  --cui-input-color: var(--text-primary);

  /* Tables */
  --cui-table-bg: var(--surface-card);
  --cui-table-hover-bg: color-mix(in srgb, var(--surface-card) 90%, var(--surface-bg));
  --cui-table-striped-bg: color-mix(in srgb, var(--surface-card) 80%, var(--surface-bg));
  --cui-table-color: var(--text-primary);

  /* Shadows */
  --cui-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3);
  --cui-box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
}

/* Body background */
body {
  background-color: var(--cui-body-bg);
  color: var(--cui-body-color);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Card customization */
.card {
  background-color: var(--cui-card-bg);
  border-color: var(--cui-card-border-color);
  box-shadow: var(--cui-box-shadow-sm);
  border-radius: var(--cui-card-border-radius);
  overflow: hidden;
  background-clip: padding-box;
}

.card-header,
.card > .card-header,
.accordion-header,
CCardHeader {
  background-color: var(--cui-card-header-bg) !important;
  border-bottom-color: var(--cui-border-color);
  font-weight: 700;
}

/* Consistent CoreUI card corner rounding */
.card-header:first-child,
.card > .card-header:first-child {
  border-top-left-radius: var(--cui-card-border-radius);
  border-top-right-radius: var(--cui-card-border-radius);
}

.card-footer:last-child,
.card > .card-footer:last-child {
  border-bottom-left-radius: var(--cui-card-border-radius);
  border-bottom-right-radius: var(--cui-card-border-radius);
}

/* Canonical sub-headers */
.card-subheader,
.accordion-subheader,
.table-header-row,
.grid-header {
  background-color: var(--cui-card-subheader-bg) !important;
}

/* Form controls */
.form-control,
.form-select {
  background-color: var(--cui-input-bg);
  border-color: var(--cui-input-border-color);
  color: var(--cui-input-color, var(--cui-body-color));
}

.form-control:focus,
.form-select:focus {
  border-color: var(--cui-input-focus-border-color);
  box-shadow: 0 0 0 0.25rem rgba(var(--cui-primary-rgb), 0.25);
}

/* Floating labels - space-efficient form inputs */
.form-floating {
  position: relative;
}

.form-floating > .form-control {
  height: calc(3.5rem + 2px);
  line-height: 1.25;
  padding: 1rem 0.75rem;
}

.form-floating > label {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  padding: 1rem 0.75rem;
  pointer-events: none;
  border: 1px solid transparent;
  transform-origin: 0 0;
  transition: opacity 0.1s ease-in-out, transform 0.1s ease-in-out;
  color: var(--cui-secondary-color);
}

.form-floating > .form-control:focus ~ label,
.form-floating > .form-control:not(:placeholder-shown) ~ label,
.form-floating > .form-select:focus ~ label,
.form-floating > .form-select.has-value ~ label,
.form-floating > .form-select:not([value=""]) ~ label {
  opacity: 0.65;
  transform: scale(0.85) translateY(-0.5rem) translateX(0.15rem);
}

.form-floating > .form-control:focus ~ label {
  color: var(--cui-primary);
}

/* Tables */
.table {
  color: var(--cui-table-color, var(--cui-body-color));
}

/* Table headers - override all backgrounds including Tailwind classes */
thead,
thead tr,
thead th,
.table thead,
.table thead tr,
.table thead th {
  background-color: var(--cui-card-header-bg) !important;
}

/* Table hover - general rule comes first */
.table-hover tbody tr:hover {
  background-color: var(--cui-table-hover-bg);
}

/* Group rows - maintain background even on hover (more specific, comes after) */
.table.table-hover tbody tr.budget-group-row,
.table-hover tbody tr.budget-group-row {
  background-color: var(--cui-card-subheader-bg) !important;
}

.table.table-hover tbody tr.budget-group-row:hover,
.table-hover tbody tr.budget-group-row:hover {
  background-color: var(--cui-card-subheader-bg) !important;
  filter: brightness(0.97);
}

.table-striped tbody tr:nth-of-type(odd) {
  background-color: var(--cui-table-striped-bg);
}

/* Header */
.header {
  background-color: var(--cui-header-bg);
  border-bottom-color: var(--cui-header-border-color);
  color: var(--cui-header-color);
}

/* Buttons */
.btn {
  color: var(--cui-body-color);
}

.btn-primary {
  background-color: var(--cui-primary);
  border-color: var(--cui-primary);
  color: #FFFFFF;
}

.btn-primary:hover {
  background-color: var(--cui-primary-ramp-04);
  border-color: var(--cui-primary-ramp-04);
  color: #FFFFFF;
}

/* Canonical palette overrides for CoreUI button variables */
.btn-primary {
  --cui-btn-color: #FFFFFF;
  --cui-btn-bg: var(--cui-primary);
  --cui-btn-border-color: var(--cui-primary);
  --cui-btn-hover-color: #FFFFFF;
  --cui-btn-hover-bg: var(--cui-primary-ramp-04);
  --cui-btn-hover-border-color: var(--cui-primary-ramp-04);
  --cui-btn-focus-shadow-rgb: var(--cui-primary-rgb);
  --cui-btn-active-color: #FFFFFF;
  --cui-btn-active-bg: var(--cui-primary-ramp-02);
  --cui-btn-active-border-color: var(--cui-primary-ramp-02);
  --cui-btn-disabled-color: #FFFFFF;
  --cui-btn-disabled-bg: var(--cui-primary);
  --cui-btn-disabled-border-color: var(--cui-primary);
}

.btn-secondary {
  --cui-btn-color: #ffffff;
  --cui-btn-bg: var(--cui-secondary);
  --cui-btn-border-color: var(--cui-secondary);
  --cui-btn-hover-color: #ffffff;
  --cui-btn-hover-bg: color-mix(in srgb, var(--cui-secondary) 92%, #0f172a);
  --cui-btn-hover-border-color: color-mix(in srgb, var(--cui-secondary) 92%, #0f172a);
  --cui-btn-focus-shadow-rgb: var(--cui-secondary-rgb);
  --cui-btn-active-color: #ffffff;
  --cui-btn-active-bg: var(--cui-secondary-dark);
  --cui-btn-active-border-color: var(--cui-secondary-dark);
  --cui-btn-disabled-color: #ffffff;
  --cui-btn-disabled-bg: var(--cui-secondary);
  --cui-btn-disabled-border-color: var(--cui-secondary);
}

.btn-success {
  --cui-btn-color: #FFFFFF;
  --cui-btn-bg: var(--cui-success);
  --cui-btn-border-color: var(--cui-success);
  --cui-btn-hover-color: #FFFFFF;
  --cui-btn-hover-bg: color-mix(in srgb, var(--cui-success) 92%, #0f172a);
  --cui-btn-hover-border-color: color-mix(in srgb, var(--cui-success) 92%, #0f172a);
  --cui-btn-focus-shadow-rgb: var(--cui-success-rgb);
  --cui-btn-active-color: #FFFFFF;
  --cui-btn-active-bg: var(--cui-success-dark);
  --cui-btn-active-border-color: var(--cui-success-dark);
  --cui-btn-disabled-color: #FFFFFF;
  --cui-btn-disabled-bg: var(--cui-success);
  --cui-btn-disabled-border-color: var(--cui-success);
}

.btn-danger {
  --cui-btn-color: #ffffff;
  --cui-btn-bg: var(--cui-danger);
  --cui-btn-border-color: var(--cui-danger);
  --cui-btn-hover-color: #ffffff;
  --cui-btn-hover-bg: var(--cui-danger-ramp-04);
  --cui-btn-hover-border-color: var(--cui-danger-ramp-04);
  --cui-btn-focus-shadow-rgb: var(--cui-danger-rgb);
  --cui-btn-active-color: #ffffff;
  --cui-btn-active-bg: var(--cui-danger-ramp-02);
  --cui-btn-active-border-color: var(--cui-danger-ramp-02);
  --cui-btn-disabled-color: #ffffff;
  --cui-btn-disabled-bg: var(--cui-danger);
  --cui-btn-disabled-border-color: var(--cui-danger);
}

.btn-warning {
  --cui-btn-color: #FFFFFF;
  --cui-btn-bg: var(--cui-warning);
  --cui-btn-border-color: var(--cui-warning);
  --cui-btn-hover-color: #FFFFFF;
  --cui-btn-hover-bg: color-mix(in srgb, var(--cui-warning) 92%, #0f1220);
  --cui-btn-hover-border-color: color-mix(in srgb, var(--cui-warning) 92%, #0f1220);
  --cui-btn-focus-shadow-rgb: var(--cui-warning-rgb);
  --cui-btn-active-color: #FFFFFF;
  --cui-btn-active-bg: var(--cui-warning-dark);
  --cui-btn-active-border-color: var(--cui-warning-dark);
  --cui-btn-disabled-color: #FFFFFF;
  --cui-btn-disabled-bg: var(--cui-warning);
  --cui-btn-disabled-border-color: var(--cui-warning);
}

.btn-info {
  --cui-btn-color: #ffffff;
  --cui-btn-bg: var(--cui-info);
  --cui-btn-border-color: var(--cui-info);
  --cui-btn-hover-color: #ffffff;
  --cui-btn-hover-bg: color-mix(in srgb, var(--cui-info) 92%, #0f1220);
  --cui-btn-hover-border-color: color-mix(in srgb, var(--cui-info) 92%, #0f1220);
  --cui-btn-focus-shadow-rgb: var(--cui-info-rgb);
  --cui-btn-active-color: #ffffff;
  --cui-btn-active-bg: var(--cui-info-dark);
  --cui-btn-active-border-color: var(--cui-info-dark);
  --cui-btn-disabled-color: #ffffff;
  --cui-btn-disabled-bg: var(--cui-info);
  --cui-btn-disabled-border-color: var(--cui-info);
}

.btn-primary:active,
.btn-primary:focus-visible {
  background-color: var(--cui-primary-ramp-02);
  border-color: var(--cui-primary-ramp-02);
  color: #FFFFFF;
}

.btn-secondary {
  background-color: var(--cui-secondary);
  border-color: var(--cui-secondary);
  color: #ffffff;
}

.btn-secondary:hover {
  background-color: color-mix(in srgb, var(--cui-secondary) 85%, black);
  border-color: color-mix(in srgb, var(--cui-secondary) 85%, black);
  color: #ffffff;
}

.btn-secondary:active,
.btn-secondary:focus-visible {
  color: #ffffff;
}

.btn-success {
  background-color: var(--cui-success);
  border-color: var(--cui-success);
  color: #ffffff;
}

.btn-success:hover {
  background-color: color-mix(in srgb, var(--cui-success) 85%, black);
  border-color: color-mix(in srgb, var(--cui-success) 85%, black);
  color: #ffffff;
}

.btn-success:active,
.btn-success:focus-visible {
  color: #ffffff;
}

.btn-danger {
  background-color: var(--cui-danger);
  border-color: var(--cui-danger);
  color: #ffffff;
}

.btn-danger:hover {
  background-color: var(--cui-danger-ramp-04);
  border-color: var(--cui-danger-ramp-04);
  color: #ffffff;
}

.btn-danger:active,
.btn-danger:focus-visible {
  background-color: var(--cui-danger-ramp-02);
  border-color: var(--cui-danger-ramp-02);
  color: #ffffff;
}

.btn-warning {
  background-color: var(--cui-warning);
  border-color: var(--cui-warning);
  color: #ffffff;
}

.btn-warning:hover {
  background-color: color-mix(in srgb, var(--cui-warning) 85%, black);
  border-color: color-mix(in srgb, var(--cui-warning) 85%, black);
  color: #ffffff;
}

.btn-warning:active,
.btn-warning:focus-visible {
  color: #ffffff;
}

.btn-info {
  background-color: var(--cui-info);
  border-color: var(--cui-info);
  color: #ffffff;
}

.btn-info:hover {
  background-color: color-mix(in srgb, var(--cui-info) 85%, black);
  border-color: color-mix(in srgb, var(--cui-info) 85%, black);
  color: #ffffff;
}

.btn-info:active,
.btn-info:focus-visible {
  color: #ffffff;
}

/* Smooth transitions for theme changes */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* Disable transitions on theme attributes to prevent flash */
[data-coreui-theme] {
  transition: none !important;
}

/* ===== LIGHT THEME OVERRIDES ===== */
/* Main page background - CoreUI Modern light grey */
.light-theme .min-h-screen,
.light-theme main,
.light-theme [role="main"] {
  background-color: var(--surface-page-bg) !important;
}

/* Background colors - convert dark to light */
.light-theme [style*="--cui-primary-bg"],
.light-theme [style*="--cui-success-bg"],
.light-theme [style*="--cui-info-bg"],
.light-theme [style*="--cui-warning-bg"] {
  background-color: var(--surface-operations-tile) !important;
}

/* Specific component fixes */
.light-theme .bg-indigo-500 {
  background-color: #6366f1 !important;
}

.light-theme .hover\:bg-indigo-400:hover {
  background-color: #818cf8 !important;
}

/* Keep dark theme looking good */
.dark-theme .bg-gray-800 {
  background-color: #1f2937 !important;
}

.dark-theme .bg-gray-900 {
  background-color: #111827 !important;
}

.dark-theme .bg-gray-950 {
  background-color: #030712 !important;
}

.dark-theme .bg-gray-700 {
  background-color: #374151 !important;
}

.dark-theme .border-gray-700 {
  border-color: #374151 !important;
}

.dark-theme .border-gray-800 {
  border-color: #1f2937 !important;
}

.dark-theme .text-white {
  color: #ffffff !important;
}

.dark-theme .text-gray-300 {
  color: #d1d5db !important;
}

.dark-theme .text-gray-400 {
  color: #9ca3af !important;
}

.dark-theme .text-gray-500 {
  color: #6b7280 !important;
}

/* ==========================================================================
   TILES & NAVIGATION - Landscaper Icon
   Light mode: #080A0C (near-black), Dark mode: #FFFFFF (white)
   Apply to parent element - icon uses currentColor for fill
   ========================================================================== */

.landscaper-icon-themed {
  color: var(--landscaper-icon-color);
}

.landscaper-icon-themed svg {
  fill: var(--landscaper-icon-color);
}

.landscaper-panel-icon {
  width: var(--landscaper-panel-icon-size);
  height: var(--landscaper-panel-icon-size);
  flex: 0 0 var(--landscaper-panel-icon-size);
  color: var(--landscaper-icon-color);
}

/* ══════════════════════════════════════════════════════════
   Project Profile — Two-Column Grid (Option C: softened)
   ══════════════════════════════════════════════════════════ */
.profile-grid {
  display: grid;
  grid-template-columns: 2fr 3fr;
  gap: 0;
  padding: 0.25rem;
}

.profile-field {
  display: flex;
  flex-direction: column;
  padding: 0.35rem 0.5rem;
  border-bottom: 1px solid color-mix(in srgb, var(--cui-border-color) 40%, transparent);
}

/* Right-column cells get a subtle left border */
.profile-field:nth-child(even) {
  border-left: 1px solid color-mix(in srgb, var(--cui-border-color) 40%, transparent);
}

/* Last row — no bottom border */
.profile-field:nth-last-child(-n+2) {
  border-bottom: none;
}

/* Full-width spanning both columns */
.profile-field--full {
  grid-column: 1 / -1;
  border-left: none;
}

.profile-field__label {
  font-size: 0.65rem;
  font-weight: 600;
  /* text-transform removed — labels are already proper-case in JSX */
  color: var(--cui-tertiary-color, #94a3b8);
  letter-spacing: 0.04em;
  margin-bottom: 0.1rem;
}

.profile-field__value {
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--cui-body-color);
  padding-left: 0.35rem;
}

.profile-field__value--empty {
  color: var(--cui-tertiary-color, #64748b);
  font-style: italic;
}

/* Sub-section card headers — lighter than standard CCardHeader */
.sub-section-header.card-header {
  background: color-mix(in srgb, var(--cui-card-cap-bg, #f0f1f2) 40%, var(--cui-card-bg, #fff)) !important;
  color: var(--cui-secondary-color) !important;
  font-size: 0.85rem;
  font-weight: 600;
  min-height: 33px;
  display: flex;
  align-items: center;
}

/* Sub-section accordion headers — lighter background */
.sub-section-accordion .accordion-button {
  background: color-mix(in srgb, var(--cui-card-cap-bg, #f0f1f2) 40%, var(--cui-card-bg, #fff)) !important;
}
.sub-section-accordion .accordion-button:not(.collapsed) {
  background: color-mix(in srgb, var(--cui-card-cap-bg, #f0f1f2) 40%, var(--cui-card-bg, #fff)) !important;
}
